require.config({
    config: {
        'jsbuild':{"Magento_Catalog/js/form/element/action-delete.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Ui/js/form/element/abstract'\r\n], function (_, Acstract) {\r\n    'use strict';\r\n\r\n    return Acstract.extend({\r\n        defaults: {\r\n            prefixName: '',\r\n            prefixElementName: '',\r\n            elementName: '',\r\n            suffixName: ''\r\n        },\r\n\r\n        /**\r\n         * Parses options and merges the result with instance\r\n         *\r\n         * @param  {Object} config\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initConfig: function (config) {\r\n            this._super(config);\r\n\r\n            this.configureDataScope();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Configure data scope.\r\n         */\r\n        configureDataScope: function () {\r\n            var recordId,\r\n                prefixName,\r\n                suffixName;\r\n\r\n            // Get recordId\r\n            recordId = this.parentName.split('.').last();\r\n\r\n            prefixName = this.dataScopeToHtmlArray(this.prefixName);\r\n            this.elementName = this.prefixElementName + recordId;\r\n\r\n            suffixName = '';\r\n\r\n            if (!_.isEmpty(this.suffixName) || _.isNumber(this.suffixName)) {\r\n                suffixName = '[' + this.suffixName + ']';\r\n            }\r\n            this.inputName = prefixName + '[' + this.elementName + ']' + suffixName;\r\n\r\n            suffixName = '';\r\n\r\n            if (!_.isEmpty(this.suffixName) || _.isNumber(this.suffixName)) {\r\n                suffixName = '.' + this.suffixName;\r\n            }\r\n            this.dataScope = 'data.' + this.prefixName + '.' + this.elementName + suffixName;\r\n\r\n            this.links.value = this.provider + ':' + this.dataScope;\r\n        },\r\n\r\n        /**\r\n         * Get HTML array from data scope.\r\n         *\r\n         * @param {String} dataScopeString\r\n         * @returns {String}\r\n         */\r\n        dataScopeToHtmlArray: function (dataScopeString) {\r\n            var dataScopeArray, dataScope, reduceFunction;\r\n\r\n            /**\r\n             * Reduce\r\n             *\r\n             * @param {String} prev\r\n             * @param {String} curr\r\n             * @returns {String}\r\n             */\r\n            reduceFunction = function (prev, curr) {\r\n                return prev + '[' + curr + ']';\r\n            };\r\n\r\n            dataScopeArray = dataScopeString.split('.');\r\n\r\n            dataScope = dataScopeArray.shift();\r\n            dataScope += dataScopeArray.reduce(reduceFunction, '');\r\n\r\n            return dataScope;\r\n        },\r\n\r\n        /**\r\n         * Delete record instance\r\n         * update data provider dataScope\r\n         *\r\n         * @param {Object} parents\r\n         */\r\n        deleteRecord: function (parents) {\r\n            this.value(1);\r\n            parents[1].deleteRecord(parents[0].index, parents[0].recordId);\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/form/element/checkbox.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/element/single-checkbox'\r\n], function (Checkbox) {\r\n    'use strict';\r\n\r\n    return Checkbox.extend({\r\n        defaults: {\r\n            inputCheckBoxName: '',\r\n            prefixElementName: '',\r\n            parentDynamicRowName: 'visual_swatch'\r\n        },\r\n\r\n        /**\r\n         * Parses options and merges the result with instance\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n            this.configureDataScope();\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            if (this.rows && this.rows().elems().length === 0) {\r\n                this.checked(true);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Configure data scope.\r\n         */\r\n        configureDataScope: function () {\r\n            var recordId,\r\n                value;\r\n\r\n            recordId = this.parentName.split('.').last();\r\n            value = this.prefixElementName + recordId;\r\n\r\n            this.dataScope = 'data.' + this.inputCheckBoxName;\r\n            this.inputName = this.dataScopeToHtmlArray(this.inputCheckBoxName);\r\n\r\n            this.initialValue = value;\r\n\r\n            this.links.value = this.provider + ':' + this.dataScope;\r\n        },\r\n\r\n        /**\r\n         * Get HTML array from data scope.\r\n         *\r\n         * @param {String} dataScopeString\r\n         * @returns {String}\r\n         */\r\n        dataScopeToHtmlArray: function (dataScopeString) {\r\n            var dataScopeArray, dataScope, reduceFunction;\r\n\r\n            /**\r\n             * Add new level of nesting.\r\n             *\r\n             * @param {String} prev\r\n             * @param {String} curr\r\n             * @returns {String}\r\n             */\r\n            reduceFunction = function (prev, curr) {\r\n                return prev + '[' + curr + ']';\r\n            };\r\n\r\n            dataScopeArray = dataScopeString.split('.');\r\n\r\n            dataScope = dataScopeArray.shift();\r\n            dataScope += dataScopeArray.reduce(reduceFunction, '');\r\n\r\n            return dataScope;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/form/element/input.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Ui/js/form/element/abstract'\r\n], function (_, Acstract) {\r\n    'use strict';\r\n\r\n    return Acstract.extend({\r\n        defaults: {\r\n            prefixName: '',\r\n            prefixElementName: '',\r\n            elementName: '',\r\n            suffixName: ''\r\n        },\r\n\r\n        /**\r\n         * Parses options and merges the result with instance\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n            this.configureDataScope();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Configure data scope.\r\n         */\r\n        configureDataScope: function () {\r\n            var recordId,\r\n                prefixName,\r\n                suffixName;\r\n\r\n            // Get recordId\r\n            recordId = this.parentName.split('.').last();\r\n\r\n            prefixName = this.dataScopeToHtmlArray(this.prefixName);\r\n            this.elementName = this.prefixElementName + recordId;\r\n\r\n            suffixName = '';\r\n\r\n            if (!_.isEmpty(this.suffixName) || _.isNumber(this.suffixName)) {\r\n                suffixName = '[' + this.suffixName + ']';\r\n            }\r\n            this.inputName = prefixName + '[' + this.elementName + ']' + suffixName;\r\n\r\n            suffixName = '';\r\n\r\n            if (!_.isEmpty(this.suffixName) || _.isNumber(this.suffixName)) {\r\n                suffixName = '.' + this.suffixName;\r\n            }\r\n            this.dataScope = 'data.' + this.prefixName + '.' + this.elementName + suffixName;\r\n\r\n            this.links.value = this.provider + ':' + this.dataScope;\r\n        },\r\n\r\n        /**\r\n         * Get HTML array from data scope.\r\n         *\r\n         * @param {String} dataScopeString\r\n         * @returns {String}\r\n         */\r\n        dataScopeToHtmlArray: function (dataScopeString) {\r\n            var dataScopeArray, dataScope, reduceFunction;\r\n\r\n            /**\r\n             * Add new level of nesting.\r\n             *\r\n             * @param {String} prev\r\n             * @param {String} curr\r\n             * @returns {String}\r\n             */\r\n            reduceFunction = function (prev, curr) {\r\n                return prev + '[' + curr + ']';\r\n            };\r\n\r\n            dataScopeArray = dataScopeString.split('.');\r\n\r\n            dataScope = dataScopeArray.shift();\r\n            dataScope += dataScopeArray.reduce(reduceFunction, '');\r\n\r\n            return dataScope;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/weight-handler.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return {\r\n\r\n        /**\r\n         * Get weight\r\n         * @returns {*|jQuery|HTMLElement}\r\n         */\r\n        $weight: function () {\r\n            return $('#weight');\r\n        },\r\n\r\n        /**\r\n         * Weight Switcher\r\n         * @returns {*|jQuery|HTMLElement}\r\n         */\r\n        $weightSwitcher: function () {\r\n            return $('[data-role=weight-switcher]');\r\n        },\r\n\r\n        /**\r\n         * Is locked\r\n         * @returns {*}\r\n         */\r\n        isLocked: function () {\r\n            return this.$weight().is('[data-locked]');\r\n        },\r\n\r\n        /**\r\n         * Disabled\r\n         */\r\n        disabled: function () {\r\n            this.$weight().addClass('ignore-validate').prop('disabled', true);\r\n        },\r\n\r\n        /**\r\n         * Enabled\r\n         */\r\n        enabled: function () {\r\n            this.$weight().removeClass('ignore-validate').prop('disabled', false);\r\n        },\r\n\r\n        /**\r\n         * Switch Weight\r\n         * @returns {*}\r\n         */\r\n        switchWeight: function () {\r\n            return this.productHasWeightBySwitcher() ? this.enabled() : this.disabled();\r\n        },\r\n\r\n        /**\r\n         * Hide weight switcher\r\n         */\r\n        hideWeightSwitcher: function () {\r\n            this.$weightSwitcher().hide();\r\n        },\r\n\r\n        /**\r\n         * Has weight switcher\r\n         * @returns {*}\r\n         */\r\n        hasWeightSwitcher: function () {\r\n            return this.$weightSwitcher().is(':visible');\r\n        },\r\n\r\n        /**\r\n         * Has weight\r\n         * @returns {*}\r\n         */\r\n        hasWeight: function () {\r\n            return this.$weight.is(':visible');\r\n        },\r\n\r\n        /**\r\n         * Product has weight\r\n         * @returns {Bool}\r\n         */\r\n        productHasWeightBySwitcher: function () {\r\n            return $('input:checked', this.$weightSwitcher()).val() === '1';\r\n        },\r\n\r\n        /**\r\n         * Change\r\n         * @param {String} data\r\n         */\r\n        change: function (data) {\r\n            var value = data !== undefined ? +data : !this.productHasWeightBySwitcher();\r\n\r\n            $('input[value=' + value + ']', this.$weightSwitcher()).prop('checked', true);\r\n            this.switchWeight();\r\n        },\r\n\r\n        /**\r\n         * Constructor component\r\n         */\r\n        'Magento_Catalog/js/product/weight-handler': function () {\r\n            this.bindAll();\r\n\r\n            if (this.hasWeightSwitcher()) {\r\n                this.switchWeight();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Bind all\r\n         */\r\n        bindAll: function () {\r\n            this.$weightSwitcher().find('input').on('change', this.switchWeight.bind(this));\r\n        }\r\n    };\r\n});\r\n","Magento_Catalog/js/price-box.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Catalog/js/price-utils',\r\n    'underscore',\r\n    'mage/template',\r\n    'jquery/ui'\r\n], function ($, utils, _, mageTemplate) {\r\n    'use strict';\r\n\r\n    var globalOptions = {\r\n        productId: null,\r\n        priceConfig: null,\r\n        prices: {},\r\n        priceTemplate: '<span class=\"price\"><%- data.formatted %></span>'\r\n    };\r\n\r\n    $.widget('mage.priceBox', {\r\n        options: globalOptions,\r\n        cache: {},\r\n\r\n        /**\r\n         * Widget initialisation.\r\n         * Every time when option changed prices also can be changed. So\r\n         * changed options.prices -> changed cached prices -> recalculation -> redraw price box\r\n         */\r\n        _init: function initPriceBox() {\r\n            var box = this.element;\r\n\r\n            box.trigger('updatePrice');\r\n            this.cache.displayPrices = utils.deepClone(this.options.prices);\r\n        },\r\n\r\n        /**\r\n         * Widget creating.\r\n         */\r\n        _create: function createPriceBox() {\r\n            var box = this.element;\r\n\r\n            this._setDefaultsFromPriceConfig();\r\n            this._setDefaultsFromDataSet();\r\n\r\n            box.on('reloadPrice', this.reloadPrice.bind(this));\r\n            box.on('updatePrice', this.onUpdatePrice.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Call on event updatePrice. Proxy to updatePrice method.\r\n         * @param {Event} event\r\n         * @param {Object} prices\r\n         */\r\n        onUpdatePrice: function onUpdatePrice(event, prices) {\r\n            return this.updatePrice(prices);\r\n        },\r\n\r\n        /**\r\n         * Updates price via new (or additional values).\r\n         * It expects object like this:\r\n         * -----\r\n         *   \"option-hash\":\r\n         *      \"price-code\":\r\n         *         \"amount\": 999.99999,\r\n         *         ...\r\n         * -----\r\n         * Empty option-hash object or empty price-code object treats as zero amount.\r\n         * @param {Object} newPrices\r\n         */\r\n        updatePrice: function updatePrice(newPrices) {\r\n            var prices = this.cache.displayPrices,\r\n                additionalPrice = {},\r\n                pricesCode = [],\r\n                priceValue, origin, finalPrice;\r\n\r\n            this.cache.additionalPriceObject = this.cache.additionalPriceObject || {};\r\n\r\n            if (newPrices) {\r\n                $.extend(this.cache.additionalPriceObject, newPrices);\r\n            }\r\n\r\n            if (!_.isEmpty(additionalPrice)) {\r\n                pricesCode = _.keys(additionalPrice);\r\n            } else if (!_.isEmpty(prices)) {\r\n                pricesCode = _.keys(prices);\r\n            }\r\n\r\n            _.each(this.cache.additionalPriceObject, function (additional) {\r\n                if (additional && !_.isEmpty(additional)) {\r\n                    pricesCode = _.keys(additional);\r\n                }\r\n                _.each(pricesCode, function (priceCode) {\r\n                    priceValue = additional[priceCode] || {};\r\n                    priceValue.amount = +priceValue.amount || 0;\r\n                    priceValue.adjustments = priceValue.adjustments || {};\r\n\r\n                    additionalPrice[priceCode] = additionalPrice[priceCode] || {\r\n                            'amount': 0,\r\n                            'adjustments': {}\r\n                        };\r\n                    additionalPrice[priceCode].amount =  0 + (additionalPrice[priceCode].amount || 0) +\r\n                        priceValue.amount;\r\n                    _.each(priceValue.adjustments, function (adValue, adCode) {\r\n                        additionalPrice[priceCode].adjustments[adCode] = 0 +\r\n                            (additionalPrice[priceCode].adjustments[adCode] || 0) + adValue;\r\n                    });\r\n                });\r\n            });\r\n\r\n            if (_.isEmpty(additionalPrice)) {\r\n                this.cache.displayPrices = utils.deepClone(this.options.prices);\r\n            } else {\r\n                _.each(additionalPrice, function (option, priceCode) {\r\n                    origin = this.options.prices[priceCode] || {};\r\n                    finalPrice = prices[priceCode] || {};\r\n                    option.amount = option.amount || 0;\r\n                    origin.amount = origin.amount || 0;\r\n                    origin.adjustments = origin.adjustments || {};\r\n                    finalPrice.adjustments = finalPrice.adjustments || {};\r\n\r\n                    finalPrice.amount = 0 + origin.amount + option.amount;\r\n                    _.each(option.adjustments, function (pa, paCode) {\r\n                        finalPrice.adjustments[paCode] = 0 + (origin.adjustments[paCode] || 0) + pa;\r\n                    });\r\n                }, this);\r\n            }\r\n\r\n            this.element.trigger('reloadPrice');\r\n        },\r\n\r\n        /*eslint-disable no-extra-parens*/\r\n        /**\r\n         * Render price unit block.\r\n         */\r\n        reloadPrice: function reDrawPrices() {\r\n            var priceFormat = (this.options.priceConfig && this.options.priceConfig.priceFormat) || {},\r\n                priceTemplate = mageTemplate(this.options.priceTemplate);\r\n\r\n            _.each(this.cache.displayPrices, function (price, priceCode) {\r\n                price.final = _.reduce(price.adjustments, function (memo, amount) {\r\n                    return memo + amount;\r\n                }, price.amount);\r\n\r\n                price.formatted = utils.formatPrice(price.final, priceFormat);\r\n\r\n                $('[data-price-type=\"' + priceCode + '\"]', this.element).html(priceTemplate({\r\n                    data: price\r\n                }));\r\n            }, this);\r\n        },\r\n\r\n        /*eslint-enable no-extra-parens*/\r\n        /**\r\n         * Overwrites initial (default) prices object.\r\n         * @param {Object} prices\r\n         */\r\n        setDefault: function setDefaultPrices(prices) {\r\n            this.cache.displayPrices = utils.deepClone(prices);\r\n            this.options.prices = utils.deepClone(prices);\r\n        },\r\n\r\n        /**\r\n         * Custom behavior on getting options:\r\n         * now widget able to deep merge of accepted configuration.\r\n         * @param  {Object} options\r\n         * @return {mage.priceBox}\r\n         */\r\n        _setOptions: function setOptions(options) {\r\n            $.extend(true, this.options, options);\r\n\r\n            if ('disabled' in options) {\r\n                this._setOption('disabled', options.disabled);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * setDefaultsFromDataSet\r\n         */\r\n        _setDefaultsFromDataSet: function _setDefaultsFromDataSet() {\r\n            var box = this.element,\r\n                priceHolders = $('[data-price-type]', box),\r\n                prices = this.options.prices;\r\n\r\n            this.options.productId = box.data('productId');\r\n\r\n            if (_.isEmpty(prices)) {\r\n                priceHolders.each(function (index, element) {\r\n                    var type = $(element).data('priceType'),\r\n                        amount = parseFloat($(element).data('priceAmount'));\r\n\r\n                    if (type && !_.isNaN(amount)) {\r\n                        prices[type] = {\r\n                            amount: amount\r\n                        };\r\n                    }\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * setDefaultsFromPriceConfig\r\n         */\r\n        _setDefaultsFromPriceConfig: function _setDefaultsFromPriceConfig() {\r\n            var config = this.options.priceConfig;\r\n\r\n            if (config && config.prices) {\r\n                this.options.prices = config.prices;\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.priceBox;\r\n});\r\n","Magento_Catalog/js/price-option-date.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'priceUtils',\r\n    'priceOptions',\r\n    'jquery/ui'\r\n], function ($, utils) {\r\n    'use strict';\r\n\r\n    var globalOptions = {\r\n            fromSelector: 'form',\r\n            dropdownsSelector: '[data-role=calendar-dropdown]'\r\n        },\r\n        optionHandler = {};\r\n\r\n    optionHandler.optionHandlers = {};\r\n\r\n    $.widget('mage.priceOptionDate', {\r\n        options: globalOptions,\r\n\r\n        /**\r\n         * Function-initializer of priceOptionDate widget\r\n         * @private\r\n         */\r\n        _create: function initOptionDate() {\r\n            var field = this.element,\r\n                form = field.closest(this.options.fromSelector),\r\n                dropdowns = $(this.options.dropdownsSelector, field),\r\n                dateOptionId;\r\n\r\n            if (dropdowns.length) {\r\n                dateOptionId = this.options.dropdownsSelector + dropdowns.attr('name');\r\n\r\n                optionHandler.optionHandlers[dateOptionId] = onCalendarDropdownChange(dropdowns);\r\n\r\n                form.priceOptions(optionHandler);\r\n\r\n                dropdowns.data('role', dateOptionId);\r\n                dropdowns.on('change', onDateChange.bind(this, dropdowns));\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.priceOptionDate;\r\n\r\n    /**\r\n     * Custom handler for Date-with-Dropdowns option type.\r\n     * @param  {jQuery} siblings\r\n     * @return {Function} function that return object { optionHash : optionAdditionalPrice }\r\n     */\r\n    function onCalendarDropdownChange(siblings) {\r\n        return function (element, optionConfig, form) {\r\n            var changes = {},\r\n                optionId = utils.findOptionId(element),\r\n                overhead = optionConfig[optionId].prices,\r\n                isNeedToUpdate = true,\r\n                optionHash = 'price-option-calendar-' + optionId;\r\n\r\n            siblings.each(function (index, el) {\r\n                isNeedToUpdate = isNeedToUpdate && !!$(el).val();\r\n            });\r\n\r\n            overhead = isNeedToUpdate ? overhead : {};\r\n            changes[optionHash] = overhead;\r\n\r\n            return changes;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Adjusts the number of days in the day option element based on which month or year\r\n     * is selected (changed). Adjusts the days to 28, 29, 30, or 31 typically.\r\n     * @param {jQuery} dropdowns\r\n     */\r\n    function onDateChange(dropdowns) {\r\n        var daysNodes,\r\n            curMonth, curYear, expectedDays,\r\n            options, needed,\r\n            month = dropdowns.filter('[data-calendar-role=month]'),\r\n            year = dropdowns.filter('[data-calendar-role=year]');\r\n\r\n        if (month.length && year.length) {\r\n            daysNodes = dropdowns.filter('[data-calendar-role=day]').find('option');\r\n\r\n            curMonth = month.val() || '01';\r\n            curYear = year.val() || '2000';\r\n            expectedDays = getDaysInMonth(curMonth, curYear);\r\n\r\n            if (daysNodes.length - 1 > expectedDays) { // remove unnecessary option nodes\r\n                daysNodes.each(function (i, e) {\r\n                    if (e.value > expectedDays) {\r\n                        $(e).remove();\r\n                    }\r\n                });\r\n            } else if (daysNodes.length - 1 < expectedDays) { // add missing option nodes\r\n                options = [];\r\n                needed = expectedDays - daysNodes.length + 1;\r\n\r\n                while (needed--) {\r\n                    options.push('<option value=\"' + (expectedDays - needed) + '\">' + (expectedDays - needed) + '</option>');\r\n                }\r\n                $(options.join('')).insertAfter(daysNodes.last());\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns number of days for special month and year\r\n     * @param  {Number} month\r\n     * @param  {Number} year\r\n     * @return {Number}\r\n     */\r\n    function getDaysInMonth(month, year) {\r\n        return new Date(year, month, 0).getDate();\r\n    }\r\n});\r\n","Magento_Catalog/js/price-option-file.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery/ui'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.priceOptionFile', {\r\n        options: {\r\n            fileName: '',\r\n            fileNamed: '',\r\n            fieldNameAction: '',\r\n            changeFileSelector: '',\r\n            deleteFileSelector: ''\r\n        },\r\n\r\n        /**\r\n         * Creates instance of widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.fileDeleteFlag = this.fileChangeFlag = false;\r\n            this.inputField = this.element.find('input[name=' + this.options.fileName + ']')[0];\r\n            this.inputFieldAction = this.element.find('input[name=' + this.options.fieldNameAction + ']')[0];\r\n            this.fileNameSpan = this.element.parent('dd').find('.' + this.options.fileNamed);\r\n\r\n            $(this.options.changeFileSelector).on('click', $.proxy(function () {\r\n                this._toggleFileChange();\r\n            }, this));\r\n            $(this.options.deleteFileSelector).on('click', $.proxy(function () {\r\n                this._toggleFileDelete();\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Toggles whether the current file is being changed or not. If the file is being deleted\r\n         * then the option to change the file is disabled.\r\n         * @private\r\n         */\r\n        _toggleFileChange: function () {\r\n            this.element.toggle();\r\n            this.fileChangeFlag = !this.fileChangeFlag;\r\n\r\n            if (!this.fileDeleteFlag) {\r\n                $(this.inputFieldAction).attr('value', this.fileChangeFlag ? 'save_new' : 'save_old');\r\n                this.inputField.disabled = !this.fileChangeFlag;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Toggles whether the file is to be deleted. When the file is being deleted, the name of\r\n         * the file is decorated with strike-through text and the option to change the file is\r\n         * disabled.\r\n         * @private\r\n         */\r\n        _toggleFileDelete: function () {\r\n            this.fileDeleteFlag = $(this.options.deleteFileSelector + ':checked').val();\r\n            $(this.inputFieldAction).attr('value',\r\n                this.fileDeleteFlag ? '' : this.fileChangeFlag ? 'save_new' : 'save_old');\r\n            this.inputField.disabled = this.fileDeleteFlag || !this.fileChangeFlag;\r\n            this.fileNameSpan.css('text-decoration', this.fileDeleteFlag ? 'line-through' : 'none');\r\n        }\r\n    });\r\n\r\n    return $.mage.priceOptionFile;\r\n});\r\n","Magento_Catalog/js/price-options.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mage/template',\r\n    'priceUtils',\r\n    'priceBox',\r\n    'jquery/ui'\r\n], function ($, _, mageTemplate, utils) {\r\n    'use strict';\r\n\r\n    var globalOptions = {\r\n        productId: null,\r\n        priceHolderSelector: '.price-box', //data-role=\"priceBox\"\r\n        optionsSelector: '.product-custom-option',\r\n        optionConfig: {},\r\n        optionHandlers: {},\r\n        optionTemplate: '<%= data.label %>' +\r\n        '<% if (data.finalPrice.value > 0) { %>' +\r\n        ' +<%- data.finalPrice.formatted %>' +\r\n        '<% } else if (data.finalPrice.value < 0) { %>' +\r\n        ' <%- data.finalPrice.formatted %>' +\r\n        '<% } %>',\r\n        controlContainer: 'dd'\r\n    };\r\n\r\n    $.widget('mage.priceOptions', {\r\n        options: globalOptions,\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _init: function initPriceBundle() {\r\n            $(this.options.optionsSelector, this.element).trigger('change');\r\n        },\r\n\r\n        /**\r\n         * Widget creating method.\r\n         * Triggered once.\r\n         * @private\r\n         */\r\n        _create: function createPriceOptions() {\r\n            var form = this.element,\r\n                options = $(this.options.optionsSelector, form),\r\n                priceBox = $(this.options.priceHolderSelector, $(this.options.optionsSelector).element);\r\n\r\n            if (priceBox.data('magePriceBox') && priceBox.priceBox('option') && priceBox.priceBox('option').priceConfig) {\r\n                if (priceBox.priceBox('option').priceConfig.optionTemplate) {\r\n                    this._setOption('optionTemplate', priceBox.priceBox('option').priceConfig.optionTemplate);\r\n                }\r\n                this._setOption('priceFormat', priceBox.priceBox('option').priceConfig.priceFormat);\r\n            }\r\n\r\n            this._applyOptionNodeFix(options);\r\n\r\n            options.on('change', this._onOptionChanged.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Custom option change-event handler\r\n         * @param {Event} event\r\n         * @private\r\n         */\r\n        _onOptionChanged: function onOptionChanged(event) {\r\n            var changes,\r\n                option = $(event.target),\r\n                handler = this.options.optionHandlers[option.data('role')];\r\n            option.data('optionContainer', option.closest(this.options.controlContainer));\r\n\r\n            if (handler && handler instanceof Function) {\r\n                changes = handler(option, this.options.optionConfig, this);\r\n            } else {\r\n                changes = defaultGetOptionValue(option, this.options.optionConfig);\r\n            }\r\n            $(this.options.priceHolderSelector).trigger('updatePrice', changes);\r\n        },\r\n\r\n        /**\r\n         * Helper to fix issue with option nodes:\r\n         *  - you can't place any html in option ->\r\n         *    so you can't style it via CSS\r\n         * @param {jQuery} options\r\n         * @private\r\n         */\r\n        _applyOptionNodeFix: function applyOptionNodeFix(options) {\r\n            var config = this.options,\r\n                format = config.priceFormat,\r\n                template = config.optionTemplate;\r\n            template = mageTemplate(template);\r\n            options.filter('select').each(function (index, element) {\r\n                var $element = $(element),\r\n                    optionId = utils.findOptionId($element),\r\n                    optionName = $element.prop('name'),\r\n                    optionType = $element.prop('type');\r\n                var  optionConfig = config.optionConfig && config.optionConfig[optionId];\r\n\r\n                $element.find('option').each(function (idx, option) {\r\n                    var $option,\r\n                        optionValue,\r\n                        toTemplate,\r\n                        prices;\r\n\r\n                    $option = $(option);\r\n                    optionValue = $option.val();\r\n\r\n                    if (!optionValue && optionValue !== 0) {\r\n                        return;\r\n                    }\r\n\r\n                    toTemplate = {\r\n                        data: {\r\n                            label: optionConfig[optionValue] && optionConfig[optionValue].name\r\n                        }\r\n                    };\r\n                    prices = optionConfig[optionValue] ? optionConfig[optionValue].prices : null;\r\n\r\n                    if (prices) {\r\n                        _.each(prices, function (price, type) {\r\n                            var value = +(price.amount);\r\n                            value += _.reduce(price.adjustments, function (sum, x) {\r\n                                return sum + x;\r\n                            }, 0);\r\n                            toTemplate.data[type] = {\r\n                                value: value,\r\n                                formatted: utils.formatPrice(value, format)\r\n                            };\r\n                        });\r\n\r\n                        $option.text(template(toTemplate));\r\n                    }\r\n                });\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Custom behavior on getting options:\r\n         * now widget able to deep merge accepted configuration with instance options.\r\n         * @param  {Object}  options\r\n         * @return {$.Widget}\r\n         * @private\r\n         */\r\n        _setOptions: function setOptions(options) {\r\n            $.extend(true, this.options, options);\r\n            this._super(options);\r\n\r\n            return this;\r\n        }\r\n    });\r\n\r\n    return $.mage.priceOptions;\r\n\r\n    /**\r\n     * Custom option preprocessor\r\n     * @param  {jQuery} element\r\n     * @param  {Object} optionsConfig - part of config\r\n     * @return {Object}\r\n     */\r\n    function defaultGetOptionValue(element, optionsConfig) {\r\n        var changes = {},\r\n            optionValue = element.val(),\r\n            optionId = utils.findOptionId(element[0]),\r\n            optionName = element.prop('name'),\r\n            optionType = element.prop('type'),\r\n            optionConfig = optionsConfig[optionId],\r\n            optionHash = optionName;\r\n\r\n        switch (optionType) {\r\n            case 'text':\r\n\r\n            case 'textarea':\r\n                changes[optionHash] = optionValue ? optionConfig.prices : {};\r\n                break;\r\n\r\n            case 'radio':\r\n                if (element.is(':checked')) {\r\n                    changes[optionHash] = optionConfig[optionValue] && optionConfig[optionValue].prices || {};\r\n                }\r\n                break;\r\n            case 'select-one':\r\n                changes[optionHash] = optionConfig[optionValue] && optionConfig[optionValue].prices || {};\r\n                break;\r\n\r\n            case 'select-multiple':\r\n                _.each(optionConfig, function (row, optionValueCode) {\r\n                    optionHash = optionName + '##' + optionValueCode;\r\n                    changes[optionHash] = _.contains(optionValue, optionValueCode) ? row.prices : {};\r\n                });\r\n                break;\r\n\r\n            case 'checkbox':\r\n                optionHash = optionName + '##' + optionValue;\r\n                changes[optionHash] = element.is(':checked') ? optionConfig[optionValue].prices : {};\r\n                break;\r\n\r\n            case 'file':\r\n                // Checking for 'disable' property equal to checking DOMNode with id*=\"change-\"\r\n                changes[optionHash] = optionValue || element.prop('disabled') ? optionConfig.prices : {};\r\n                break;\r\n        }\r\n\r\n        return changes;\r\n    }\r\n});\r\n","Magento_Catalog/js/price-utils.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore'\r\n], function ($, _) {\r\n    'use strict';\r\n\r\n    var globalPriceFormat = {\r\n        requiredPrecision: 2,\r\n        integerRequired: 1,\r\n        decimalSymbol: ',',\r\n        groupSymbol: ',',\r\n        groupLength: ','\r\n    };\r\n\r\n    return {\r\n        formatPrice: formatPrice,\r\n        deepClone: objectDeepClone,\r\n        strPad: stringPad,\r\n        findOptionId: findOptionId\r\n    };\r\n\r\n    /**\r\n     * Formatter for price amount\r\n     * @param  {Number}  amount\r\n     * @param  {Object}  format\r\n     * @param  {Boolean} isShowSign\r\n     * @return {String}              Formatted value\r\n     */\r\n    function formatPrice(amount, format, isShowSign) {\r\n        format = _.extend(globalPriceFormat, format);\r\n\r\n        // copied from price-option.js | Could be refactored with varien/js.js\r\n\r\n        var precision = isNaN(format.requiredPrecision = Math.abs(format.requiredPrecision)) ? 2 : format.requiredPrecision,\r\n            integerRequired = isNaN(format.integerRequired = Math.abs(format.integerRequired)) ? 1 : format.integerRequired,\r\n            decimalSymbol = format.decimalSymbol === undefined ? ',' : format.decimalSymbol,\r\n            groupSymbol = format.groupSymbol === undefined ? '.' : format.groupSymbol,\r\n            groupLength = format.groupLength === undefined ? 3 : format.groupLength,\r\n            pattern = format.pattern || '%s',\r\n            s = '',\r\n            i, pad,\r\n            j, re, r, am;\r\n\r\n        if (isShowSign === undefined || isShowSign === true) {\r\n            s = amount < 0 ? '-' : (isShowSign ? '+' : '');\r\n        } else if (isShowSign === false) {\r\n            s = '';\r\n        }\r\n        pattern = pattern.indexOf('{sign}') < 0 ? s + pattern : pattern.replace('{sign}', s);\r\n\r\n        // we're avoiding the usage of to fixed, and using round instead with the e representation to address\r\n        // numbers like 1.005 = 1.01. Using ToFixed to only provide trailig zeroes in case we have a whole number\r\n        i = parseInt(amount = Number(Math.round(Math.abs(+amount || 0) + 'e+' + precision) + ('e-' + precision)) , 10) + '';\r\n        pad = (i.length < integerRequired) ? (integerRequired - i.length) : 0;\r\n\r\n        i = stringPad('0', pad) + i;\r\n\r\n        j = i.length > groupLength ? i.length % groupLength : 0;\r\n        re = new RegExp('(\\\\d{' + groupLength + '})(?=\\\\d)', 'g');\r\n\r\n        // replace(/-/, 0) is only for fixing Safari bug which appears\r\n        // when Math.abs(0).toFixed() executed on '0' number.\r\n        // Result is '0.-0' :(\r\n\r\n\r\n        am = Number(Math.round(Math.abs(amount - i) + 'e+' + precision) + ('e-' + precision));\r\n        r = (j ? i.substr(0, j) + groupSymbol : '') +\r\n            i.substr(j).replace(re, '$1' + groupSymbol) +\r\n            (precision ? decimalSymbol + am.toFixed(precision).replace(/-/, 0).slice(2) : '');\r\n\r\n        return pattern.replace('%s', r).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\r\n    }\r\n\r\n    /**\r\n     * Repeats {string} {times} times\r\n     * @param  {String} string\r\n     * @param  {Number} times\r\n     * @return {String}\r\n     */\r\n    function stringPad(string, times) {\r\n        return (new Array(times + 1)).join(string);\r\n    }\r\n\r\n    /**\r\n     * Deep clone of Object. Doesn't support functions\r\n     * @param {Object} obj\r\n     * @return {Object}\r\n     */\r\n    function objectDeepClone(obj) {\r\n        return JSON.parse(JSON.stringify(obj));\r\n    }\r\n\r\n    /**\r\n     * Helper to find ID in name attribute\r\n     * @param   {jQuery} element\r\n     * @returns {undefined|String}\r\n     */\r\n    function findOptionId(element) {\r\n        if (!element) {\r\n            return;\r\n        }\r\n        var re, id,\r\n            name = $(element).attr('name');\r\n\r\n        if (name.indexOf('[') !== -1) {\r\n            re = /\\[([^\\]]+)?\\]/;\r\n        } else {\r\n            re = /_([^\\]]+)?_/; // just to support file-type-option\r\n        }\r\n        id = re.exec(name) && re.exec(name)[1];\r\n\r\n        if (id) {\r\n            return id;\r\n        }\r\n    }\r\n});\r\n","Magento_Variable/variables.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/translate',\r\n    'Magento_Ui/js/modal/modal',\r\n    'jquery/ui',\r\n    'prototype',\r\n], function(jQuery, $t){\r\n\r\nwindow.Variables = {\r\n    textareaElementId: null,\r\n    variablesContent: null,\r\n    dialogWindow: null,\r\n    dialogWindowId: 'variables-chooser',\r\n    overlayShowEffectOptions: null,\r\n    overlayHideEffectOptions: null,\r\n    insertFunction: 'Variables.insertVariable',\r\n    init: function(textareaElementId, insertFunction) {\r\n        if ($(textareaElementId)) {\r\n            this.textareaElementId = textareaElementId;\r\n        }\r\n        if (insertFunction) {\r\n            this.insertFunction = insertFunction;\r\n        }\r\n    },\r\n\r\n    resetData: function() {\r\n        this.variablesContent = null;\r\n        this.dialogWindow = null;\r\n    },\r\n\r\n    openVariableChooser: function(variables) {\r\n        if (this.variablesContent == null && variables) {\r\n            this.variablesContent = '<ul class=\"insert-variable\">';\r\n            variables.each(function(variableGroup) {\r\n                if (variableGroup.label && variableGroup.value) {\r\n                    this.variablesContent += '<li><b>' + variableGroup.label + '</b></li>';\r\n                    (variableGroup.value).each(function(variable){\r\n                        if (variable.value && variable.label) {\r\n                            this.variablesContent += '<li>' +\r\n                                this.prepareVariableRow(variable.value, variable.label) + '</li>';\r\n                        }\r\n                    }.bind(this));\r\n                }\r\n            }.bind(this));\r\n            this.variablesContent += '</ul>';\r\n        }\r\n        if (this.variablesContent) {\r\n            this.openDialogWindow(this.variablesContent);\r\n        }\r\n    },\r\n    openDialogWindow: function (variablesContent) {\r\n        var windowId = this.dialogWindowId;\r\n        jQuery('<div id=\"' + windowId + '\">' + Variables.variablesContent + '</div>').modal({\r\n            title: $t('Insert Variable...'),\r\n            type: 'slide',\r\n            buttons: [],\r\n            closed: function (e, modal) {\r\n                modal.modal.remove();\r\n            }\r\n        });\r\n\r\n        jQuery('#' + windowId).modal('openModal');\r\n\r\n        variablesContent.evalScripts.bind(variablesContent).defer();\r\n    },\r\n    closeDialogWindow: function() {\r\n        jQuery('#' + this.dialogWindowId).modal('closeModal');\r\n    },\r\n    prepareVariableRow: function(varValue, varLabel) {\r\n        var value = (varValue).replace(/\"/g, '&quot;').replace(/'/g, '\\\\&#39;');\r\n        var content = '<a href=\"#\" onclick=\"'+this.insertFunction+'(\\''+ value +'\\');return false;\">' + varLabel + '</a>';\r\n        return content;\r\n    },\r\n    insertVariable: function(value) {\r\n        var windowId = this.dialogWindowId;\r\n        jQuery('#' + windowId).modal('closeModal');\r\n        var textareaElm = $(this.textareaElementId);\r\n        if (textareaElm) {\r\n            var scrollPos = textareaElm.scrollTop;\r\n            updateElementAtCursor(textareaElm, value);\r\n            textareaElm.focus();\r\n            textareaElm.scrollTop = scrollPos;\r\n            jQuery(textareaElm).change();\r\n            textareaElm = null;\r\n        }\r\n        return;\r\n    }\r\n};\r\n\r\nwindow.MagentovariablePlugin = {\r\n    editor: null,\r\n    variables: null,\r\n    textareaId: null,\r\n    setEditor: function(editor) {\r\n        this.editor = editor;\r\n    },\r\n    loadChooser: function(url, textareaId) {\r\n        this.textareaId = textareaId;\r\n        if (this.variables == null) {\r\n            new Ajax.Request(url, {\r\n                parameters: {},\r\n                onComplete: function (transport) {\r\n                    if (transport.responseText.isJSON()) {\r\n                        Variables.init(null, 'MagentovariablePlugin.insertVariable');\r\n                        this.variables = transport.responseText.evalJSON();\r\n                        this.openChooser(this.variables);\r\n                    }\r\n                }.bind(this)\r\n             });\r\n        } else {\r\n            this.openChooser(this.variables);\r\n        }\r\n        return;\r\n    },\r\n    openChooser: function(variables) {\r\n        Variables.openVariableChooser(variables);\r\n    },\r\n    insertVariable : function (value) {\r\n        if (this.textareaId) {\r\n            Variables.init(this.textareaId);\r\n            Variables.insertVariable(value);\r\n        } else {\r\n            Variables.closeDialogWindow();\r\n            this.editor.execCommand('mceInsertContent', false, value);\r\n        }\r\n        return;\r\n    }\r\n};\r\n\r\n});\r\n","Magento_Cms/js/folder-tree.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    \"jquery\",\r\n    \"jquery/ui\",\r\n    \"jquery/jstree/jquery.jstree\"\r\n], function($){\r\n    'use strict';\r\n\r\n    $.widget(\"mage.folderTree\", {\r\n        options: {\r\n            root: 'root',\r\n            rootName: 'Root',\r\n            url: '',\r\n            currentPath: ['root'],\r\n            tree: {\r\n                \"plugins\": [\"themes\", \"json_data\", \"ui\", \"hotkeys\"],\r\n                \"themes\": {\r\n                    \"theme\": \"default\",\r\n                    \"dots\": false,\r\n                    \"icons\": true\r\n                }\r\n            }\r\n        },\r\n        _create: function() {\r\n            var options = this.options;\r\n            var treeOptions = $.extend(\r\n                true,\r\n                {},\r\n                options.tree,\r\n                {\r\n                    json_data: {\r\n                        data: {\r\n                            data: options.rootName,\r\n                            state: \"closed\",\r\n                            metadata: {node: {id: options.root, text: options.rootName}},\r\n                            attr: { \"data-id\": options.root, id: options.root}\r\n                        },\r\n                        ajax: {\r\n                            url: options.url,\r\n                            data: function(node) {\r\n                                return {\r\n                                    node: node.data('id'),\r\n                                    form_key: window.FORM_KEY\r\n                                };\r\n                            },\r\n                            success: this._convertData\r\n                        }\r\n                    }\r\n                }\r\n            );\r\n            this.element.jstree(treeOptions).on('loaded.jstree', $.proxy(this.treeLoaded, this));\r\n        },\r\n\r\n        treeLoaded: function(event) {\r\n            var path = this.options.currentPath;\r\n            var tree = this.element;\r\n            var recursiveOpen = function() {\r\n                var el = $(\"[data-id=\\\"\" + path.pop() + \"\\\"]\");\r\n                if (path.length > 1) {\r\n                    tree.jstree('open_node', el, recursiveOpen);\r\n                } else {\r\n                    tree.jstree('open_node', el, function() {\r\n                        tree.jstree('select_node', el);\r\n                    });\r\n                }\r\n            };\r\n            recursiveOpen();\r\n        },\r\n\r\n        _convertData: function(data) {\r\n            return  $.map(data, function(node) {\r\n                var codeCopy = $.extend({}, node);\r\n                return {\r\n                    data: node.text,\r\n                    attr: {\"data-id\": node.id, id: node.id},\r\n                    metadata: {node: codeCopy},\r\n                    state: \"closed\"\r\n                };\r\n            });\r\n        }\r\n    });\r\n    \r\n    return $.mage.folderTree;\r\n});\r\n","Magento_CatalogInventory/js/components/qty-validator-changer.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/element/abstract'\r\n], function (Abstract) {\r\n    'use strict';\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            valueUpdate: 'input'\r\n        },\r\n\r\n        /**\r\n         * Change validator\r\n         */\r\n        handleChanges: function (value) {\r\n            var isDigits = value !== 1;\r\n\r\n            this.validation['validate-integer'] = isDigits;\r\n            this.validation['less-than-equals-to'] = isDigits ? 99999999 : 99999999.9999;\r\n            this.validate();\r\n        }\r\n    });\r\n});\r\n","Magento_CatalogInventory/js/components/use-config-min-sale-qty.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/element/single-checkbox',\r\n    'underscore',\r\n    'uiRegistry'\r\n], function (checkbox, _, registry) {\r\n    'use strict';\r\n\r\n    return checkbox.extend({\r\n        defaults: {\r\n            valueFromConfig: ''\r\n        },\r\n\r\n        /**\r\n         * @returns {Element}\r\n         */\r\n        initObservable: function () {\r\n            return this\r\n                ._super()\r\n                .observe(['valueFromConfig']);\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            this.onCheckedChanged(this.checked());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        'onCheckedChanged': function (newChecked) {\r\n            var valueFromConfig = this.valueFromConfig();\r\n\r\n            if (newChecked && (_.isArray(valueFromConfig) && valueFromConfig.length === 0 || valueFromConfig === 1)) {\r\n                this.changeVisibleDisabled(this.inputField, true, true, 1);\r\n            } else if (newChecked && _.isObject(valueFromConfig)) {\r\n                this.changeVisibleDisabled(this.inputField, false, true, null);\r\n                this.changeVisibleDisabled(this.dynamicRowsField, true, true, null);\r\n            } else if (newChecked && _.isNumber(valueFromConfig)) {\r\n                this.changeVisibleDisabled(this.inputField, true, true, null);\r\n                this.changeVisibleDisabled(this.dynamicRowsField, false, true, null);\r\n            } else {\r\n                this.changeVisibleDisabled(this.inputField, true, false, null);\r\n                this.changeVisibleDisabled(this.dynamicRowsField, false, true, null);\r\n            }\r\n\r\n            this._super(newChecked);\r\n        },\r\n\r\n        /**\r\n         * Change visible and disabled\r\n         *\r\n         * @param {String} filter\r\n         * @param {Boolean} visible\r\n         * @param {Boolean} disabled\r\n         * @param {Null|Number} valueFromConfig\r\n         */\r\n        changeVisibleDisabled: function (filter, visible, disabled, valueFromConfig) {\r\n            registry.async(filter)(\r\n                function (currentComponent) {\r\n                    var initialValue = currentComponent.initialValue;\r\n\r\n                    if (_.isString(initialValue) || initialValue === 0 || valueFromConfig === 1) {\r\n                        currentComponent.value(1);\r\n                    } else if (initialValue) {\r\n                        currentComponent.value(initialValue);\r\n                    }\r\n\r\n                    currentComponent.visible(visible);\r\n                    currentComponent.disabled(disabled);\r\n                }\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_CatalogInventory/js/components/use-config-settings.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/element/single-checkbox'\r\n], function (checkbox) {\r\n    'use strict';\r\n\r\n    return checkbox.extend({\r\n        defaults: {\r\n            valueFromConfig: '',\r\n            linkedValue: ''\r\n        },\r\n\r\n        /**\r\n         * @returns {Element}\r\n         */\r\n        initObservable: function () {\r\n            return this\r\n                ._super()\r\n                .observe(['valueFromConfig', 'linkedValue']);\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        'onCheckedChanged': function (newChecked) {\r\n            if (newChecked) {\r\n                this.linkedValue(this.valueFromConfig());\r\n            }\r\n\r\n            this._super(newChecked);\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/validate.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/mage'\r\n], function (jQuery) {\r\n    'use strict';\r\n\r\n    return function (data, element) {\r\n        jQuery(element).mage('form').mage('validation');\r\n    };\r\n});\r\n","Magento_Customer/edit/post-wrapper.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'mage/translate'\r\n], function ($, confirm) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {String} url\r\n     * @returns {Object}\r\n     */\r\n    function getForm(url) {\r\n        return $('<form>', {\r\n            'action': url,\r\n            'method': 'POST'\r\n        }).append($('<input>', {\r\n            'name': 'form_key',\r\n            'value': window.FORM_KEY,\r\n            'type': 'hidden'\r\n        }));\r\n    }\r\n\r\n    $('#customer-edit-delete-button').click(function () {\r\n        var msg = $.mage.__('Are you sure you want to do this?'),\r\n            url = $('#customer-edit-delete-button').data('url');\r\n\r\n        confirm({\r\n            'content': msg,\r\n            'actions': {\r\n\r\n                /**\r\n                 * 'Confirm' action handler.\r\n                 */\r\n                confirm: function () {\r\n                    getForm(url).appendTo('body').submit();\r\n                }\r\n            }\r\n        });\r\n\r\n        return false;\r\n    });\r\n});\r\n","Magento_Customer/edit/tab/js/addresses.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'jquery/ui',\r\n    'mage/backend/tabs'\r\n], function ($, mageTemplate, confirm) {\r\n    'use strict';\r\n\r\n    $.widget('mage.addressTabs', $.mage.tabs, {\r\n        options: {\r\n            itemCount: 0,\r\n            baseItemId: 'new_item',\r\n            templatePrefix: '_templatePrefix_',\r\n            regionsUrl: null,\r\n            defaultCountries: [],\r\n            optionalZipCountries: [],\r\n            requiredStateForCountries: [],\r\n            deleteConfirmPrompt: '',\r\n            formTemplateSelector: '[data-template=\"address-form\"]',\r\n            tabTemplateSelector: '[data-template=\"address-tab\"]',\r\n            tabAddressTemplateSelector: '[data-template=\"tab-address-content\"]',\r\n            formsSelector: '[data-container=\"address-forms\"]',\r\n            addAddressSelector: '[data-container=\"add-address\"]',\r\n            formFirstNameSelector: ':input[data-ui-id=\"adminhtml-edit-tab-addresses-fieldset-element-text-address-template-firstname\"]',\r\n            accountFirstNameSelector: ':input[data-ui-id=\"adminhtml-edit-tab-account-fieldset-element-text-account-firstname\"]',\r\n            formLastNameSelector: ':input[data-ui-id=\"adminhtml-edit-tab-addresses-fieldset-element-text-address-template-lastname\"]',\r\n            accountLastNameSelector: ':input[data-ui-id=\"adminhtml-edit-tab-account-fieldset-element-text-account-lastname\"]',\r\n            accountWebsiteIdSelector: ':input[data-ui-id=\"store-switcher-form-renderer-fieldset-element-select-account-website-id\"]',\r\n            formCountrySelector: 'customer-edit-tab-addresses-fieldset-element-form-field-country-id',\r\n            addAddressButtonSelector: ':button[data-ui-id=\"adminhtml-edit-tab-addresses-add-address-button\"]'\r\n        },\r\n\r\n        /**\r\n         * This method adds a new address - tab and form to the widget.\r\n         */\r\n        _addNewAddress: function () {\r\n            this.options.itemCount++;\r\n\r\n            // prevent duplication of ids\r\n            while (this.element.find(\"div[data-item=\" + this.options.itemCount + \"]\").length) {\r\n                this.options.itemCount++;\r\n            }\r\n\r\n            var formName = this.options.baseItemId + this.options.itemCount,\r\n                newForm = $('#form_' + formName),\r\n                formTemplate = this.element.find(this.options.formTemplateSelector).html(),\r\n                itemTemplate = this.element.find(this.options.tabTemplateSelector).html();\r\n\r\n            formTemplate = mageTemplate(formTemplate, {\r\n                data: {\r\n                    formName: formName,\r\n                    itemCount: this.options.itemCount\r\n                }\r\n            });\r\n\r\n            itemTemplate = mageTemplate(itemTemplate, {\r\n                data: {\r\n                    'itemId': this.options.itemCount\r\n                }\r\n            });\r\n\r\n            this.element.find(this.options.formsSelector).append(this._prepareTemplate(formTemplate));\r\n\r\n            // add the new address to the tabs list before the add new action list\r\n            this.element.find(this.options.addAddressSelector).before(itemTemplate);\r\n\r\n            // refresh the widget to pick up the newly added tab.\r\n            this.refresh();\r\n\r\n            // activate the newly added tab\r\n            this.option('active', -1);\r\n\r\n            this.element.trigger('contentUpdated', $(formName));\r\n\r\n            // pre-fill form with account firstname, lastname, and country\r\n            var firstname = newForm.find(this.options.formFirstNameSelector);\r\n            firstname.val($(this.options.accountFirstNameSelector).val());\r\n            newForm.find(this.options.formLastNameSelector).val($(this.options.accountLastNameSelector).val());\r\n\r\n            var accountWebsiteId = $(this.options.accountWebsiteIdSelector).val();\r\n\r\n            if (accountWebsiteId !== '' && typeof this.options.defaultCountries[accountWebsiteId] !== 'undefined') {\r\n                newForm.find(this.options.formCountrySelector).val(this.options.defaultCountries[accountWebsiteId]);\r\n            }\r\n\r\n            // .val does not trigger change event, so manually trigger. (Triggering change of any field will handle update of all fields.)\r\n            firstname.trigger('change');\r\n\r\n            this._bindCountryRegionRelation(newForm);\r\n        },\r\n\r\n        /**\r\n         * This method is used to bind events associated with this widget.\r\n         */\r\n        _bind: function () {\r\n            this._on(this.element.find(this.options.addAddressButtonSelector), {\r\n                'click': '_addNewAddress'\r\n            });\r\n            this._on({\r\n                'formchange': '_updateAddress',\r\n                'dataItemDelete': '_deleteItemPrompt'\r\n            });\r\n            this.element.find('.countries').addressCountry({\r\n                regionsUrl: this.options.regionsUrl,\r\n                optionalZipCountries: this.options.optionalZipCountries,\r\n                requiredStateForCountries: this.options.requiredStateForCountries\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Create, Initialize this widget.\r\n         */\r\n        _create: function () {\r\n            this._super();\r\n            this._bind();\r\n        },\r\n\r\n        /**\r\n         * This method deletes the item in the list.\r\n         * @private\r\n         */\r\n        _deleteItem: function (dataItem) {\r\n            // remove the elements from the page\r\n            this.element.find('[data-item=\"' + dataItem + '\"]').remove();\r\n\r\n            // refresh the widget to pick up the removed tab\r\n            this.refresh();\r\n        },\r\n\r\n        /**\r\n         * This method prompts the user to confirm the deletion of the item in the list.\r\n         * @private\r\n         */\r\n        _deleteItemPrompt: function (event, data) {\r\n            var self = this;\r\n\r\n            confirm({\r\n                content: this.options.deleteConfirmPrompt,\r\n                actions: {\r\n                    confirm: function () {\r\n                        self._deleteItem(data.item);\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Initialize form template variables for the new address item.\r\n         * @param {Element} template - Address form html 'template'.\r\n         * @private\r\n         */\r\n        _prepareTemplate: function (template) {\r\n            var re = new RegExp(this.options.templatePrefix, 'g');\r\n\r\n            return template.replace(re, '_item' + this.options.itemCount);\r\n        },\r\n\r\n        /**\r\n         * This method is used to grab the data from the form and display it nicely.\r\n         * @param {Element} container - Address form container.\r\n         * @private\r\n         */\r\n        _syncFormData: function (container) {\r\n            if (container) {\r\n                var data = {};\r\n\r\n                $(container).find(':input').each(function (index, inputField) {\r\n                    var id = inputField.id;\r\n\r\n                    if (id) {\r\n                        id = id.replace(/^(_item)?[0-9]+/, '');\r\n                        id = id.replace(/^(id)?[0-9]+/, '');\r\n                        var value = inputField.getValue();\r\n                        var tagName = inputField.tagName.toLowerCase();\r\n\r\n                        if (tagName === 'select') {\r\n                            if (inputField.multiple) {\r\n                                var values = $([]);\r\n                                var l = inputField.options.length;\r\n\r\n                                for (var j = 0; j < l; j++) {\r\n                                    var o = inputField.options[j];\r\n\r\n                                    if (o.selected === true) {\r\n                                        values[values.length] = o.text.escapeHTML();\r\n                                    }\r\n                                }\r\n                                data[id] = values.join(', ');\r\n                            } else {\r\n                                var option = inputField.options[inputField.selectedIndex],\r\n                                    text = option.value == '0' || option.value === '' ? '' : option.text;\r\n                                data[id] = text.escapeHTML();\r\n                            }\r\n                        } else if (value !== null) {\r\n                            data[id] = value.escapeHTML();\r\n                        }\r\n                    }\r\n                });\r\n\r\n                // Set name of state to 'region' if list of states are in 'region_id' selectbox\r\n                if (!data.region && data.region_id) {\r\n                    data.region = data.region_id;\r\n                    delete data.region_id;\r\n                }\r\n\r\n                // Set data to html\r\n                var itemContainer = this.element.find(\"[aria-selected='true'] address\"),\r\n                    tmpl;\r\n\r\n                if (itemContainer.length && itemContainer[0]) {\r\n                    tmpl = mageTemplate(this.options.tabAddressTemplateSelector, {\r\n                        data: data\r\n                    });\r\n\r\n                    itemContainer[0].innerHTML = tmpl;\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * This method processes the event associated with a form field changing.\r\n         * @param {EventObject} event - Event occurring.\r\n         * @private\r\n         */\r\n        _updateAddress: function (event) {\r\n            this._syncFormData(this._getFormContainer(event.target));\r\n        },\r\n\r\n        /**\r\n         * This method returns the form containing this element.\r\n         * @param {JQuery|Element} element - JQuery object or DOM element.\r\n         * @private\r\n         */\r\n        _getFormContainer: function (element) {\r\n            if (!(element instanceof $)) {\r\n                element = $(element);\r\n            }\r\n\r\n            return element.closest('[data-item]');\r\n        },\r\n\r\n        /**\r\n         * This method binds a country element on the given form to the addressCountry widget.\r\n         * @param {JQuery} formElement - The form containing the country.\r\n         * @private\r\n         */\r\n        _bindCountryRegionRelation: function (formElement) {\r\n            $(formElement).find('.countries').addressCountry({\r\n                regionsUrl: this.options.regionsUrl,\r\n                optionalZipCountries: this.options.optionalZipCountries,\r\n                requiredStateForCountries: this.options.requiredStateForCountries\r\n            });\r\n        }\r\n    });\r\n\r\n    $.widget('mage.addressCountry', {\r\n        options: {\r\n            regionsUrl: null,\r\n            optionalZipCountries: [],\r\n            requiredStateForCountries: [],\r\n            countryElement: null,\r\n            regionIdElement: null,\r\n            regionElement: null\r\n        },\r\n\r\n        /**\r\n         * This method is used to bind events associated with this widget.\r\n         */\r\n        _bind: function () {\r\n            this._on({\r\n                'change': '_onAddressCountryChange'\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Create, Initialize this widget.\r\n         */\r\n        _create: function () {\r\n            this._bind();\r\n        },\r\n\r\n        /**\r\n         * This method updates country dependent fields; region input, and region and zipCode required indicator.\r\n         * @param {Event} event - Change event occurring.\r\n         * @private\r\n         */\r\n        _onAddressCountryChange: function (event) {\r\n            var countryElement = event.target,\r\n                formElement = $(countryElement).closest('[data-item]'),\r\n                fieldElement = $(formElement).find('.field-region'),\r\n                regionElement = $(fieldElement).find('.input-text');\r\n\r\n            this.options.countryElement = countryElement;\r\n\r\n            if ($(regionElement).prop('tagName').toLowerCase() === 'select') {\r\n                this.options.regionIdElement = regionElement;\r\n                this.options.regionElement = regionElement.next();\r\n            } else {\r\n                this.options.regionElement = regionElement;\r\n                this.options.regionIdElement = regionElement.next();\r\n            }\r\n\r\n            if (countryElement.value) {\r\n                // obtain regions for the country\r\n                $.ajax({\r\n                    url: this.options.regionsUrl,\r\n                    type: 'post',\r\n                    dataType: 'json',\r\n                    showLoader: true,\r\n                    data: {\r\n                        parent: countryElement.value\r\n                    },\r\n                    context: this,\r\n                    success: $.proxy(this._refreshRegionField, this)\r\n                });\r\n            } else {\r\n                // Set empty text field in region\r\n                this._refreshRegionField({});\r\n            }\r\n            // set Zip optional/required\r\n            this._setPostcodeOptional(countryElement);\r\n        },\r\n\r\n        /**\r\n         * This method updates the region input from the server response.\r\n         * @param {Object} data - Regions (state/province) or empty if regions n/a for the country.\r\n         * @private\r\n         */\r\n        _refreshRegionField: function (data) {\r\n            var regionField = $(this.options.regionElement).closest('div.field'),\r\n                regionControl = regionField.find('.control'),\r\n                regionInput,\r\n                regionIdInput,\r\n                newInput,\r\n                regionValue;\r\n\r\n            // clear current region input/select\r\n            regionControl.empty();\r\n\r\n            if (data.length) {\r\n                // Create visible selectbox 'region_id' and hidden 'region'\r\n                regionIdInput = $('<select>').attr({\r\n                    'name': this.options.regionIdElement.attr('name'),\r\n                    'id': this.options.regionIdElement.attr('id'),\r\n                    'class': 'required-entry input-text select',\r\n                    'title': this.options.regionIdElement.attr('title')\r\n                }).appendTo(regionControl);\r\n\r\n                regionValue = this.options.regionElement.attr('value');\r\n\r\n                $.each(data, function (idx, item) {\r\n                    var regionOption = $('<option />').val(item.value).text(item.label);\r\n\r\n                    if (regionValue && regionValue == item.label) {\r\n                        regionOption.attr('selected', 'selected');\r\n                    }\r\n\r\n                    regionIdInput.append(regionOption);\r\n                });\r\n\r\n                regionInput = $('<input>').attr({\r\n                    'name': this.options.regionElement.attr('name'),\r\n                    'id': this.options.regionElement.attr('id'),\r\n                    'type': 'hidden'\r\n                }).appendTo(regionControl);\r\n\r\n                newInput = regionIdInput;\r\n            } else {\r\n                // Create visible text input 'region' and hidden 'region_id'\r\n                regionInput = $('<input>').attr({\r\n                    'type': 'text',\r\n                    'name': this.options.regionElement.attr('name'),\r\n                    'id': this.options.regionElement.attr('id'),\r\n                    'class': 'input-text',\r\n                    'title': this.options.regionElement.attr('title')\r\n                }).appendTo(regionControl);\r\n\r\n                regionIdInput = $('<input>').attr({\r\n                    'type': 'hidden',\r\n                    'name': this.options.regionIdElement.attr('name'),\r\n                    'id': this.options.regionIdElement.attr('id')\r\n                }).appendTo(regionControl);\r\n\r\n                newInput = regionInput;\r\n            }\r\n\r\n            this.options.regionElement = regionInput;\r\n            this.options.regionIdElement = regionIdInput;\r\n\r\n            // Updating in address info\r\n            this.element.trigger('formchange');\r\n\r\n            // bind region input change event\r\n            newInput.on('change', $.proxy(this._triggerFormChange, this, newInput));\r\n\r\n            this._checkRegionRequired([regionInput, regionIdInput], newInput, regionField);\r\n        },\r\n\r\n        /**\r\n         * This method is used to trigger a change element for a given element.\r\n         */\r\n        _triggerFormChange: function (element) {\r\n            element.trigger('formchange');\r\n        },\r\n\r\n        /**\r\n         * This method updates the region input required/optional and validation classes.\r\n         * @param {Array} elements - Region elements\r\n         * @param {Element} activeElement - Active Region element\r\n         * @param {Element} regionField - Region section element\r\n         * @private\r\n         */\r\n        _checkRegionRequired: function (elements, activeElement, regionField) {\r\n            var regionRequired = this.options.requiredStateForCountries.indexOf(this.options.countryElement.value) >= 0;\r\n\r\n            elements.each(function (currentElement) {\r\n                var form = $(currentElement).closest('form'),\r\n                    validationInstance = form ? $(form).data('validation') : null;\r\n\r\n                if (validationInstance) {\r\n                    validationInstance.clearError(currentElement);\r\n                }\r\n\r\n                if (!regionRequired) {\r\n                    if (regionField.hasClass('required')) {\r\n                        regionField.removeClass('required');\r\n                    }\r\n\r\n                    if (currentElement.hasClass('required-entry')) {\r\n                        currentElement.removeClass('required-entry');\r\n                    }\r\n\r\n                    if (currentElement.prop('tagName').toLowerCase() === 'select' &&\r\n                        currentElement.hasClass('validate-select')) {\r\n                        currentElement.removeClass('validate-select');\r\n                    }\r\n                } else {\r\n                    if (regionField.hasClass('required') === false) {\r\n                        regionField.addClass('required');\r\n                    }\r\n\r\n                    if (activeElement == currentElement) {\r\n                        if (!currentElement.hasClass('required-entry')) {\r\n                            currentElement.addClass('required-entry');\r\n                        }\r\n\r\n                        if (currentElement.prop('tagName').toLowerCase() === 'select' &&\r\n                            !currentElement.hasClass('validate-select')) {\r\n                            currentElement.addClass('validate-select');\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * This method shows/hides the zip/postalCode code required indicator.\r\n         * @param {Element} countryElement\r\n         * @private\r\n         */\r\n        _setPostcodeOptional: function (countryElement) {\r\n            var formElement = $(countryElement).closest('[data-item]'),\r\n                fieldElement = $(formElement).find('.field-postcode'),\r\n                zipElement = $(fieldElement).find('.input-text'),\r\n                zipField = $(zipElement).closest('.field-postcode');\r\n\r\n            if (this.options.optionalZipCountries.indexOf(countryElement.value) !== -1) {\r\n                if ($(zipElement).hasClass('required-entry')) {\r\n                    $(zipElement).removeClass('required-entry');\r\n                }\r\n                $(zipField).removeClass('required');\r\n            } else {\r\n                $(zipElement).addClass('required-entry');\r\n                $(zipField).addClass('required');\r\n            }\r\n        }\r\n    });\r\n\r\n    $.widget('mage.observableInputs', {\r\n        options: {\r\n            name: ''\r\n        },\r\n\r\n        /**\r\n         * This method is used to bind events associated with this widget.\r\n         */\r\n        _bind: function () {\r\n            this._on(this.element.find(':input').not('.countries'), {\r\n                'change': '_triggerChange'\r\n            });\r\n        },\r\n\r\n        _create: function () {\r\n            this._super();\r\n            this._bind();\r\n        },\r\n\r\n        /**\r\n         * This method is used to trigger a change element for a given entity.\r\n         */\r\n        _triggerChange: function (element) {\r\n            // send the name of the captor and the field that changed\r\n            this.element.trigger('formchange', {\r\n                'name': this.options.name,\r\n                'element': element.target\r\n            });\r\n        }\r\n    });\r\n\r\n    /**\r\n     * This widget is used to trigger a message to delete a data item (i.e. D of CRUD).\r\n     */\r\n    $.widget('mage.dataItemDeleteButton', {\r\n        options: {\r\n            item: ''\r\n        },\r\n\r\n        /**\r\n         * This method is used to bind events associated with this widget.\r\n         */\r\n        _bind: function () {\r\n            this._on(this.element.find('[data-role=\"delete\"]'), {\r\n                'click': '_triggerDelete'\r\n            });\r\n        },\r\n\r\n        _create: function () {\r\n            this._super();            \r\n            this._bind();\r\n\r\n            // if the item was not specified, find the data-item element wrapper\r\n            if (this.options.item.length === 0) {\r\n                var dataItemContainer = this.element.parents('[data-item]');\r\n\r\n                if (dataItemContainer.length === 1) {\r\n                    this.options.item = dataItemContainer.attr('data-item');\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * This method is used to trigger a delete message for this item.\r\n         */\r\n        _triggerDelete: function () {\r\n            // send the name of the captor and the field that changed\r\n            this.element.trigger('dataItemDelete', {\r\n                'item': this.options.item\r\n            });\r\n\r\n            // we are handling the click, so stop processing\r\n            return false;\r\n        }\r\n    });\r\n\r\n    return {\r\n        addressTabs: $.mage.addressTabs,\r\n        addressCountry: $.mage.addressCountry,\r\n        observableInputs: $.mage.observableInputs,\r\n        dataItemDeleteButton: $.mage.dataItemDeleteButton\r\n    };\r\n});\r\n","Magento_Rule/rules.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    \"jquery\",\r\n    'Magento_Ui/js/modal/alert',\r\n    \"mage/translate\",\r\n    \"prototype\"\r\n], function(jQuery){\r\n\r\n    var VarienRulesForm = new Class.create();\r\n\r\n    VarienRulesForm.prototype = {\r\n        initialize : function(parent, newChildUrl){\r\n            this.parent = $(parent);\r\n            this.newChildUrl  = newChildUrl;\r\n            this.shownElement = null;\r\n            this.updateElement = null;\r\n            this.chooserSelectedItems = $H({});\r\n            this.readOnly = false;\r\n\r\n            var elems = this.parent.getElementsByClassName('rule-param');\r\n            for (var i=0; i<elems.length; i++) {\r\n                this.initParam(elems[i]);\r\n            }\r\n        },\r\n\r\n        setReadonly: function (readonly){\r\n            this.readOnly = readonly;\r\n            var elems = this.parent.getElementsByClassName('rule-param-remove');\r\n            for (var i=0; i<elems.length; i++) {\r\n                var element = elems[i];\r\n                    if (this.readOnly) {\r\n                        element.hide();\r\n                    } else {\r\n                        element.show();\r\n                    }\r\n            }\r\n\r\n            var elems = this.parent.getElementsByClassName('rule-param-new-child');\r\n            for (var i=0; i<elems.length; i++) {\r\n                var element = elems[i];\r\n                if (this.readOnly) {\r\n                    element.hide();\r\n                } else {\r\n                    element.show();\r\n                }\r\n            }\r\n\r\n            var elems = this.parent.getElementsByClassName('rule-param');\r\n            for (var i=0; i<elems.length; i++) {\r\n                var container = elems[i];\r\n                var label = Element.down(container, '.label');\r\n                if (label) {\r\n                    if (this.readOnly) {\r\n                        label.addClassName('label-disabled');\r\n                    } else {\r\n                        label.removeClassName('label-disabled');\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        initParam: function (container) {\r\n            container.rulesObject = this;\r\n            var label = Element.down(container, '.label');\r\n            if (label) {\r\n                Event.observe(label, 'click', this.showParamInputField.bind(this, container));\r\n            }\r\n\r\n            var elem = Element.down(container, '.element');\r\n            if (elem) {\r\n                var trig = elem.down('.rule-chooser-trigger');\r\n                if (trig) {\r\n                    Event.observe(trig, 'click', this.toggleChooser.bind(this, container));\r\n                }\r\n\r\n                var apply = elem.down('.rule-param-apply');\r\n                if (apply) {\r\n                    Event.observe(apply, 'click', this.hideParamInputField.bind(this, container));\r\n                } else {\r\n                    elem = elem.down('.element-value-changer');\r\n                    elem.container = container;\r\n                    if (!elem.multiple) {\r\n                        Event.observe(elem, 'change', this.hideParamInputField.bind(this, container));\r\n                    }\r\n                    Event.observe(elem, 'blur', this.hideParamInputField.bind(this, container));\r\n                }\r\n            }\r\n\r\n            var remove = Element.down(container, '.rule-param-remove');\r\n            if (remove) {\r\n                Event.observe(remove, 'click', this.removeRuleEntry.bind(this, container));\r\n            }\r\n        },\r\n\r\n        showChooserElement: function (chooser) {\r\n            this.chooserSelectedItems = $H({});\r\n            if (chooser.hasClassName('no-split')) {\r\n                this.chooserSelectedItems.set(this.updateElement.value, 1);\r\n            } else {\r\n                var values = this.updateElement.value.split(','), s = '';\r\n                for (i=0; i<values.length; i++) {\r\n                    s = values[i].strip();\r\n                    if (s!='') {\r\n                       this.chooserSelectedItems.set(s,1);\r\n                    }\r\n                }\r\n            }\r\n            new Ajax.Request(chooser.getAttribute('url'), {\r\n                evalScripts: true,\r\n                parameters: {'form_key': FORM_KEY, 'selected[]':this.chooserSelectedItems.keys() },\r\n                onSuccess: function(transport) {\r\n                    if (this._processSuccess(transport)) {\r\n                        $(chooser).update(transport.responseText);\r\n                        this.showChooserLoaded(chooser, transport);\r\n                        jQuery(chooser).trigger('contentUpdated');\r\n                    }\r\n                }.bind(this),\r\n                onFailure: this._processFailure.bind(this)\r\n            });\r\n        },\r\n\r\n        showChooserLoaded: function(chooser, transport) {\r\n            chooser.style.display = 'block';\r\n        },\r\n\r\n        showChooser: function (container, event) {\r\n            var chooser = container.up('li');\r\n            if (!chooser) {\r\n                return;\r\n            }\r\n            chooser = chooser.down('.rule-chooser');\r\n            if (!chooser) {\r\n                return;\r\n            }\r\n            this.showChooserElement(chooser);\r\n        },\r\n\r\n        hideChooser: function (container, event) {\r\n            var chooser = container.up('li');\r\n            if (!chooser) {\r\n                return;\r\n            }\r\n            chooser = chooser.down('.rule-chooser');\r\n            if (!chooser) {\r\n                return;\r\n            }\r\n            chooser.style.display = 'none';\r\n        },\r\n\r\n        toggleChooser: function (container, event) {\r\n            if (this.readOnly) {\r\n                return false;\r\n            }\r\n\r\n            var chooser = container.up('li').down('.rule-chooser');\r\n            if (!chooser) {\r\n                return;\r\n            }\r\n            if (chooser.style.display=='block') {\r\n                chooser.style.display = 'none';\r\n                this.cleanChooser(container, event);\r\n            } else {\r\n                this.showChooserElement(chooser);\r\n            }\r\n        },\r\n\r\n        cleanChooser: function (container, event) {\r\n            var chooser = container.up('li').down('.rule-chooser');\r\n            if (!chooser) {\r\n                return;\r\n            }\r\n            chooser.innerHTML = '';\r\n        },\r\n\r\n        showParamInputField: function (container, event) {\r\n            if (this.readOnly) {\r\n                return false;\r\n            }\r\n\r\n            if (this.shownElement) {\r\n                this.hideParamInputField(this.shownElement, event);\r\n            }\r\n\r\n            Element.addClassName(container, 'rule-param-edit');\r\n            var elemContainer = Element.down(container, '.element');\r\n\r\n            var elem = Element.down(elemContainer, 'input.input-text');\r\n            if (elem) {\r\n                elem.focus();\r\n                if (elem && elem.id && elem.id.match(/__value$/)) {\r\n                    this.updateElement = elem;\r\n                }\r\n\r\n            }\r\n\r\n            var elem = Element.down(elemContainer, '.element-value-changer');\r\n            if (elem) {\r\n               elem.focus();\r\n            }\r\n\r\n            this.shownElement = container;\r\n        },\r\n\r\n        hideParamInputField: function (container, event) {\r\n            Element.removeClassName(container, 'rule-param-edit');\r\n            var label = Element.down(container, '.label'), elem;\r\n\r\n            if (!container.hasClassName('rule-param-new-child')) {\r\n                elem = Element.down(container, '.element-value-changer');\r\n                if (elem && elem.options) {\r\n                    var selectedOptions = [];\r\n                    for (i=0; i<elem.options.length; i++) {\r\n                        if (elem.options[i].selected) {\r\n                            selectedOptions.push(elem.options[i].text);\r\n                        }\r\n                    }\r\n\r\n                    var str = selectedOptions.join(', ');\r\n                    label.innerHTML = str!='' ? str : '...';\r\n                }\r\n\r\n                elem = Element.down(container, 'input.input-text');\r\n                if (elem) {\r\n                    var str = elem.value.replace(/(^\\s+|\\s+$)/g, '');\r\n                    elem.value = str;\r\n                    if (str=='') {\r\n                        str = '...';\r\n                    } else if (str.length>30) {\r\n                        str = str.substr(0, 30)+'...';\r\n                    }\r\n                    label.innerHTML = str.escapeHTML();\r\n                }\r\n            } else {\r\n                elem = container.down('.element-value-changer');\r\n                if (elem.value) {\r\n                    this.addRuleNewChild(elem);\r\n                }\r\n                elem.value = '';\r\n            }\r\n\r\n            if (elem && elem.id && elem.id.match(/__value$/)) {\r\n                this.hideChooser(container, event);\r\n                this.updateElement = null;\r\n            }\r\n\r\n            this.shownElement = null;\r\n        },\r\n\r\n        addRuleNewChild: function (elem) {\r\n            var parent_id = elem.id.replace(/^.*__(.*)__.*$/, '$1');\r\n            var children_ul_id = elem.id.replace(/__/g, ':').replace(/[^:]*$/, 'children').replace(/:/g, '__');\r\n            var children_ul = $(this.parent).select('#' + children_ul_id)[0];\r\n            var max_id = 0, i;\r\n            var children_inputs = Selector.findChildElements(children_ul, $A(['input.hidden']));\r\n            if (children_inputs.length) {\r\n                children_inputs.each(function(el){\r\n                    if (el.id.match(/__type$/)) {\r\n                        i = 1 * el.id.replace(/^.*__.*?([0-9]+)__.*$/, '$1');\r\n                        max_id = i > max_id ? i : max_id;\r\n                    }\r\n                });\r\n            }\r\n            var new_id = parent_id + '--' + (max_id + 1);\r\n            var new_type = elem.value;\r\n            var new_elem = document.createElement('LI');\r\n            new_elem.className = 'rule-param-wait';\r\n            new_elem.innerHTML = jQuery.mage.__('This won\\'t take long . . .');\r\n            children_ul.insertBefore(new_elem, $(elem).up('li'));\r\n\r\n            new Ajax.Request(this.newChildUrl, {\r\n                evalScripts: true,\r\n                parameters: {form_key: FORM_KEY, type:new_type.replace('/','-'), id:new_id },\r\n                onComplete: this.onAddNewChildComplete.bind(this, new_elem),\r\n                onSuccess: function(transport) {\r\n                    if(this._processSuccess(transport)) {\r\n                        $(new_elem).update(transport.responseText);\r\n                    }\r\n                }.bind(this),\r\n                onFailure: this._processFailure.bind(this)\r\n            });\r\n        },\r\n\r\n        _processSuccess : function(transport) {\r\n            if (transport.responseText.isJSON()) {\r\n                var response = transport.responseText.evalJSON()\r\n                if (response.error) {\r\n                    alert(response.message);\r\n                }\r\n                if(response.ajaxExpired && response.ajaxRedirect) {\r\n                    setLocation(response.ajaxRedirect);\r\n                }\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n\r\n        _processFailure : function(transport) {\r\n            location.href = BASE_URL;\r\n        },\r\n\r\n        onAddNewChildComplete: function (new_elem) {\r\n            if (this.readOnly) {\r\n                return false;\r\n            }\r\n\r\n            $(new_elem).removeClassName('rule-param-wait');\r\n            var elems = new_elem.getElementsByClassName('rule-param');\r\n            for (var i=0; i<elems.length; i++) {\r\n                this.initParam(elems[i]);\r\n            }\r\n        },\r\n\r\n        removeRuleEntry: function (container, event) {\r\n            var li = Element.up(container, 'li');\r\n            li.parentNode.removeChild(li);\r\n        },\r\n\r\n        chooserGridInit: function (grid) {\r\n            //grid.reloadParams = {'selected[]':this.chooserSelectedItems.keys()};\r\n        },\r\n\r\n        chooserGridRowInit: function (grid, row) {\r\n            if (!grid.reloadParams) {\r\n                grid.reloadParams = {'selected[]':this.chooserSelectedItems.keys()};\r\n            }\r\n        },\r\n\r\n        chooserGridRowClick: function (grid, event) {\r\n            var trElement = Event.findElement(event, 'tr');\r\n            var isInput = Event.element(event).tagName == 'INPUT';\r\n            if (trElement) {\r\n                var checkbox = Element.select(trElement, 'input');\r\n                if (checkbox[0]) {\r\n                    var checked = isInput ? checkbox[0].checked : !checkbox[0].checked;\r\n                    grid.setCheckboxChecked(checkbox[0], checked);\r\n\r\n                }\r\n            }\r\n        },\r\n\r\n        chooserGridCheckboxCheck: function (grid, element, checked) {\r\n            if (checked) {\r\n                if (!element.up('th')) {\r\n                    this.chooserSelectedItems.set(element.value,1);\r\n                }\r\n            } else {\r\n                this.chooserSelectedItems.unset(element.value);\r\n            }\r\n            grid.reloadParams = {'selected[]':this.chooserSelectedItems.keys()};\r\n            this.updateElement.value = this.chooserSelectedItems.keys().join(', ');\r\n        }\r\n    };\r\n\r\n    return VarienRulesForm;\r\n});\r\n","Magento_SalesRule/js/form/element/coupon-type.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    'Magento_Ui/js/form/element/select'\r\n], function (_, uiRegistry, select) {\r\n    'use strict';\r\n\r\n    return select.extend({\r\n\r\n        /**\r\n         * Hide fields on coupon tab\r\n         */\r\n        onUpdate: function () {\r\n\r\n            /* eslint-disable eqeqeq */\r\n            if (this.value() != this.displayOnlyForCouponType) {\r\n                uiRegistry.get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation').checked(false);\r\n            }\r\n\r\n            this.enableDisableFields();\r\n        },\r\n\r\n        /**\r\n         * Enable/disable fields on Coupons tab\r\n         */\r\n        enableDisableFields: function () {\r\n            var selector,\r\n                isUseAutoGenerationChecked,\r\n                couponType,\r\n                disableAuto;\r\n\r\n            selector = '[id=sales-rule-form-tab-coupons] input, [id=sales-rule-form-tab-coupons] select, ' +\r\n                    '[id=sales-rule-form-tab-coupons] button';\r\n            isUseAutoGenerationChecked = uiRegistry\r\n                    .get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation')\r\n                    .checked();\r\n            couponType = uiRegistry\r\n                .get('sales_rule_form.sales_rule_form.rule_information.coupon_type')\r\n                .value();\r\n            disableAuto = couponType === 3 || isUseAutoGenerationChecked;\r\n            _.each(\r\n                document.querySelectorAll(selector),\r\n                function (element) {\r\n                    element.disabled = !disableAuto;\r\n                }\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/form/element/manage-coupon-codes.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    'Magento_Ui/js/form/components/fieldset',\r\n    'Magento_Ui/js/lib/view/utils/async'\r\n], function (_, uiRegistry, fieldset, async) {\r\n    'use strict';\r\n\r\n    return fieldset.extend({\r\n\r\n        /*eslint-disable no-unused-vars*/\r\n        /**\r\n         * Initialize element\r\n         *\r\n         * @returns {Abstract} Chainable\r\n         */\r\n        initialize: function (elems, position) {\r\n            var obj = this;\r\n\r\n            this._super();\r\n\r\n            async.async('#sales-rule-form-tab-coupons', document.getElementById('container'), function (node) {\r\n                var useAutoGeneration = uiRegistry.get(\r\n                    'sales_rule_form.sales_rule_form.rule_information.use_auto_generation'\r\n                );\r\n\r\n                useAutoGeneration.on('checked', function () {\r\n                    obj.enableDisableFields();\r\n                });\r\n                obj.enableDisableFields();\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /*eslint-enable no-unused-vars*/\r\n        /*eslint-disable lines-around-comment*/\r\n\r\n        /**\r\n         * Enable/disable fields on Coupons tab\r\n         */\r\n        enableDisableFields: function () {\r\n            var selector,\r\n                isUseAutoGenerationChecked,\r\n                couponType,\r\n                disableAuto;\r\n\r\n            selector = '[id=sales-rule-form-tab-coupons] input, [id=sales-rule-form-tab-coupons] select, ' +\r\n                    '[id=sales-rule-form-tab-coupons] button';\r\n            isUseAutoGenerationChecked = uiRegistry\r\n                    .get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation')\r\n                    .checked();\r\n            couponType = uiRegistry\r\n                .get('sales_rule_form.sales_rule_form.rule_information.coupon_type')\r\n                .value();\r\n            /**\r\n             * \\Magento\\Rule\\Model\\AbstractModel::COUPON_TYPE_AUTO\r\n             */\r\n            disableAuto = couponType === 3 || isUseAutoGenerationChecked;\r\n            _.each(\r\n                document.querySelectorAll(selector),\r\n                function (element) {\r\n                    element.disabled = !disableAuto;\r\n                }\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_Sales/js/bootstrap/order-create-index.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\nrequire([\r\n    \"Magento_Sales/order/create/giftmessage\"\r\n]);\r\n","Magento_Sales/js/bootstrap/order-post-action.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\nrequire([\r\n    'Magento_Sales/order/view/post-wrapper'\r\n]);\r\n","Magento_Sales/order/giftoptions_tooltip.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * Gift Options Tooltip Model\r\n * \r\n * @author      Magento Core Team <core@magentocommerce.com>\r\n */\r\ndefine([\"prototype\"], function(){\r\n\r\nvar GiftOptionsTooltip = Class.create();\r\n\r\nGiftOptionsTooltip.prototype = {\r\n    _tooltipLines: [],\r\n    _tooltipWindow: null,\r\n    _tooltipWindowContent: null,\r\n    _targetLinks: [],\r\n    _eventMouseOver: null,\r\n    _eventMouseOut: null,\r\n    _styleOptions: null,\r\n    _tooltipContentLoaderFunction: null,\r\n\r\n    /**\r\n     * Initialize tooltip object\r\n     */\r\n    initialize: function ()\r\n    {\r\n        var options = Object.extend({\r\n            delta_x: 30,\r\n            delta_y: 0,\r\n            zindex: 1000\r\n        });\r\n        this._styleOptions = options;\r\n        this._eventMouseOver = this.showTooltip.bindAsEventListener(this);\r\n        this._eventMouseOut = this.hideTooltip.bindAsEventListener(this);\r\n    },\r\n\r\n    /**\r\n     * Set gift options tooltip window\r\n     *\r\n     * @param string windowId\r\n     * @param string contentId\r\n     *\r\n     * @return boolean success\r\n     */\r\n    setTooltipWindow: function (windowId, contentId)\r\n    {\r\n        if (!$(windowId) || !$(contentId)) {\r\n            return false;\r\n        }\r\n        this._tooltipWindow = $(windowId);\r\n        this._tooltipWindowContent = $(contentId);\r\n        $(document.body).insert({ bottom: this._tooltipWindow });\r\n        this.hideTooltip();\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Add tooltip to specified link\r\n     *\r\n     * @param string linkId\r\n     * @param string itemId identifier of the item related to link\r\n     *\r\n     * @return boolean success\r\n     */\r\n    addTargetLink: function (linkId, itemId)\r\n    {\r\n        if ($(linkId)) {\r\n            this._targetLinks[linkId] = [];\r\n            this._targetLinks[linkId]['object'] = $(linkId);\r\n            this._targetLinks[linkId]['itemId'] = itemId;\r\n            this._registerEvents(this._targetLinks[linkId]['object']);\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * Detach event listeners from target links when tooltip is destroyed\r\n     */\r\n    destroy: function ()\r\n    {\r\n        for (var linkId in this._targetLinks) {\r\n            Event.stopObserving(this._targetLinks[linkId]['object'], 'mouseover', this._eventMouseOver);\r\n            Event.stopObserving(this._targetLinks[linkId]['object'], 'mouseout', this._eventMouseOut);\r\n        }\r\n    },\r\n\r\n    /**\r\n     *  Register event listeners\r\n     *\r\n     *  @param object element\r\n     */\r\n    _registerEvents: function (element)\r\n    {\r\n        Event.observe(element, 'mouseover', this._eventMouseOver);\r\n        Event.observe(element, 'mouseout', this._eventMouseOut);\r\n    },\r\n\r\n    /**\r\n     * Move tooltip to mouse position\r\n     *\r\n     * @patram object event\r\n     */\r\n    _moveTooltip: function (event)\r\n    {\r\n        Event.stop(event);\r\n        var mouseX = Event.pointerX(event);\r\n        var mouseY = Event.pointerY(event);\r\n\r\n        this.setStyles(mouseX, mouseY);\r\n    },\r\n\r\n    /**\r\n     * Show tooltip\r\n     *\r\n     * @param object event\r\n     *\r\n     * @return boolean success\r\n     */\r\n    showTooltip: function (event)\r\n    {\r\n        Event.stop(event);\r\n        if (this._tooltipWindow) {\r\n            var link = Event.element(event);\r\n            var itemId = this._targetLinks[link.id]['itemId'];\r\n            var tooltipContent = '';\r\n            if (Object.isFunction(this._tooltipContentLoaderFunction)) {\r\n                tooltipContent = this._tooltipContentLoaderFunction(itemId);\r\n            }\r\n            if (tooltipContent != '') {\r\n                this._updateTooltipWindowContent(tooltipContent)\r\n                this._moveTooltip(event);\r\n                new Element.show(this._tooltipWindow);\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * Set tooltip window styles\r\n     *\r\n     * @param int x\r\n     * @param int y\r\n     */\r\n    setStyles: function (x, y)\r\n    {\r\n        Element.setStyle(this._tooltipWindow, {\r\n            position:'absolute',\r\n            top: y + this._styleOptions.delta_y + 'px',\r\n            left: x + this._styleOptions.delta_x + 'px',\r\n            zindex: this._styleOptions.zindex\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Hide tooltip\r\n     *\r\n     * @param object event\r\n     */\r\n    hideTooltip: function (event)\r\n    {\r\n        if (this._tooltipWindow) {\r\n            new Element.hide(this._tooltipWindow);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set gift options tooltip content loader function\r\n     * This function should accept at least one parameter that will serve as an item ID\r\n     *\r\n     * @param Function loaderFunction loader function\r\n     */\r\n    setTooltipContentLoaderFunction: function (loaderFunction)\r\n    {\r\n        this._tooltipContentLoaderFunction = loaderFunction;\r\n    },\r\n\r\n    /**\r\n     * Update tooltip window content\r\n     *\r\n     * @param string content\r\n     */\r\n    _updateTooltipWindowContent: function (content)\r\n    {\r\n        this._tooltipWindowContent.update(content);\r\n    }\r\n};\r\n\r\nwindow.giftOptionsTooltip = new GiftOptionsTooltip();\r\n\r\n});\r\n","Magento_Sales/order/create/form.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Sales/order/create/scripts'\r\n], function (jQuery) {\r\n    'use strict';\r\n\r\n    var $el = jQuery('#edit_form'),\r\n        config,\r\n        baseUrl,\r\n        order,\r\n        payment;\r\n\r\n    if (!$el.length || !$el.data('order-config')) {\r\n        return;\r\n    }\r\n\r\n    config = $el.data('order-config');\r\n    baseUrl = $el.data('load-base-url');\r\n\r\n    order = new AdminOrder(config);\r\n    order.setLoadBaseUrl(baseUrl);\r\n\r\n    payment = {\r\n        switchMethod: order.switchPaymentMethod.bind(order)\r\n    };\r\n\r\n    window.order = order;\r\n    window.payment = payment;\r\n});\r\n","Magento_Sales/order/create/giftmessage.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/********************* GIFT OPTIONS POPUP ***********************/\r\n/********************* GIFT OPTIONS SET ***********************/\r\ndefine([\r\n    \"jquery\",\r\n    \"jquery/ui\",\r\n    \"mage/translate\",\r\n    \"mage/validation\",\r\n    \"prototype\"\r\n], function(jQuery){\r\n\r\nwindow.giftMessagesController = {\r\n    toogleRequired: function(source, objects)\r\n    {\r\n        if(!$(source).value.blank()) {\r\n            objects.each(function(item) {\r\n               $(item).addClassName('required-entry');\r\n               var label = findFieldLabel($(item));\r\n               if (label) {\r\n                   var span = label.down('span');\r\n                   if (!span) {\r\n                       Element.insert(label, {bottom: '&nbsp;<span class=\"required\">*</span>'});\r\n                   }\r\n               }\r\n            });\r\n        } else {\r\n            objects.each(function(item) {\r\n                if($(source).formObj && $(source).formObj.validator) {\r\n                    $(source).formObj.validator.reset(item);\r\n                }\r\n                $(item).removeClassName('required-entry');\r\n                var label = findFieldLabel($(item));\r\n                if (label) {\r\n                    var span = label.down('span');\r\n                    if (span) {\r\n                        Element.remove(span);\r\n                    }\r\n                }\r\n                // Hide validation advices if exist\r\n                if ($(item) && $(item).advices) {\r\n                    $(item).advices.each(function (pair) {\r\n                        if (pair.value != null) pair.value.hide();\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    },\r\n    toogleGiftMessage: function(container) {\r\n        if(!$(container).toogleGiftMessage) {\r\n            $(container).toogleGiftMessage = true;\r\n            $(this.getFieldId(container, 'edit')).show();\r\n            $(container).down('.action-link').addClassName('open');\r\n            $(container).down('.default-text').hide();\r\n            $(container).down('.close-text').show();\r\n        } else {\r\n            $(container).toogleGiftMessage = false;\r\n            $(this.getFieldId(container, 'message')).formObj = $(this.getFieldId(container, 'form'));\r\n            var form = jQuery('#' + this.getFieldId(container, 'form'));\r\n            jQuery('#' + this.getFieldId(container, 'form')).validate({errorClass: 'mage-error'});\r\n\r\n            if(!form.valid()) {\r\n                return false;\r\n            }\r\n\r\n            new Ajax.Request($(this.getFieldId(container, 'form')).action, {\r\n                parameters: Form.serialize($(this.getFieldId(container, 'form')), true),\r\n                loaderArea: container,\r\n                onComplete: function(transport) {\r\n\r\n                    $(container).down('.action-link').removeClassName('open');\r\n                    $(container).down('.default-text').show();\r\n                    $(container).down('.close-text').hide();\r\n                    $(this.getFieldId(container, 'edit')).hide();\r\n                    if (transport.responseText.match(/YES/g)) {\r\n                        $(container).down('.default-text').down('.edit').show();\r\n                        $(container).down('.default-text').down('.add').hide();\r\n                    } else {\r\n                        $(container).down('.default-text').down('.add').show();\r\n                        $(container).down('.default-text').down('.edit').hide();\r\n                    }\r\n\r\n                }.bind(this)\r\n            });\r\n        }\r\n\r\n        return false;\r\n    },\r\n    saveGiftMessage: function(container) {\r\n        $(this.getFieldId(container, 'message')).formObj = $(this.getFieldId(container, 'form'));\r\n\r\n        var form = jQuery('#' + this.getFieldId(container, 'form'));\r\n        form.validate({errorClass: 'mage-error'});\r\n\r\n        if(!form.valid()) {\r\n            return;\r\n        }\r\n\r\n        new Ajax.Request($(this.getFieldId(container, 'form')).action, {\r\n            parameters: Form.serialize($(this.getFieldId(container, 'form')), true),\r\n            loaderArea: container,\r\n            onSuccess: function(response) {\r\n                var message = '<div class=\"messages\"><div class=\"message message-success success\">'\r\n                    + response.responseText\r\n                    + '<div data-ui-id=\"messages-message-success\"></div></div></div>';\r\n                jQuery('#messages').html(message);\r\n                jQuery(document).scrollTop(0);\r\n            }\r\n        });\r\n    },\r\n    getFieldId: function(container, name) {\r\n        return container + '_' + name;\r\n    }\r\n};\r\n\r\nfunction findFieldLabel(field) {\r\n    var tdField = $(field).up('td');\r\n    if (tdField) {\r\n       var tdLabel = tdField.previous('td');\r\n       if (tdLabel) {\r\n           var label = tdLabel.down('label');\r\n           if (label) {\r\n               return label;\r\n           }\r\n       }\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nwindow.findFieldLabel = findFieldLabel;\r\n\r\nwindow.GiftOptionsPopup = Class.create();\r\nGiftOptionsPopup.prototype = {\r\n    //giftOptionsWindowMask: null,\r\n    giftOptionsWindow: null,\r\n\r\n    initialize: function() {\r\n        $$('.action-link').each(function (el) {\r\n            Event.observe(el, 'click', this.showItemGiftOptions.bind(this));\r\n        }, this);\r\n\r\n        // Move gift options popup to start of body, because soon it will contain FORM tag that can break DOM layout if within other FORM\r\n        var oldPopupContainer = $('gift_options_configure');\r\n        if (oldPopupContainer) {\r\n            oldPopupContainer.remove();\r\n        }\r\n\r\n        var newPopupContainer = $('gift_options_configure_new');\r\n        $(document.body).insert({top: newPopupContainer});\r\n        newPopupContainer.id = 'gift_options_configure';\r\n\r\n        // Put controls container inside a FORM tag so we can use Validator\r\n        var form = new Element('form', {action: '#', id: 'gift_options_configuration_form', method: 'post'});\r\n        var formContents = $('gift_options_form_contents');\r\n        if (formContents) {\r\n            formContents.parentNode.appendChild(form);\r\n            form.appendChild(formContents);\r\n        }\r\n\r\n        this.giftOptionsWindow = $('gift_options_configure');\r\n\r\n        jQuery(this.giftOptionsWindow).dialog({\r\n            autoOpen:   false,\r\n            modal:      true,\r\n            resizable:  false,\r\n            dialogClass: 'gift-options-popup',\r\n            minWidth:   500,\r\n            width:      '75%',\r\n            position: {\r\n                my: 'left+12.5% top',\r\n                at: 'center top',\r\n                of: 'body'\r\n            },\r\n            open: function () {\r\n                jQuery(this).closest('.ui-dialog').addClass('ui-dialog-active');\r\n\r\n                var topMargin = jQuery(this).closest('.ui-dialog').children('.ui-dialog-titlebar').outerHeight() + 30;\r\n                jQuery(this).closest('.ui-dialog').css('margin-top', topMargin);\r\n            },\r\n            close: function() {\r\n                jQuery(this).closest('.ui-dialog').removeClass('ui-dialog-active');\r\n            }\r\n        });\r\n    },\r\n\r\n    showItemGiftOptions : function(event) {\r\n        var element = Event.element(event).id;\r\n        var itemId = element.sub('gift_options_link_','');\r\n\r\n        jQuery(this.giftOptionsWindow).dialog('open');\r\n\r\n        this.setTitle(itemId);\r\n\r\n        Event.observe($('gift_options_cancel_button'), 'click', this.onCloseButton.bind(this));\r\n        Event.observe($('gift_options_ok_button'), 'click', this.onOkButton.bind(this));\r\n        Event.stop(event);\r\n    },\r\n\r\n    setTitle : function (itemId) {\r\n        var productTitleElement = $('order_item_' + itemId + '_title');\r\n        var productTitle = '';\r\n        if (productTitleElement) {\r\n            productTitle = productTitleElement.innerHTML;\r\n        }\r\n        jQuery(this.giftOptionsWindow).dialog({ title: jQuery.mage.__('Gift Options for ') + productTitle });\r\n    },\r\n\r\n    onOkButton : function() {\r\n        var giftOptionsForm = jQuery('#gift_options_configuration_form');\r\n        if (!giftOptionsForm.validate({errorClass: 'mage-error'}).valid()) {\r\n            return false;\r\n        }\r\n        if (jQuery.isFunction(giftOptionsForm[0].reset)) {\r\n            giftOptionsForm[0].reset();\r\n        }\r\n        this.closeWindow();\r\n        return true;\r\n    },\r\n\r\n    onCloseButton : function() {\r\n        this.closeWindow();\r\n    },\r\n\r\n    closeWindow : function() {\r\n        jQuery(this.giftOptionsWindow).dialog('close');\r\n    }\r\n}\r\n\r\n\r\nwindow.GiftMessageSet = Class.create();\r\n\r\nGiftMessageSet.prototype = {\r\n    destPrefix: 'current_item_giftmessage_',\r\n    sourcePrefix: 'giftmessage_',\r\n    fields: ['sender', 'recipient', 'message'],\r\n    isObserved: false,\r\n    callback: null,\r\n\r\n    initialize: function() {\r\n        $$('.action-link').each(function (el) {\r\n            Event.observe(el, 'click', this.setData.bind(this));\r\n        }, this);\r\n    },\r\n\r\n    setData: function(event) {\r\n        var element = Event.element(event).id;\r\n        this.id = element.sub('gift_options_link_','');\r\n\r\n        if ($('gift-message-form-data-' + this.id)) {\r\n            this.fields.each(function(el) {\r\n                if ($(this.sourcePrefix + this.id + '_' + el) && $(this.destPrefix + el)) {\r\n                    $(this.destPrefix + el).value = $(this.sourcePrefix + this.id + '_' + el).value\r\n                }\r\n            }, this);\r\n            $('gift_options_giftmessage').show();\r\n        } else if ($('gift_options_giftmessage')) {\r\n            $('gift_options_giftmessage').hide();\r\n        }\r\n\r\n        if (!this.isObserved) {\r\n            Event.observe('gift_options_ok_button', 'click', this.saveData.bind(this));\r\n            this.isObserved = true;\r\n        }\r\n    },\r\n\r\n    prepareSaveData: function() {\r\n        var hash = $H();\r\n        $$(\"div[id^=gift_options_data_]\").each(function (el) {\r\n            var fields = el.select('input', 'select', 'textarea');\r\n            var data = Form.serializeElements(fields, true);\r\n            hash.update(data);\r\n        });\r\n        return hash;\r\n    },\r\n\r\n    setSaveCallback: function(callback) {\r\n        if (typeof callback == 'function') {\r\n            this.callback = callback;\r\n        }\r\n    },\r\n\r\n    saveData: function(event){\r\n        this.fields.each(function(el) {\r\n            if ($(this.sourcePrefix + this.id + '_' + el) && $(this.destPrefix + el)) {\r\n                $(this.sourcePrefix + this.id + '_' + el).value = $(this.destPrefix + el).value;\r\n            }\r\n        }, this);\r\n        if ($(this.sourcePrefix + this.id + '_form')) {\r\n            $(this.sourcePrefix + this.id + '_form').request();\r\n        } else if (typeof(order) != 'undefined') {\r\n            var data = this.prepareSaveData();\r\n            var self = this;\r\n            jQuery.when(order.loadArea(['items'], true, data.toObject())).done(function() {\r\n                if (self.callback !== null) {\r\n                    self.callback();\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\n});\r\n","Magento_Sales/order/create/scripts.js":"// jscs:disable\r\n/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    \"jquery\",\r\n    'Magento_Ui/js/modal/confirm',\r\n    'Magento_Ui/js/modal/alert',\r\n    \"mage/translate\",\r\n    \"prototype\",\r\n    \"Magento_Catalog/catalog/product/composite/configure\",\r\n    'Magento_Ui/js/lib/view/utils/async'\r\n], function(jQuery, confirm, alert){\r\n\r\n    window.AdminOrder = new Class.create();\r\n\r\n    AdminOrder.prototype = {\r\n        initialize : function(data){\r\n            if(!data) data = {};\r\n            this.loadBaseUrl    = false;\r\n            this.customerId     = data.customer_id ? data.customer_id : false;\r\n            this.storeId        = data.store_id ? data.store_id : false;\r\n            this.currencyId     = false;\r\n            this.currencySymbol = data.currency_symbol ? data.currency_symbol : '';\r\n            this.addresses      = data.addresses ? data.addresses : $H({});\r\n            this.shippingAsBilling = data.shippingAsBilling ? data.shippingAsBilling : false;\r\n            this.gridProducts   = $H({});\r\n            this.gridProductsGift = $H({});\r\n            this.billingAddressContainer = '';\r\n            this.shippingAddressContainer= '';\r\n            this.isShippingMethodReseted = data.shipping_method_reseted ? data.shipping_method_reseted : false;\r\n            this.overlayData = $H({});\r\n            this.giftMessageDataChanged = false;\r\n            this.productConfigureAddFields = {};\r\n            this.productPriceBase = {};\r\n            this.collectElementsValue = true;\r\n            this.isOnlyVirtualProduct = false;\r\n            this.excludedPaymentMethods = [];\r\n            this.summarizePrice = true;\r\n            jQuery.async('#order-items', (function(){\r\n                this.dataArea = new OrderFormArea('data', $(this.getAreaId('data')), this);\r\n                this.itemsArea = Object.extend(new OrderFormArea('items', $(this.getAreaId('items')), this), {\r\n                    addControlButton: function(button){\r\n                        var controlButtonArea = $(this.node).select('.actions')[0];\r\n                        if (typeof controlButtonArea != 'undefined') {\r\n                            var buttons = controlButtonArea.childElements();\r\n                            for (var i = 0; i < buttons.length; i++) {\r\n                                if (buttons[i].innerHTML.include(button.label)) {\r\n                                    return ;\r\n                                }\r\n                            }\r\n                            button.insertIn(controlButtonArea, 'top');\r\n                        }\r\n                    }\r\n                });\r\n\r\n                var searchButton = new ControlButton(jQuery.mage.__('Add Products')),\r\n                    searchAreaId = this.getAreaId('search');\r\n                searchButton.onClick = function() {\r\n                    $(searchAreaId).show();\r\n                    var el = this;\r\n                    window.setTimeout(function () {\r\n                        el.remove();\r\n                    }, 10);\r\n                };\r\n\r\n                if (jQuery('#' + this.getAreaId('items')).is(':visible')) {\r\n                    this.dataArea.onLoad = this.dataArea.onLoad.wrap(function(proceed) {\r\n                        proceed();\r\n                        this._parent.itemsArea.setNode($(this._parent.getAreaId('items')));\r\n                        this._parent.itemsArea.onLoad();\r\n                    });\r\n\r\n                    this.itemsArea.onLoad = this.itemsArea.onLoad.wrap(function(proceed) {\r\n                        proceed();\r\n                        if ($(searchAreaId) && !$(searchAreaId).visible()) {\r\n                            this.addControlButton(searchButton);\r\n                        }\r\n                    });\r\n                    this.areasLoaded();\r\n                    this.itemsArea.onLoad();\r\n                }\r\n            }).bind(this));\r\n\r\n            jQuery('#edit_form')\r\n                .on('submitOrder', function(){\r\n                    jQuery(this).trigger('realOrder');\r\n                })\r\n                .on('realOrder', this._realSubmit.bind(this));\r\n        },\r\n\r\n        areasLoaded: function(){\r\n        },\r\n\r\n        itemsLoaded: function(){\r\n        },\r\n\r\n        dataLoaded: function(){\r\n            this.dataShow();\r\n        },\r\n\r\n        setLoadBaseUrl : function(url){\r\n            this.loadBaseUrl = url;\r\n        },\r\n\r\n        setAddresses : function(addresses){\r\n            this.addresses = addresses;\r\n        },\r\n\r\n        addExcludedPaymentMethod : function(method){\r\n            this.excludedPaymentMethods.push(method);\r\n        },\r\n\r\n        setCustomerId : function(id){\r\n            this.customerId = id;\r\n            this.loadArea('header', true);\r\n            $(this.getAreaId('header')).callback = 'setCustomerAfter';\r\n            $('back_order_top_button').hide();\r\n            $('reset_order_top_button').show();\r\n        },\r\n\r\n        setCustomerAfter : function () {\r\n            this.customerSelectorHide();\r\n            if (this.storeId) {\r\n                $(this.getAreaId('data')).callback = 'dataLoaded';\r\n                this.loadArea(['data'], true);\r\n            }\r\n            else {\r\n                this.storeSelectorShow();\r\n            }\r\n        },\r\n\r\n        setStoreId : function(id){\r\n            this.storeId = id;\r\n            this.storeSelectorHide();\r\n            this.sidebarShow();\r\n            //this.loadArea(['header', 'sidebar','data'], true);\r\n            this.dataShow();\r\n            this.loadArea(['header', 'data'], true);\r\n        },\r\n\r\n        setCurrencyId : function(id){\r\n            this.currencyId = id;\r\n            //this.loadArea(['sidebar', 'data'], true);\r\n            this.loadArea(['data'], true);\r\n        },\r\n\r\n        setCurrencySymbol : function(symbol){\r\n            this.currencySymbol = symbol;\r\n        },\r\n\r\n        selectAddress : function(el, container){\r\n            id = el.value;\r\n            if (id.length == 0) {\r\n                id = '0';\r\n            }\r\n            if(this.addresses[id]){\r\n                this.fillAddressFields(container, this.addresses[id]);\r\n            }\r\n            else{\r\n                this.fillAddressFields(container, {});\r\n            }\r\n\r\n            var data = this.serializeData(container);\r\n            data[el.name] = id;\r\n            if(this.isShippingField(container) && !this.isShippingMethodReseted){\r\n                this.resetShippingMethod(data);\r\n            }\r\n            else{\r\n                this.saveData(data);\r\n            }\r\n        },\r\n\r\n        isShippingField : function(fieldId){\r\n            if(this.shippingAsBilling){\r\n                return fieldId.include('billing');\r\n            }\r\n            return fieldId.include('shipping');\r\n        },\r\n\r\n        isBillingField : function(fieldId){\r\n            return fieldId.include('billing');\r\n        },\r\n\r\n        bindAddressFields : function(container) {\r\n            var fields = $(container).select('input', 'select', 'textarea');\r\n            for(var i=0;i<fields.length;i++){\r\n                Event.observe(fields[i], 'change', this.changeAddressField.bind(this));\r\n            }\r\n        },\r\n\r\n        changeAddressField : function(event){\r\n            var field = Event.element(event);\r\n            var re = /[^\\[]*\\[([^\\]]*)_address\\]\\[([^\\]]*)\\](\\[(\\d)\\])?/;\r\n            var matchRes = field.name.match(re);\r\n\r\n            if (!matchRes) {\r\n                return;\r\n            }\r\n\r\n            var type = matchRes[1];\r\n            var name = matchRes[2];\r\n            var data;\r\n\r\n            if(this.isBillingField(field.id)){\r\n                data = this.serializeData(this.billingAddressContainer)\r\n            }\r\n            else{\r\n                data = this.serializeData(this.shippingAddressContainer)\r\n            }\r\n            data = data.toObject();\r\n\r\n            if( (type == 'billing' && this.shippingAsBilling)\r\n                || (type == 'shipping' && !this.shippingAsBilling) ) {\r\n                data['reset_shipping'] = true;\r\n            }\r\n\r\n            data['order['+type+'_address][customer_address_id]'] = $('order-'+type+'_address_customer_address_id').value;\r\n\r\n            if (data['reset_shipping']) {\r\n                this.resetShippingMethod(data);\r\n            } else {\r\n                this.saveData(data);\r\n                if (name == 'country_id' || name == 'customer_address_id') {\r\n                    this.loadArea(['shipping_method', 'billing_method', 'totals', 'items'], true, data);\r\n                }\r\n                // added for reloading of default sender and default recipient for giftmessages\r\n                //this.loadArea(['giftmessage'], true, data);\r\n            }\r\n        },\r\n\r\n        fillAddressFields : function(container, data){\r\n            var regionIdElem = false;\r\n            var regionIdElemValue = false;\r\n\r\n            var fields = $(container).select('input', 'select', 'textarea');\r\n            var re = /[^\\[]*\\[[^\\]]*\\]\\[([^\\]]*)\\](\\[(\\d)\\])?/;\r\n            for(var i=0;i<fields.length;i++){\r\n                // skip input type file @Security error code: 1000\r\n                if (fields[i].tagName.toLowerCase() == 'input' && fields[i].type.toLowerCase() == 'file') {\r\n                    continue;\r\n                }\r\n                var matchRes = fields[i].name.match(re);\r\n                if (matchRes === null) {\r\n                    continue;\r\n                }\r\n                var name = matchRes[1];\r\n                var index = matchRes[3];\r\n\r\n                if (index){\r\n                    // multiply line\r\n                    if (data[name]){\r\n                        var values = data[name].split(\"\\n\");\r\n                        fields[i].value = values[index] ? values[index] : '';\r\n                    } else {\r\n                        fields[i].value = '';\r\n                    }\r\n                } else if (fields[i].tagName.toLowerCase() == 'select' && fields[i].multiple) {\r\n                    // multiselect\r\n                    if (data[name]) {\r\n                        values = [''];\r\n                        if (Object.isString(data[name])) {\r\n                            values = data[name].split(',');\r\n                        } else if (Object.isArray(data[name])) {\r\n                            values = data[name];\r\n                        }\r\n                        fields[i].setValue(values);\r\n                    }\r\n                } else {\r\n                    fields[i].setValue(data[name] ? data[name] : '');\r\n                }\r\n\r\n                if (fields[i].changeUpdater) fields[i].changeUpdater();\r\n                if (name == 'region' && data['region_id'] && !data['region']){\r\n                    fields[i].value = data['region_id'];\r\n                }\r\n            }\r\n        },\r\n\r\n        disableShippingAddress : function(flag) {\r\n            this.shippingAsBilling = flag;\r\n            if ($('order-shipping_address_customer_address_id')) {\r\n                $('order-shipping_address_customer_address_id').disabled = flag;\r\n            }\r\n            if ($(this.shippingAddressContainer)) {\r\n                var dataFields = $(this.shippingAddressContainer).select('input', 'select', 'textarea');\r\n                for (var i = 0; i < dataFields.length; i++) {\r\n                    dataFields[i].disabled = flag;\r\n\r\n                    if(this.isOnlyVirtualProduct) {\r\n                        dataFields[i].setValue('');\r\n                    }\r\n                }\r\n                var buttons = $(this.shippingAddressContainer).select('button');\r\n                // Add corresponding class to buttons while disabling them\r\n                for (i = 0; i < buttons.length; i++) {\r\n                    buttons[i].disabled = flag;\r\n                    if (flag) {\r\n                        buttons[i].addClassName('disabled');\r\n                    } else {\r\n                        buttons[i].removeClassName('disabled');\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        setShippingAsBilling : function(flag){\r\n            var data;\r\n            var areasToLoad = ['billing_method', 'shipping_address', 'totals', 'giftmessage'];\r\n            this.disableShippingAddress(flag);\r\n            if(flag){\r\n                data = this.serializeData(this.billingAddressContainer);\r\n            } else {\r\n                data = this.serializeData(this.shippingAddressContainer);\r\n                areasToLoad.push('shipping_method');\r\n            }\r\n            data = data.toObject();\r\n            data['shipping_as_billing'] = flag ? 1 : 0;\r\n            data['reset_shipping'] = 1;\r\n            this.loadArea( areasToLoad, true, data);\r\n        },\r\n\r\n        resetShippingMethod : function(data){\r\n            var areasToLoad = ['billing_method', 'shipping_address', 'totals', 'giftmessage', 'items'];\r\n            if(!this.isOnlyVirtualProduct) {\r\n                areasToLoad.push('shipping_method');\r\n                areasToLoad.push('shipping_address');\r\n            }\r\n\r\n            data['reset_shipping'] = 1;\r\n            this.isShippingMethodReseted = true;\r\n            this.loadArea(areasToLoad, true, data);\r\n        },\r\n\r\n        loadShippingRates : function(){\r\n            this.isShippingMethodReseted = false;\r\n            this.loadArea(['shipping_method', 'totals'], true, {collect_shipping_rates: 1});\r\n        },\r\n\r\n        setShippingMethod : function(method){\r\n            var data = {};\r\n            data['order[shipping_method]'] = method;\r\n            this.loadArea(['shipping_method', 'totals', 'billing_method'], true, data);\r\n        },\r\n\r\n        switchPaymentMethod : function(method){\r\n            jQuery('#edit_form')\r\n                .off('submitOrder')\r\n                .on('submitOrder', function(){\r\n                    jQuery(this).trigger('realOrder');\r\n                });\r\n            jQuery('#edit_form').trigger('changePaymentMethod', [method]);\r\n            this.setPaymentMethod(method);\r\n            var data = {};\r\n            data['order[payment_method]'] = method;\r\n            this.loadArea(['card_validation'], true, data);\r\n        },\r\n\r\n        setPaymentMethod : function(method){\r\n            if (this.paymentMethod && $('payment_form_'+this.paymentMethod)) {\r\n                var form = 'payment_form_'+this.paymentMethod;\r\n                [form + '_before', form, form + '_after'].each(function(el) {\r\n                    var block = $(el);\r\n                    if (block) {\r\n                        block.hide();\r\n                        block.select('input', 'select', 'textarea').each(function(field) {\r\n                            field.disabled = true;\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n\r\n            if(!this.paymentMethod || method){\r\n                $('order-billing_method_form').select('input', 'select', 'textarea').each(function(elem){\r\n                    if(elem.type != 'radio') elem.disabled = true;\r\n                })\r\n            }\r\n\r\n            if ($('payment_form_'+method)){\r\n                jQuery('#' + this.getAreaId('billing_method')).trigger('contentUpdated');\r\n                this.paymentMethod = method;\r\n                var form = 'payment_form_'+method;\r\n                [form + '_before', form, form + '_after'].each(function(el) {\r\n                    var block = $(el);\r\n                    if (block) {\r\n                        block.show();\r\n                        block.select('input', 'select', 'textarea').each(function(field) {\r\n                            field.disabled = false;\r\n                            if (!el.include('_before') && !el.include('_after') && !field.bindChange) {\r\n                                field.bindChange = true;\r\n                                field.paymentContainer = form;\r\n                                field.method = method;\r\n                                field.observe('change', this.changePaymentData.bind(this))\r\n                            }\r\n                        },this);\r\n                    }\r\n                },this);\r\n            }\r\n        },\r\n\r\n        changePaymentData : function(event){\r\n            var elem = Event.element(event);\r\n            if(elem && elem.method){\r\n                var data = this.getPaymentData(elem.method);\r\n                if (data) {\r\n                    this.loadArea(['card_validation'], true, data);\r\n                } else {\r\n                    return;\r\n                }\r\n            }\r\n        },\r\n\r\n        getPaymentData : function(currentMethod){\r\n            if (typeof(currentMethod) == 'undefined') {\r\n                if (this.paymentMethod) {\r\n                    currentMethod = this.paymentMethod;\r\n                } else {\r\n                    return false;\r\n                }\r\n            }\r\n            if (this.isPaymentValidationAvailable() == false) {\r\n                return false;\r\n            }\r\n            var data = {};\r\n            var fields = $('payment_form_' + currentMethod).select('input', 'select');\r\n            for(var i=0;i<fields.length;i++){\r\n                data[fields[i].name] = fields[i].getValue();\r\n            }\r\n            if ((typeof data['payment[cc_type]']) != 'undefined' && (!data['payment[cc_type]'] || !data['payment[cc_number]'])) {\r\n                return false;\r\n            }\r\n            return data;\r\n        },\r\n\r\n        applyCoupon : function(code){\r\n            this.loadArea(['items', 'shipping_method', 'totals', 'billing_method'], true, {'order[coupon][code]':code, reset_shipping: 0});\r\n            this.orderItemChanged = false;\r\n        },\r\n\r\n        addProduct : function(id){\r\n            this.loadArea(['items', 'shipping_method', 'totals', 'billing_method'], true, {add_product:id, reset_shipping: true});\r\n        },\r\n\r\n        removeQuoteItem : function(id){\r\n            this.loadArea(['items', 'shipping_method', 'totals', 'billing_method'], true,\r\n                {remove_item:id, from:'quote',reset_shipping: true});\r\n        },\r\n\r\n        moveQuoteItem : function(id, to){\r\n            this.loadArea(['sidebar_'+to, 'items', 'shipping_method', 'totals', 'billing_method'], this.getAreaId('items'),\r\n                {move_item:id, to:to, reset_shipping: true});\r\n        },\r\n\r\n        productGridShow : function(buttonElement){\r\n            this.productGridShowButton = buttonElement;\r\n            Element.hide(buttonElement);\r\n            this.showArea('search');\r\n        },\r\n\r\n        productGridRowInit : function(grid, row){\r\n            var checkbox = $(row).select('.checkbox')[0];\r\n            var inputs = $(row).select('.input-text');\r\n            if (checkbox && inputs.length > 0) {\r\n                checkbox.inputElements = inputs;\r\n                for (var i = 0; i < inputs.length; i++) {\r\n                    var input = inputs[i];\r\n                    input.checkboxElement = checkbox;\r\n\r\n                    var product = this.gridProducts.get(checkbox.value);\r\n                    if (product) {\r\n                        var defaultValue = product[input.name];\r\n                        if (defaultValue) {\r\n                            if (input.name == 'giftmessage') {\r\n                                input.checked = true;\r\n                            } else {\r\n                                input.value = defaultValue;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    input.disabled = !checkbox.checked || input.hasClassName('input-inactive');\r\n\r\n                    Event.observe(input,'keyup', this.productGridRowInputChange.bind(this));\r\n                    Event.observe(input,'change',this.productGridRowInputChange.bind(this));\r\n                }\r\n            }\r\n        },\r\n\r\n        productGridRowInputChange : function(event){\r\n            var element = Event.element(event);\r\n            if (element && element.checkboxElement && element.checkboxElement.checked){\r\n                if (element.name!='giftmessage' || element.checked) {\r\n                    this.gridProducts.get(element.checkboxElement.value)[element.name] = element.value;\r\n                } else if (element.name=='giftmessage' && this.gridProducts.get(element.checkboxElement.value)[element.name]) {\r\n                    delete(this.gridProducts.get(element.checkboxElement.value)[element.name]);\r\n                }\r\n            }\r\n        },\r\n\r\n        productGridRowClick : function(grid, event){\r\n            var trElement = Event.findElement(event, 'tr');\r\n            var qtyElement = trElement.select('input[name=\"qty\"]')[0];\r\n            var eventElement = Event.element(event);\r\n            var isInputCheckbox = eventElement.tagName == 'INPUT' && eventElement.type == 'checkbox';\r\n            var isInputQty = eventElement.tagName == 'INPUT' && eventElement.name == 'qty';\r\n            if (trElement && !isInputQty) {\r\n                var checkbox = Element.select(trElement, 'input[type=\"checkbox\"]')[0];\r\n                var confLink = Element.select(trElement, 'a')[0];\r\n                var priceColl = Element.select(trElement, '.price')[0];\r\n                if (checkbox) {\r\n                    // processing non composite product\r\n                    if (confLink.readAttribute('disabled')) {\r\n                        var checked = isInputCheckbox ? checkbox.checked : !checkbox.checked;\r\n                        grid.setCheckboxChecked(checkbox, checked);\r\n                        // processing composite product\r\n                    } else if (isInputCheckbox && !checkbox.checked) {\r\n                        grid.setCheckboxChecked(checkbox, false);\r\n                        // processing composite product\r\n                    } else if (!isInputCheckbox || (isInputCheckbox && checkbox.checked)) {\r\n                        var listType = confLink.readAttribute('list_type');\r\n                        var productId = confLink.readAttribute('product_id');\r\n                        if (typeof this.productPriceBase[productId] == 'undefined') {\r\n                            var priceBase = priceColl.innerHTML.match(/.*?([\\d,]+\\.?\\d*)/);\r\n                            if (!priceBase) {\r\n                                this.productPriceBase[productId] = 0;\r\n                            } else {\r\n                                this.productPriceBase[productId] = parseFloat(priceBase[1].replace(/,/g,''));\r\n                            }\r\n                        }\r\n                        productConfigure.setConfirmCallback(listType, function() {\r\n                            // sync qty of popup and qty of grid\r\n                            var confirmedCurrentQty = productConfigure.getCurrentConfirmedQtyElement();\r\n                            if (qtyElement && confirmedCurrentQty && !isNaN(confirmedCurrentQty.value)) {\r\n                                qtyElement.value = confirmedCurrentQty.value;\r\n                            }\r\n                            // calc and set product price\r\n                            var productPrice = this._calcProductPrice();\r\n                            if (this._isSummarizePrice()) {\r\n                                productPrice += this.productPriceBase[productId];\r\n                            }\r\n                            productPrice = parseFloat(Math.round(productPrice + \"e+2\") + \"e-2\");\r\n                            priceColl.innerHTML = this.currencySymbol + productPrice.toFixed(2);\r\n                            // and set checkbox checked\r\n                            grid.setCheckboxChecked(checkbox, true);\r\n                        }.bind(this));\r\n                        productConfigure.setCancelCallback(listType, function() {\r\n                            if (!$(productConfigure.confirmedCurrentId) || !$(productConfigure.confirmedCurrentId).innerHTML) {\r\n                                grid.setCheckboxChecked(checkbox, false);\r\n                            }\r\n                        });\r\n                        productConfigure.setShowWindowCallback(listType, function() {\r\n                            // sync qty of grid and qty of popup\r\n                            var formCurrentQty = productConfigure.getCurrentFormQtyElement();\r\n                            if (formCurrentQty && qtyElement && !isNaN(qtyElement.value)) {\r\n                                formCurrentQty.value = qtyElement.value;\r\n                            }\r\n                        }.bind(this));\r\n                        productConfigure.showItemConfiguration(listType, productId);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Is need to summarize price\r\n         */\r\n        _isSummarizePrice: function(elm) {\r\n            if (elm && elm.hasAttribute('summarizePrice')) {\r\n                this.summarizePrice = parseInt(elm.readAttribute('summarizePrice'));\r\n            }\r\n            return this.summarizePrice;\r\n        },\r\n        /**\r\n         * Calc product price through its options\r\n         */\r\n        _calcProductPrice: function () {\r\n            var productPrice = 0;\r\n            var getPriceFields = function (elms) {\r\n                var productPrice = 0;\r\n                var getPrice = function (elm) {\r\n                    var optQty = 1;\r\n                    if (elm.hasAttribute('qtyId')) {\r\n                        if (!$(elm.getAttribute('qtyId')).value) {\r\n                            return 0;\r\n                        } else {\r\n                            optQty = parseFloat($(elm.getAttribute('qtyId')).value);\r\n                        }\r\n                    }\r\n                    if (elm.hasAttribute('price') && !elm.disabled) {\r\n                        return parseFloat(elm.readAttribute('price')) * optQty;\r\n                    }\r\n                    return 0;\r\n                };\r\n                for(var i = 0; i < elms.length; i++) {\r\n                    if (elms[i].type == 'select-one' || elms[i].type == 'select-multiple') {\r\n                        for(var ii = 0; ii < elms[i].options.length; ii++) {\r\n                            if (elms[i].options[ii].selected) {\r\n                                if (this._isSummarizePrice(elms[i].options[ii])) {\r\n                                    productPrice += getPrice(elms[i].options[ii]);\r\n                                } else {\r\n                                    productPrice = getPrice(elms[i].options[ii]);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (((elms[i].type == 'checkbox' || elms[i].type == 'radio') && elms[i].checked)\r\n                        || ((elms[i].type == 'file' || elms[i].type == 'text' || elms[i].type == 'textarea' || elms[i].type == 'hidden')\r\n                        && Form.Element.getValue(elms[i]))\r\n                    ) {\r\n                        if (this._isSummarizePrice(elms[i])) {\r\n                            productPrice += getPrice(elms[i]);\r\n                        } else {\r\n                            productPrice = getPrice(elms[i]);\r\n                        }\r\n                    }\r\n                }\r\n                return productPrice;\r\n            }.bind(this);\r\n            productPrice += getPriceFields($(productConfigure.confirmedCurrentId).getElementsByTagName('input'));\r\n            productPrice += getPriceFields($(productConfigure.confirmedCurrentId).getElementsByTagName('select'));\r\n            productPrice += getPriceFields($(productConfigure.confirmedCurrentId).getElementsByTagName('textarea'));\r\n            return productPrice;\r\n        },\r\n\r\n        productGridCheckboxCheck : function(grid, element, checked){\r\n            if (checked) {\r\n                if(element.inputElements) {\r\n                    this.gridProducts.set(element.value, {});\r\n                    var product = this.gridProducts.get(element.value);\r\n                    for (var i = 0; i < element.inputElements.length; i++) {\r\n                        var input = element.inputElements[i];\r\n                        if (!input.hasClassName('input-inactive')) {\r\n                            input.disabled = false;\r\n                            if (input.name == 'qty' && !input.value) {\r\n                                input.value = 1;\r\n                            }\r\n                        }\r\n\r\n                        if (input.checked || input.name != 'giftmessage') {\r\n                            product[input.name] = input.value;\r\n                        } else if (product[input.name]) {\r\n                            delete(product[input.name]);\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                if(element.inputElements){\r\n                    for(var i = 0; i < element.inputElements.length; i++) {\r\n                        element.inputElements[i].disabled = true;\r\n                    }\r\n                }\r\n                this.gridProducts.unset(element.value);\r\n            }\r\n            grid.reloadParams = {'products[]':this.gridProducts.keys()};\r\n        },\r\n\r\n        /**\r\n         * Submit configured products to quote\r\n         */\r\n        productGridAddSelected : function(){\r\n            if(this.productGridShowButton) Element.show(this.productGridShowButton);\r\n            var area = ['search', 'items', 'shipping_method', 'totals', 'giftmessage','billing_method'];\r\n            // prepare additional fields and filtered items of products\r\n            var fieldsPrepare = {};\r\n            var itemsFilter = [];\r\n            var products = this.gridProducts.toObject();\r\n            for (var productId in products) {\r\n                itemsFilter.push(productId);\r\n                var paramKey = 'item['+productId+']';\r\n                for (var productParamKey in products[productId]) {\r\n                    paramKey += '['+productParamKey+']';\r\n                    fieldsPrepare[paramKey] = products[productId][productParamKey];\r\n                }\r\n            }\r\n            this.productConfigureSubmit('product_to_add', area, fieldsPrepare, itemsFilter);\r\n            productConfigure.clean('quote_items');\r\n            this.hideArea('search');\r\n            this.gridProducts = $H({});\r\n        },\r\n\r\n        selectCustomer : function(grid, event){\r\n            var element = Event.findElement(event, 'tr');\r\n            if (element.title){\r\n                this.setCustomerId(element.title);\r\n            }\r\n        },\r\n\r\n        customerSelectorHide : function(){\r\n            this.hideArea('customer-selector');\r\n        },\r\n\r\n        customerSelectorShow : function(){\r\n            this.showArea('customer-selector');\r\n        },\r\n\r\n        storeSelectorHide : function(){\r\n            this.hideArea('store-selector');\r\n        },\r\n\r\n        storeSelectorShow : function(){\r\n            this.showArea('store-selector');\r\n        },\r\n\r\n        dataHide : function(){\r\n            this.hideArea('data');\r\n        },\r\n\r\n        dataShow : function(){\r\n            if ($('submit_order_top_button')) {\r\n                $('submit_order_top_button').show();\r\n            }\r\n            this.showArea('data');\r\n        },\r\n\r\n        clearShoppingCart : function(confirmMessage){\r\n            var self = this;\r\n\r\n            confirm({\r\n                content: confirmMessage,\r\n                actions: {\r\n                    confirm: function() {\r\n                        self.collectElementsValue = false;\r\n                        order.sidebarApplyChanges({'sidebar[empty_customer_cart]': 1});\r\n                        self.collectElementsValue = true;\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        sidebarApplyChanges : function(auxiliaryParams) {\r\n            if ($(this.getAreaId('sidebar'))) {\r\n                var data = {};\r\n                if (this.collectElementsValue) {\r\n                    var elems = $(this.getAreaId('sidebar')).select('input');\r\n                    for (var i=0; i < elems.length; i++) {\r\n                        if (elems[i].getValue()) {\r\n                            data[elems[i].name] = elems[i].getValue();\r\n                        }\r\n                    }\r\n                }\r\n                if (auxiliaryParams instanceof Object) {\r\n                    for (var paramName in auxiliaryParams) {\r\n                        data[paramName] = String(auxiliaryParams[paramName]);\r\n                    }\r\n                }\r\n                data.reset_shipping = true;\r\n                this.loadArea(['sidebar', 'items', 'shipping_method', 'billing_method','totals', 'giftmessage'], true, data);\r\n            }\r\n        },\r\n\r\n        sidebarHide : function(){\r\n            if(this.storeId === false && $('page:left') && $('page:container')){\r\n                $('page:left').hide();\r\n                $('page:container').removeClassName('container');\r\n                $('page:container').addClassName('container-collapsed');\r\n            }\r\n        },\r\n\r\n        sidebarShow : function(){\r\n            if($('page:left') && $('page:container')){\r\n                $('page:left').show();\r\n                $('page:container').removeClassName('container-collapsed');\r\n                $('page:container').addClassName('container');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Show configuration of product and add handlers on submit form\r\n         *\r\n         * @param productId\r\n         */\r\n        sidebarConfigureProduct: function (listType, productId, itemId) {\r\n            // create additional fields\r\n            var params = {};\r\n            params.reset_shipping = true;\r\n            params.add_product = productId;\r\n            this.prepareParams(params);\r\n            for (var i in params) {\r\n                if (params[i] === null) {\r\n                    unset(params[i]);\r\n                } else if (typeof(params[i]) == 'boolean') {\r\n                    params[i] = params[i] ? 1 : 0;\r\n                }\r\n            }\r\n            var fields = [];\r\n            for (var name in params) {\r\n                fields.push(new Element('input', {type: 'hidden', name: name, value: params[name]}));\r\n            }\r\n            // add additional fields before triggered submit\r\n            productConfigure.setBeforeSubmitCallback(listType, function() {\r\n                productConfigure.addFields(fields);\r\n            }.bind(this));\r\n            // response handler\r\n            productConfigure.setOnLoadIFrameCallback(listType, function(response) {\r\n                if (!response.ok) {\r\n                    return;\r\n                }\r\n                this.loadArea(['items', 'shipping_method', 'billing_method','totals', 'giftmessage'], true);\r\n            }.bind(this));\r\n            // show item configuration\r\n            itemId = itemId ? itemId : productId;\r\n            productConfigure.showItemConfiguration(listType, itemId);\r\n            return false;\r\n        },\r\n\r\n        removeSidebarItem : function(id, from){\r\n            this.loadArea(['sidebar_'+from], 'sidebar_data_'+from, {remove_item:id, from:from});\r\n        },\r\n\r\n        itemsUpdate : function(){\r\n            var area = ['sidebar', 'items', 'shipping_method', 'billing_method','totals', 'giftmessage'];\r\n            // prepare additional fields\r\n            var fieldsPrepare = {update_items: 1};\r\n            var info = $('order-items_grid').select('input', 'select', 'textarea');\r\n            for(var i=0; i<info.length; i++){\r\n                if(!info[i].disabled && (info[i].type != 'checkbox' || info[i].checked)) {\r\n                    fieldsPrepare[info[i].name] = info[i].getValue();\r\n                }\r\n            }\r\n            fieldsPrepare = Object.extend(fieldsPrepare, this.productConfigureAddFields);\r\n            this.productConfigureSubmit('quote_items', area, fieldsPrepare);\r\n            this.orderItemChanged = false;\r\n        },\r\n\r\n        itemsOnchangeBind : function(){\r\n            var elems = $('order-items_grid').select('input', 'select', 'textarea');\r\n            for(var i=0; i<elems.length; i++){\r\n                if(!elems[i].bindOnchange){\r\n                    elems[i].bindOnchange = true;\r\n                    elems[i].observe('change', this.itemChange.bind(this))\r\n                }\r\n            }\r\n        },\r\n\r\n        itemChange : function(event){\r\n            this.giftmessageOnItemChange(event);\r\n            this.orderItemChanged = true;\r\n        },\r\n\r\n        /**\r\n         * Submit batch of configured products\r\n         *\r\n         * @param listType\r\n         * @param area\r\n         * @param fieldsPrepare\r\n         * @param itemsFilter\r\n         */\r\n        productConfigureSubmit : function(listType, area, fieldsPrepare, itemsFilter) {\r\n            // prepare loading areas and build url\r\n            area = this.prepareArea(area);\r\n            this.loadingAreas = area;\r\n            var url = this.loadBaseUrl + 'block/' + area + '?isAjax=true';\r\n\r\n            // prepare additional fields\r\n            fieldsPrepare = this.prepareParams(fieldsPrepare);\r\n            fieldsPrepare.reset_shipping = 1;\r\n            fieldsPrepare.json = 1;\r\n\r\n            // create fields\r\n            var fields = [];\r\n            for (var name in fieldsPrepare) {\r\n                fields.push(new Element('input', {type: 'hidden', name: name, value: fieldsPrepare[name]}));\r\n            }\r\n            productConfigure.addFields(fields);\r\n\r\n            // filter items\r\n            if (itemsFilter) {\r\n                productConfigure.addItemsFilter(listType, itemsFilter);\r\n            }\r\n\r\n            // prepare and do submit\r\n            productConfigure.addListType(listType, {urlSubmit: url});\r\n            productConfigure.setOnLoadIFrameCallback(listType, function(response){\r\n                this.loadAreaResponseHandler(response);\r\n            }.bind(this));\r\n            productConfigure.submit(listType);\r\n            // clean\r\n            this.productConfigureAddFields = {};\r\n        },\r\n\r\n        /**\r\n         * Show configuration of quote item\r\n         *\r\n         * @param itemId\r\n         */\r\n        showQuoteItemConfiguration: function(itemId){\r\n            var listType = 'quote_items';\r\n            var qtyElement = $('order-items_grid').select('input[name=\"item\\['+itemId+'\\]\\[qty\\]\"]')[0];\r\n            productConfigure.setConfirmCallback(listType, function() {\r\n                // sync qty of popup and qty of grid\r\n                var confirmedCurrentQty = productConfigure.getCurrentConfirmedQtyElement();\r\n                if (qtyElement && confirmedCurrentQty && !isNaN(confirmedCurrentQty.value)) {\r\n                    qtyElement.value = confirmedCurrentQty.value;\r\n                }\r\n                this.productConfigureAddFields['item['+itemId+'][configured]'] = 1;\r\n\r\n            }.bind(this));\r\n            productConfigure.setShowWindowCallback(listType, function() {\r\n                // sync qty of grid and qty of popup\r\n                var formCurrentQty = productConfigure.getCurrentFormQtyElement();\r\n                if (formCurrentQty && qtyElement && !isNaN(qtyElement.value)) {\r\n                    formCurrentQty.value = qtyElement.value;\r\n                }\r\n            }.bind(this));\r\n            productConfigure.showItemConfiguration(listType, itemId);\r\n        },\r\n\r\n        accountFieldsBind : function(container){\r\n            if($(container)){\r\n                var fields = $(container).select('input', 'select', 'textarea');\r\n                for(var i=0; i<fields.length; i++){\r\n                    if(fields[i].id == 'group_id'){\r\n                        fields[i].observe('change', this.accountGroupChange.bind(this))\r\n                    }\r\n                    else{\r\n                        fields[i].observe('change', this.accountFieldChange.bind(this))\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        accountGroupChange : function(){\r\n            this.loadArea(['data'], true, this.serializeData('order-form_account').toObject());\r\n        },\r\n\r\n        accountFieldChange : function(){\r\n            this.saveData(this.serializeData('order-form_account'));\r\n        },\r\n\r\n        commentFieldsBind : function(container){\r\n            if($(container)){\r\n                var fields = $(container).select('input', 'textarea');\r\n                for(var i=0; i<fields.length; i++)\r\n                    fields[i].observe('change', this.commentFieldChange.bind(this))\r\n            }\r\n        },\r\n\r\n        commentFieldChange : function(){\r\n            this.saveData(this.serializeData('order-comment'));\r\n        },\r\n\r\n        giftmessageFieldsBind : function(container){\r\n            if($(container)){\r\n                var fields = $(container).select('input', 'textarea');\r\n                for(var i=0; i<fields.length; i++)\r\n                    fields[i].observe('change', this.giftmessageFieldChange.bind(this))\r\n            }\r\n        },\r\n\r\n        giftmessageFieldChange : function(){\r\n            this.giftMessageDataChanged = true;\r\n        },\r\n\r\n        giftmessageOnItemChange : function(event) {\r\n            var element = Event.element(event);\r\n            if(element.name.indexOf(\"giftmessage\") != -1 && element.type == \"checkbox\" && !element.checked) {\r\n                var messages = $(\"order-giftmessage\").select('textarea');\r\n                var name;\r\n                for(var i=0; i<messages.length; i++) {\r\n                    name = messages[i].id.split(\"_\");\r\n                    if(name.length < 2) continue;\r\n                    if (element.name.indexOf(\"[\" + name[1] + \"]\") != -1 && messages[i].value != \"\") {\r\n                        alert({\r\n                            content: \"First, clean the Message field in Gift Message form\"\r\n                        });\r\n                        element.checked = true;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        loadArea : function(area, indicator, params){\r\n            var deferred = new jQuery.Deferred();\r\n            var url = this.loadBaseUrl;\r\n            if (area) {\r\n                area = this.prepareArea(area);\r\n                url += 'block/' + area;\r\n            }\r\n            if (indicator === true) indicator = 'html-body';\r\n            params = this.prepareParams(params);\r\n            params.json = true;\r\n            if (!this.loadingAreas) this.loadingAreas = [];\r\n            if (indicator) {\r\n                this.loadingAreas = area;\r\n                new Ajax.Request(url, {\r\n                    parameters:params,\r\n                    loaderArea: indicator,\r\n                    onSuccess: function(transport) {\r\n                        var response = transport.responseText.evalJSON();\r\n                        this.loadAreaResponseHandler(response);\r\n                        deferred.resolve();\r\n                    }.bind(this)\r\n                });\r\n            }\r\n            else {\r\n                new Ajax.Request(url, {\r\n                    parameters:params,\r\n                    loaderArea: indicator,\r\n                    onSuccess: function(transport) {\r\n                        deferred.resolve();\r\n                    }\r\n                });\r\n            }\r\n            if (typeof productConfigure != 'undefined' && area instanceof Array && area.indexOf('items') != -1) {\r\n                productConfigure.clean('quote_items');\r\n            }\r\n            return deferred.promise();\r\n        },\r\n\r\n        loadAreaResponseHandler : function (response) {\r\n            if (response.error) {\r\n                alert({\r\n                    content: response.message\r\n                });\r\n            }\r\n            if (response.ajaxExpired && response.ajaxRedirect) {\r\n                setLocation(response.ajaxRedirect);\r\n            }\r\n            if (!this.loadingAreas) {\r\n                this.loadingAreas = [];\r\n            }\r\n            if (typeof this.loadingAreas == 'string') {\r\n                this.loadingAreas = [this.loadingAreas];\r\n            }\r\n            if (this.loadingAreas.indexOf('message') == -1) {\r\n                this.loadingAreas.push('message');\r\n            }\r\n            if (response.header) {\r\n                jQuery('.page-actions-inner').attr('data-title', response.header);\r\n            }\r\n\r\n            for (var i = 0; i < this.loadingAreas.length; i++) {\r\n                var id = this.loadingAreas[i];\r\n                if ($(this.getAreaId(id))) {\r\n                    if ('message' != id || response[id]) {\r\n                        $(this.getAreaId(id)).update(response[id]);\r\n                    }\r\n                    if ($(this.getAreaId(id)).callback) {\r\n                        this[$(this.getAreaId(id)).callback]();\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        prepareArea : function(area) {\r\n            if (this.giftMessageDataChanged) {\r\n                return area.without('giftmessage');\r\n            }\r\n            return area;\r\n        },\r\n\r\n        saveData : function(data){\r\n            this.loadArea(false, false, data);\r\n        },\r\n\r\n        showArea : function(area){\r\n            var id = this.getAreaId(area);\r\n            if($(id)) {\r\n                $(id).show();\r\n                this.areaOverlay();\r\n            }\r\n        },\r\n\r\n        hideArea : function(area){\r\n            var id = this.getAreaId(area);\r\n            if($(id)) {\r\n                $(id).hide();\r\n                this.areaOverlay();\r\n            }\r\n        },\r\n\r\n        areaOverlay : function()\r\n        {\r\n            $H(order.overlayData).each(function(e){\r\n                e.value.fx();\r\n            });\r\n        },\r\n\r\n        getAreaId : function(area){\r\n            return 'order-'+area;\r\n        },\r\n\r\n        prepareParams : function(params){\r\n            if (!params) {\r\n                params = {};\r\n            }\r\n            if (!params.customer_id) {\r\n                params.customer_id = this.customerId;\r\n            }\r\n            if (!params.store_id) {\r\n                params.store_id = this.storeId;\r\n            }\r\n            if (!params.currency_id) {\r\n                params.currency_id = this.currencyId;\r\n            }\r\n            if (!params.form_key) {\r\n                params.form_key = FORM_KEY;\r\n            }\r\n\r\n            if (this.isPaymentValidationAvailable()) {\r\n                var data = this.serializeData('order-billing_method');\r\n                if (data) {\r\n                    data.each(function(value) {\r\n                        params[value[0]] = value[1];\r\n                    });\r\n                }\r\n            } else {\r\n                params['payment[method]'] = this.paymentMethod;\r\n            }\r\n            return params;\r\n        },\r\n\r\n        /**\r\n         * Prevent from sending credit card information to server for some payment methods\r\n         *\r\n         * @returns {boolean}\r\n         */\r\n        isPaymentValidationAvailable : function(){\r\n            return ((typeof this.paymentMethod) == 'undefined'\r\n            || this.excludedPaymentMethods.indexOf(this.paymentMethod) == -1);\r\n        },\r\n\r\n        serializeData : function(container){\r\n            var fields = $(container).select('input', 'select', 'textarea');\r\n            var data = Form.serializeElements(fields, true);\r\n\r\n            return $H(data);\r\n        },\r\n\r\n        toggleCustomPrice: function(checkbox, elemId, tierBlock) {\r\n            if (checkbox.checked) {\r\n                $(elemId).disabled = false;\r\n                $(elemId).show();\r\n                if($(tierBlock)) $(tierBlock).hide();\r\n            }\r\n            else {\r\n                $(elemId).disabled = true;\r\n                $(elemId).hide();\r\n                if($(tierBlock)) $(tierBlock).show();\r\n            }\r\n        },\r\n\r\n        submit : function()\r\n        {\r\n            jQuery('#edit_form').trigger('processStart');\r\n            jQuery('#edit_form').trigger('submitOrder');\r\n        },\r\n\r\n        _realSubmit: function () {\r\n            var disableAndSave = function() {\r\n                disableElements('save');\r\n                jQuery('#edit_form').on('invalid-form.validate', function() {\r\n                    enableElements('save');\r\n                    jQuery('#edit_form').trigger('processStop');\r\n                    jQuery('#edit_form').off('invalid-form.validate');\r\n                });\r\n                jQuery('#edit_form').triggerHandler('save');\r\n            }\r\n            if (this.orderItemChanged) {\r\n                var self = this;\r\n\r\n                jQuery('#edit_form').trigger('processStop');\r\n\r\n                confirm({\r\n                    content: jQuery.mage.__('You have item changes'),\r\n                    actions: {\r\n                        confirm: function() {\r\n                            jQuery('#edit_form').trigger('processStart');\r\n                            disableAndSave();\r\n                        },\r\n                        cancel: function() {\r\n                            self.itemsUpdate();\r\n                        }\r\n                    }\r\n                });\r\n            } else {\r\n                disableAndSave();\r\n            }\r\n        },\r\n\r\n        overlay : function(elId, show, observe) {\r\n            if (typeof(show) == 'undefined') { show = true; }\r\n\r\n            var orderObj = this;\r\n            var obj = this.overlayData.get(elId);\r\n            if (!obj) {\r\n                obj = {\r\n                    show: show,\r\n                    el: elId,\r\n                    order: orderObj,\r\n                    fx: function(event) {\r\n                        this.order.processOverlay(this.el, this.show);\r\n                    }\r\n                };\r\n                obj.bfx = obj.fx.bindAsEventListener(obj);\r\n                this.overlayData.set(elId, obj);\r\n            } else {\r\n                obj.show = show;\r\n                Event.stopObserving(window, 'resize', obj.bfx);\r\n            }\r\n\r\n            Event.observe(window, 'resize', obj.bfx);\r\n\r\n            this.processOverlay(elId, show);\r\n        },\r\n\r\n        processOverlay : function(elId, show) {\r\n            var el = $(elId);\r\n\r\n            if (!el) {\r\n                return;\r\n            }\r\n\r\n            var parentEl = el.up(1);\r\n            if (show) {\r\n                parentEl.removeClassName('ignore-validate');\r\n            } else {\r\n                parentEl.addClassName('ignore-validate');\r\n            }\r\n\r\n            if (Prototype.Browser.IE) {\r\n                parentEl.select('select').each(function (elem) {\r\n                    if (show) {\r\n                        elem.needShowOnSuccess = false;\r\n                        elem.style.visibility = '';\r\n                    } else {\r\n                        elem.style.visibility = 'hidden';\r\n                        elem.needShowOnSuccess = true;\r\n                    }\r\n                });\r\n            }\r\n\r\n            parentEl.setStyle({position: 'relative'});\r\n            el.setStyle({\r\n                display: show ? 'none' : ''\r\n            });\r\n        },\r\n\r\n        validateVat: function(parameters)\r\n        {\r\n            var params = {\r\n                country: $(parameters.countryElementId).value,\r\n                vat: $(parameters.vatElementId).value\r\n            };\r\n\r\n            if (this.storeId !== false) {\r\n                params.store_id = this.storeId;\r\n            }\r\n\r\n            var currentCustomerGroupId = $(parameters.groupIdHtmlId).value;\r\n\r\n            new Ajax.Request(parameters.validateUrl, {\r\n                parameters: params,\r\n                onSuccess: function(response) {\r\n                    var message = '';\r\n                    var groupActionRequired = null;\r\n                    try {\r\n                        response = response.responseText.evalJSON();\r\n\r\n                        if (null === response.group) {\r\n                            if (true === response.valid) {\r\n                                message = parameters.vatValidMessage;\r\n                            } else if (true === response.success) {\r\n                                message = parameters.vatInvalidMessage.replace(/%s/, params.vat);\r\n                            } else {\r\n                                message = parameters.vatValidationFailedMessage;\r\n                            }\r\n                        } else {\r\n                            if (true === response.valid) {\r\n                                message = parameters.vatValidAndGroupValidMessage;\r\n                                if (0 === response.group) {\r\n                                    message = parameters.vatValidAndGroupInvalidMessage;\r\n                                    groupActionRequired = 'inform';\r\n                                } else if (currentCustomerGroupId != response.group) {\r\n                                    message = parameters.vatValidAndGroupChangeMessage;\r\n                                    groupActionRequired = 'change';\r\n                                }\r\n                            } else if (response.success) {\r\n                                message = parameters.vatInvalidMessage.replace(/%s/, params.vat);\r\n                                groupActionRequired = 'inform';\r\n                            } else {\r\n                                message = parameters.vatValidationFailedMessage;\r\n                                groupActionRequired = 'inform';\r\n                            }\r\n                        }\r\n                    } catch (e) {\r\n                        message = parameters.vatValidationFailedMessage;\r\n                    }\r\n                    if (null === groupActionRequired) {\r\n                        alert({\r\n                            content: message\r\n                        });\r\n                    }\r\n                    else {\r\n                        this.processCustomerGroupChange(\r\n                            parameters.groupIdHtmlId,\r\n                            message,\r\n                            parameters.vatCustomerGroupMessage,\r\n                            parameters.vatGroupErrorMessage,\r\n                            response.group,\r\n                            groupActionRequired\r\n                        );\r\n                    }\r\n                }.bind(this)\r\n            });\r\n        },\r\n\r\n        processCustomerGroupChange: function(groupIdHtmlId, message, customerGroupMessage, errorMessage, groupId, action)\r\n        {\r\n            var groupMessage = '';\r\n            try {\r\n                var currentCustomerGroupId = $(groupIdHtmlId).value;\r\n                var currentCustomerGroupTitle =\r\n                    $$('#' + groupIdHtmlId + ' > option[value=' + currentCustomerGroupId + ']')[0].text;\r\n                var customerGroupOption = $$('#' + groupIdHtmlId + ' > option[value=' + groupId + ']')[0];\r\n                groupMessage = customerGroupMessage.replace(/%s/, customerGroupOption.text);\r\n            } catch (e) {\r\n                groupMessage = errorMessage;\r\n                if (action === 'change') {\r\n                    message = '';\r\n                    action = 'inform';\r\n                }\r\n            }\r\n\r\n            if (action === 'change') {\r\n                var confirmText = message.replace(/%s/, customerGroupOption.text);\r\n                confirmText = confirmText.replace(/%s/, currentCustomerGroupTitle);\r\n                if (confirm(confirmText)) {\r\n                    $$('#' + groupIdHtmlId + ' option').each(function (o) {\r\n                        o.selected = o.readAttribute('value') == groupId;\r\n                    });\r\n                    this.accountGroupChange();\r\n                }\r\n            } else if (action === 'inform') {\r\n                alert({\r\n                    content: message + '\\n' + groupMessage\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    window.OrderFormArea = Class.create();\r\n    OrderFormArea.prototype = {\r\n        _name: null,\r\n        _node: null,\r\n        _parent: null,\r\n        _callbackName: null,\r\n\r\n        initialize: function(name, node, parent){\r\n            if(!node)\r\n                return;\r\n            this._name = name;\r\n            this._parent = parent;\r\n            this._callbackName = node.callback;\r\n            if (typeof this._callbackName == 'undefined') {\r\n                this._callbackName = name + 'Loaded';\r\n                node.callback = this._callbackName;\r\n            }\r\n            parent[this._callbackName] = parent[this._callbackName].wrap((function (proceed){\r\n                proceed();\r\n                this.onLoad();\r\n            }).bind(this));\r\n\r\n            this.setNode(node);\r\n        },\r\n\r\n        setNode: function(node){\r\n            if (!node.callback) {\r\n                node.callback = this._callbackName;\r\n            }\r\n            this.node = node;\r\n        },\r\n\r\n        onLoad: function(){\r\n        }\r\n    };\r\n\r\n    window.ControlButton = Class.create();\r\n\r\n    ControlButton.prototype = {\r\n        _label: '',\r\n        _node: null,\r\n\r\n        initialize: function(label){\r\n            this._label = label;\r\n            this._node = new Element('button', {\r\n                'class': 'action-secondary action-add',\r\n                'type':  'button'\r\n            });\r\n        },\r\n\r\n        onClick: function(){\r\n        },\r\n\r\n        insertIn: function(element, position){\r\n            var node = Object.extend(this._node),\r\n                content = {};\r\n            node.observe('click', this.onClick);\r\n            node.update('<span>' + this._label + '</span>');\r\n            content[position] = node;\r\n            Element.insert(element, content);\r\n        }\r\n    };\r\n\r\n});\r\n/* jshint ignore:end */\r\n","Magento_Sales/order/edit/message.js":"/**\r\n * @category    Mage\r\n * @package     Magento_Sales\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    \"jquery\",\r\n    \"jquery/ui\",\r\n    'Magento_Ui/js/modal/modal',\r\n    \"mage/translate\"\r\n], function($){\r\n    \"use strict\";\r\n    $.widget('mage.orderEditDialog', {\r\n        options: {\r\n            url:     null,\r\n            message: null,\r\n            modal:  null\r\n        },\r\n\r\n        /**\r\n         * @protected\r\n         */\r\n        _create: function () {\r\n            this._prepareDialog();\r\n        },\r\n\r\n        /**\r\n         * Show modal\r\n         */\r\n        showDialog: function() {\r\n            this.options.dialog.html(this.options.message).modal('openModal');\r\n        },\r\n\r\n        /**\r\n         * Redirect to edit page\r\n         */\r\n        redirect: function() {\r\n            window.location = this.options.url;\r\n        },\r\n\r\n        /**\r\n         * Prepare modal\r\n         * @protected\r\n         */\r\n        _prepareDialog: function() {\r\n            var self = this;\r\n\r\n            this.options.dialog = $('<div class=\"ui-dialog-content ui-widget-content\"></div>').modal({\r\n                type: 'popup',\r\n                modalClass: 'edit-order-popup',\r\n                title: $.mage.__('Edit Order'),\r\n                buttons: [{\r\n                    text: $.mage.__('Ok'),\r\n                    'class': 'action-primary',\r\n                    click: function(){\r\n                        self.redirect();\r\n                    }\r\n                }]\r\n            });\r\n        }\r\n    });\r\n\r\n    return $.mage.orderEditDialog;\r\n});\r\n","Magento_Sales/order/view/post-wrapper.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'mage/translate'\r\n], function ($, confirm) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {String} url\r\n     * @returns {Object}\r\n     */\r\n    function getForm(url) {\r\n        return $('<form>', {\r\n            'action': url,\r\n            'method': 'POST'\r\n        }).append($('<input>', {\r\n            'name': 'form_key',\r\n            'value': window.FORM_KEY,\r\n            'type': 'hidden'\r\n        }));\r\n    }\r\n\r\n    $('#order-view-cancel-button').click(function () {\r\n        var msg = $.mage.__('Are you sure you want to cancel this order?'),\r\n            url = $('#order-view-cancel-button').data('url');\r\n\r\n        confirm({\r\n            'content': msg,\r\n            'actions': {\r\n\r\n                /**\r\n                 * 'Confirm' action handler.\r\n                 */\r\n                confirm: function () {\r\n                    getForm(url).appendTo('body').submit();\r\n                }\r\n            }\r\n        });\r\n\r\n        return false;\r\n    });\r\n\r\n    $('#order-view-hold-button').click(function () {\r\n        var url = $('#order-view-hold-button').data('url');\r\n\r\n        getForm(url).appendTo('body').submit();\r\n    });\r\n\r\n    $('#order-view-unhold-button').click(function () {\r\n        var url = $('#order-view-unhold-button').data('url');\r\n\r\n        getForm(url).appendTo('body').submit();\r\n    });\r\n});\r\n","Magento_Shipping/js/packages.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/modal',\r\n    'mage/translate'\r\n], function ($, modal, $t) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        config.buttons = [\r\n            {\r\n                text: $t('Print'),\r\n                'class': 'action action-primary',\r\n\r\n                /**\r\n                 * Click handler\r\n                 */\r\n                click: function () {\r\n                    window.location.href = this.options.url;\r\n                }\r\n            }, {\r\n                text: $t('Cancel'),\r\n                'class': 'action action-secondary',\r\n\r\n                /**\r\n                 * Click handler\r\n                 */\r\n                click: function () {\r\n                    this.closeModal();\r\n                }\r\n            }\r\n        ];\r\n        modal(config, element);\r\n    };\r\n});\r\n","Magento_Shipping/order/packaging.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\"prototype\"], function(){\r\n\r\nwindow.Packaging = Class.create();\r\nPackaging.prototype = {\r\n    /**\r\n     * Initialize object\r\n     */\r\n    initialize: function(params) {\r\n        this.packageIncrement = 0;\r\n        this.packages = [];\r\n        this.itemsAll = [];\r\n        this.createLabelUrl = params.createLabelUrl ? params.createLabelUrl : null;\r\n        this.itemsGridUrl = params.itemsGridUrl ? params.itemsGridUrl : null;\r\n        this.errorQtyOverLimit = params.errorQtyOverLimit;\r\n        this.titleDisabledSaveBtn = params.titleDisabledSaveBtn;\r\n        this.window = $('packaging_window');\r\n        this.messages = this.window.select('.message-warning')[0];\r\n        this.packagesContent = $('packages_content');\r\n        this.template = $('package_template');\r\n        this.paramsCreateLabelRequest = {};\r\n        this.validationErrorMsg = params.validationErrorMsg;\r\n\r\n        this.defaultItemsQty            = params.shipmentItemsQty ? params.shipmentItemsQty : null;\r\n        this.defaultItemsPrice          = params.shipmentItemsPrice ? params.shipmentItemsPrice : null;\r\n        this.defaultItemsName           = params.shipmentItemsName ? params.shipmentItemsName : null;\r\n        this.defaultItemsWeight         = params.shipmentItemsWeight ? params.shipmentItemsWeight : null;\r\n        this.defaultItemsProductId      = params.shipmentItemsProductId ? params.shipmentItemsProductId : null;\r\n        this.defaultItemsOrderItemId    = params.shipmentItemsOrderItemId ? params.shipmentItemsOrderItemId : null;\r\n\r\n        this.shippingInformation= params.shippingInformation ? params.shippingInformation : null;\r\n        this.thisPage           = params.thisPage ? params.thisPage : null;\r\n        this.customizableContainers = params.customizable ? params.customizable : [];\r\n\r\n        this.eps = .000001;\r\n    },\r\n\r\n    /**\r\n     * Get Package Id\r\n     */\r\n    getPackageId: function(packageBlock) {\r\n        return packageBlock.id.match(/\\d{0,}$/)[0];\r\n    },\r\n\r\n//******************** Setters **********************************//\r\n    setLabelCreatedCallback: function(callback) {\r\n        this.labelCreatedCallback = callback;\r\n    },\r\n    setCancelCallback: function(callback) {\r\n        this.cancelCallback = callback;\r\n    },\r\n    setConfirmPackagingCallback: function(callback) {\r\n        this.confirmPackagingCallback = callback;\r\n    },\r\n    setItemQtyCallback: function(callback) {\r\n        this.itemQtyCallback = callback;\r\n    },\r\n    setCreateLabelUrl: function(url) {\r\n        this.createLabelUrl = url;\r\n    },\r\n    setParamsCreateLabelRequest: function(params) {\r\n        Object.extend(this.paramsCreateLabelRequest, params);\r\n    },\r\n//******************** End Setters *******************************//\r\n\r\n    showWindow: function() {\r\n        if (this.packagesContent.childElements().length == 0) {\r\n            this.newPackage();\r\n        }\r\n        jQuery(this.window).modal('openModal')\r\n    },\r\n\r\n    cancelPackaging: function() {\r\n        if (Object.isFunction(this.cancelCallback)) {\r\n            this.cancelCallback();\r\n        }\r\n    },\r\n\r\n    confirmPackaging: function(params) {\r\n        if (Object.isFunction(this.confirmPackagingCallback)) {\r\n            this.confirmPackagingCallback();\r\n        }\r\n    },\r\n\r\n    checkAllItems: function(headCheckbox) {\r\n        $(headCheckbox).up('table').select('tbody input[type=\"checkbox\"]').each(function(checkbox){\r\n            checkbox.checked = headCheckbox.checked;\r\n            this._observeQty.call(checkbox);\r\n        }.bind(this));\r\n    },\r\n\r\n    cleanPackages: function() {\r\n        this.packagesContent.update();\r\n        this.packages = [];\r\n        this.itemsAll = [];\r\n        this.packageIncrement = 0;\r\n        this._setAllItemsPackedState();\r\n        this.messages.hide().update();\r\n    },\r\n\r\n    sendCreateLabelRequest: function() {\r\n        var package = this;\r\n        if (!this.validate()) {\r\n            this.messages.show().update(this.validationErrorMsg);\r\n            return;\r\n        } else {\r\n            this.messages.hide().update();\r\n        }\r\n        if (this.createLabelUrl) {\r\n            var weight, length, width, height = null;\r\n            var packagesParams = [];\r\n            this.packagesContent.childElements().each(function(pack) {\r\n                var packageId = this.getPackageId(pack);\r\n                weight = parseFloat(pack.select('input[name=\"container_weight\"]')[0].value);\r\n                length = parseFloat(pack.select('input[name=\"container_length\"]')[0].value);\r\n                width = parseFloat(pack.select('input[name=\"container_width\"]')[0].value);\r\n                height = parseFloat(pack.select('input[name=\"container_height\"]')[0].value);\r\n                packagesParams[packageId] = {\r\n                    container:                  pack.select('select[name=\"package_container\"]')[0].value,\r\n                    customs_value:              parseFloat(pack.select('input[name=\"package_customs_value\"]')[0].value, 10),\r\n                    weight:                     isNaN(weight) ? '' : weight,\r\n                    length:                     isNaN(length) ? '' : length,\r\n                    width:                      isNaN(width) ? '' : width,\r\n                    height:                     isNaN(height) ? '' : height,\r\n                    weight_units:               pack.select('select[name=\"container_weight_units\"]')[0].value,\r\n                    dimension_units:            pack.select('select[name=\"container_dimension_units\"]')[0].value\r\n                };\r\n                if (isNaN(packagesParams[packageId]['customs_value'])) {\r\n                    packagesParams[packageId]['customs_value'] = 0;\r\n                }\r\n                if ('undefined' != typeof pack.select('select[name=\"package_size\"]')[0]) {\r\n                    if ('' != pack.select('select[name=\"package_size\"]')[0].value) {\r\n                        packagesParams[packageId]['size'] = pack.select('select[name=\"package_size\"]')[0].value;\r\n                    }\r\n                }\r\n                if ('undefined' != typeof pack.select('input[name=\"container_girth\"]')[0]) {\r\n                    if ('' != pack.select('input[name=\"container_girth\"]')[0].value) {\r\n                        packagesParams[packageId]['girth'] = pack.select('input[name=\"container_girth\"]')[0].value;\r\n                        packagesParams[packageId]['girth_dimension_units'] = pack.select('select[name=\"container_girth_dimension_units\"]')[0].value;\r\n                    }\r\n                }\r\n                if ('undefined' != typeof pack.select('select[name=\"content_type\"]')[0] && 'undefined' != typeof pack.select('input[name=\"content_type_other\"]')[0]) {\r\n                    packagesParams[packageId]['content_type'] = pack.select('select[name=\"content_type\"]')[0].value;\r\n                    packagesParams[packageId]['content_type_other'] = pack.select('input[name=\"content_type_other\"]')[0].value;\r\n                } else {\r\n                    packagesParams[packageId]['content_type'] = '';\r\n                    packagesParams[packageId]['content_type_other'] = '';\r\n                }\r\n                var deliveryConfirmation = pack.select('select[name=\"delivery_confirmation_types\"]');\r\n                if (deliveryConfirmation.length) {\r\n                     packagesParams[packageId]['delivery_confirmation'] =  deliveryConfirmation[0].value\r\n                }\r\n            }.bind(this));\r\n            for (var packageId in this.packages) {\r\n                 if (!isNaN(packageId)) {\r\n                     this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[container]']              = packagesParams[packageId]['container'];\r\n                     this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[weight]']                 = packagesParams[packageId]['weight'];\r\n                     this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[customs_value]']          = packagesParams[packageId]['customs_value'];\r\n                     this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[length]']                 = packagesParams[packageId]['length'];\r\n                     this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[width]']                  = packagesParams[packageId]['width'];\r\n                     this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[height]']                 = packagesParams[packageId]['height'];\r\n                     this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[weight_units]']           = packagesParams[packageId]['weight_units'];\r\n                     this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[dimension_units]']        = packagesParams[packageId]['dimension_units'];\r\n                     this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[content_type]']           = packagesParams[packageId]['content_type'];\r\n                     this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[content_type_other]']     = packagesParams[packageId]['content_type_other'];\r\n\r\n                     if ('undefined' != typeof packagesParams[packageId]['size']) {\r\n                         this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[size]'] = packagesParams[packageId]['size'];\r\n                     }\r\n\r\n                     if ('undefined' != typeof packagesParams[packageId]['girth']) {\r\n                         this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[girth]'] = packagesParams[packageId]['girth'];\r\n                         this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[girth_dimension_units]'] = packagesParams[packageId]['girth_dimension_units'];\r\n                     }\r\n\r\n                     if ('undefined' != typeof packagesParams[packageId]['delivery_confirmation']) {\r\n                         this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[delivery_confirmation]']  = packagesParams[packageId]['delivery_confirmation'];\r\n                     }\r\n                     for (var packedItemId in this.packages[packageId]['items']) {\r\n                         if (!isNaN(packedItemId)) {\r\n                             this.paramsCreateLabelRequest['packages['+packageId+']'+'[items]'+'['+packedItemId+'][qty]']           = this.packages[packageId]['items'][packedItemId]['qty'];\r\n                             this.paramsCreateLabelRequest['packages['+packageId+']'+'[items]'+'['+packedItemId+'][customs_value]'] = this.packages[packageId]['items'][packedItemId]['customs_value'];\r\n                             this.paramsCreateLabelRequest['packages['+packageId+']'+'[items]'+'['+packedItemId+'][price]']         = package.defaultItemsPrice[packedItemId];\r\n                             this.paramsCreateLabelRequest['packages['+packageId+']'+'[items]'+'['+packedItemId+'][name]']          = package.defaultItemsName[packedItemId];\r\n                             this.paramsCreateLabelRequest['packages['+packageId+']'+'[items]'+'['+packedItemId+'][weight]']        = package.defaultItemsWeight[packedItemId];\r\n                             this.paramsCreateLabelRequest['packages['+packageId+']'+'[items]'+'['+packedItemId+'][product_id]']    = package.defaultItemsProductId[packedItemId];\r\n                             this.paramsCreateLabelRequest['packages['+packageId+']'+'[items]'+'['+packedItemId+'][order_item_id]'] = package.defaultItemsOrderItemId[packedItemId];\r\n                         }\r\n                     }\r\n                 }\r\n            }\r\n\r\n            new Ajax.Request(this.createLabelUrl, {\r\n                parameters: this.paramsCreateLabelRequest,\r\n                onSuccess: function(transport) {\r\n                    var response = transport.responseText;\r\n                    if (response.isJSON()) {\r\n                        response = response.evalJSON();\r\n                        if (response.error) {\r\n                            this.messages.show().innerHTML = response.message;\r\n                        } else if (response.ok && Object.isFunction(this.labelCreatedCallback)) {\r\n                            this.labelCreatedCallback(response);\r\n                        }\r\n                    }\r\n                }.bind(this)\r\n            });\r\n            if (this.paramsCreateLabelRequest['code']\r\n                && this.paramsCreateLabelRequest['carrier_title']\r\n                && this.paramsCreateLabelRequest['method_title']\r\n                && this.paramsCreateLabelRequest['price']\r\n            ) {\r\n                var a = this.paramsCreateLabelRequest['code'];\r\n                var b = this.paramsCreateLabelRequest['carrier_title'];\r\n                var c = this.paramsCreateLabelRequest['method_title'];\r\n                var d = this.paramsCreateLabelRequest['price'];\r\n\r\n                this.paramsCreateLabelRequest = {};\r\n                this.paramsCreateLabelRequest['code']           = a;\r\n                this.paramsCreateLabelRequest['carrier_title']  = b;\r\n                this.paramsCreateLabelRequest['method_title']   = c;\r\n                this.paramsCreateLabelRequest['price']          = d;\r\n            } else {\r\n                this.paramsCreateLabelRequest = {};\r\n            }\r\n        }\r\n    },\r\n\r\n    validate: function() {\r\n        var dimensionElements = $(\"packaging_window\").select(\r\n            'input[name=container_length],input[name=container_width],input[name=container_height],input[name=container_girth]:not(\"._disabled\")'\r\n        );\r\n        var callback = null;\r\n        if ( dimensionElements.any(function(element) { return !!element.value; })) {\r\n            callback = function(element) { $(element).addClassName('required-entry'); };\r\n        } else {\r\n            callback = function(element) { $(element).removeClassName('required-entry'); };\r\n        }\r\n        dimensionElements.each(callback);\r\n\r\n        return result = $$('[id^=\"package_block_\"] input').collect(function (element) {\r\n            return this.validateElement(element)\r\n        }, this).all();\r\n    },\r\n\r\n    validateElement: function(elm) {\r\n        var cn = $w(elm.className);\r\n        return result = cn.all(function(value) {\r\n            var v = Validation.get(value);\r\n            if (Validation.isVisible(elm) && !v.test($F(elm), elm)) {\r\n                $(elm).addClassName('validation-failed');\r\n                return false;\r\n            } else {\r\n                $(elm).removeClassName('validation-failed');\r\n                return true;\r\n            }\r\n        });\r\n    },\r\n\r\n    validateCustomsValue: function() {\r\n        var items = [];\r\n        var isValid = true;\r\n        var itemsPrepare = [];\r\n        var itemsPacked = [];\r\n\r\n        this.packagesContent.childElements().each(function(pack) {\r\n            itemsPrepare = pack.select('[data-role=\"package-items\"]')[0];\r\n            if (itemsPrepare) {\r\n                items = items.concat(itemsPrepare.select('.grid tbody tr'));\r\n            }\r\n            itemsPacked = pack.select('.package_items')[0];\r\n            if (itemsPacked) {\r\n                items = items.concat(itemsPacked.select('.grid tbody tr'));\r\n            }\r\n        }.bind(this));\r\n\r\n        items.each(function(item) {\r\n            var itemCustomsValue = item.select('[name=\"customs_value\"]')[0];\r\n            if (!this.validateElement(itemCustomsValue)) {\r\n                isValid = false;\r\n            }\r\n        }.bind(this));\r\n\r\n        if (isValid) {\r\n            this.messages.hide().update();\r\n        } else {\r\n            this.messages.show().update(this.validationErrorMsg);\r\n        }\r\n        return isValid;\r\n    },\r\n\r\n    newPackage: function() {\r\n        var pack = this.template.cloneNode(true);\r\n        pack.id = 'package_block_' + (++this.packageIncrement);\r\n        pack.addClassName('package-block');\r\n        pack.select('[data-role=package-number]')[0].update(this.packageIncrement);\r\n        this.packagesContent.insert({top: pack});\r\n        pack.select('[data-action=package-save-items]')[0].hide();\r\n        pack.show();\r\n    },\r\n\r\n    deletePackage: function(obj) {\r\n        var pack = $(obj).up('[id^=\"package_block\"]');\r\n\r\n        var packItems = pack.select('.package_items')[0];\r\n        var packageId = this.getPackageId(pack);\r\n\r\n        delete this.packages[packageId];\r\n        pack.remove();\r\n        this.messages.hide().update();\r\n        this._setAllItemsPackedState();\r\n    },\r\n\r\n    deleteItem: function(obj) {\r\n        var item = $(obj).up('tr');\r\n        var itemId = item.select('[type=\"checkbox\"]')[0].value;\r\n        var pack = $(obj).up('[id^=\"package_block\"]');\r\n        var packItems = pack.select('.package_items')[0];\r\n        var packageId = this.getPackageId(pack);\r\n\r\n        delete this.packages[packageId]['items'][itemId];\r\n        if (item.offsetParent.rows.length <= 2) { /* head + this last row */\r\n            $(packItems).hide();\r\n        }\r\n        item.remove();\r\n        this.messages.hide().update();\r\n        this._recalcContainerWeightAndCustomsValue(packItems);\r\n        this._setAllItemsPackedState()\r\n    },\r\n\r\n    recalcContainerWeightAndCustomsValue: function(obj) {\r\n        var pack = $(obj).up('[id^=\"package_block\"]');\r\n        var packItems = pack.select('.package_items')[0];\r\n        if (packItems) {\r\n            if (!this.validateCustomsValue()) {\r\n                return;\r\n            }\r\n            this._recalcContainerWeightAndCustomsValue(packItems);\r\n        }\r\n    },\r\n\r\n    getItemsForPack: function(obj) {\r\n        if (this.itemsGridUrl) {\r\n            var parameters = $H({'shipment_id': this.shipmentId});\r\n            var packageBlock = $(obj).up('[id^=\"package_block\"]');\r\n            var packagePrapare = packageBlock.select('[data-role=package-items]')[0];\r\n            var packagePrapareGrid = packagePrapare.select('.grid_prepare')[0];\r\n            new Ajax.Request(this.itemsGridUrl, {\r\n                parameters: parameters,\r\n                onSuccess: function(transport) {\r\n                    var response = transport.responseText;\r\n                    if (response) {\r\n                        packagePrapareGrid.update(response);\r\n                        this._processPackagePrapare(packagePrapareGrid);\r\n                        if (packagePrapareGrid.select('.grid tbody tr').length) {\r\n                            packageBlock.select('[data-action=package-add-items]')[0].hide();\r\n                            packageBlock.select('[data-action=package-save-items]')[0].show();\r\n                            packagePrapare.show();\r\n                        } else {\r\n                            packagePrapareGrid.update();\r\n                        }\r\n                    }\r\n                }.bind(this)\r\n            });\r\n        }\r\n    },\r\n\r\n    getPackedItemsQty: function() {\r\n        var items = [];\r\n        for (var packageId in this.packages) {\r\n             if (!isNaN(packageId)) {\r\n                 for (var packedItemId in this.packages[packageId]['items']) {\r\n                     if (!isNaN(packedItemId)) {\r\n                         if (items[packedItemId]) {\r\n                             items[packedItemId] += this.packages[packageId]['items'][packedItemId]['qty'];\r\n                         } else {\r\n                             items[packedItemId] = this.packages[packageId]['items'][packedItemId]['qty']\r\n                         }\r\n                     }\r\n                 }\r\n             }\r\n        }\r\n        return items;\r\n    },\r\n\r\n    _parseQty: function(obj) {\r\n        var qty = $(obj).hasClassName('qty-decimal') ? parseFloat(obj.value) : parseInt(obj.value);\r\n        if (isNaN(qty) || qty <= 0) {\r\n            qty = 1;\r\n        }\r\n        return qty;\r\n    },\r\n\r\n    packItems: function(obj) {\r\n        var anySelected = false;\r\n        var packageBlock = $(obj).up('[id^=\"package_block\"]');\r\n        var packageId = this.getPackageId(packageBlock);\r\n        var packagePrepare = packageBlock.select('[data-role=package-items]')[0];\r\n        var packagePrepareGrid = packagePrepare.select('.grid_prepare')[0];\r\n\r\n        // check for exceeds the total shipped quantity\r\n        var checkExceedsQty = false;\r\n        this.messages.hide().update();\r\n        packagePrepareGrid.select('.grid tbody tr').each(function(item) {\r\n            var checkbox = item.select('[type=\"checkbox\"]')[0];\r\n            var itemId = checkbox.value;\r\n            var qtyValue  = this._parseQty(item.select('[name=\"qty\"]')[0]);\r\n            item.select('[name=\"qty\"]')[0].value = qtyValue;\r\n            if (checkbox.checked && this._checkExceedsQty(itemId, qtyValue)) {\r\n                this.messages.show().update(this.errorQtyOverLimit);\r\n                checkExceedsQty = true;\r\n            }\r\n        }.bind(this));\r\n        if (checkExceedsQty) {\r\n            return;\r\n        }\r\n\r\n        if (!this.validateCustomsValue()) {\r\n            return;\r\n        }\r\n\r\n        // prepare items for packing\r\n        packagePrepareGrid.select('.grid tbody tr').each(function(item) {\r\n            var checkbox = item.select('[type=\"checkbox\"]')[0];\r\n            if (checkbox.checked) {\r\n                var qty  = item.select('[name=\"qty\"]')[0];\r\n                var qtyValue  = this._parseQty(qty);\r\n                item.select('[name=\"qty\"]')[0].value = qtyValue;\r\n                anySelected = true;\r\n                qty.disabled = 'disabled';\r\n                checkbox.disabled = 'disabled';\r\n                packagePrepareGrid.select('.grid th [type=\"checkbox\"]')[0].up('th label').hide();\r\n                item.select('[data-action=package-delete-item]')[0].show();\r\n            } else {\r\n                item.remove();\r\n            }\r\n        }.bind(this));\r\n\r\n        // packing items\r\n        if (anySelected) {\r\n            var packItems = packageBlock.select('.package_items')[0];\r\n            if (!packItems) {\r\n                packagePrepare.insert(new Element('div').addClassName('grid_prepare'));\r\n                packagePrepare.insert({after: packagePrepareGrid});\r\n                packItems = packagePrepareGrid.removeClassName('grid_prepare').addClassName('package_items');\r\n                packItems.select('.grid tbody tr').each(function(item) {\r\n                    var itemId = item.select('[type=\"checkbox\"]')[0].value;\r\n                    var qtyValue  = parseFloat(item.select('[name=\"qty\"]')[0].value);\r\n                    qtyValue = (qtyValue <= 0) ? 1 : qtyValue;\r\n\r\n                    if ('undefined' == typeof this.packages[packageId]) {\r\n                        this.packages[packageId] = {'items': [], 'params': {}};\r\n                    }\r\n                    if ('undefined' == typeof this.packages[packageId]['items'][itemId]) {\r\n                        this.packages[packageId]['items'][itemId] = {};\r\n                        this.packages[packageId]['items'][itemId]['qty'] = qtyValue;\r\n                    } else {\r\n                        this.packages[packageId]['items'][itemId]['qty'] += qtyValue;\r\n                    }\r\n                }.bind(this));\r\n            } else {\r\n                packagePrepareGrid.select('.grid tbody tr').each(function(item) {\r\n                    var itemId = item.select('[type=\"checkbox\"]')[0].value;\r\n                    var qtyValue  = parseFloat(item.select('[name=\"qty\"]')[0].value);\r\n                    qtyValue = (qtyValue <= 0) ? 1 : qtyValue;\r\n\r\n                    if ('undefined' == typeof this.packages[packageId]['items'][itemId]) {\r\n                        this.packages[packageId]['items'][itemId] = {};\r\n                        this.packages[packageId]['items'][itemId]['qty'] = qtyValue;\r\n                        packItems.select('.grid tbody')[0].insert(item);\r\n                    } else {\r\n                        this.packages[packageId]['items'][itemId]['qty'] += qtyValue;\r\n                        var packItem = packItems.select('[type=\"checkbox\"][value=\"'+itemId+'\"]')[0].up('tr').select('[name=\"qty\"]')[0];\r\n                        packItem.value = this.packages[packageId]['items'][itemId]['qty'];\r\n                    }\r\n                }.bind(this));\r\n                packagePrepareGrid.update();\r\n            }\r\n            $(packItems).show();\r\n            this._recalcContainerWeightAndCustomsValue(packItems);\r\n        } else {\r\n            packagePrepareGrid.update();\r\n        }\r\n\r\n        // show/hide disable/enable\r\n        packagePrepare.hide();\r\n        packageBlock.select('[data-action=package-save-items]')[0].hide();\r\n        packageBlock.select('[data-action=package-add-items]')[0].show();\r\n        this._setAllItemsPackedState()\r\n    },\r\n\r\n    validateItemQty: function (itemId, qty) {\r\n        return (this.defaultItemsQty[itemId] < qty) ? this.defaultItemsQty[itemId] : qty;\r\n    },\r\n\r\n    changeMeasures: function(obj) {\r\n        var incr = 0;\r\n        var incrSelected = 0;\r\n        obj.childElements().each(function(option) {\r\n            if (option.selected) {\r\n                incrSelected = incr;\r\n            }\r\n            incr++;\r\n        }.bind(this));\r\n\r\n        var packageBlock = $(obj).up('[id^=\"package_block\"]');\r\n        packageBlock.select('.measures').each(function(item){\r\n            if (item.name != obj.name) {\r\n                var incr = 0;\r\n                item.select('option').each(function(option){\r\n                    if (incr == incrSelected) {\r\n                        item.value = option.value;\r\n                        //option.selected = true\r\n                    }\r\n                    incr++;\r\n                }.bind(this));\r\n            }\r\n        }.bind(this));\r\n\r\n    },\r\n\r\n    checkSizeAndGirthParameter: function(obj, enabled) {\r\n        if (enabled == 0) {\r\n            return;\r\n        }\r\n        var currentNode = obj;\r\n\r\n        while (currentNode.nodeName != 'TBODY') {\r\n            currentNode = currentNode.parentNode;\r\n        }\r\n        if (!currentNode) {\r\n            return;\r\n        }\r\n\r\n        var packageSize = currentNode.select('select[name=package_size]');\r\n        var packageContainer = currentNode.select('select[name=package_container]');\r\n        var packageGirth = currentNode.select('input[name=container_girth]');\r\n        var packageGirthDimensionUnits = currentNode.select('select[name=container_girth_dimension_units]');\r\n\r\n        if (packageSize.length <= 0) {\r\n            return;\r\n        }\r\n\r\n        var girthEnabled = packageContainer[0].value == 'NONRECTANGULAR' || packageContainer[0].value == 'VARIABLE';\r\n\r\n        if (!girthEnabled) {\r\n            packageGirth[0].value='';\r\n            packageGirth[0].disable();\r\n            packageGirth[0].addClassName('_disabled');\r\n            packageGirthDimensionUnits[0].disable();\r\n            packageGirthDimensionUnits[0].addClassName('_disabled');\r\n        } else {\r\n            packageGirth[0].enable();\r\n            packageGirth[0].removeClassName('_disabled');\r\n            packageGirthDimensionUnits[0].enable();\r\n            packageGirthDimensionUnits[0].removeClassName('_disabled');\r\n        }\r\n\r\n        var sizeEnabled = (packageContainer[0].value == 'NONRECTANGULAR' || packageContainer[0].value == 'RECTANGULAR'\r\n            || packageContainer[0].value == 'VARIABLE');\r\n\r\n        if (!sizeEnabled) {\r\n            option = document.createElement('OPTION');\r\n            option.value = '';\r\n            option.text = '';\r\n            packageSize[0].options.add(option);\r\n            packageSize[0].value = '';\r\n            packageSize[0].disable();\r\n            packageSize[0].addClassName('_disabled');\r\n        } else {\r\n            for (i = 0; i < packageSize[0].length; i ++) {\r\n                if (packageSize[0].options[i].value == '') {\r\n                    packageSize[0].removeChild(packageSize[0].options[i]);\r\n                }\r\n            }\r\n            packageSize[0].enable();\r\n            packageSize[0].removeClassName('_disabled');\r\n        }\r\n    },\r\n\r\n    changeContainerType: function(obj) {\r\n        if (this.customizableContainers.length <= 0) {\r\n            return;\r\n        }\r\n\r\n        var disable = true;\r\n        for (var i in this.customizableContainers) {\r\n            if (this.customizableContainers[i] == obj.value) {\r\n                disable = false;\r\n                break;\r\n            }\r\n        }\r\n\r\n        var currentNode = obj;\r\n        while (currentNode.nodeName != 'TBODY') {\r\n            currentNode = currentNode.parentNode;\r\n        }\r\n        if (!currentNode) {\r\n            return;\r\n        }\r\n\r\n        $(currentNode).select(\r\n            'input[name=container_length],input[name=container_width],input[name=container_height],select[name=container_dimension_units]'\r\n        ).each(function(inputElement) {\r\n            if (disable) {\r\n                Form.Element.disable(inputElement);\r\n                inputElement.addClassName('_disabled');\r\n                if (inputElement.nodeName == 'INPUT') {\r\n                    $(inputElement).value = ''\r\n                }\r\n            } else {\r\n                Form.Element.enable(inputElement);\r\n                inputElement.removeClassName('_disabled');\r\n            }\r\n        })\r\n    },\r\n\r\n    changeContentTypes: function(obj) {\r\n        var packageBlock = $(obj).up('[id^=\"package_block\"]');\r\n        var contentType = packageBlock.select('[name=content_type]')[0];\r\n        var contentTypeOther = packageBlock.select('[name=content_type_other]')[0];\r\n        if (contentType.value == 'OTHER') {\r\n            Form.Element.enable(contentTypeOther);\r\n            contentTypeOther.removeClassName('_disabled');\r\n        } else {\r\n            Form.Element.disable(contentTypeOther);\r\n            contentTypeOther.addClassName('_disabled');\r\n        }\r\n\r\n    },\r\n\r\n//******************** Private functions **********************************//\r\n    _getItemsCount: function(items) {\r\n        var count = 0;\r\n        items.each(function(itemCount) {\r\n            if (!isNaN(itemCount)) {\r\n                count += parseFloat(itemCount);\r\n            }\r\n        }.bind(this));\r\n        return count;\r\n    },\r\n\r\n    /**\r\n     * Show/hide disable/enable buttons in case of all items packed state\r\n     */\r\n    _setAllItemsPackedState: function() {\r\n        var addPackageBtn = $$('[data-action=add-packages]')[0];\r\n        var savePackagesBtn = $$('[data-action=save-packages]')[0];\r\n        if (this._getItemsCount(this.itemsAll) > 0\r\n                && (this._checkExceedsQtyFinal(this._getItemsCount(this.getPackedItemsQty()),this._getItemsCount(this.itemsAll)))\r\n        ) {\r\n            this.packagesContent.select('[data-action=package-add-items]').each(function(button){\r\n                button.disabled = 'disabled';\r\n                button.addClassName('_disabled');\r\n            });\r\n            addPackageBtn.addClassName('_disabled');\r\n            Form.Element.disable(addPackageBtn);\r\n            savePackagesBtn.removeClassName('_disabled');\r\n            Form.Element.enable(savePackagesBtn);\r\n            savePackagesBtn.title = '';\r\n\r\n            // package number recalculation\r\n            var packagesRecalc = [];\r\n            this.packagesContent.childElements().each(function(pack) {\r\n                if (!pack.select('.package_items .grid tbody tr').length) {\r\n                    pack.remove();\r\n                }\r\n            }.bind(this));\r\n            var packagesCount = this.packagesContent.childElements().length;\r\n            this.packageIncrement = packagesCount;\r\n            this.packagesContent.childElements().each(function(pack) {\r\n                var packageId = this.getPackageId(pack);\r\n                pack.id = 'package_block_' + packagesCount;\r\n                pack.select('[data-role=package-number]')[0].update(packagesCount);\r\n                packagesRecalc[packagesCount] = this.packages[packageId];\r\n                --packagesCount;\r\n            }.bind(this));\r\n            this.packages = packagesRecalc;\r\n\r\n        } else {\r\n            this.packagesContent.select('[data-action=package-add-items]').each(function(button){\r\n                button.removeClassName('_disabled');\r\n                Form.Element.enable(button);\r\n            });\r\n            addPackageBtn.removeClassName('_disabled');\r\n            Form.Element.enable(addPackageBtn);\r\n            savePackagesBtn.addClassName('_disabled');\r\n            Form.Element.disable(savePackagesBtn);\r\n            savePackagesBtn.title = this.titleDisabledSaveBtn;\r\n        }\r\n    },\r\n\r\n    _processPackagePrapare: function(packagePrapare) {\r\n        var itemsAll = [];\r\n        packagePrapare.select('.grid tbody tr').each(function(item) {\r\n            var qty  = item.select('[name=\"qty\"]')[0];\r\n            var itemId = item.select('[type=\"checkbox\"]')[0].value;\r\n            var qtyValue = 0;\r\n            if (Object.isFunction(this.itemQtyCallback)) {\r\n                var value = this.itemQtyCallback(itemId);\r\n                qtyValue = ((typeof value == 'string') && (value.length == 0)) ? 0 : parseFloat(value);\r\n                if (isNaN(qtyValue) || qtyValue < 0) {\r\n                    qtyValue = 1;\r\n                }\r\n                qtyValue = this.validateItemQty(itemId, qtyValue);\r\n                qty.value = qtyValue;\r\n            } else {\r\n                var value = item.select('[name=\"qty\"]')[0].value;\r\n                qtyValue = ((typeof value == 'string') && (value.length == 0)) ? 0 : parseFloat(value);\r\n                if (isNaN(qtyValue) || qtyValue < 0) {\r\n                    qtyValue = 1;\r\n                }\r\n            }\r\n            if (qtyValue == 0) {\r\n                item.remove();\r\n                return;\r\n            }\r\n            var packedItems = this.getPackedItemsQty();\r\n            itemsAll[itemId] = qtyValue;\r\n            for (var packedItemId in packedItems) {\r\n                if (!isNaN(packedItemId)) {\r\n                    var packedQty = packedItems[packedItemId];\r\n                    if (itemId == packedItemId) {\r\n                        if (qtyValue == packedQty || qtyValue <= packedQty) {\r\n                            item.remove();\r\n                        } else if (qtyValue > packedQty) {\r\n                            /* fix float number precision */\r\n                            qty.value = Number(Number(Math.round((qtyValue - packedQty) + \"e+4\") + \"e-4\").toFixed(4));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }.bind(this));\r\n        if (!this.itemsAll.length) {\r\n            this.itemsAll = itemsAll;\r\n        }\r\n\r\n        packagePrapare.select('tbody input[type=\"checkbox\"]').each(function(item){\r\n            $(item).observe('change', this._observeQty);\r\n            this._observeQty.call(item);\r\n        }.bind(this))\r\n    },\r\n\r\n    _observeQty: function() {\r\n        /** this = input[type=\"checkbox\"] */\r\n        var tr  = jQuery(this).closest('tr')[0],\r\n            qty = $(tr.cells[tr.cells.length - 1]).select('input[name=\"qty\"]')[0];\r\n\r\n        if (qty.disabled = !this.checked) {\r\n            $(qty).addClassName('_disabled');\r\n        } else {\r\n            $(qty).removeClassName('_disabled');\r\n        }\r\n    },\r\n\r\n    _checkExceedsQty: function(itemId, qty) {\r\n        var packedItemQty = this.getPackedItemsQty()[itemId] ? this.getPackedItemsQty()[itemId] : 0;\r\n        var allItemQty = this.itemsAll[itemId];\r\n        return (qty * (1 - this.eps) > (allItemQty *  (1 + this.eps)  - packedItemQty * (1 - this.eps)));\r\n    },\r\n\r\n    _checkExceedsQtyFinal: function(checkOne, defQty) {\r\n        return checkOne * (1 + this.eps) >= defQty * (1 - this.eps);\r\n    },\r\n\r\n    _recalcContainerWeightAndCustomsValue: function(container) {\r\n        var packageBlock = container.up('[id^=\"package_block\"]');\r\n        var packageId = this.getPackageId(packageBlock);\r\n        var containerWeight = packageBlock.select('[name=\"container_weight\"]')[0];\r\n        var containerCustomsValue = packageBlock.select('[name=\"package_customs_value\"]')[0];\r\n        containerWeight.value = 0;\r\n        containerCustomsValue.value = 0;\r\n        container.select('.grid tbody tr').each(function(item) {\r\n            var itemId = item.select('[type=\"checkbox\"]')[0].value;\r\n            var qtyValue  = parseFloat(item.select('[name=\"qty\"]')[0].value);\r\n            if (isNaN(qtyValue) || qtyValue <= 0) {\r\n                qtyValue = 1;\r\n                item.select('[name=\"qty\"]')[0].value = qtyValue;\r\n            }\r\n            var itemWeight = parseFloat(this._getElementText(item.select('[data-role=item-weight]')[0]));\r\n            containerWeight.value = parseFloat(containerWeight.value) + (itemWeight * qtyValue);\r\n            var itemCustomsValue = parseFloat(item.select('[name=\"customs_value\"]')[0].value) || 0;\r\n            containerCustomsValue.value = parseFloat(containerCustomsValue.value) + itemCustomsValue * qtyValue;\r\n            this.packages[packageId]['items'][itemId]['customs_value'] = itemCustomsValue;\r\n        }.bind(this));\r\n        containerWeight.value = parseFloat(parseFloat(Math.round(containerWeight.value + \"e+4\") + \"e-4\").toFixed(4));\r\n        containerCustomsValue.value = parseFloat(Math.round(containerCustomsValue.value + \"e+2\") + \"e-2\").toFixed(2);\r\n        if (containerCustomsValue.value == 0) {\r\n            containerCustomsValue.value = '';\r\n        }\r\n    },\r\n\r\n    _getElementText: function(el) {\r\n        if ('string' == typeof el.textContent) {\r\n            return el.textContent;\r\n        }\r\n        if ('string' == typeof el.innerText) {\r\n            return el.innerText;\r\n        }\r\n        return el.innerHTML.replace(/<[^>]*>/g,'');\r\n    }\r\n//******************** End Private functions ******************************//\r\n};\r\n\r\n});\r\n","Magento_GroupedProduct/js/grouped-product.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true */\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'jquery/ui',\r\n    'Magento_Ui/js/modal/modal',\r\n    'mage/translate',\r\n    'mage/adminhtml/grid'\r\n], function ($, mageTemplate) {\r\n    'use strict';\r\n\r\n    $.widget('mage.groupedProduct', {\r\n        /**\r\n         * Create widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.$grid = this.element.find('[data-role=grouped-product-grid]');\r\n            this.$grid.sortable({\r\n                distance: 8,\r\n                items: '[data-role=row]',\r\n                tolerance: 'pointer',\r\n                cancel: ':input',\r\n                update: $.proxy(function () {\r\n                    this.element.trigger('resort');\r\n                }, this)\r\n            });\r\n\r\n            this.productTmpl = mageTemplate('#group-product-template');\r\n\r\n            $.each(\r\n                this.$grid.data('products'),\r\n                $.proxy(function (index, product) {\r\n                    this._add(null, product);\r\n                }, this)\r\n            );\r\n\r\n            this._on({\r\n                'add': '_add',\r\n                'resort': '_resort',\r\n                'click [data-column=actions] [data-role=delete]': '_remove'\r\n            });\r\n\r\n            this._bindDialog();\r\n            this._updateGridVisibility();\r\n        },\r\n\r\n        /**\r\n         * Add product to grouped grid\r\n         * @param {EventObject} event\r\n         * @param {Object} product\r\n         * @private\r\n         */\r\n        _add: function (event, product) {\r\n            var tmpl,\r\n                productExists;\r\n\r\n            productExists = this.$grid.find('[data-role=id]')\r\n                .filter(function (index, element) {\r\n                    return $(element).val() == product.id;\r\n                }).length;\r\n\r\n            if (!productExists) {\r\n                tmpl = this.productTmpl({\r\n                    data: product\r\n                });\r\n\r\n                $(tmpl).appendTo(this.$grid.find('tbody'));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Remove product\r\n         * @param {EventObject} event\r\n         * @private\r\n         */\r\n        _remove: function (event) {\r\n            $(event.target).closest('[data-role=row]').remove();\r\n            this.element.trigger('resort');\r\n            this._updateGridVisibility();\r\n        },\r\n\r\n        /**\r\n         * Resort products\r\n         * @private\r\n         */\r\n        _resort: function () {\r\n            this.element.find('[data-role=position]').each($.proxy(function (index, element) {\r\n                $(element).val(index + 1);\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Create modal for show product\r\n         *\r\n         * @private\r\n         */\r\n        _bindDialog: function () {\r\n            var widget = this,\r\n                selectedProductList = {},\r\n                popup = $('[data-role=add-product-dialog]');\r\n\r\n            popup.modal({\r\n                type: 'slide',\r\n                innerScroll: true,\r\n                title: $.mage.__('Add Products to Group'),\r\n                modalClass: 'grouped',\r\n                open: function () {\r\n                    $(this).addClass('admin__scope-old'); // ToDo UI: remove with old styles removal\r\n                },\r\n                buttons: [{\r\n                    id: 'grouped-product-dialog-apply-button',\r\n                    text: $.mage.__('Add Selected Products'),\r\n                    'class': 'action-primary action-add',\r\n                    click: function () {\r\n                        $.each(selectedProductList, function (index, product) {\r\n                            widget._add(null, product);\r\n                        });\r\n                        widget._resort();\r\n                        widget._updateGridVisibility();\r\n                        popup.modal('closeModal');\r\n                    }\r\n                }]\r\n            });\r\n\r\n            popup.on('click', '[data-role=row]', function (event) {\r\n                var target = $(event.target);\r\n\r\n                if (!target.is('input')) {\r\n                    target.closest('[data-role=row]')\r\n                        .find('[data-column=entity_ids] input')\r\n                        .prop('checked', function (element, value) {\r\n                            return !value;\r\n                        })\r\n                        .trigger('change');\r\n                }\r\n            });\r\n\r\n            popup.on(\r\n                'change',\r\n                '[data-role=row] [data-column=entity_ids] input',\r\n                $.proxy(function (event) {\r\n                    var element = $(event.target),\r\n                        product = {};\r\n\r\n                    if (element.is(':checked')) {\r\n                        product.id = element.val();\r\n                        product.qty = 0;\r\n                        element.closest('[data-role=row]').find('[data-column]').each(function (index, element) {\r\n                            product[$(element).data('column')] = $.trim($(element).text());\r\n                        });\r\n                        selectedProductList[product.id] = product;\r\n                    } else {\r\n                        delete selectedProductList[element.val()];\r\n                    }\r\n                }, this)\r\n            );\r\n\r\n            var gridPopup = $(this.options.gridPopup).data('gridObject');\r\n\r\n            $('[data-role=add-product]').on('click', function (event) {\r\n                event.preventDefault();\r\n                popup.modal('openModal');\r\n                gridPopup.reload();\r\n                selectedProductList = {};\r\n            });\r\n\r\n            $('#' + gridPopup.containerId)\r\n                .on('gridajaxsettings', function (event, ajaxSettings) {\r\n                    var ids = widget.$grid.find('[data-role=id]').map(function (index, element) {\r\n                        return $(element).val();\r\n                    }).toArray();\r\n                    ajaxSettings.data.filter = $.extend(ajaxSettings.data.filter || {}, {\r\n                        'entity_ids': ids\r\n                    });\r\n                })\r\n                .on('gridajax', function (event, ajaxRequest) {\r\n                    ajaxRequest.done(function () {\r\n                        popup.find('[data-role=row] [data-column=entity_ids] input')\r\n                            .each(function (index, element) {\r\n                                var $element = $(element);\r\n                                $element.prop('checked', !!selectedProductList[$element.val()]);\r\n                            });\r\n                    });\r\n                });\r\n        },\r\n\r\n        /**\r\n         * Show or hide message\r\n         * @private\r\n         */\r\n        _updateGridVisibility: function () {\r\n            var showGrid = this.element.find('[data-role=id]').length > 0;\r\n            this.element.find('.grid-container').toggle(showGrid);\r\n            this.element.find('.no-products-message').toggle(!showGrid);\r\n        }\r\n    });\r\n\r\n    return $.mage.groupedProduct;\r\n});\r\n","Magento_Payment/transparent.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'Magento_Ui/js/modal/alert',\r\n    'Magento_Payment/js/model/credit-card-validation/validator'\r\n], function ($, mageTemplate, alert) {\r\n    'use strict';\r\n\r\n    $.widget('mage.transparent', {\r\n        options: {\r\n            editFormSelector: '#edit_form',\r\n            hiddenFormTmpl:\r\n                '<form target=\"<%= data.target %>\" action=\"<%= data.action %>\"' +\r\n                'method=\"POST\" hidden' +\r\n                'enctype=\"application/x-www-form-urlencoded\" class=\"no-display\">' +\r\n                    '<% _.each(data.inputs, function(val, key){ %>' +\r\n                    '<input value=\"<%= val %>\" name=\"<%= key %>\" type=\"hidden\">' +\r\n                    '<% }); %>' +\r\n                '</form>',\r\n            cgiUrl: null,\r\n            orderSaveUrl: null,\r\n            controller: null,\r\n            gateway: null,\r\n            dateDelim: null,\r\n            cardFieldsMap: null,\r\n            expireYearLength: 2\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.hiddenFormTmpl = mageTemplate(this.options.hiddenFormTmpl);\r\n\r\n            $(this.options.editFormSelector).on('changePaymentMethod', this._setPlaceOrderHandler.bind(this));\r\n            $(this.options.editFormSelector).trigger('changePaymentMethod', [\r\n                $(this.options.editFormSelector).find(':radio[name=\"payment[method]\"]:checked').val()\r\n            ]);\r\n        },\r\n\r\n        /**\r\n         * Handler for form submit.\r\n         *\r\n         * @param {Object} event\r\n         * @param {String} method\r\n         */\r\n        _setPlaceOrderHandler: function (event, method) {\r\n            if (method === this.options.gateway) {\r\n                $(this.options.editFormSelector)\r\n                    .off('submitOrder')\r\n                    .on('submitOrder.' +  this.options.gateway, this._placeOrderHandler.bind(this));\r\n            } else {\r\n                $(this.options.editFormSelector)\r\n                    .off('submitOrder.' + this.options.gateway);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handler for form submit to call gateway for credit card validation.\r\n         *\r\n         * @return {Boolean}\r\n         * @private\r\n         */\r\n        _placeOrderHandler: function () {\r\n            if ($(this.options.editFormSelector).valid()) {\r\n                this._orderSave();\r\n            } else {\r\n                $('body').trigger('processStop');\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Handler for Place Order button to call gateway for credit card validation.\r\n         * Save order and generate post data for gateway call.\r\n         *\r\n         * @private\r\n         */\r\n        _orderSave: function () {\r\n            // jscs:ignore disallowTrailingWhitespace\r\n            /*eslint no-undef:0*/\r\n            var postData = {\r\n                'form_key': FORM_KEY,\r\n                'cc_type': this.ccType()\r\n            };\r\n\r\n            $.ajax({\r\n                url: this.options.orderSaveUrl,\r\n                type: 'post',\r\n                context: this,\r\n                data: postData,\r\n                dataType: 'json',\r\n                //eslint-disable-line lines-around-comment\r\n                /**\r\n                 * Success callback\r\n                 * @param {Object} response\r\n                 */\r\n                success: function (response) {\r\n                    if (response.success && response[this.options.gateway]) {\r\n                        this._postPaymentToGateway(response);\r\n                    } else {\r\n                        this._processErrors(response);\r\n                    }\r\n                },\r\n                complete: function () {\r\n                    $('body').trigger('processStop');\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Post data to gateway for credit card validation.\r\n         *\r\n         * @param {Object} response\r\n         * @private\r\n         */\r\n        _postPaymentToGateway: function (response) {\r\n            var $iframeSelector = $('[data-container=\"' + this.options.gateway + '-transparent-iframe\"]'),\r\n                data,\r\n                tmpl,\r\n                iframe;\r\n\r\n            data = this._preparePaymentData(response);\r\n            tmpl = this.hiddenFormTmpl({\r\n                data: {\r\n                    target: $iframeSelector.attr('name'),\r\n                    action: this.options.cgiUrl,\r\n                    inputs: data\r\n                }\r\n            });\r\n\r\n            iframe = $iframeSelector\r\n                .on('submit', function (event) {\r\n                    event.stopPropagation();\r\n                });\r\n            $(tmpl).appendTo(iframe).submit();\r\n            iframe.html('');\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        ccType: function () {\r\n            return this.element.find(\r\n                '[data-container=\"' + this.options.gateway + '-cc-type\"]'\r\n            ).val();\r\n        },\r\n\r\n        /**\r\n         * Add credit card fields to post data for gateway.\r\n         *\r\n         * @param {Object} response\r\n         * @private\r\n         */\r\n        _preparePaymentData: function (response) {\r\n            var ccfields,\r\n                data,\r\n                preparedata;\r\n\r\n            data = response[this.options.gateway].fields;\r\n            ccfields = this.options.cardFieldsMap;\r\n\r\n            if (this.element.find('[data-container=\"' + this.options.gateway + '-cc-cvv\"]').length) {\r\n                data[ccfields.cccvv] = this.element.find(\r\n                    '[data-container=\"' + this.options.gateway + '-cc-cvv\"]'\r\n                ).val();\r\n            }\r\n            preparedata = this._prepareExpDate();\r\n            data[ccfields.ccexpdate] = preparedata.month + this.options.dateDelim + preparedata.year;\r\n            data[ccfields.ccnum] = this.element.find(\r\n                '[data-container=\"' + this.options.gateway + '-cc-number\"]'\r\n            ).val();\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Grab Month and Year into one\r\n         * @returns {Object}\r\n         * @private\r\n         */\r\n        _prepareExpDate: function () {\r\n            var year = this.element.find('[data-container=\"' + this.options.gateway + '-cc-year\"]').val(),\r\n                month = parseInt(\r\n                    this.element.find('[data-container=\"' + this.options.gateway + '-cc-month\"]').val(), 10\r\n                );\r\n\r\n            if (year.length > this.options.expireYearLength) {\r\n                year = year.substring(year.length - this.options.expireYearLength);\r\n            }\r\n\r\n            if (month < 10) {\r\n                month = '0' + month;\r\n            }\r\n\r\n            return {\r\n                month: month, year: year\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Processing errors\r\n         *\r\n         * @param {Object} response\r\n         * @private\r\n         */\r\n        _processErrors: function (response) {\r\n            var msg = response['error_messages'];\r\n\r\n            if (typeof msg === 'object') {\r\n                alert({\r\n                    content: msg.join('\\n')\r\n                });\r\n            }\r\n\r\n            if (msg) {\r\n                alert({\r\n                    content: msg\r\n                });\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.transparent;\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-data.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [],\r\n    function () {\r\n        'use strict';\r\n\r\n        return {\r\n            creditCard: null,\r\n            creditCardNumber: null,\r\n            expirationMonth: null,\r\n            expirationYear: null,\r\n            cvvCode: null\r\n        };\r\n    }\r\n);\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [\r\n        'mageUtils',\r\n        'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/luhn10-validator',\r\n        'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/credit-card-type'\r\n    ],\r\n    function (utils, luhn10, creditCardTypes) {\r\n        'use strict';\r\n\r\n        /**\r\n         * Validation result wrapper\r\n         * @param {Object} card\r\n         * @param {Boolean} isPotentiallyValid\r\n         * @param {Boolean} isValid\r\n         * @returns {Object}\r\n         */\r\n        function resultWrapper(card, isPotentiallyValid, isValid) {\r\n            return {\r\n                card: card,\r\n                isValid: isValid,\r\n                isPotentiallyValid: isPotentiallyValid\r\n            };\r\n        }\r\n\r\n        return function (value) {\r\n            var potentialTypes,\r\n                cardType,\r\n                valid,\r\n                i,\r\n                maxLength;\r\n\r\n            if (utils.isEmpty(value)) {\r\n                return resultWrapper(null, false, false);\r\n            }\r\n\r\n            value = value.replace(/\\-|\\s/g, '');\r\n\r\n            if (!/^\\d*$/.test(value)) {\r\n                return resultWrapper(null, false, false);\r\n            }\r\n\r\n            potentialTypes = creditCardTypes.getCardTypes(value);\r\n\r\n            if (potentialTypes.length === 0) {\r\n                return resultWrapper(null, false, false);\r\n            } else if (potentialTypes.length !== 1) {\r\n                return resultWrapper(null, true, false);\r\n            }\r\n\r\n            cardType = potentialTypes[0];\r\n\r\n            if (cardType.type === 'unionpay') {  // UnionPay is not Luhn 10 compliant\r\n                valid = true;\r\n            } else {\r\n                valid = luhn10(value);\r\n            }\r\n\r\n            for (i = 0; i < cardType.lengths.length; i++) {\r\n                if (cardType.lengths[i] === value.length) {\r\n                    return resultWrapper(cardType, valid, valid);\r\n                }\r\n            }\r\n\r\n            maxLength = Math.max.apply(null, cardType.lengths);\r\n\r\n            if (value.length < maxLength) {\r\n                return resultWrapper(cardType, true, false);\r\n            }\r\n\r\n            return resultWrapper(cardType, false, false);\r\n        };\r\n    }\r\n);\r\n","Magento_Payment/js/model/credit-card-validation/cvv-validator.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [],\r\n    function () {\r\n        'use strict';\r\n\r\n        /**\r\n         * Validation result wrapper\r\n         * @param {Boolean} isValid\r\n         * @param {Boolean} isPotentiallyValid\r\n         * @returns {Object}\r\n         */\r\n        function resultWrapper(isValid, isPotentiallyValid) {\r\n            return {\r\n                isValid: isValid,\r\n                isPotentiallyValid: isPotentiallyValid\r\n            };\r\n        }\r\n\r\n        /**\r\n         * CVV number validation\r\n         * validate digit count fot CVV code\r\n         */\r\n        return function (value, maxLength) {\r\n            var DEFAULT_LENGTH = 3;\r\n\r\n            maxLength = maxLength || DEFAULT_LENGTH;\r\n\r\n            if (!/^\\d*$/.test(value)) {\r\n                return resultWrapper(false, false);\r\n            }\r\n\r\n            if (value.length === maxLength) {\r\n                return resultWrapper(true, true);\r\n            }\r\n\r\n            if (value.length < maxLength) {\r\n                return resultWrapper(false, true);\r\n            }\r\n\r\n            if (value.length > maxLength) {\r\n                return resultWrapper(false, false);\r\n            }\r\n        };\r\n    }\r\n);\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [\r\n        'mageUtils',\r\n        'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/parse-date',\r\n        'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator',\r\n        'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator'\r\n    ],\r\n    function (utils, parseDate, expirationMonth, expirationYear) {\r\n        'use strict';\r\n\r\n        /**\r\n         * Validation result wrapper\r\n         * @param {Boolean} isValid\r\n         * @param {Boolean} isPotentiallyValid\r\n         * @param {String} month\r\n         * @param {String} year\r\n         * @returns {Object}\r\n         */\r\n        function resultWrapper(isValid, isPotentiallyValid, month, year) {\r\n            return {\r\n                isValid: isValid,\r\n                isPotentiallyValid: isPotentiallyValid,\r\n                month: month,\r\n                year: year\r\n            };\r\n        }\r\n\r\n        return function (value) {\r\n            var date,\r\n                monthValid,\r\n                yearValid;\r\n\r\n            if (utils.isEmpty(value)) {\r\n                return resultWrapper(false, false, null, null);\r\n            }\r\n\r\n            value = value.replace(/^(\\d\\d) (\\d\\d(\\d\\d)?)$/, '$1/$2');\r\n            date = parseDate(value);\r\n            monthValid = expirationMonth(date.month);\r\n            yearValid = expirationYear(date.year);\r\n\r\n            if (monthValid.isValid && yearValid.isValid) {\r\n                return resultWrapper(true, true, date.month, date.year);\r\n            }\r\n\r\n            if (monthValid.isPotentiallyValid && yearValid.isPotentiallyValid) {\r\n                return resultWrapper(false, true, null, null);\r\n            }\r\n\r\n            return resultWrapper(false, false, null, null);\r\n        };\r\n    }\r\n);\r\n","Magento_Payment/js/model/credit-card-validation/validator.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\n(function (factory) {\r\n    'use strict';\r\n\r\n    if (typeof define === 'function' && define.amd) {\r\n        define([\r\n            'jquery',\r\n            'Magento_Payment/js/model/credit-card-validation/cvv-validator',\r\n            'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator',\r\n            'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator',\r\n            'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator',\r\n            'Magento_Payment/js/model/credit-card-validation/credit-card-data',\r\n            'mage/translate'\r\n        ], factory);\r\n    } else {\r\n        factory(jQuery);\r\n    }\r\n}(function ($, cvvValidator, creditCardNumberValidator, expirationDateValidator, monthValidator, creditCardData) {\r\n    'use strict';\r\n\r\n    $.each({\r\n        'validate-card-type': [\r\n            function (number, item, allowedTypes) {\r\n                var cardInfo,\r\n                    i,\r\n                    l;\r\n\r\n                if (!creditCardNumberValidator(number).isValid) {\r\n                    return false;\r\n                } else {\r\n                    cardInfo = creditCardNumberValidator(number).card;\r\n\r\n                    for (i = 0, l = allowedTypes.length; i < l; i++) {\r\n                        if (cardInfo.title == allowedTypes[i].type) {\r\n                            return true;\r\n                        }\r\n                    }\r\n\r\n                    return false;\r\n                }\r\n            },\r\n            $.mage.__('Please enter a valid credit card type number.')\r\n        ],\r\n        'validate-card-number': [\r\n\r\n            /**\r\n             * Validate credit card number based on mod 10\r\n             * @param {String} number - credit card number\r\n             * @return {Boolean}\r\n             */\r\n            function (number) {\r\n                return creditCardNumberValidator(number).isValid;\r\n            },\r\n            $.mage.__('Please enter a valid credit card number.')\r\n        ],\r\n        'validate-card-date': [\r\n\r\n            /**\r\n             * Validate credit card number based on mod 10\r\n             * @param {String} date - month\r\n             * @return {Boolean}\r\n             */\r\n            function (date) {\r\n                return monthValidator(date).isValid;\r\n            },\r\n            $.mage.__('Incorrect credit card expiration month.')\r\n        ],\r\n        'validate-card-cvv': [\r\n\r\n            /**\r\n             * Validate credit card number based on mod 10\r\n             * @param {String} cvv - month\r\n             * @return {Boolean}\r\n             */\r\n            function (cvv) {\r\n                var maxLength = creditCardData.creditCard ? creditCardData.creditCard.code.size : 3;\r\n\r\n                return cvvValidator(cvv, maxLength).isValid;\r\n            },\r\n            $.mage.__('Please enter a valid credit card verification number.')\r\n        ],\r\n        'validate-card-year': [\r\n\r\n            /**\r\n             * Validate credit card number based on mod 10\r\n             * @param {String} date - month\r\n             * @return {Boolean}\r\n             */\r\n            function (date) {\r\n                return monthValidator(date).isValid;\r\n            },\r\n            $.mage.__('Incorrect credit card expiration year.')\r\n        ]\r\n\r\n    }, function (i, rule) {\r\n        rule.unshift(i);\r\n        $.validator.addMethod.apply($.validator, rule);\r\n    });\r\n}));\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/credit-card-type.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'mageUtils'\r\n    ],\r\n    function ($, utils) {\r\n        'use strict';\r\n\r\n        var types = [\r\n            {\r\n                title: 'Visa',\r\n                type: 'VI',\r\n                pattern: '^4\\\\d*$',\r\n                gaps: [4, 8, 12],\r\n                lengths: [16],\r\n                code: {\r\n                    name: 'CVV',\r\n                    size: 3\r\n                }\r\n            },\r\n            {\r\n                title: 'MasterCard',\r\n                type: 'MC',\r\n                pattern: '^(?:5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$',\r\n                gaps: [4, 8, 12],\r\n                lengths: [16],\r\n                code: {\r\n                    name: 'CVC',\r\n                    size: 3\r\n                }\r\n            },\r\n            {\r\n                title: 'American Express',\r\n                type: 'AE',\r\n                pattern: '^3([47]\\\\d*)?$',\r\n                isAmex: true,\r\n                gaps: [4, 10],\r\n                lengths: [15],\r\n                code: {\r\n                    name: 'CID',\r\n                    size: 4\r\n                }\r\n            },\r\n            {\r\n                title: 'Diners',\r\n                type: 'DN',\r\n                pattern: '^(3(0[0-5]|095|6|[8-9]))\\\\d*$',\r\n                gaps: [4, 10],\r\n                lengths: [14, 16, 17, 18, 19],\r\n                code: {\r\n                    name: 'CVV',\r\n                    size: 3\r\n                }\r\n            },\r\n            {\r\n                title: 'Discover',\r\n                type: 'DI',\r\n                pattern: '^(6011(0|[2-4]|74|7[7-9]|8[6-9]|9)|6(4[4-9]|5))\\\\d*$',\r\n                gaps: [4, 8, 12],\r\n                lengths: [16, 17, 18, 19],\r\n                code: {\r\n                    name: 'CID',\r\n                    size: 3\r\n                }\r\n            },\r\n            {\r\n                title: 'JCB',\r\n                type: 'JCB',\r\n                pattern: '^35(2[8-9]|[3-8])\\\\d*$',\r\n                gaps: [4, 8, 12],\r\n                lengths: [16, 17, 18, 19],\r\n                code: {\r\n                    name: 'CVV',\r\n                    size: 3\r\n                }\r\n            },\r\n            {\r\n                title: 'UnionPay',\r\n                type: 'UN',\r\n                pattern: '^(622(1(2[6-9]|[3-9])|[3-8]|9([[0-1]|2[0-5]))|62[4-6]|628([2-8]))\\\\d*?$',\r\n                gaps: [4, 8, 12],\r\n                lengths: [16, 17, 18, 19],\r\n                code: {\r\n                    name: 'CVN',\r\n                    size: 3\r\n                }\r\n            },\r\n            {\r\n                title: 'Maestro International',\r\n                type: 'MI',\r\n                pattern: '^(5(0|[6-9])|63|67(?!59|6770|6774))\\\\d*$',\r\n                gaps: [4, 8, 12],\r\n                lengths: [12, 13, 14, 15, 16, 17, 18, 19],\r\n                code: {\r\n                    name: 'CVC',\r\n                    size: 3\r\n                }\r\n            },\r\n            {\r\n                title: 'Maestro Domestic',\r\n                type: 'MD',\r\n                pattern: '^6759(?!24|38|40|6[3-9]|70|76)|676770|676774\\\\d*$',\r\n                gaps: [4, 8, 12],\r\n                lengths: [12, 13, 14, 15, 16, 17, 18, 19],\r\n                code: {\r\n                    name: 'CVC',\r\n                    size: 3\r\n                }\r\n            }\r\n        ];\r\n\r\n        return {\r\n            /**\r\n             * Get credit card type\r\n             * @param {String} cardNumber\r\n             * @returns {Array}\r\n             */\r\n            getCardTypes: function (cardNumber) {\r\n                var i, value,\r\n                    result = [];\r\n\r\n                if (utils.isEmpty(cardNumber)) {\r\n                    return result;\r\n                }\r\n\r\n                if (cardNumber === '') {\r\n                    return $.extend(true, {}, types);\r\n                }\r\n\r\n                for (i = 0; i < types.length; i++) {\r\n                    value = types[i];\r\n\r\n                    if (new RegExp(value.pattern).test(cardNumber)) {\r\n                        result.push($.extend(true, {}, value));\r\n                    }\r\n                }\r\n\r\n                return result;\r\n            }\r\n        };\r\n    }\r\n);\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/luhn10-validator.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [],\r\n    function () {\r\n        'use strict';\r\n\r\n        /**\r\n         * Luhn algorithm verification\r\n         */\r\n        return function (a, b, c, d, e) {\r\n            for (d = +a[b = a.length - 1], e = 0; b--;) {\r\n                c = +a[b];\r\n                d += ++e % 2 ? 2 * c % 10 + (c > 4) : c;\r\n            }\r\n\r\n            return !(d % 10);\r\n        };\r\n    }\r\n);\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [],\r\n    function () {\r\n        'use strict';\r\n\r\n        /**\r\n         * Validation result wrapper\r\n         * @param {Boolean} isValid\r\n         * @param {Boolean} isPotentiallyValid\r\n         * @returns {Object}\r\n         */\r\n        function resultWrapper(isValid, isPotentiallyValid) {\r\n            return {\r\n                isValid: isValid,\r\n                isPotentiallyValid: isPotentiallyValid\r\n            };\r\n        }\r\n\r\n        return function (value) {\r\n            var month,\r\n                monthValid;\r\n\r\n            if (value.replace(/\\s/g, '') === '' || value === '0') {\r\n                return resultWrapper(false, true);\r\n            }\r\n\r\n            if (!/^\\d*$/.test(value)) {\r\n                return resultWrapper(false, false);\r\n            }\r\n\r\n            if (isNaN(value)) {\r\n                return resultWrapper(false, false);\r\n            }\r\n\r\n            month = parseInt(value, 10);\r\n            monthValid = month > 0 && month < 13;\r\n\r\n            return resultWrapper(monthValid, monthValid);\r\n        };\r\n    }\r\n);\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [],\r\n    function () {\r\n        'use strict';\r\n\r\n        /**\r\n         * Validation result wrapper\r\n         * @param {Boolean} isValid\r\n         * @param {Boolean} isPotentiallyValid\r\n         * @returns {Object}\r\n         */\r\n        function resultWrapper(isValid, isPotentiallyValid) {\r\n            return {\r\n                isValid: isValid,\r\n                isPotentiallyValid: isPotentiallyValid\r\n            };\r\n        }\r\n\r\n        return function (value) {\r\n            var currentYear = new Date().getFullYear(),\r\n                len = value.length,\r\n                valid,\r\n                expMaxLifetime = 19;\r\n\r\n            if (value.replace(/\\s/g, '') === '') {\r\n                return resultWrapper(false, true);\r\n            }\r\n\r\n            if (!/^\\d*$/.test(value)) {\r\n                return resultWrapper(false, false);\r\n            }\r\n\r\n            if (len !== 4) {\r\n                return resultWrapper(false, true);\r\n            }\r\n\r\n            value = parseInt(value, 10);\r\n            valid = value >= currentYear && value <= currentYear + expMaxLifetime;\r\n\r\n            return resultWrapper(valid, valid);\r\n        };\r\n    }\r\n);\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/parse-date.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [],\r\n    function () {\r\n        'use strict';\r\n\r\n        return function (value) {\r\n            var month, len;\r\n\r\n            if (value.match('/')) {\r\n                value = value.split(/\\s*\\/\\s*/g);\r\n\r\n                return {\r\n                    month: value[0],\r\n                    year: value.slice(1).join()\r\n                };\r\n            }\r\n\r\n            len = value[0] === '0' || value.length > 5 || value.length === 4 || value.length === 3 ? 2 : 1;\r\n            month = value.substr(0, len);\r\n\r\n            return {\r\n                month: month,\r\n                year: value.substr(month.length, 4)\r\n            };\r\n        };\r\n    }\r\n);\r\n","Magento_Downloadable/downloadable-type-handler.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true expr:true*/\r\ndefine([\r\n    'jquery',\r\n    'Magento_Catalog/js/product/weight-handler',\r\n    'Magento_Catalog/catalog/type-events'\r\n], function ($, weight, productType) {\r\n    'use strict';\r\n\r\n    return {\r\n        $checkbox: $('[data-action=change-type-product-downloadable]'),\r\n        $items: $('#product_info_tabs_downloadable_items'),\r\n        $tab: null,\r\n        isDownloadable: false,\r\n\r\n        /**\r\n         * Show\r\n         */\r\n        show: function () {\r\n            this.$checkbox.prop('checked', true);\r\n            this.$items.show();\r\n        },\r\n\r\n        /**\r\n         * Hide\r\n         */\r\n        hide: function () {\r\n            this.$checkbox.prop('checked', false);\r\n            this.$items.hide();\r\n        },\r\n\r\n        /**\r\n         * Constructor component\r\n         * @param {Object} data - this backend data\r\n         */\r\n        'Magento_Downloadable/downloadable-type-handler': function (data) {\r\n            this.$tab = $('[data-tab=' + data.tabId + ']');\r\n            this.isDownloadable = data.isDownloadable;\r\n            this.bindAll();\r\n            this._initType();\r\n        },\r\n\r\n        /**\r\n         * Bind all\r\n         */\r\n        bindAll: function () {\r\n            this.$checkbox.on('change', function (event) {\r\n                $(document).trigger('setTypeProduct', $(event.target).prop('checked') ?\r\n                    'downloadable' :\r\n                    productType.type.init === 'downloadable' ? 'virtual' : productType.type.init\r\n                );\r\n            });\r\n\r\n            $(document).on('changeTypeProduct', this._initType.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Init type\r\n         * @private\r\n         */\r\n        _initType: function () {\r\n            if (productType.type.current === 'downloadable') {\r\n                weight.change(false);\r\n                weight.$weightSwitcher().one('change', function () {\r\n                    $(document).trigger(\r\n                        'setTypeProduct',\r\n                        productType.type.init === 'downloadable' ? 'virtual' : productType.type.init\r\n                    );\r\n                });\r\n                this.show();\r\n            } else {\r\n                this.hide();\r\n            }\r\n        }\r\n    };\r\n});\r\n","Magento_Downloadable/js/components/file-uploader.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Ui/js/form/element/file-uploader'\r\n], function (Element) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            fileInputName: ''\r\n        },\r\n\r\n        /**\r\n         * Adds provided file to the files list.\r\n         *\r\n         * @param {Object} file\r\n         * @returns {FileUploder} Chainable.\r\n         */\r\n        addFile: function (file) {\r\n            var processedFile = this.processFile(file),\r\n                tmpFile = [],\r\n                resultFile = {\r\n                'file': processedFile.file,\r\n                'name': processedFile.name,\r\n                'size': processedFile.size,\r\n                'status': processedFile.status ? processedFile.status : 'new'\r\n            };\r\n\r\n            tmpFile[0] = resultFile;\r\n\r\n            this.isMultipleFiles ?\r\n                this.value.push(tmpFile) :\r\n                this.value(tmpFile);\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Downloadable/js/components/is-downloadable-handler.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Ui/js/form/element/single-checkbox'\r\n], function (Element) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            listens: {\r\n                disabled: 'changeVisibility'\r\n            },\r\n            modules: {\r\n                samplesFieldset: '${ $.samplesFieldset }',\r\n                linksFieldset: '${ $.linksFieldset}'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Change visibility for samplesFieldset & linksFieldset based on current statuses of checkbox.\r\n         */\r\n        changeVisibility: function () {\r\n            if (this.samplesFieldset() && this.linksFieldset()) {\r\n                if (this.checked() && !this.disabled()) {\r\n                    this.samplesFieldset().visible(true);\r\n                    this.linksFieldset().visible(true);\r\n                } else {\r\n                    this.samplesFieldset().visible(false);\r\n                    this.linksFieldset().visible(false);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handle checked state changes for checkbox / radio button.\r\n         *\r\n         * @param {Boolean} newChecked\r\n         */\r\n        onCheckedChanged: function (newChecked) {\r\n            this.changeVisibility();\r\n            this._super(newChecked);\r\n        }\r\n    });\r\n});\r\n","Magento_Downloadable/js/components/price-handler.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Ui/js/form/element/abstract'\r\n], function (Element) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            linksPurchasedSeparately: '0',\r\n            useDefaultPrice: false,\r\n            listens: {\r\n                linksPurchasedSeparately: 'changeDisabledStatus',\r\n                useDefaultPrice: 'changeDisabledStatus'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Invokes initialize method of parent class,\r\n         * contains initialization logic\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            this.changeDisabledStatus();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Disable/enable price field\r\n         */\r\n        changeDisabledStatus: function () {\r\n            if (this.linksPurchasedSeparately === '1') {\r\n                if (this.useDefaultPrice) {\r\n                    this.disabled(true);\r\n                } else {\r\n                    this.disabled(false);\r\n                }\r\n            } else {\r\n                this.disabled(true);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Downloadable/js/components/upload-type-handler.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Ui/js/form/element/select',\r\n    'uiRegistry'\r\n], function (Select, registry) {\r\n    'use strict';\r\n\r\n    return Select.extend({\r\n        defaults: {\r\n            listens: {\r\n                value: 'changeTypeUpload'\r\n            },\r\n            typeUrl: 'file',\r\n            typeFile: 'link_url',\r\n            filterPlaceholder: 'ns = ${ $.ns }, parentScope = ${ $.parentScope }'\r\n        },\r\n\r\n        /**\r\n         * Initialize component.\r\n         * @returns {Element}\r\n         */\r\n        initialize: function () {\r\n            return this\r\n                ._super()\r\n                .changeTypeUpload(this.initialValue);\r\n        },\r\n\r\n        /**\r\n         * Callback that fires when 'value' property is updated.\r\n         *\r\n         * @param {String} currentValue\r\n         * @returns {*}\r\n         */\r\n        onUpdate: function (currentValue) {\r\n            this.changeTypeUpload(currentValue);\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * Change visibility for typeUrl/typeFile based on current value.\r\n         *\r\n         * @param {String} currentValue\r\n         */\r\n        changeTypeUpload: function (currentValue) {\r\n            var componentFile = this.filterPlaceholder + ', index=' + this.typeFile,\r\n                componentUrl = this.filterPlaceholder + ', index=' + this.typeUrl;\r\n\r\n            switch (currentValue) {\r\n\r\n                case 'file':\r\n                    this.changeVisible(componentFile, true);\r\n                    this.changeVisible(componentUrl, false);\r\n                    break;\r\n\r\n                case 'url':\r\n                    this.changeVisible(componentFile, false);\r\n                    this.changeVisible(componentUrl, true);\r\n                    break;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Change visible\r\n         *\r\n         * @param {String} filter\r\n         * @param {Boolean} visible\r\n         */\r\n        changeVisible: function (filter, visible) {\r\n            registry.async(filter)(\r\n                function (currentComponent) {\r\n                    currentComponent.visible(visible);\r\n                }\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_Downloadable/js/components/use-price-default-handler.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Ui/js/form/element/single-checkbox'\r\n], function (Element) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            linksPurchasedSeparately: '0',\r\n            listens: {\r\n                linksPurchasedSeparately: 'changeVisibleStatus'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Change visibility of checkbox\r\n         */\r\n        changeVisibleStatus: function () {\r\n            if (this.linksPurchasedSeparately === '1') {\r\n                this.visible(true);\r\n            } else {\r\n                this.visible(false);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Msrp/js/msrp.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'jquery/ui',\r\n    'mage/dropdown',\r\n    'mage/template'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.addToCart', {\r\n        options: {\r\n            showAddToCart: true,\r\n            submitUrl: '',\r\n            cartButtonId: '',\r\n            singleOpenDropDown: true,\r\n            dialog: {}, // Options for mage/dropdown\r\n            dialogDelay: 500, // Delay in ms after resize dropdown shown again\r\n            origin: '', //Required, type of popup: 'msrp', 'tier' or 'info' popup\r\n\r\n            // Selectors\r\n            cartForm: '.form.map.checkout',\r\n            msrpLabelId: '#map-popup-msrp',\r\n            priceLabelId: '#map-popup-price',\r\n            popUpAttr: '[data-role=msrp-popup-template]',\r\n            popupCartButtonId: '#map-popup-button',\r\n            paypalCheckoutButons: '[data-action=checkout-form-submit]',\r\n            popupId: '',\r\n            realPrice: '',\r\n            isSaleable: '',\r\n            msrpPrice: '',\r\n            helpLinkId: '',\r\n            addToCartButton: '',\r\n\r\n            // Text options\r\n            productName: '',\r\n            addToCartUrl: ''\r\n        },\r\n\r\n        openDropDown: null,\r\n        triggerClass: 'dropdown-active',\r\n\r\n        popUpOptions: {\r\n            appendTo: 'body',\r\n            dialogContentClass: 'active',\r\n            closeOnMouseLeave: false,\r\n            autoPosition: true,\r\n            closeOnClickOutside: false,\r\n            'dialogClass': 'popup map-popup-wrapper',\r\n            position: {\r\n                my: 'left top',\r\n                collision: 'fit none',\r\n                at: 'left bottom',\r\n                within: 'body'\r\n            },\r\n            shadowHinter: 'popup popup-pointer'\r\n        },\r\n        popupOpened: false,\r\n\r\n        /**\r\n         * Creates widget instance\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            if (this.options.origin === 'msrp') {\r\n                this.initMsrpPopup();\r\n            } else if (this.options.origin === 'info') {\r\n                this.initInfoPopup();\r\n            } else if (this.options.origin === 'tier') {\r\n                this.initTierPopup();\r\n            }\r\n            $(this.options.cartButtonId).on('click', this._addToCartSubmit.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Init msrp popup\r\n         * @private\r\n         */\r\n        initMsrpPopup: function () {\r\n            var popupDOM = $(this.options.popUpAttr)[0],\r\n                $msrpPopup = $(popupDOM.innerHTML.trim());\r\n\r\n            $msrpPopup.find(this.options.productIdInput).val(this.options.productId);\r\n            $('body').append($msrpPopup);\r\n            $msrpPopup.trigger('contentUpdated');\r\n\r\n            $msrpPopup.find('button')\r\n                .on('click',\r\n                this.handleMsrpAddToCart.bind(this))\r\n                .filter(this.options.popupCartButtonId)\r\n                .text($(this.options.addToCartButton).text());\r\n\r\n            $msrpPopup.find(this.options.paypalCheckoutButons).on('click',\r\n                this.handleMsrpPaypalCheckout.bind(this));\r\n\r\n            $(this.options.popupId).on('click',\r\n                this.openPopup.bind(this));\r\n\r\n            this.$popup = $msrpPopup;\r\n        },\r\n\r\n        /**\r\n         * Init info popup\r\n         * @private\r\n         */\r\n        initInfoPopup: function () {\r\n            var infoPopupDOM = $('[data-role=msrp-info-template]')[0],\r\n                $infoPopup = $(infoPopupDOM.innerHTML.trim());\r\n\r\n            $('body').append($infoPopup);\r\n\r\n            $(this.options.helpLinkId).on('click', function (e) {\r\n                this.popUpOptions.position.of = $(e.target);\r\n                $infoPopup.dropdownDialog(this.popUpOptions).dropdownDialog('open');\r\n                this._toggle($infoPopup);\r\n            }.bind(this));\r\n\r\n            this.$popup = $infoPopup;\r\n        },\r\n\r\n        /**\r\n         * Init tier price popup\r\n         * @private\r\n         */\r\n        initTierPopup: function () {\r\n            var popupDOM = $(this.options.popUpAttr)[0],\r\n                $tierPopup = $(popupDOM.innerHTML.trim());\r\n\r\n            $('body').append($tierPopup);\r\n            $tierPopup.find(this.options.productIdInput).val(this.options.productId);\r\n            this.popUpOptions.position.of = $(this.options.helpLinkId);\r\n\r\n            $tierPopup.find('button').on('click',\r\n                this.handleTierAddToCart.bind(this))\r\n                .filter(this.options.popupCartButtonId)\r\n                .text($(this.options.addToCartButton).text());\r\n\r\n            $tierPopup.find(this.options.paypalCheckoutButons).on('click',\r\n                this.handleTierPaypalCheckout.bind(this));\r\n\r\n            $(this.options.attr).on('click', function (e) {\r\n                this.$popup = $tierPopup;\r\n                this.tierOptions = $(e.target).data('tier-price');\r\n                this.openPopup(e);\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * handle 'AddToCart' click on Msrp popup\r\n         * @param {Object} ev\r\n         *\r\n         * @private\r\n         */\r\n        handleMsrpAddToCart: function (ev) {\r\n            ev.preventDefault();\r\n\r\n            if (this.options.addToCartButton) {\r\n                $(this.options.addToCartButton).click();\r\n                this.closePopup(this.$popup);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * handle 'paypal checkout buttons' click on Msrp popup\r\n         *\r\n         * @private\r\n         */\r\n        handleMsrpPaypalCheckout: function () {\r\n            this.closePopup(this.$popup);\r\n        },\r\n\r\n        /**\r\n         * handle 'AddToCart' click on Tier popup\r\n         *\r\n         * @param {Object} ev\r\n         * @private\r\n         */\r\n        handleTierAddToCart: function (ev) {\r\n            ev.preventDefault();\r\n\r\n            if (this.options.addToCartButton &&\r\n                this.options.inputQty && !isNaN(this.tierOptions.qty)\r\n            ) {\r\n                $(this.options.inputQty).val(this.tierOptions.qty);\r\n                $(this.options.addToCartButton).click();\r\n                this.closePopup(this.$popup);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * handle 'paypal checkout buttons' click on Tier popup\r\n         *\r\n         * @private\r\n         */\r\n        handleTierPaypalCheckout: function () {\r\n            if (this.options.inputQty && !isNaN(this.tierOptions.qty)\r\n            ) {\r\n                $(this.options.inputQty).val(this.tierOptions.qty);\r\n                this.closePopup(this.$popup);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Open and set up popup\r\n         *\r\n         * @param {Object} event\r\n         */\r\n        openPopup: function (event) {\r\n            var options = this.tierOptions || this.options;\r\n\r\n            this.popUpOptions.position.of = $(event.target);\r\n            this.$popup.find(this.options.msrpLabelId).html(options.msrpPrice);\r\n            this.$popup.find(this.options.priceLabelId).html(options.realPrice);\r\n            this.$popup.dropdownDialog(this.popUpOptions).dropdownDialog('open');\r\n            this._toggle(this.$popup);\r\n\r\n            if (!this.options.isSaleable) {\r\n                this.$popup.find('form').hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {HTMLElement} $elem\r\n         * @private\r\n         */\r\n        _toggle: function ($elem) {\r\n            $(document).on('mouseup.msrp touchend.msrp', function (e) {\r\n                if (!$elem.is(e.target) && $elem.has(e.target).length === 0) {\r\n                    this.closePopup($elem);\r\n                }\r\n            }.bind(this));\r\n            $(window).on('resize', function () {\r\n                this.closePopup($elem);\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {HTMLElement} $elem\r\n         */\r\n        closePopup: function ($elem) {\r\n            $elem.dropdownDialog('close');\r\n            $(document).off('mouseup.msrp touchend.msrp');\r\n        },\r\n\r\n        /**\r\n         * Handler for addToCart action\r\n         */\r\n        _addToCartSubmit: function () {\r\n            this.element.trigger('addToCart', this.element);\r\n\r\n            if (this.element.data('stop-processing')) {\r\n                return false;\r\n            }\r\n\r\n            if (this.options.addToCartButton) {\r\n                $(this.options.addToCartButton).click();\r\n\r\n                return false;\r\n            }\r\n\r\n            if (this.options.addToCartUrl) {\r\n                $('.mage-dropdown-dialog > .ui-dialog-content').dropdownDialog('close');\r\n            }\r\n            $(this.options.cartForm).submit();\r\n\r\n        }\r\n    });\r\n\r\n    return $.mage.addToCart;\r\n});\r\n","Magento_Security/js/confirm-redirect.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*eslint-disable no-undef*/\r\ndefine(\r\n    ['jquery'],\r\n    function ($) {\r\n        'use strict';\r\n\r\n        return function (config, element) {\r\n            $(element).click(config, function () {\r\n                confirmSetLocation(config.message, config.url);\r\n            });\r\n        };\r\n    }\r\n);\r\n","Magento_ConfigurableProduct/js/configurable-type-handler.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Catalog/catalog/type-events',\r\n    'collapsible',\r\n    'Magento_Ui/js/modal/modal',\r\n    'mage/translate',\r\n    'domReady!'\r\n], function ($, productType) {\r\n    'use strict';\r\n\r\n    return {\r\n        $block: null,\r\n        hasVariations: null,\r\n        configurationSectionMessageHandler: (function () {\r\n            var title = $('[data-role=\"product-create-configuration-info\"]'),\r\n                buttons = $('[data-action=\"product-create-configuration-buttons\"]'),\r\n                newText = 'Configurations cannot be created for a standard product with downloadable files.' +\r\n                ' To create configurations, first remove all downloadable files.',\r\n                oldText = title.text();\r\n\r\n            return function (change) {\r\n                if (change) {\r\n                    title.text(newText);\r\n                    buttons.hide();\r\n                } else {\r\n                    title.text(oldText);\r\n                    buttons.show();\r\n                }\r\n            };\r\n        }()),\r\n\r\n        /**\r\n         * Set element disabled\r\n         * @param {Object} $element - jquery instance element\r\n         * @param {Bool} state\r\n         * @param {Bool} triggerEvent\r\n         * @private\r\n         */\r\n        _setElementDisabled: function ($element, state, triggerEvent) {\r\n            if (!$element.is('[data-locked]')) {\r\n                $element.prop('disabled', state);\r\n\r\n                if (triggerEvent) {\r\n                    $element.trigger('change');\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Show\r\n         */\r\n        show: function () {\r\n            this.configurationSectionMessageHandler(false);\r\n        },\r\n\r\n        /**\r\n         * Hide\r\n         */\r\n        hide: function () {\r\n            this.configurationSectionMessageHandler(true);\r\n        },\r\n\r\n        /**\r\n         * Bind all\r\n         */\r\n        bindAll: function () {\r\n            $(document).on('changeConfigurableTypeProduct', function (event, isConfigurable) {\r\n                $(document).trigger('setTypeProduct', isConfigurable ?\r\n                    'configurable' :\r\n                    productType.type.init === 'configurable' ? 'simple' : productType.type.init\r\n                );\r\n            });\r\n            $(document).on('changeTypeProduct', this._initType.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Init type\r\n         * @private\r\n         */\r\n        _initType: function () {\r\n\r\n            /*var suggestContainer = $('#product-template-suggest-container .action-dropdown > .action-toggle');\r\n\r\n\r\n            if (productType.type.current === 'configurable') {\r\n                this._setElementDisabled(suggestContainer.addClass('disabled'), true);\r\n                this._setElementDisabled($('#inventory_qty'), true);\r\n                this._setElementDisabled($('#inventory_stock_availability'), false);\r\n                this._setElementDisabled($('#qty'), true, true);\r\n                this._setElementDisabled($('#quantity_and_stock_status'), false, false);\r\n            } else {\r\n                this._setElementDisabled(suggestContainer.removeClass('disabled'), false);\r\n                this._setElementDisabled($('#inventory_qty'), false);\r\n                this._setElementDisabled($('#inventory_stock_availability'), true);\r\n                this._setElementDisabled($('#qty'), false, true);\r\n            }\r\n            */\r\n\r\n            /*if (['simple', 'virtual', 'configurable'].indexOf(productType.type.current) < 0) {\r\n                this.hide();\r\n            } else {\r\n                this.show();\r\n            }*/\r\n\r\n            this.show();\r\n        },\r\n\r\n        /**\r\n         * Constructor component\r\n         * @param {Object} data - this backend data\r\n         */\r\n        'Magento_ConfigurableProduct/js/configurable-type-handler': function (data) {\r\n            this.$block = $(data.blockId + ' input[name=\"attributes[]\"]');\r\n            this.hasVariations = data.hasVariations;\r\n\r\n            //advancedPricingHandler.init();\r\n            //priceTypeHandler.init();\r\n\r\n            /*if (productType.type.init === 'configurable' && !this.hasVariations) {\r\n                $(document).trigger('setTypeProduct', 'simple');\r\n            }*/\r\n            $(document).trigger('setTypeProduct', 'simple');\r\n\r\n            this.bindAll();\r\n            this._initType();\r\n        }\r\n    };\r\n});\r\n","Magento_ConfigurableProduct/js/configurable.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**************************** CONFIGURABLE PRODUCT **************************/\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'mage/translate',\r\n    'prototype'\r\n], function(jQuery, mageTemplate){\r\n\r\nif (typeof Product == 'undefined') {\r\n    window.Product = {};\r\n}\r\n\r\nProduct.Config = Class.create();\r\nProduct.Config.prototype = {\r\n    initialize: function(config){\r\n        // Magic preprocessing\r\n        // TODO MAGETWO-31539\r\n        config.taxConfig = {\r\n            showBothPrices: false,\r\n            inclTaxTitle: jQuery.mage.__('Incl. Tax')\r\n        };\r\n\r\n        this.config     = config;\r\n        this.taxConfig  = this.config.taxConfig;\r\n        if (config.containerId) {\r\n            this.settings   = $$('#' + config.containerId + ' ' + '.super-attribute-select');\r\n        } else {\r\n            this.settings   = $$('.super-attribute-select');\r\n        }\r\n        this.state      = new Hash();\r\n        this.priceTemplate = mageTemplate(this.config.template);\r\n        this.prices     = config.prices;\r\n        this.values     = {};\r\n\r\n        // Set default values from config\r\n        if (config.defaultValues) {\r\n            this.values = config.defaultValues;\r\n        }\r\n\r\n        // Overwrite defaults by url\r\n        var separatorIndex = window.location.href.indexOf('#');\r\n        if (separatorIndex != -1) {\r\n            var paramsStr = window.location.href.substr(separatorIndex+1);\r\n            var urlValues = paramsStr.toQueryParams();\r\n            for (var i in urlValues) {\r\n                this.values[i] = urlValues[i];\r\n            }\r\n        }\r\n\r\n        // Overwrite defaults by inputs values if needed\r\n        if (config.inputsInitialized) {\r\n            this.values = {};\r\n            this.settings.each(function(element) {\r\n                if (element.value) {\r\n                    var attributeId = element.id.replace(/[a-z]*/, '');\r\n                    this.values[attributeId] = element.value;\r\n                }\r\n            }.bind(this));\r\n        }\r\n\r\n        // Put events to check select reloads\r\n        this.settings.each(function(element){\r\n            Event.observe(element, 'change', this.configure.bind(this))\r\n        }.bind(this));\r\n\r\n        // fill state\r\n        this.settings.each(function(element){\r\n            var attributeId = element.id.replace(/[a-z]*/, '');\r\n            if(attributeId && this.config.attributes[attributeId]) {\r\n                element.config = this.config.attributes[attributeId];\r\n                element.attributeId = attributeId;\r\n                this.state[attributeId] = false;\r\n            }\r\n        }.bind(this));\r\n\r\n        // Init settings dropdown\r\n        var childSettings = [];\r\n        for(var i=this.settings.length-1;i>=0;i--){\r\n            var prevSetting = this.settings[i-1] ? this.settings[i-1] : false;\r\n            var nextSetting = this.settings[i+1] ? this.settings[i+1] : false;\r\n            if (i == 0){\r\n                this.fillSelect(this.settings[i])\r\n            } else {\r\n                this.settings[i].disabled = true;\r\n            }\r\n            $(this.settings[i]).childSettings = childSettings.clone();\r\n            $(this.settings[i]).prevSetting   = prevSetting;\r\n            $(this.settings[i]).nextSetting   = nextSetting;\r\n            childSettings.push(this.settings[i]);\r\n        }\r\n\r\n        // Set values to inputs\r\n        this.configureForValues();\r\n        document.observe(\"dom:loaded\", this.configureForValues.bind(this));\r\n    },\r\n\r\n    configureForValues: function () {\r\n        if (this.values) {\r\n            this.settings.each(function(element){\r\n                var attributeId = element.attributeId;\r\n                element.value = (typeof(this.values[attributeId]) == 'undefined')? '' : this.values[attributeId];\r\n                this.configureElement(element);\r\n            }.bind(this));\r\n        }\r\n    },\r\n\r\n    configure: function(event){\r\n        var element = Event.element(event);\r\n        this.configureElement(element);\r\n    },\r\n\r\n    configureElement : function(element) {\r\n        this.reloadOptionLabels(element);\r\n        if(element.value){\r\n            this.state[element.config.id] = element.value;\r\n            if(element.nextSetting){\r\n                element.nextSetting.disabled = false;\r\n                this.fillSelect(element.nextSetting);\r\n                this.resetChildren(element.nextSetting);\r\n            }\r\n        }\r\n        else {\r\n            this.resetChildren(element);\r\n        }\r\n        this.reloadPrice();\r\n    },\r\n\r\n    reloadOptionLabels: function(element){\r\n        var selectedPrice = 0;\r\n        if(element.options[element.selectedIndex] && element.options[element.selectedIndex].config){\r\n            var option = element.options[element.selectedIndex].config;\r\n            selectedPrice = parseFloat(this.config.optionPrices[option.allowedProducts[0]].finalPrice.amount);\r\n        }\r\n        element.setAttribute('price', selectedPrice);\r\n        for(var i=0;i<element.options.length;i++){\r\n            if(element.options[i].config){\r\n                element.options[i].setAttribute('price', selectedPrice);\r\n                element.options[i].setAttribute('summarizePrice', 0);\r\n                element.options[i].text = this.getOptionLabel(element.options[i].config, selectedPrice);\r\n            }\r\n        }\r\n    },\r\n\r\n    resetChildren : function(element){\r\n        if(element.childSettings) {\r\n            for(var i=0;i<element.childSettings.length;i++){\r\n                element.childSettings[i].selectedIndex = 0;\r\n                element.childSettings[i].disabled = true;\r\n                if(element.config){\r\n                    this.state[element.config.id] = false;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    fillSelect: function(element){\r\n        var attributeId = element.id.replace(/[a-z]*/, '');\r\n        var options = this.getAttributeOptions(attributeId);\r\n        this.clearSelect(element);\r\n        element.options[0] = new Option('', '');\r\n        element.options[0].innerHTML = this.config.chooseText;\r\n\r\n        var prevConfig = false;\r\n        if(element.prevSetting){\r\n            prevConfig = element.prevSetting.options[element.prevSetting.selectedIndex];\r\n        }\r\n\r\n        if(options) {\r\n            var index = 1;\r\n            for(var i=0;i<options.length;i++){\r\n                var allowedProducts = [];\r\n                if(prevConfig) {\r\n                    for(var j=0;j<options[i].products.length;j++){\r\n                        if(prevConfig.config.allowedProducts\r\n                            && prevConfig.config.allowedProducts.indexOf(options[i].products[j])>-1){\r\n                            allowedProducts.push(options[i].products[j]);\r\n                        }\r\n                    }\r\n                } else {\r\n                    allowedProducts = options[i].products.clone();\r\n                }\r\n\r\n                if(allowedProducts.size()>0){\r\n                    options[i].allowedProducts = allowedProducts;\r\n                    element.options[index] = new Option(this.getOptionLabel(options[i]), options[i].id);\r\n                    if (typeof options[i].price != 'undefined') {\r\n                        element.options[index].setAttribute('price', options[i].price);\r\n                    }\r\n                    element.options[index].config = options[i];\r\n                    index++;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    getOptionLabel: function(option){\r\n        return option.label;\r\n    },\r\n\r\n    formatPrice: function(price, showSign){\r\n        var str = '';\r\n        price = parseFloat(price);\r\n        if(showSign){\r\n            if(price<0){\r\n                str+= '-';\r\n                price = -price;\r\n            }\r\n            else{\r\n                str+= '+';\r\n            }\r\n        }\r\n\r\n        var roundedPrice = Number(Math.round(price + \"e+2\") + \"e-2\").toString();\r\n\r\n        if (this.prices && this.prices[roundedPrice]) {\r\n            str+= this.prices[roundedPrice];\r\n        }\r\n        else {\r\n            str+= this.priceTemplate({\r\n                data: {\r\n                    price:price.toFixed(2)\r\n                }\r\n            });\r\n        }\r\n        return str;\r\n    },\r\n\r\n    clearSelect: function(element){\r\n        for(var i=element.options.length-1;i>=0;i--){\r\n            element.remove(i);\r\n        }\r\n    },\r\n\r\n    getAttributeOptions: function(attributeId){\r\n        if(this.config.attributes[attributeId]){\r\n            return this.config.attributes[attributeId].options;\r\n        }\r\n    },\r\n\r\n    reloadPrice: function(){\r\n        if (this.config.disablePriceReload) {\r\n            return;\r\n        }\r\n        var price    = 0;\r\n        var oldPrice = 0;\r\n        var inclTaxPrice = 0;\r\n        var exclTaxPrice = 0;\r\n        for(var i=this.settings.length-1;i>=0;i--){\r\n            var selected = this.settings[i].options[this.settings[i].selectedIndex];\r\n            if(selected.config){\r\n                price += parseFloat(selected.config.price);\r\n                oldPrice += parseFloat(selected.config.oldPrice);\r\n                inclTaxPrice += parseFloat(selected.config.inclTaxPrice);\r\n                exclTaxPrice += parseFloat(selected.config.exclTaxPrice);\r\n            }\r\n        }\r\n\r\n        optionsPrice.changePrice(\r\n            'config', {\r\n                'price': price,\r\n                'oldPrice': oldPrice,\r\n                'inclTaxPrice': inclTaxPrice,\r\n                'exclTaxPrice': exclTaxPrice\r\n            }\r\n        );\r\n        optionsPrice.reload();\r\n\r\n        return price;\r\n\r\n        if($('product-price-'+this.config.productId)){\r\n            $('product-price-'+this.config.productId).innerHTML = price;\r\n        }\r\n        this.reloadOldPrice();\r\n    },\r\n\r\n    reloadOldPrice: function(){\r\n        if (this.config.disablePriceReload) {\r\n            return;\r\n        }\r\n        if ($('old-price-'+this.config.productId)) {\r\n\r\n            var price = parseFloat(this.config.oldPrice);\r\n            for(var i=this.settings.length-1;i>=0;i--){\r\n                var selected = this.settings[i].options[this.settings[i].selectedIndex];\r\n                if(selected.config){\r\n                    price+= parseFloat(selected.config.price);\r\n                }\r\n            }\r\n            if (price < 0)\r\n                price = 0;\r\n            price = this.formatPrice(price);\r\n\r\n            if($('old-price-'+this.config.productId)){\r\n                $('old-price-'+this.config.productId).innerHTML = price;\r\n            }\r\n\r\n        }\r\n    }\r\n};\r\n\r\n});\r\n","Magento_ConfigurableProduct/js/components/associated-product-insert-listing.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'Magento_Ui/js/form/components/insert-listing'\r\n], function (_, insertListing) {\r\n    'use strict';\r\n\r\n    return insertListing.extend({\r\n        defaults: {\r\n            gridInitialized: false,\r\n            paramsUpdated: false,\r\n            showMassActionColumn: true,\r\n            currentProductId: 0,\r\n            dataScopeAssociatedProduct: 'data.associated_product_ids',\r\n            typeGrid: '',\r\n            product: {},\r\n            rowIndexForChange: undefined,\r\n            changeProductData: [],\r\n            modules: {\r\n                productsProvider: '${ $.productsProvider }',\r\n                productsColumns: '${ $.productsColumns }',\r\n                productsMassAction: '${ $.productsMassAction }',\r\n                modalWithGrid: '${ $.modalWithGrid }',\r\n                productsFilters: '${ $.productsFilters }'\r\n            },\r\n            exports: {\r\n                externalProviderParams: '${ $.externalProvider }:params'\r\n            },\r\n            links: {\r\n                changeProductData: '${ $.provider }:${ $.changeProductProvider }'\r\n            },\r\n            listens: {\r\n                '${ $.externalProvider }:params': '_setFilters _setVisibilityMassActionColumn',\r\n                '${ $.productsProvider }:data': '_handleManualGridOpening',\r\n                '${ $.productsMassAction }:selected': '_handleManualGridSelect'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize observables.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super().observe(\r\n                'changeProductData'\r\n            );\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get ids of used products.\r\n         *\r\n         * @returns {Array}\r\n         */\r\n        getUsedProductIds: function () {\r\n            var usedProductsIds = this.source.get(this.dataScopeAssociatedProduct);\r\n\r\n            return usedProductsIds.slice();\r\n        },\r\n\r\n        /**\r\n         * Request for render content.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        doRender: function (showMassActionColumn, typeGrid) {\r\n            this.typeGrid = typeGrid;\r\n            this.showMassActionColumn = showMassActionColumn;\r\n\r\n            if (this.gridInitialized) {\r\n                this.paramsUpdated = false;\r\n                this.productsFilters().clear();\r\n                this._setFilters(this.externalProviderParams);\r\n                this._setVisibilityMassActionColumn();\r\n            }\r\n\r\n            return this.render();\r\n        },\r\n\r\n        /**\r\n         * Show grid with assigned product.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        showGridAssignProduct: function () {\r\n            this.product = {};\r\n            this.rowIndexForChange = undefined;\r\n\r\n            return this.doRender(true, 'assignProduct');\r\n        },\r\n\r\n        /**\r\n         * Show grid with changed product.\r\n         *\r\n         * @param {String} rowIndex\r\n         * @param {String} product\r\n         */\r\n        showGridChangeProduct: function (rowIndex, product) {\r\n            this.rowIndexForChange = rowIndex;\r\n            this.product = product;\r\n            this.doRender(false, 'changeProduct');\r\n        },\r\n\r\n        /**\r\n         * Select product.\r\n         *\r\n         * @param {String} rowIndex\r\n         */\r\n        selectProduct: function (rowIndex) {\r\n            this.changeProductData({\r\n                rowIndex: this.rowIndexForChange,\r\n                product: this.productsProvider().data.items[rowIndex]\r\n            });\r\n            this.modalWithGrid().closeModal();\r\n        },\r\n\r\n        /**\r\n         * Set visibility state for mass action column\r\n         *\r\n         * @private\r\n         */\r\n        _setVisibilityMassActionColumn: function () {\r\n            this.productsMassAction(function (massActionComponent) {\r\n                this.productsColumns().elems().each(function (rowElement) {\r\n                    rowElement.disableAction = this.showMassActionColumn;\r\n                }, this);\r\n                massActionComponent.visible = this.showMassActionColumn;\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Set filters.\r\n         *\r\n         * @param {Object} params\r\n         * @private\r\n         */\r\n        _setFilters: function (params) {\r\n            var filterModifier = {},\r\n                attrCodes,\r\n                usedProductIds,\r\n                attributes;\r\n\r\n            params = _.omit(params);\r\n\r\n            if (!this.paramsUpdated) {\r\n                this.gridInitialized = true;\r\n                this.paramsUpdated = true;\r\n\r\n                attrCodes = this._getAttributesCodes();\r\n                usedProductIds = this.getUsedProductIds();\r\n\r\n                if (this.currentProductId) {\r\n                    usedProductIds.push(this.currentProductId);\r\n                }\r\n\r\n                filterModifier['entity_id'] = {\r\n                    'condition_type': 'nin', value: usedProductIds\r\n                };\r\n                attrCodes.each(function (code) {\r\n                    filterModifier[code] = {\r\n                        'condition_type': 'notnull'\r\n                    };\r\n                });\r\n\r\n                if (this.typeGrid === 'changeProduct') {\r\n                    attributes = JSON.parse(this.product.attributes);\r\n\r\n                    filterModifier = _.extend(filterModifier, _.mapObject(attributes, function (value) {\r\n                        return {\r\n                            'condition_type': 'eq',\r\n                            'value': value\r\n                        };\r\n                    }));\r\n\r\n                    params.filters = attributes;\r\n                } else {\r\n                    params.filters = {};\r\n                }\r\n\r\n                params['attributes_codes'] = attrCodes;\r\n\r\n                this.set('externalProviderParams', params);\r\n                this.set('externalFiltersModifier', filterModifier);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get attribute codes.\r\n         *\r\n         * @returns {Array}\r\n         * @private\r\n         */\r\n        _getAttributesCodes: function () {\r\n            var attrCodes = this.source.get('data.attribute_codes');\r\n\r\n            return attrCodes ? attrCodes : [];\r\n        },\r\n\r\n        /**\r\n         * Get product variations.\r\n         *\r\n         * @returns {Array}\r\n         * @private\r\n         */\r\n        _getProductVariations: function () {\r\n            var matrix = this.source.get('data.configurable-matrix');\r\n\r\n            return matrix ? matrix : [];\r\n        },\r\n\r\n        /**\r\n         * Handle manual grid after opening\r\n         * @private\r\n         */\r\n        _handleManualGridOpening: function (data) {\r\n            if (data.items.length && this.typeGrid === 'assignProduct') {\r\n                this.productsColumns().elems().each(function (rowElement) {\r\n                    rowElement.disableAction = true;\r\n                });\r\n\r\n                this._disableRows(data.items);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handle manual selection.\r\n         *\r\n         * @param {Array} selected\r\n         * @private\r\n         */\r\n        _handleManualGridSelect: function (selected) {\r\n            var selectedRows,\r\n                selectedVariationKeys;\r\n\r\n            if (this.typeGrid === 'assignProduct') {\r\n                selectedRows = _.filter(this.productsProvider().data.items, function (row) {\r\n                    return selected.indexOf(row['entity_id']) !== -1;\r\n                });\r\n                selectedVariationKeys = _.values(this._getVariationKeyMap(selectedRows));\r\n                this._disableRows(this.productsProvider().data.items, selectedVariationKeys, selected);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Disable rows in grid for products with the same variation key\r\n         *\r\n         * @param {Array} items\r\n         * @param {Array} selectedVariationKeys\r\n         * @param {Array} selected\r\n         * @private\r\n         */\r\n        _disableRows: function (items, selectedVariationKeys, selected) {\r\n            selectedVariationKeys = selectedVariationKeys === undefined ? [] : selectedVariationKeys;\r\n            selected = selected === undefined ? [] : selected;\r\n            this.productsMassAction(function (massaction) {\r\n                var configurableVariationKeys = _.union(\r\n                    selectedVariationKeys,\r\n                    _.pluck(this._getProductVariations(), 'variationKey')\r\n                    ),\r\n                    variationKeyMap = this._getVariationKeyMap(items),\r\n                    rowsForDisable = _.keys(_.pick(\r\n                        variationKeyMap,\r\n                        function (variationKey) {\r\n                            return configurableVariationKeys.indexOf(variationKey) !== -1;\r\n                        }\r\n                    ));\r\n\r\n                massaction.disabled(_.difference(rowsForDisable, selected));\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Get variation key map used in manual grid.\r\n         *\r\n         * @param {Array} items\r\n         * @returns {Array} [{entity_id: variation-key}, ...]\r\n         * @private\r\n         */\r\n        _getVariationKeyMap: function (items) {\r\n            var variationKeyMap = {};\r\n\r\n            _.each(items, function (row) {\r\n                variationKeyMap[row['entity_id']] = _.values(\r\n                    _.pick(row, this._getAttributesCodes())\r\n                ).sort().join('-');\r\n\r\n            }, this);\r\n\r\n            return variationKeyMap;\r\n        }\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/components/container-configurable-handler.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent'\r\n], function (Element) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            listens: {\r\n                '${ $.provider }:data.is_downloadable': 'handleProductType'\r\n            },\r\n            links: {\r\n                isDownloadable: '${ $.provider }:data.is_downloadable'\r\n            },\r\n            modules: {\r\n                createConfigurableButton: '${$.createConfigurableButton}'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Invokes initialize method of parent class,\r\n         * contains initialization logic\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            this.handleProductType(this.isDownloadable);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe(['content']);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Change content for container and visibility for button\r\n         *\r\n         * @param {String} isDownloadable\r\n         */\r\n        handleProductType: function (isDownloadable) {\r\n            if (isDownloadable === '1') {\r\n                this.content(this.content2);\r\n\r\n                if (this.createConfigurableButton()) {\r\n                    this.createConfigurableButton().visible(false);\r\n                }\r\n            } else {\r\n                this.content(this.content1);\r\n\r\n                if (this.createConfigurableButton()) {\r\n                    this.createConfigurableButton().visible(true);\r\n                }\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/components/custom-options-price-type.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'Magento_Ui/js/form/element/select'\r\n], function (_, Select) {\r\n    'use strict';\r\n\r\n    return Select.extend({\r\n        defaults: {\r\n            isConfigurable: false,\r\n            isFiltered: null,\r\n            defaultOptions: null,\r\n            filteredOptions: null,\r\n            bannedOptions: []\r\n        },\r\n\r\n        /**\r\n         * Updates options.\r\n         *\r\n         * @param {Boolean} variationsEmpty\r\n         * @returns {Boolean}\r\n         */\r\n        updateOptions: function (variationsEmpty) {\r\n            var isFiltered = this.isConfigurable || !variationsEmpty,\r\n                value;\r\n\r\n            if (this.isFiltered !== isFiltered) {\r\n                value = this.value();\r\n\r\n                this.options(isFiltered ? this.getFilteredOptions() : this.getDefaultOptions());\r\n                this.value(value);\r\n            }\r\n\r\n            return isFiltered;\r\n        },\r\n\r\n        /**\r\n         * Get default list of options.\r\n         *\r\n         * @returns {Array}\r\n         */\r\n        getDefaultOptions: function () {\r\n            if (this.defaultOptions === null) {\r\n                this.defaultOptions = this.options();\r\n            }\r\n\r\n            return this.defaultOptions;\r\n        },\r\n\r\n        /**\r\n         * Get filtered list of options.\r\n         *\r\n         * @returns {Array}\r\n         */\r\n        getFilteredOptions: function () {\r\n            var defaultOptions;\r\n\r\n            if (this.filteredOptions === null) {\r\n                defaultOptions = this.getDefaultOptions();\r\n                this.filteredOptions = [];\r\n\r\n                _.each(defaultOptions, function (option) {\r\n                    if (this.bannedOptions.indexOf(option.value) === -1) {\r\n                        this.filteredOptions.push(option);\r\n                    }\r\n                }, this);\r\n            }\r\n\r\n            return this.filteredOptions;\r\n        }\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/components/custom-options-warning.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/components/html'\r\n], function (Html) {\r\n    'use strict';\r\n\r\n    return Html.extend({\r\n        defaults: {\r\n            isConfigurable: false\r\n        },\r\n\r\n        /**\r\n         * Updates component visibility state.\r\n         *\r\n         * @param {Boolean} variationsEmpty\r\n         * @returns {Boolean}\r\n         */\r\n        updateVisibility: function (variationsEmpty) {\r\n            var isVisible = this.isConfigurable || !variationsEmpty;\r\n\r\n            this.visible(isVisible);\r\n\r\n            return isVisible;\r\n        }\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/components/dynamic-rows-configurable.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    'Magento_Ui/js/dynamic-rows/dynamic-rows'\r\n], function (_, registry, dynamicRows) {\r\n    'use strict';\r\n\r\n    return dynamicRows.extend({\r\n        defaults: {\r\n            actionsListOpened: false,\r\n            canEditField: 'canEdit',\r\n            newProductField: 'newProduct',\r\n            dataScopeAssociatedProduct: 'data.associated_product_ids',\r\n            dataProviderFromGrid: '',\r\n            dataProviderChangeFromGrid: '',\r\n            insertDataFromGrid: [],\r\n            changeDataFromGrid: [],\r\n            dataProviderFromWizard: '',\r\n            insertDataFromWizard: [],\r\n            map: null,\r\n            isEmpty: true,\r\n            isShowAddProductButton: false,\r\n            cacheGridData: [],\r\n            unionInsertData: [],\r\n            deleteProperty: false,\r\n            dataLength: 0,\r\n            identificationProperty: 'id',\r\n            'attribute_set_id': '',\r\n            attributesTmp: [],\r\n            changedFlag: 'was_changed',\r\n            listens: {\r\n                'insertDataFromGrid': 'processingInsertDataFromGrid',\r\n                'insertDataFromWizard': 'processingInsertDataFromWizard',\r\n                'unionInsertData': 'processingUnionInsertData',\r\n                'changeDataFromGrid': 'processingChangeDataFromGrid',\r\n                'isEmpty': 'changeVisibility'\r\n            },\r\n            imports: {\r\n                'attribute_set_id': '${$.provider}:data.product.attribute_set_id'\r\n            },\r\n            'exports': {\r\n                'attribute_set_id': '${$.provider}:data.new-variations-attribute-set-id'\r\n            },\r\n            modules: {\r\n                modalWithGrid: '${ $.modalWithGrid }',\r\n                gridWithProducts: '${ $.gridWithProducts}'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Invokes initialize method of parent class,\r\n         * contains initialization logic\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .changeVisibility(this.isEmpty());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Change visibility\r\n         *\r\n         * When isEmpty = true, then visbible = false\r\n         *\r\n         * @param {Boolean} isEmpty\r\n         */\r\n        changeVisibility: function (isEmpty) {\r\n            this.visible(!isEmpty);\r\n        },\r\n\r\n        /**\r\n         * Open modal with grid.\r\n         *\r\n         * @param {String} rowIndex\r\n         */\r\n        openModalWithGrid: function (rowIndex) {\r\n            var productSource = this.source.get(this.dataScope + '.' + this.index + '.' + rowIndex),\r\n                product = {\r\n                    'id': productSource.id,\r\n                    'attributes': productSource['configurable_attribute']\r\n                };\r\n\r\n            this.modalWithGrid().openModal();\r\n            this.gridWithProducts().showGridChangeProduct(rowIndex, product);\r\n        },\r\n\r\n        /**\r\n         * Initialize children\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initChildren: function () {\r\n            var tmpArray = [];\r\n\r\n            this.recordData.each(function (recordData) {\r\n                tmpArray.push(recordData);\r\n            }, this);\r\n\r\n            this.unionInsertData(tmpArray);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Delete record\r\n         *\r\n         * @param {Number} index - row index\r\n         */\r\n        deleteRecord: function (index) {\r\n            var tmpArray,\r\n                lastRecord;\r\n\r\n            this.reRender = false;\r\n            tmpArray = this.getUnionInsertData();\r\n            tmpArray.splice(index, 1);\r\n\r\n            if (!tmpArray.length) {\r\n                this.attributesTmp = this.source.get('data.attributes');\r\n                this.source.set('data.attributes', []);\r\n                this.cacheGridData = [];\r\n            }\r\n\r\n            if (parseInt(this.currentPage(), 10) === this.pages()) {\r\n                lastRecord =\r\n                    _.findWhere(this.elems(), {\r\n                        index: this.startIndex + this.getChildItems().length - 1\r\n                    }) ||\r\n                    _.findWhere(this.elems(), {\r\n                        index: (this.startIndex + this.getChildItems().length - 1).toString()\r\n                    });\r\n\r\n                lastRecord.destroy();\r\n            }\r\n\r\n            this.unionInsertData(tmpArray);\r\n\r\n            if (this.pages() < parseInt(this.currentPage(), 10)) {\r\n                this.currentPage(this.pages());\r\n            }\r\n\r\n            this.reRender = true;\r\n            this.showSpinner(false);\r\n        },\r\n\r\n        /**\r\n         * Generate associated products\r\n         */\r\n        generateAssociatedProducts: function () {\r\n            var productsIds = [];\r\n\r\n            this.getUnionInsertData().forEach(function (data) {\r\n                if (data.id !== null) {\r\n                    productsIds.push(data.id);\r\n                }\r\n            });\r\n\r\n            this.source.set(this.dataScopeAssociatedProduct, productsIds);\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe([\r\n                    'insertDataFromGrid', 'unionInsertData', 'isEmpty', 'isShowAddProductButton', 'actionsListOpened'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get union insert data from source\r\n         *\r\n         * @returns {Array}\r\n         */\r\n        getUnionInsertData: function () {\r\n            var source = this.source.get(this.dataScope + '.' + this.index),\r\n                result = [];\r\n\r\n            _.each(source, function (data) {\r\n                result.push(data);\r\n            });\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Process union insert data.\r\n         *\r\n         * @param {Array} data\r\n         */\r\n        processingUnionInsertData: function (data) {\r\n            var dataCount,\r\n                elemsCount,\r\n                tmpData,\r\n                path,\r\n                attributeCodes = this.source.get('data.attribute_codes');\r\n\r\n            this.isEmpty(data.length === 0);\r\n            this.isShowAddProductButton(\r\n                (!attributeCodes || data.length > 0 ? data.length : attributeCodes.length) > 0\r\n            );\r\n\r\n            tmpData = data.slice(this.pageSize * (this.currentPage() - 1),\r\n                                 this.pageSize * (this.currentPage() - 1) + this.pageSize);\r\n\r\n            this.source.set(this.dataScope + '.' + this.index, []);\r\n\r\n            _.each(tmpData, function (row, index) {\r\n                path = this.dataScope + '.' + this.index + '.' + (this.startIndex + index);\r\n                this.source.set(path, row);\r\n            }, this);\r\n\r\n            this.source.set(this.dataScope + '.' + this.index, data);\r\n            this.parsePagesData(data);\r\n\r\n            // Render\r\n            dataCount = data.length;\r\n            elemsCount = this.elems().length;\r\n\r\n            if (dataCount > elemsCount) {\r\n                this.getChildItems().each(function (elemData, index) {\r\n                    this.addChild(elemData, this.startIndex + index);\r\n                }, this);\r\n            } else {\r\n                for (elemsCount; elemsCount > dataCount; elemsCount--) {\r\n                    this.elems()[elemsCount - 1].destroy();\r\n                }\r\n            }\r\n\r\n            this.generateAssociatedProducts();\r\n        },\r\n\r\n        /**\r\n         * Parsed data\r\n         *\r\n         * @param {Array} data - array with data\r\n         * about selected records\r\n         */\r\n        processingInsertDataFromGrid: function (data) {\r\n            var changes,\r\n                tmpArray;\r\n\r\n            if (!data.length) {\r\n                return;\r\n            }\r\n\r\n            tmpArray = this.getUnionInsertData();\r\n\r\n            changes = this._checkGridData(data);\r\n            this.cacheGridData = data;\r\n\r\n            changes.each(function (changedObject) {\r\n                var mappedData = this.mappingValue(changedObject);\r\n\r\n                mappedData[this.canEditField] = 0;\r\n                mappedData[this.newProductField] = 0;\r\n                mappedData.variationKey = this._getVariationKey(changedObject);\r\n                mappedData['configurable_attribute'] = this._getConfigurableAttribute(changedObject);\r\n                tmpArray.push(mappedData);\r\n            }, this);\r\n\r\n            // Attributes cannot be changed before regeneration thought wizard\r\n            if (!this.source.get('data.attributes').length) {\r\n                this.source.set('data.attributes', this.attributesTmp);\r\n            }\r\n            this.unionInsertData(tmpArray);\r\n        },\r\n\r\n        /**\r\n         * Process changes from grid.\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        processingChangeDataFromGrid: function (data) {\r\n            var tmpArray = this.getUnionInsertData(),\r\n                mappedData = this.mappingValue(data.product);\r\n\r\n            mappedData[this.canEditField] = 0;\r\n            mappedData[this.newProductField] = 0;\r\n            mappedData.variationKey = this._getVariationKey(data.product);\r\n            mappedData['configurable_attribute'] = this._getConfigurableAttribute(data.product);\r\n            tmpArray[data.rowIndex] = mappedData;\r\n\r\n            this.unionInsertData(tmpArray);\r\n        },\r\n\r\n        /**\r\n         * Get variation key.\r\n         *\r\n         * @param {Object} data\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        _getVariationKey: function (data) {\r\n            var attrCodes = this.source.get('data.attribute_codes'),\r\n                key = [];\r\n\r\n            attrCodes.each(function (code) {\r\n                key.push(data[code]);\r\n            });\r\n\r\n            return key.sort().join('-');\r\n        },\r\n\r\n        /**\r\n         * Get configurable attribute.\r\n         *\r\n         * @param {Object} data\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        _getConfigurableAttribute: function (data) {\r\n            var attrCodes = this.source.get('data.attribute_codes'),\r\n                confAttrs = {};\r\n\r\n            attrCodes.each(function (code) {\r\n                confAttrs[code] = data[code];\r\n            });\r\n\r\n            return JSON.stringify(confAttrs);\r\n        },\r\n\r\n        /**\r\n         * Process data insertion from wizard\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        processingInsertDataFromWizard: function (data) {\r\n            var tmpArray = this.getUnionInsertData(),\r\n                productIdsToDelete = this.source.get(this.dataScopeAssociatedProduct),\r\n                index,\r\n                product = {};\r\n\r\n            tmpArray = this.unsetArrayItem(\r\n                tmpArray,\r\n                {\r\n                    id: null\r\n                }\r\n            );\r\n\r\n            _.each(data, function (row) {\r\n                var attributesText;\r\n\r\n                if (row.productId) {\r\n                    index = _.indexOf(productIdsToDelete, row.productId);\r\n\r\n                    if (index > -1) {\r\n                        productIdsToDelete.splice(index, 1);\r\n                        tmpArray = this.unsetArrayItem(\r\n                            tmpArray,\r\n                            {\r\n                                id: row.productId\r\n                            }\r\n                        );\r\n                    }\r\n                }\r\n\r\n                attributesText = '';\r\n                _.each(row.options, function (attribute) {\r\n                    if (attributesText) {\r\n                        attributesText += ', ';\r\n                    }\r\n                    attributesText += attribute['attribute_label'] + ': ' + attribute.label;\r\n                }, this);\r\n\r\n                product = {\r\n                    'id': row.productId,\r\n                    'product_link': row.productUrl,\r\n                    'name': row.name,\r\n                    'sku': row.sku,\r\n                    'status': row.status,\r\n                    'price': row.price,\r\n                    'price_currency': row.priceCurrency,\r\n                    'price_string': row.priceCurrency + row.price,\r\n                    'weight': row.weight,\r\n                    'qty': row.quantity,\r\n                    'variationKey': row.variationKey,\r\n                    'configurable_attribute': row.attribute,\r\n                    'thumbnail_image': row.images.preview,\r\n                    'media_gallery': row['media_gallery'],\r\n                    'swatch_image': row['swatch_image'],\r\n                    'small_image': row['small_image'],\r\n                    image: row.image,\r\n                    'thumbnail': row.thumbnail,\r\n                    'attributes': attributesText\r\n                };\r\n                product[this.changedFlag] = true;\r\n                product[this.canEditField] = row.editable;\r\n                product[this.newProductField] = row.newProduct;\r\n                tmpArray.push(product);\r\n            }, this);\r\n\r\n            _.each(productIdsToDelete, function (id) {\r\n                tmpArray = this.unsetArrayItem(\r\n                    tmpArray,\r\n                    {\r\n                        id: id\r\n                    }\r\n                );\r\n            }, this);\r\n\r\n            this.unionInsertData(tmpArray);\r\n        },\r\n\r\n        /**\r\n         * Remove array items matching condition.\r\n         *\r\n         * @param {Array} data\r\n         * @param {Object} condition\r\n         * @returns {Array}\r\n         */\r\n        unsetArrayItem: function (data, condition) {\r\n            var objs = _.where(data, condition);\r\n\r\n            _.each(objs, function (obj) {\r\n                var index = _.indexOf(data, obj);\r\n\r\n                if (index > -1) {\r\n                    data.splice(index, 1);\r\n                }\r\n            });\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Check changed records\r\n         *\r\n         * @param {Array} data - array with records data\r\n         * @returns {Array} Changed records\r\n         */\r\n        _checkGridData: function (data) {\r\n            var cacheLength = this.cacheGridData.length,\r\n                curData = data.length,\r\n                max = cacheLength > curData ? this.cacheGridData : data,\r\n                changes = [],\r\n                obj = {};\r\n\r\n            max.each(function (record, index) {\r\n                obj[this.map.id] = record[this.map.id];\r\n\r\n                if (!_.where(this.cacheGridData, obj).length) {\r\n                    changes.push(data[index]);\r\n                }\r\n            }, this);\r\n\r\n            return changes;\r\n        },\r\n\r\n        /**\r\n         * Mapped value\r\n         */\r\n        mappingValue: function (data) {\r\n            var result = {};\r\n\r\n            _.each(this.map, function (prop, index) {\r\n                result[index] = data[prop];\r\n            });\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Toggle actions list.\r\n         *\r\n         * @param {Number} rowIndex\r\n         * @returns {Object} Chainable.\r\n         */\r\n        toggleActionsList: function (rowIndex) {\r\n            var state = false;\r\n\r\n            if (rowIndex !== this.actionsListOpened()) {\r\n                state = rowIndex;\r\n            }\r\n            this.actionsListOpened(state);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Close action list.\r\n         *\r\n         * @param {Number} rowIndex\r\n         * @returns {Object} Chainable\r\n         */\r\n        closeList: function (rowIndex) {\r\n            if (this.actionsListOpened() === rowIndex) {\r\n                this.actionsListOpened(false);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Toggle product status.\r\n         *\r\n         * @param {Number} rowIndex\r\n         */\r\n        toggleStatusProduct: function (rowIndex) {\r\n            var tmpArray = this.getUnionInsertData(),\r\n                status = parseInt(tmpArray[rowIndex].status, 10);\r\n\r\n            if (status === 1) {\r\n                tmpArray[rowIndex].status = 2;\r\n            } else {\r\n                tmpArray[rowIndex].status = 1;\r\n            }\r\n\r\n            tmpArray[rowIndex][this.changedFlag] = true;\r\n            this.unionInsertData(tmpArray);\r\n        }\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/components/file-uploader.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Ui/js/form/element/file-uploader',\r\n    'underscore'\r\n], function (Element, _) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        processedFile: {},\r\n        actionsListOpened: false,\r\n        thumbnailUrl: '',\r\n        thumbnail: null,\r\n        smallImage: null,\r\n        defaults: {\r\n            fileInputName: ''\r\n        },\r\n\r\n        /**\r\n         * Initialize observables.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super().observe(['processedFile', 'actionsListOpened', 'thumbnailUrl', 'thumbnail', 'smallImage']);\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        setInitialValue: function () {\r\n            var value = this.getInitialValue();\r\n\r\n            if (!_.isString(value)) {\r\n                this._super();\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Adds provided file to the files list.\r\n         *\r\n         * @param {Object} file\r\n         * @returns {Object} Chainable.\r\n         */\r\n        addFile: function (file) {\r\n            this.processedFile(this.processFile(file));\r\n\r\n            this.value(this.processedFile().file);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Toggle actions list.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        toggleActionsList: function () {\r\n            if (this.actionsListOpened()) {\r\n                this.actionsListOpened(false);\r\n            } else {\r\n                this.actionsListOpened(true);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Close action list.\r\n         *\r\n         * @returns {Object} Chainable\r\n         */\r\n        closeList: function () {\r\n            if (this.actionsListOpened()) {\r\n                this.actionsListOpened(false);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Delete Image\r\n         *\r\n         * @returns {Object} Chainable\r\n         */\r\n        deleteImage: function () {\r\n            this.processedFile({});\r\n            this.value(null);\r\n            this.thumbnail(null);\r\n            this.thumbnailUrl(null);\r\n            this.smallImage(null);\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/components/modal-configurable.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/modal/modal-component',\r\n    'uiRegistry',\r\n    'underscore'\r\n], function (Modal, registry, _) {\r\n    'use strict';\r\n\r\n    return Modal.extend({\r\n        defaults: {\r\n            stepWizard: '',\r\n            modules: {\r\n                form: '${ $.formName }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Open modal\r\n         */\r\n        openModal: function () {\r\n            var stepWizard = {};\r\n\r\n            this.form().validate();\r\n\r\n            if (this.form().source.get('params.invalid') === false) {\r\n                stepWizard = registry.get('index = ' + this.stepWizard);\r\n\r\n                if (!_.isUndefined(stepWizard)) {\r\n                    stepWizard.open();\r\n                }\r\n\r\n                this._super();\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/options/price-type-handler.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*\r\ndefine([\r\n    'jquery',\r\n    'Magento_Catalog/catalog/type-events',\r\n    'notification',\r\n    'mage/translate'\r\n], function ($, productType) {\r\n    'use strict';\r\n\r\n    return {\r\n        isConfigurable: false,\r\n        messageInited: false,\r\n        messageSelector: '[data-role=product-custom-options-content]',\r\n        isPercentPriceTypeExist: function () {\r\n            var productOptionsContainer = $('#product_options_container_top');\r\n\r\n            return !!productOptionsContainer.length;\r\n        },\r\n        showWarning: function () {\r\n            if (!this.messageInited) {\r\n                $(this.messageSelector).notification();\r\n                this.messageInited = true;\r\n            }\r\n            this.hideWarning();\r\n            $(this.messageSelector).notification('add', {\r\n                message: $.mage.__('Custom options with price type \"percent\" is not available for ' +\r\n                    'configurable product.'),\r\n                error: false,\r\n                messageContainer: this.messageSelector\r\n            });\r\n        },\r\n        hideWarning: function () {\r\n            $(this.messageSelector).notification('clear');\r\n        },\r\n        init: function () {\r\n            $(document).on('changeTypeProduct', this._initType.bind(this));\r\n\r\n            $('#product-edit-form-tabs').on('change', '.opt-type > select', function () {\r\n                var selected = $('.opt-type > select :selected'),\r\n                    optGroup = selected.parent().attr('label');\r\n\r\n                if (optGroup === 'Select') {\r\n                    $('#product-edit-form-tabs').on(\r\n                        'click',\r\n                        '[data-ui-id=\"admin-product-options-options-box-select-option-type-add-select-row-button\"]',\r\n                        function () {\r\n                            this.percentPriceTypeHandler();\r\n                        }.bind(this)\r\n                    );\r\n                } else {\r\n                    this.percentPriceTypeHandler();\r\n                }\r\n            }.bind(this));\r\n\r\n            this._initType();\r\n        },\r\n        _initType: function () {\r\n            this.isConfigurable = productType.type.current === 'configurable';\r\n            if (this.isPercentPriceTypeExist()) {\r\n                this.percentPriceTypeHandler();\r\n            }\r\n        },\r\n        percentPriceTypeHandler: function () {\r\n            var priceType = $('[data-attr=\"price-type\"]'),\r\n                optionPercentPriceType = priceType.find('option[value=\"percent\"]');\r\n\r\n            if (this.isConfigurable) {\r\n                this.showWarning();\r\n                optionPercentPriceType.hide();\r\n                optionPercentPriceType.parent().val() === 'percent' ? optionPercentPriceType.parent().val('fixed') : '';\r\n            } else {\r\n                $(this.messageSelector).notification();\r\n                optionPercentPriceType.show();\r\n                this.hideWarning();\r\n            }\r\n        }\r\n    };\r\n});\r\n*/\r\n","Magento_ConfigurableProduct/js/variations/product-grid.js":"// jscs:disable requireDotNotation\r\n/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'uiComponent',\r\n    'jquery',\r\n    'Magento_Ui/js/core/app',\r\n    'underscore',\r\n    'notification',\r\n    'mage/translate'\r\n], function (Component, $, bootstrap, _) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            productsGridUrl: null,\r\n            productAttributes: [],\r\n            productsModal: null,\r\n            button: '',\r\n            gridSelector: '[data-grid-id=associated-products-container]',\r\n            modules: {\r\n                productsFilter: '${ $.productsFilter }',\r\n                productsProvider: '${ $.productsProvider }',\r\n                productsMassAction: '${ $.productsMassAction }',\r\n                productsColumns: '${ $.productsColumns }',\r\n                variationsComponent: '${ $.configurableVariations }'\r\n            },\r\n            listens: {\r\n                '${ $.productsProvider }:data': '_showMessageAssociatedGrid _handleManualGridOpening',\r\n                '${ $.productsMassAction }:selected': '_handleManualGridSelect',\r\n                '${ $.configurableVariations }:productMatrix': '_showButtonAddManual _switchProductType'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize\r\n         * @param {Array} options\r\n         */\r\n        initialize: function (options) {\r\n            this._super(options);\r\n            this.productsModal = $(this.gridSelector).modal({\r\n                title: $.mage.__('Select Associated Product'),\r\n                type: 'slide',\r\n                buttons: [\r\n                    {\r\n                        text: $.mage.__('Cancel'),\r\n\r\n                        /**\r\n                         * Close modal\r\n                         * @event\r\n                         */\r\n                        click: function () {\r\n                            this.closeModal();\r\n                        }\r\n                    }, {\r\n                        text: $.mage.__('Done'),\r\n                        click: this.close.bind(this, null)\r\n                    }\r\n                ]\r\n            });\r\n\r\n            this.productsProvider(function () {\r\n                this.productsModal.notification();\r\n            }.bind(this));\r\n            this.variationsComponent(function (variation) {\r\n                this._showButtonAddManual(variation.productMatrix());\r\n            }.bind(this));\r\n\r\n            this._initGrid = _.once(this._initGrid);\r\n            this._switchProductType = _.wrap(this._switchProductType.bind(this), function (func, params) {\r\n                if (!!params.length !== !!this.init) {\r\n                    this.init = !!params.length;\r\n                    func(params);\r\n                }\r\n            }.bind(this._switchProductType));\r\n        },\r\n\r\n        /**\r\n         * Initial observerable\r\n         * @returns {*}\r\n         */\r\n        initObservable: function () {\r\n            this._super().observe('button');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * init Grid\r\n         * @private\r\n         */\r\n        _initGrid: function (filterData) {\r\n            $.ajax({\r\n                type: 'GET',\r\n                url: this._buildGridUrl(filterData),\r\n                context: $('body')\r\n            }).success(function (data) {\r\n                bootstrap(JSON.parse(data));\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Select different product in configurations section\r\n         * @see configurable_associated_product_listing.xml\r\n         * @param {Integer} rowIndex\r\n         */\r\n        selectProduct: function (rowIndex) {\r\n            this.close(rowIndex);\r\n        },\r\n\r\n        /**\r\n         * Open\r\n         * @param {Object} filterData - filter data\r\n         * @param {Object|*} filterData.filters - attribute name\r\n         * @param {Object|*} filterData.filters_modifier - modifier value\r\n         * @param {String} callbackName\r\n         * @param {Boolean} showMassActionColumn\r\n         */\r\n        open: function (filterData, callbackName, showMassActionColumn) {\r\n            this.callbackName = callbackName;\r\n            this.productsMassAction(function (massActionComponent) {\r\n                this.productsColumns().elems().each(function (rowElement) {\r\n                    rowElement.disableAction = showMassActionColumn;\r\n                });\r\n                massActionComponent.visible = showMassActionColumn;\r\n            }.bind(this));\r\n            this._setFilter(filterData);\r\n            this._initGrid(filterData);\r\n            this.productsModal.trigger('openModal');\r\n        },\r\n\r\n        /**\r\n         * Close\r\n         */\r\n        close: function (rowIndex) {\r\n            try {\r\n                if (this.productsMassAction().selected.getLength()) {\r\n                    this.variationsComponent()[this.callbackName](this.productsMassAction()\r\n                        .selected.map(this.getProductById.bind(this)));\r\n                    this.productsMassAction().deselectAll();\r\n                } else if (!_.isNull(rowIndex)) {\r\n                    this.variationsComponent()[this.callbackName]([this.getProductByIndex(rowIndex)]);\r\n                }\r\n                this.productsModal.trigger('closeModal');\r\n            } catch (e) {\r\n                if (e.name === 'UserException') {\r\n                    this.productsModal.notification('clear');\r\n                    this.productsModal.notification('add', {\r\n                        message: e.message,\r\n                        messageContainer: this.gridSelector\r\n                    });\r\n                } else {\r\n                    throw e;\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get product by id\r\n         * @param {Integer} productId\r\n         * @returns {*}\r\n         */\r\n        getProductById: function (productId) {\r\n            return _.findWhere(this.productsProvider().data.items, {\r\n                'entity_id': productId\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get product\r\n         * @param {Integer} rowIndex\r\n         * @returns {*}\r\n         */\r\n        getProductByIndex: function (rowIndex) {\r\n            return this.productsProvider().data.items[rowIndex];\r\n        },\r\n\r\n        /**\r\n         * Build grid url\r\n         * @private\r\n         */\r\n        _buildGridUrl: function (filterData) {\r\n            var params = '?' + $.param({\r\n                'filters': filterData.filters,\r\n                'attributes_codes': this._getAttributesCodes(),\r\n                'filters_modifier': filterData['filters_modifier']\r\n            });\r\n\r\n            return this.productsGridUrl + params;\r\n        },\r\n\r\n        /**\r\n         * Show button add manual\r\n         * @param {Array} variations\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _showButtonAddManual: function (variations) {\r\n            return this.button(variations.length);\r\n        },\r\n\r\n        _switchProductType: function (variations) {\r\n            $(document).trigger('changeConfigurableTypeProduct', variations.length);\r\n        },\r\n\r\n        /**\r\n         * Get attributes codes used for configurable\r\n         * @private\r\n         */\r\n        _getAttributesCodes: function () {\r\n            return this.variationsComponent().attributes.pluck('code');\r\n        },\r\n\r\n        /**\r\n         * Show data associated grid\r\n         * @private\r\n         */\r\n        _showMessageAssociatedGrid: function (data) {\r\n            this.productsModal.notification('clear');\r\n\r\n            if (data.items.length) {\r\n                this.productsModal.notification('add', {\r\n                    message: $.mage.__('Choose a new product to delete and replace the current product configuration.'),\r\n                    messageContainer: this.gridSelector\r\n                });\r\n            } else {\r\n                this.productsModal.notification('add', {\r\n                    message: $.mage.__('For better results, add attributes and attribute values to your products.'),\r\n                    messageContainer: this.gridSelector\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Show manually grid\r\n         */\r\n        showManuallyGrid: function () {\r\n            var filterModifier = _.mapObject(_.object(this._getAttributesCodes(), []), function () {\r\n                    return {\r\n                        'condition_type': 'notnull'\r\n                    };\r\n                }),\r\n                usedProductIds = _.values(this.variationsComponent().productAttributesMap);\r\n\r\n            if (usedProductIds && usedProductIds.length > 0) {\r\n                filterModifier['entity_id'] = {\r\n                    'condition_type': 'nin', value: usedProductIds\r\n                };\r\n            }\r\n\r\n            this.open(\r\n                {\r\n                    'filters_modifier': filterModifier\r\n                },\r\n                'appendProducts',\r\n                true\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Handle manual grid after opening\r\n         * @private\r\n         */\r\n        _handleManualGridOpening: function (data) {\r\n            if (data.items.length && this.callbackName == 'appendProducts') {\r\n                this.productsColumns().elems().each(function (rowElement) {\r\n                    rowElement.disableAction = true;\r\n                });\r\n\r\n                this._disableRows(data.items);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Disable rows in grid for products with the same variation key\r\n         *\r\n         * @param {Array} items\r\n         * @param {Array} selectedVariationKeys\r\n         * @param {Array} selected\r\n         * @private\r\n         */\r\n        _disableRows: function (items, selectedVariationKeys, selected) {\r\n            selectedVariationKeys = selectedVariationKeys === undefined ? [] : selectedVariationKeys;\r\n            selected = selected === undefined ? [] : selected;\r\n            this.productsMassAction(function (massaction) {\r\n                var configurableVariationKeys = _.union(\r\n                        selectedVariationKeys,\r\n                        _.pluck(this.variationsComponent().productMatrix(), 'variationKey')\r\n                    ),\r\n                    variationKeyMap = this._getVariationKeyMap(items),\r\n                    rowsForDisable = _.keys(_.pick(\r\n                        variationKeyMap,\r\n                        function (variationKey) {\r\n                            return configurableVariationKeys.indexOf(variationKey) != -1;\r\n                        }\r\n                    ));\r\n\r\n                massaction.disabled(_.difference(rowsForDisable, selected));\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _handleManualGridSelect: function (selected) {\r\n            if (this.callbackName == 'appendProducts') {\r\n                var selectedRows = _.filter(this.productsProvider().data.items, function (row) {\r\n                        return selected.indexOf(row['entity_id']) != -1;\r\n                    }),\r\n                    selectedVariationKeys = _.values(this._getVariationKeyMap(selectedRows));\r\n                this._disableRows(this.productsProvider().data.items, selectedVariationKeys, selected);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get variation key map used in manual grid.\r\n         *\r\n         * @param items\r\n         * @returns {Array} [{entity_id: variation-key}, ...]\r\n         * @private\r\n         */\r\n        _getVariationKeyMap: function (items) {\r\n            this._variationKeyMap = {};\r\n\r\n            _.each(items, function (row) {\r\n                this._variationKeyMap[row['entity_id']] = _.values(\r\n                    _.pick(row, this._getAttributesCodes())\r\n                ).sort().join('-');\r\n\r\n            }, this);\r\n\r\n            return this._variationKeyMap;\r\n        },\r\n\r\n        /**\r\n         * Set filter\r\n         * @private\r\n         */\r\n        _setFilter: function (filterData) {\r\n            this.productsProvider(function (provider) {\r\n                provider.params['filters_modifier'] = filterData['filters_modifier'];\r\n                provider.params['attributes_codes'] = this._getAttributesCodes();\r\n            }.bind(this));\r\n\r\n            this.productsFilter(function (filter) {\r\n                filter.set('filters', _.extend({\r\n                    'filters_modifier': filterData['filters_modifier']\r\n                }, filterData.filters))\r\n                    .apply();\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/variations/variations.js":"// jscs:disable requireDotNotation\r\n/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n// jscs:disable jsDoc\r\ndefine([\r\n    'uiComponent',\r\n    'jquery',\r\n    'ko',\r\n    'underscore',\r\n    'Magento_Ui/js/modal/alert',\r\n    'uiRegistry',\r\n    'mage/translate'\r\n], function (Component, $, ko, _, alert, registry, $t) {\r\n    'use strict';\r\n\r\n    function UserException(message) {\r\n        this.message = message;\r\n        this.name = 'UserException';\r\n    }\r\n    UserException.prototype = Object.create(Error.prototype);\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            opened: false,\r\n            attributes: [],\r\n            usedAttributes: [],\r\n            attributeCodes: [],\r\n            attributesData: {},\r\n            productMatrix: [],\r\n            variations: [],\r\n            formSaveParams: [],\r\n            productAttributes: [],\r\n            disabledAttributes: [],\r\n            fullAttributes: [],\r\n            rowIndexToEdit: false,\r\n            productAttributesMap: null,\r\n            value: [],\r\n            modules: {\r\n                associatedProductGrid: '${ $.configurableProductGrid }',\r\n                wizardButtonElement: '${ $.wizardModalButtonName }',\r\n                formElement: '${ $.formName }',\r\n                attributeSetHandlerModal: '${ $.attributeSetHandler }'\r\n            },\r\n            imports: {\r\n                attributeSetName: '${ $.provider }:configurableNewAttributeSetName',\r\n                attributeSetId: '${ $.provider }:configurableExistingAttributeSetId',\r\n                attributeSetSelection: '${ $.provider }:configurableAffectedAttributeSet',\r\n                productPrice: '${ $.provider }:data.product.price'\r\n            },\r\n            links: {\r\n                value: '${ $.provider }:${ $.dataScopeVariations }',\r\n                usedAttributes: '${ $.provider }:${ $.dataScopeAttributes }',\r\n                attributesData: '${ $.provider }:${ $.dataScopeAttributesData }',\r\n                attributeCodes: '${ $.provider }:${ $.dataScopeAttributeCodes }',\r\n                skeletonAttributeSet: '${ $.provider }:data.new-variations-attribute-set-id'\r\n            }\r\n        },\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            this.changeButtonWizard();\r\n            this.initProductAttributesMap();\r\n            this.disableConfigurableAttributes(this.productAttributes);\r\n        },\r\n        initObservable: function () {\r\n            this._super().observe(\r\n                'actions opened attributes productMatrix value usedAttributes attributesData attributeCodes'\r\n            );\r\n\r\n            return this;\r\n        },\r\n        _makeProduct: function (product) {\r\n            var productId = product['entity_id'] || product.productId || null,\r\n                attributes = _.pick(product, this.attributes.pluck('code')),\r\n                options = _.map(attributes, function (option, attribute) {\r\n                    var oldOptions = _.findWhere(this.attributes(), {\r\n                            code: attribute\r\n                        }).options,\r\n                        result;\r\n\r\n                    if (_.isFunction(oldOptions)) {\r\n                        result = oldOptions.findWhere({\r\n                            value: option\r\n                        });\r\n                    } else {\r\n                        result = _.findWhere(oldOptions, {\r\n                            value: option\r\n                        });\r\n                    }\r\n\r\n                    return result;\r\n                }.bind(this));\r\n\r\n            return {\r\n                attribute: JSON.stringify(attributes),\r\n                editable: false,\r\n                images: {\r\n                    preview: product['thumbnail_src']\r\n                },\r\n                name: product.name || product.sku,\r\n                options: options,\r\n                price: parseFloat(Math.round(product.price.replace(/[^\\d.]+/g, '') + \"e+4\") + \"e-4\").toFixed(4),\r\n                productId: productId,\r\n                productUrl: this.buildProductUrl(productId),\r\n                quantity: product.quantity || null,\r\n                sku: product.sku,\r\n                status: product.status === undefined ? 1 : parseInt(product.status, 10),\r\n                variationKey: this.getVariationKey(options),\r\n                weight: product.weight || null\r\n            };\r\n        },\r\n        getProductValue: function (name) {\r\n            name = name.split('/').join('][');\r\n\r\n            return $('[name=\"product[' + name + ']\"]:enabled:not(.ignore-validate)', this.productForm).val();\r\n        },\r\n        getRowId: function (data, field) {\r\n            var key = data.variationKey;\r\n\r\n            return 'variations-matrix-' + key + '-' + field;\r\n        },\r\n        getVariationRowName: function (variation, field) {\r\n            var result;\r\n\r\n            if (variation.productId) {\r\n                result = 'configurations[' + variation.productId + '][' + field.split('/').join('][') + ']';\r\n            } else {\r\n                result = 'variations-matrix[' + variation.variationKey + '][' + field.split('/').join('][') + ']';\r\n            }\r\n\r\n            return result;\r\n        },\r\n        render: function (variations, attributes) {\r\n            this.changeButtonWizard();\r\n            this.populateVariationMatrix(variations);\r\n            this.attributes(attributes);\r\n            this.disableConfigurableAttributes(attributes);\r\n            this.handleValue(variations);\r\n            this.handleAttributes();\r\n        },\r\n        changeButtonWizard: function () {\r\n            if (this.variations.length) {\r\n                this.wizardButtonElement().title(this.wizardModalButtonTitle);\r\n            }\r\n        },\r\n        handleValue: function (variations) {\r\n            var tmpArray = [];\r\n\r\n\r\n            _.each(variations, function (variation) {\r\n                var attributes = _.reduce(variation.options, function (memo, option) {\r\n                    var attribute = {};\r\n                    attribute[option['attribute_code']] = option.value;\r\n\r\n                    return _.extend(memo, attribute);\r\n                }, {}),\r\n                    gallery = {\r\n                        images: {}\r\n                    },\r\n                    types = {};\r\n\r\n                _.each(variation.images.images, function (image) {\r\n                    gallery.images[image['file_id']] = {\r\n                        position: image.position,\r\n                        file: image.file,\r\n                        disabled: image.disabled,\r\n                        label: image.label || ''\r\n                    };\r\n                    _.each(image.galleryTypes, function (type) {\r\n                        types[type] = image.file;\r\n                    });\r\n                }, this);\r\n\r\n                tmpArray.push(_.extend(variation, types, {\r\n                    productId: variation.productId || null,\r\n                    name: variation.name || variation.sku,\r\n                    priceCurrency: this.currencySymbol,\r\n                    weight: variation.weight,\r\n                    attribute: JSON.stringify(attributes),\r\n                    variationKey: this.getVariationKey(variation.options),\r\n                    editable: variation.editable === undefined ? 0 : 1,\r\n                    productUrl: this.buildProductUrl(variation.productId),\r\n                    status: variation.status === undefined ? 1 : parseInt(variation.status, 10),\r\n                    newProduct: variation.productId ? 0 : 1,\r\n                    'media_gallery': gallery\r\n                }));\r\n            }, this);\r\n\r\n            this.value(tmpArray);\r\n        },\r\n        handleAttributes: function () {\r\n            var tmpArray = [], codesArray = [], tmpOptions = {}, option = {}, position = 0, values = {};\r\n\r\n            _.each(this.attributes(), function (attribute) {\r\n                tmpArray.push(attribute.id);\r\n                codesArray.push(attribute.code);\r\n                values = {};\r\n                _.each(attribute.chosen, function (row) {\r\n                    values[row.value] = {\r\n                        \"include\": \"1\",\r\n                        \"value_index\": row.value\r\n                    };\r\n                }, this);\r\n                option = {\r\n                    \"attribute_id\": attribute.id,\r\n                    \"code\": attribute.code,\r\n                    \"label\": attribute.label,\r\n                    \"position\": position,\r\n                    \"values\": values\r\n                };\r\n                tmpOptions[attribute.id] = option;\r\n                position++;\r\n            }, this);\r\n\r\n            this.attributesData(tmpOptions);\r\n            this.usedAttributes(tmpArray);\r\n            this.attributeCodes(codesArray);\r\n        },\r\n\r\n\r\n        /**\r\n         * Get attributes options\r\n         * @see use in matrix.phtml\r\n         * @function\r\n         * @event\r\n         * @returns {array}\r\n         */\r\n        getAttributesOptions: function () {\r\n            return this.showVariations() ? this.productMatrix()[0].options : [];\r\n        },\r\n        showVariations: function () {\r\n            return this.productMatrix().length > 0;\r\n        },\r\n        populateVariationMatrix: function (variations) {\r\n            this.productMatrix([]);\r\n            _.each(variations, function (variation) {\r\n                var attributes = _.reduce(variation.options, function (memo, option) {\r\n                    var attribute = {};\r\n\r\n                    attribute[option['attribute_code']] = option.value;\r\n\r\n                    return _.extend(memo, attribute);\r\n                }, {});\r\n                this.productMatrix.push(_.extend(variation, {\r\n                    productId: variation.productId || null,\r\n                    name: variation.name || variation.sku,\r\n                    weight: variation.weight,\r\n                    attribute: JSON.stringify(attributes),\r\n                    variationKey: this.getVariationKey(variation.options),\r\n                    editable: variation.editable === undefined ? !variation.productId : variation.editable,\r\n                    productUrl: this.buildProductUrl(variation.productId),\r\n                    status: variation.status === undefined ? 1 : parseInt(variation.status, 10)\r\n                }));\r\n            }, this);\r\n        },\r\n        buildProductUrl: function (productId) {\r\n            return this.productUrl.replace('%id%', productId);\r\n        },\r\n        getVariationKey: function (options) {\r\n            return _.pluck(options, 'value').sort().join('-');\r\n        },\r\n        getProductIdByOptions: function (options) {\r\n            return this.productAttributesMap[this.getVariationKey(options)] || null;\r\n        },\r\n        initProductAttributesMap: function () {\r\n            if (this.productAttributesMap === null) {\r\n                this.productAttributesMap = {};\r\n                _.each(this.variations, function (product) {\r\n                    this.productAttributesMap[this.getVariationKey(product.options)] = product.productId;\r\n                }.bind(this));\r\n            }\r\n        },\r\n        disableConfigurableAttributes: function (attributes) {\r\n            var element;\r\n\r\n            _.each(this.disabledAttributes, function (attribute) {\r\n                registry.get('code = ' + attribute, 'index = ' + attribute).disabled(false);\r\n            });\r\n            this.disabledAttributes = [];\r\n\r\n            _.each(attributes, function (attribute) {\r\n                element = registry.get('code = ' + attribute.code, 'index = ' + attribute.code);\r\n                if (!_.isUndefined(element)) {\r\n                    element.disabled(true);\r\n                    this.disabledAttributes.push(attribute.code);\r\n                }\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Get currency symbol\r\n         * @returns {*}\r\n         */\r\n        getCurrencySymbol: function () {\r\n            return this.currencySymbol;\r\n        },\r\n\r\n        /**\r\n         * Chose action for the form save button\r\n         */\r\n        saveFormHandler: function() {\r\n            this.serializeData();\r\n\r\n            if (this.checkForNewAttributes()) {\r\n                this.formSaveParams = arguments;\r\n                this.attributeSetHandlerModal().openModal();\r\n            } else {\r\n                this.formElement().save(arguments[0], arguments[1]);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Serialize data for specific form fields\r\n         *\r\n         * Get data from outdated fields, serialize it and produce new form fields.\r\n         *\r\n         * Outdated fields:\r\n         *   - configurable-matrix;\r\n         *   - associated_product_ids.\r\n         *\r\n         * New fields:\r\n         *   - configurable-matrix-serialized;\r\n         *   - associated_product_ids_serialized.\r\n         */\r\n        serializeData: function () {\r\n            this.source.data[\"product\"][\"configurable-matrix-serialized\"] =\r\n                JSON.stringify(this.source.data[\"configurable-matrix\"]);\r\n            delete this.source.data[\"configurable-matrix\"];\r\n\r\n            this.source.data[\"product\"][\"associated_product_ids_serialized\"] =\r\n                JSON.stringify(this.source.data[\"associated_product_ids\"]);\r\n            delete this.source.data[\"associated_product_ids\"];\r\n        },\r\n\r\n        /**\r\n         * Check for newly added attributes\r\n         * @returns {Boolean}\r\n         */\r\n        checkForNewAttributes: function () {\r\n            var element, newAttributes = false;\r\n\r\n            _.each(this.source.get('data.attribute_codes'), function (attribute) {\r\n                element = registry.get('index = ' + attribute);\r\n\r\n                if (_.isUndefined(element)) {\r\n                    newAttributes = true;\r\n                }\r\n            }, this);\r\n\r\n            return newAttributes;\r\n        },\r\n\r\n        /**\r\n         * New attributes handler\r\n         * @returns {Boolean}\r\n         */\r\n        addNewAttributeSetHandler: function() {\r\n            this.formElement().validate();\r\n\r\n            if (this.formElement().source.get('params.invalid') === false) {\r\n                var choosenAttributeSetOption = this.attributeSetSelection;\r\n\r\n                if (choosenAttributeSetOption === 'new') {\r\n                    this.createNewAttributeSet();\r\n                    return false;\r\n                }\r\n\r\n                if (choosenAttributeSetOption === 'existing') {\r\n                    this.set(\r\n                        'skeletonAttributeSet',\r\n                        this.attributeSetId\r\n                    );\r\n                }\r\n\r\n                this.closeDialogAndProcessForm();\r\n                return true;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handles new attribute set creation\r\n         * @returns {Boolean}\r\n         */\r\n        createNewAttributeSet: function() {\r\n            var messageBoxElement = registry.get('index = affectedAttributeSetError');\r\n\r\n            messageBoxElement.visible(false);\r\n\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: this.attributeSetCreationUrl,\r\n                data: {\r\n                    gotoEdit: 1,\r\n                    attribute_set_name: this.attributeSetName,\r\n                    skeleton_set: this.skeletonAttributeSet,\r\n                    return_session_messages_only: 1\r\n                },\r\n                dataType: 'json',\r\n                showLoader: true,\r\n                context: this\r\n            })\r\n\r\n                .success(function (data) {\r\n                    if (!data.error) {\r\n                        this.set(\r\n                            'skeletonAttributeSet',\r\n                            data.id\r\n                        );\r\n                        messageBoxElement.content(data.messages);\r\n                        messageBoxElement.visible(true);\r\n                        this.closeDialogAndProcessForm();\r\n                    } else {\r\n                        messageBoxElement.content(data.messages);\r\n                        messageBoxElement.visible(true);\r\n                    }\r\n\r\n                    return false;\r\n                })\r\n\r\n                .error(function (xhr) {\r\n                    if (xhr.statusText === 'abort') {\r\n                        return;\r\n                    }\r\n\r\n                    alert({\r\n                        content: $t('Something went wrong.')\r\n                    });\r\n                });\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Closes attribute set handler modal and process product form\r\n         */\r\n        closeDialogAndProcessForm: function() {\r\n            this.attributeSetHandlerModal().closeModal();\r\n            this.formElement().save(this.formSaveParams[0], this.formSaveParams[1]);\r\n        },\r\n\r\n        /**\r\n         * Retrieves product price\r\n         * @returns {*}\r\n         */\r\n        getProductPrice: function() {\r\n            return this.productPrice;\r\n        }\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/variations/paging/sizes.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Ui/js/grid/paging/sizes'\r\n], function (Sizes) {\r\n    'use strict';\r\n\r\n    return Sizes.extend({\r\n        defaults: {\r\n            excludedOptions: ['100', '200']\r\n        },\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            this.excludedOptions.forEach(function (excludedOption) {\r\n                delete this.options[excludedOption];\r\n            }, this);\r\n            this.updateArray();\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/variations/steps/attributes_values.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n// jscs:disable jsDoc\r\ndefine([\r\n    'uiComponent',\r\n    'jquery',\r\n    'ko',\r\n    'underscore',\r\n    'mageUtils',\r\n    'Magento_Ui/js/lib/collapsible',\r\n    'mage/translate'\r\n], function (Component, $, ko, _, utils, Collapsible) {\r\n    'use strict';\r\n\r\n    //connect items with observableArrays\r\n    ko.bindingHandlers.sortableList = {\r\n        init: function (element, valueAccessor) {\r\n            var list = valueAccessor();\r\n\r\n            $(element).sortable({\r\n                axis: 'y',\r\n                handle: '[data-role=\"draggable\"]',\r\n                tolerance: 'pointer',\r\n                update: function (event, ui) {\r\n                    var item = ko.contextFor(ui.item[0]).$data,\r\n                        position = ko.utils.arrayIndexOf(ui.item.parent().children(), ui.item[0]);\r\n\r\n                    if (ko.contextFor(ui.item[0]).$index() != position) {\r\n                        if (position >= 0) {\r\n                            list.remove(item);\r\n                            list.splice(position, 0, item);\r\n                        }\r\n                        ui.item.remove();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    return Collapsible.extend({\r\n        defaults: {\r\n            notificationMessage: {\r\n                text: null,\r\n                error: null\r\n            },\r\n            createOptionsUrl: null,\r\n            attributes: [],\r\n            stepInitialized: false\r\n        },\r\n        initialize: function () {\r\n            this._super();\r\n            this.createAttribute = _.wrap(this.createAttribute, function () {\r\n                var args = _.toArray(arguments),\r\n                    createAttribute = args.shift();\r\n\r\n                return this.doInitSavedOptions(createAttribute.apply(this, args));\r\n            });\r\n            this.createAttribute = _.memoize(this.createAttribute.bind(this), _.property('id'));\r\n        },\r\n        initObservable: function () {\r\n            this._super().observe(['attributes']);\r\n\r\n            return this;\r\n        },\r\n        createOption: function () {\r\n            // this - current attribute\r\n            this.options.push({\r\n                value: 0, label: '', id: utils.uniqueid(), attribute_id: this.id, is_new: true\r\n            });\r\n        },\r\n        saveOption: function (option) {\r\n            if (!_.isEmpty(option.label)) {\r\n                this.options.remove(option);\r\n                this.options.push(option);\r\n                this.chosenOptions.push(option.id);\r\n            }\r\n        },\r\n        removeOption: function (option) {\r\n            this.options.remove(option);\r\n        },\r\n        removeAttribute: function (attribute) {\r\n            this.attributes.remove(attribute);\r\n            this.wizard.setNotificationMessage(\r\n                $.mage.__('An attribute has been removed. This attribute will no longer appear in your configurations.')\r\n            );\r\n        },\r\n        createAttribute: function (attribute, index) {\r\n            attribute.chosenOptions = ko.observableArray([]);\r\n            attribute.options = ko.observableArray(_.map(attribute.options, function (option) {\r\n                option.id = utils.uniqueid();\r\n\r\n                return option;\r\n            }));\r\n            attribute.opened = ko.observable(this.initialOpened(index));\r\n            attribute.collapsible = ko.observable(true);\r\n\r\n            return attribute;\r\n        },\r\n        //first 3 attribute panels must be open\r\n        initialOpened: function (index) {\r\n            return index < 3;\r\n        },\r\n        saveAttribute: function () {\r\n            var errorMessage = $.mage.__('Select options for all attributes or remove unused attributes.');\r\n            this.attributes.each(function (attribute) {\r\n                attribute.chosen = [];\r\n\r\n                if (!attribute.chosenOptions.getLength()) {\r\n                    throw new Error(errorMessage);\r\n                }\r\n                attribute.chosenOptions.each(function (id) {\r\n                    attribute.chosen.push(attribute.options.findWhere({\r\n                        id: id\r\n                    }));\r\n                });\r\n            });\r\n\r\n            if (!this.attributes().length) {\r\n                throw new Error(errorMessage);\r\n            }\r\n        },\r\n        selectAllAttributes: function (attribute) {\r\n            this.chosenOptions(_.pluck(attribute.options(), 'id'));\r\n        },\r\n        deSelectAllAttributes: function (attribute) {\r\n            attribute.chosenOptions.removeAll();\r\n        },\r\n        saveOptions: function () {\r\n            var options = [];\r\n\r\n            this.attributes.each(function (attribute) {\r\n                attribute.chosenOptions.each(function (id) {\r\n                    var option = attribute.options.findWhere({\r\n                        id: id, is_new: true\r\n                    });\r\n\r\n                    if (option) {\r\n                        options.push(option);\r\n                    }\r\n                });\r\n            });\r\n\r\n            if (!options.length) {\r\n                return false;\r\n            }\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: this.createOptionsUrl,\r\n                data: {\r\n                    options: options\r\n                },\r\n                showLoader: true\r\n            }).done(function (savedOptions) {\r\n                this.attributes.each(function (attribute) {\r\n                    _.each(savedOptions, function (newOptionId, oldOptionId) {\r\n                        var option = attribute.options.findWhere({\r\n                            id: oldOptionId\r\n                        });\r\n\r\n                        if (option) {\r\n                            attribute.options.remove(option);\r\n                            option.is_new = false;\r\n                            option.value = newOptionId;\r\n                            attribute.options.push(option);\r\n                        }\r\n                    });\r\n                });\r\n\r\n            }.bind(this));\r\n        },\r\n        requestAttributes: function (attributeIds) {\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: this.optionsUrl,\r\n                data: {\r\n                    attributes: attributeIds\r\n                },\r\n                showLoader: true\r\n            }).done(function (attributes) {\r\n                attributes = _.sortBy(attributes, function (attribute) {\r\n                    return this.wizard.data.attributesIds.indexOf(attribute.id);\r\n                }.bind(this));\r\n                this.attributes(_.map(attributes, this.createAttribute));\r\n            }.bind(this));\r\n        },\r\n        doInitSavedOptions: function (attribute) {\r\n            var selectedOptions, selectedOptionsIds, selectedAttribute = _.findWhere(this.initData.attributes, {\r\n                id: attribute.id\r\n            });\r\n\r\n            if (selectedAttribute) {\r\n                selectedOptions = _.pluck(selectedAttribute.chosen, 'value');\r\n                selectedOptionsIds = _.pluck(_.filter(attribute.options(), function (option) {\r\n                    return _.contains(selectedOptions, option.value);\r\n                }), 'id');\r\n                attribute.chosenOptions(selectedOptionsIds);\r\n                this.initData.attributes = _.without(this.initData.attributes, selectedAttribute);\r\n            }\r\n\r\n            return attribute;\r\n        },\r\n        render: function (wizard) {\r\n            this.wizard = wizard;\r\n            this.requestAttributes(wizard.data.attributesIds());\r\n        },\r\n        force: function (wizard) {\r\n            this.saveOptions();\r\n            this.saveAttribute(wizard);\r\n\r\n            wizard.data.attributes = this.attributes;\r\n        },\r\n        back: function (wizard) {\r\n            wizard.data.attributesIds(this.attributes().pluck('id'));\r\n        }\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/variations/steps/bulk.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global FORM_KEY*/\r\n// jscs:disable jsDoc\r\ndefine([\r\n    'uiComponent',\r\n    'jquery',\r\n    'ko',\r\n    'underscore',\r\n    'Magento_Ui/js/lib/collapsible',\r\n    'mage/template',\r\n    'Magento_Ui/js/modal/alert',\r\n    'Magento_Catalog/js/product-gallery',\r\n    'jquery/file-uploader',\r\n    'mage/translate',\r\n    'Magento_ConfigurableProduct/js/variations/variations'\r\n], function (Component, $, ko, _, Collapsible, mageTemplate, alert) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            modules: {\r\n                variationsComponent: '${ $.variationsComponent }'\r\n            },\r\n            countVariations: 0,\r\n            attributes: [],\r\n            sections: {},\r\n            images: null,\r\n            price: '',\r\n            quantity: '',\r\n            notificationMessage: {\r\n                text: null,\r\n                error: null\r\n            }\r\n        },\r\n        initObservable: function () {\r\n            this._super().observe('countVariations attributes sections');\r\n\r\n            return this;\r\n        },\r\n        initialize: function () {\r\n            var self = this;\r\n\r\n            this._super();\r\n            this.sections({\r\n                images: {\r\n                    label: 'images',\r\n                    type: ko.observable('none'),\r\n                    value: ko.observable(),\r\n                    attribute: ko.observable()\r\n                },\r\n                price: {\r\n                    label: 'price',\r\n                    type: ko.observable('none'),\r\n                    value: ko.observable(),\r\n                    attribute: ko.observable(),\r\n                    currencySymbol: ''\r\n                },\r\n                quantity: {\r\n                    label: 'quantity',\r\n                    type: ko.observable('none'),\r\n                    value: ko.observable(),\r\n                    attribute: ko.observable()\r\n                }\r\n            });\r\n\r\n            this.variationsComponent(function (variationsComponent) {\r\n                this.sections().price.currencySymbol = variationsComponent.getCurrencySymbol()\r\n            }.bind(this));\r\n\r\n            this.makeOptionSections = function () {\r\n                this.images = new self.makeImages(null);\r\n                this.price = self.price;\r\n                this.quantity = self.quantity;\r\n            };\r\n            this.makeImages = function (images, typePreview) {\r\n                var preview;\r\n\r\n                if (!images) {\r\n                    this.images = [];\r\n                    this.preview = self.noImage;\r\n                    this.file = null;\r\n                } else {\r\n                    this.images = images;\r\n                    preview = _.find(this.images, function (image) {\r\n                        return _.contains(image.galleryTypes, typePreview);\r\n                    });\r\n\r\n                    if (preview) {\r\n                        this.file = preview.file;\r\n                        this.preview = preview.url;\r\n                    } else {\r\n                        this.file = null;\r\n                        this.preview = self.noImage;\r\n                    }\r\n                }\r\n            };\r\n            this.images = new this.makeImages();\r\n            _.each(this.sections(), function (section) {\r\n                section.type.subscribe(function () {\r\n                    this.setWizardNotifyMessageDependOnSectionType();\r\n                }.bind(this));\r\n            }, this);\r\n        },\r\n        types: ['each', 'single', 'none'],\r\n        setWizardNotifyMessageDependOnSectionType: function () {\r\n            var flag = false;\r\n\r\n            _.each(this.sections(), function (section) {\r\n                if (section.type() !== 'none') {\r\n                    flag = true;\r\n                }\r\n            }, this);\r\n\r\n            if (flag) {\r\n                this.wizard.setNotificationMessage(\r\n                    $.mage.__('Choose this option to delete and replace extension data ' +\r\n                    'for all past configurations.')\r\n                );\r\n            } else {\r\n                this.wizard.cleanNotificationMessage();\r\n            }\r\n        },\r\n        render: function (wizard) {\r\n            this.wizard = wizard;\r\n            this.attributes(wizard.data.attributes());\r\n\r\n            if (this.mode === 'edit') {\r\n                this.setWizardNotifyMessageDependOnSectionType();\r\n            }\r\n            //fill option section data\r\n            this.attributes.each(function (attribute) {\r\n                attribute.chosen.each(function (option) {\r\n                    option.sections = ko.observable(new this.makeOptionSections());\r\n                }, this);\r\n            }, this);\r\n            //reset section.attribute\r\n            _.each(this.sections(), function (section) {\r\n                section.attribute(null);\r\n            });\r\n\r\n            this.initCountVariations();\r\n            this.bindGalleries();\r\n        },\r\n        initCountVariations: function () {\r\n            var variations = this.generateVariation(this.attributes()),\r\n                newVariations = _.map(variations, function (options) {\r\n                    return this.variationsComponent().getVariationKey(options);\r\n                }.bind(this)),\r\n                existingVariations = _.keys(this.variationsComponent().productAttributesMap);\r\n            this.countVariations(_.difference(newVariations, existingVariations).length);\r\n        },\r\n\r\n        /**\r\n         * @param attributes example [['b1', 'b2'],['a1', 'a2', 'a3'],['c1', 'c2', 'c3'],['d1']]\r\n         * @returns {*} example [['b1','a1','c1','d1'],['b1','a1','c2','d1']...]\r\n         */\r\n        generateVariation: function (attributes) {\r\n            return _.reduce(attributes, function (matrix, attribute) {\r\n                var tmp = [];\r\n                _.each(matrix, function (variations) {\r\n                    _.each(attribute.chosen, function (option) {\r\n                        option.attribute_code = attribute.code;\r\n                        option.attribute_label = attribute.label;\r\n                        tmp.push(_.union(variations, [option]));\r\n                    });\r\n                });\r\n\r\n                if (!tmp.length) {\r\n                    return _.map(attribute.chosen, function (option) {\r\n                        option.attribute_code = attribute.code;\r\n                        option.attribute_label = attribute.label;\r\n\r\n                        return [option];\r\n                    });\r\n                }\r\n\r\n                return tmp;\r\n            }, []);\r\n        },\r\n        getSectionValue: function (section, options) {\r\n            switch (this.sections()[section].type()) {\r\n                case 'each':\r\n                    return _.find(this.sections()[section].attribute().chosen, function (chosen) {\r\n                        return _.find(options, function (option) {\r\n                            return chosen.id == option.id;\r\n                        });\r\n                    }).sections()[section];\r\n\r\n                case 'single':\r\n                    return this.sections()[section].value();\r\n\r\n                case 'none':\r\n                    return this[section];\r\n            }\r\n        },\r\n        getImageProperty: function (node) {\r\n            var types = node.find('[data-role=gallery]').productGallery('option').types,\r\n                images = _.map(node.find('[data-role=image]'), function (image) {\r\n                var imageData = $(image).data('imageData');\r\n                imageData.galleryTypes = _.pluck(_.filter(types, function (type) {\r\n                    return type.value === imageData.file;\r\n                }), 'code');\r\n\r\n                return imageData;\r\n            });\r\n\r\n            return _.reject(images, function (image) {\r\n                return !!image.isRemoved;\r\n            });\r\n        },\r\n        fillImagesSection: function () {\r\n            switch (this.sections().images.type()) {\r\n                case 'each':\r\n                    if (this.sections().images.attribute()) {\r\n                        this.sections().images.attribute().chosen.each(function (option) {\r\n                            option.sections().images = new this.makeImages(\r\n                                this.getImageProperty($('[data-role=step-gallery-option-' + option.id + ']')),\r\n                                'thumbnail'\r\n                            );\r\n                        }, this);\r\n                    }\r\n                    break;\r\n\r\n                case 'single':\r\n                    this.sections().images.value(new this.makeImages(\r\n                        this.getImageProperty($('[data-role=step-gallery-single]')),\r\n                        'thumbnail'\r\n                    ));\r\n                    break;\r\n\r\n                default:\r\n                    this.sections().images.value(new this.makeImages());\r\n                    break;\r\n            }\r\n        },\r\n        force: function (wizard) {\r\n            this.fillImagesSection();\r\n            this.validate();\r\n            this.validateImage();\r\n            wizard.data.sections = this.sections;\r\n            wizard.data.sectionHelper = this.getSectionValue.bind(this);\r\n            wizard.data.variations = this.generateVariation(this.attributes());\r\n        },\r\n        validate: function () {\r\n            var formValid;\r\n            _.each(this.sections(), function (section) {\r\n                switch (section.type()) {\r\n                    case 'each':\r\n                        if (!section.attribute()) {\r\n                            throw new Error($.mage.__('Please select attribute for {section} section.')\r\n                                .replace('{section}', section.label));\r\n                        }\r\n                        break;\r\n\r\n                    case 'single':\r\n                        if (!section.value()) {\r\n                            throw new Error($.mage.__('Please fill in the values for {section} section.')\r\n                                .replace('{section}', section.label));\r\n                        }\r\n                        break;\r\n                }\r\n            }, this);\r\n            formValid = true;\r\n            _.each($('[data-role=attributes-values-form]'), function (form) {\r\n                formValid = $(form).valid() && formValid;\r\n            });\r\n\r\n            if (!formValid) {\r\n                throw new Error($.mage.__('Please fill-in correct values.'));\r\n            }\r\n        },\r\n        validateImage: function () {\r\n            switch (this.sections().images.type()) {\r\n                case 'each':\r\n                    _.each(this.sections()['images'].attribute().chosen, function (option) {\r\n                        if (!option.sections().images.images.length) {\r\n                            throw new Error($.mage.__('Please select image(s) for your attribute.'));\r\n                        }\r\n                    });\r\n                    break;\r\n\r\n                case 'single':\r\n                    if (this.sections().images.value().file == null) {\r\n                        throw new Error($.mage.__('Please choose image(s).'));\r\n                    }\r\n                    break;\r\n            }\r\n        },\r\n        back: function () {\r\n            this.setWizardNotifyMessageDependOnSectionType();\r\n        },\r\n        bindGalleries: function () {\r\n            $('[data-role=bulk-step] [data-role=gallery]').each(function (index, element) {\r\n                var gallery = $(element),\r\n                    uploadInput = $(gallery.find('[name=image]')),\r\n                    dropZone = $(gallery).find('.image-placeholder');\r\n\r\n                if (!gallery.data('gallery-initialized')) {\r\n                    gallery.mage('productGallery', {\r\n                        template: '[data-template=gallery-content]',\r\n                        dialogTemplate: '.dialog-template',\r\n                        dialogContainerTmpl: '[data-role=img-dialog-container-tmpl]'\r\n                    });\r\n\r\n                    uploadInput.fileupload({\r\n                        dataType: 'json',\r\n                        dropZone: dropZone,\r\n                        process: [{\r\n                            action: 'load',\r\n                            fileTypes: /^image\\/(gif|jpeg|png)$/\r\n                        }, {\r\n                            action: 'resize',\r\n                            maxWidth: 1920,\r\n                            maxHeight: 1200\r\n                        }, {\r\n                            action: 'save'\r\n                        }],\r\n                        formData: {form_key: FORM_KEY},\r\n                        sequentialUploads: true,\r\n                        acceptFileTypes: /(\\.|\\/)(gif|jpe?g|png)$/i,\r\n                        add: function (e, data) {\r\n                            var progressTmpl = mageTemplate('[data-template=uploader]'),\r\n                                fileSize,\r\n                                tmpl;\r\n\r\n                            $.each(data.files, function (index, file) {\r\n                                fileSize = typeof file.size == \"undefined\" ?\r\n                                    $.mage.__('We could not detect a size.') :\r\n                                    byteConvert(file.size);\r\n\r\n                                data.fileId = Math.random().toString(33).substr(2, 18);\r\n\r\n                                tmpl = progressTmpl({\r\n                                    data: {\r\n                                        name: file.name,\r\n                                        size: fileSize,\r\n                                        id: data.fileId\r\n                                    }\r\n                                });\r\n\r\n                                $(tmpl).appendTo(gallery.find('[data-role=uploader]'));\r\n                            });\r\n\r\n                            $(this).fileupload('process', data).done(function () {\r\n                                data.submit();\r\n                            });\r\n                        },\r\n                        done: function (e, data) {\r\n                            if (data.result && !data.result.error) {\r\n                                gallery.trigger('addItem', data.result);\r\n                            } else {\r\n                                $('#' + data.fileId)\r\n                                    .delay(2000)\r\n                                    .hide('highlight');\r\n                                alert({\r\n                                    content: $.mage.__('We don\\'t recognize or support this file extension type.')\r\n                                });\r\n                            }\r\n                            $('#' + data.fileId).remove();\r\n                        },\r\n                        progress: function (e, data) {\r\n                            var progress = parseInt(data.loaded / data.total * 100, 10),\r\n                                progressSelector = '#' + data.fileId + ' .progressbar-container .progressbar';\r\n\r\n                            $(progressSelector).css('width', progress + '%');\r\n                        },\r\n                        fail: function (e, data) {\r\n                            var progressSelector = '#' + data.fileId;\r\n\r\n                            $(progressSelector).removeClass('upload-progress').addClass('upload-failure')\r\n                                .delay(2000)\r\n                                .hide('highlight')\r\n                                .remove();\r\n                        }\r\n                    });\r\n                    gallery.data('gallery-initialized', 1);\r\n                }\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/variations/steps/select_attributes.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n// jscs:disable jsDoc\r\ndefine([\r\n    'uiComponent',\r\n    'jquery',\r\n    'underscore',\r\n    'mage/translate'\r\n], function (Component, $, _) {\r\n    'use strict';\r\n\r\n    var initNewAttributeListener = function (provider) {\r\n        $('[data-role=product-variations-matrix]').on('add', function () {\r\n            provider().reload();\r\n        });\r\n    };\r\n\r\n    return Component.extend({\r\n        attributesLabels: {},\r\n        stepInitialized: false,\r\n        defaults: {\r\n            modules: {\r\n                multiselect: '${ $.multiselectName }',\r\n                attributeProvider: '${ $.providerName }'\r\n            },\r\n            listens: {\r\n                '${ $.multiselectName }:selected': 'doSelectedAttributesLabels',\r\n                '${ $.multiselectName }:rows': 'doSelectSavedAttributes'\r\n            },\r\n            notificationMessage: {\r\n                text: null,\r\n                error: null\r\n            },\r\n            selectedAttributes: []\r\n        },\r\n        initialize: function () {\r\n            this._super();\r\n            this.selected = [];\r\n\r\n            initNewAttributeListener(this.attributeProvider);\r\n        },\r\n        initObservable: function () {\r\n            this._super().observe(['selectedAttributes']);\r\n\r\n            return this;\r\n        },\r\n        render: function (wizard) {\r\n            this.wizard = wizard;\r\n            this.setNotificationMessage();\r\n        },\r\n        setNotificationMessage: function () {\r\n            /*eslint-disable max-len*/\r\n            var msg = $.mage.__('When you remove or add an attribute, we automatically update all configurations and you will need to recreate current configurations manually.');\r\n\r\n            /*eslint-enable max-len*/\r\n\r\n            if (this.mode === 'edit') {\r\n                this.wizard.setNotificationMessage(msg);\r\n            }\r\n        },\r\n        doSelectSavedAttributes: function () {\r\n            if (this.stepInitialized === false) {\r\n                this.stepInitialized = true;\r\n                //cache attributes labels, which can be present on the 2nd page\r\n                _.each(this.initData.attributes, function (attribute) {\r\n                    this.attributesLabels[attribute.id] = attribute.label;\r\n                }.bind(this));\r\n                this.multiselect().selected(_.pluck(this.initData.attributes, 'id'));\r\n            }\r\n        },\r\n        doSelectedAttributesLabels: function (selected) {\r\n            var labels = [];\r\n\r\n            this.selected = selected;\r\n            _.each(selected, function (attributeId) {\r\n                var attribute;\r\n\r\n                if (!this.attributesLabels[attributeId]) {\r\n                    attribute = _.findWhere(this.multiselect().rows(), {\r\n                        attribute_id: attributeId\r\n                    });\r\n\r\n                    if (attribute) {\r\n                        this.attributesLabels[attribute.attribute_id] = attribute.frontend_label;\r\n                    }\r\n                }\r\n                labels.push(this.attributesLabels[attributeId]);\r\n            }.bind(this));\r\n            this.selectedAttributes(labels.join(', '));\r\n        },\r\n        force: function (wizard) {\r\n            wizard.data.attributesIds = this.multiselect().selected;\r\n\r\n            if (!wizard.data.attributesIds() || wizard.data.attributesIds().length === 0) {\r\n                throw new Error($.mage.__('Please select attribute(s).'));\r\n            }\r\n            this.setNotificationMessage();\r\n        },\r\n        back: function () {\r\n        }\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/variations/steps/summary.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n// jscs:disable jsDoc\r\ndefine([\r\n    'uiComponent',\r\n    'jquery',\r\n    'ko',\r\n    'underscore',\r\n    'Magento_Ui/js/grid/paging/paging',\r\n    'mage/translate'\r\n], function (Component, $, ko, _, paging) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            modules: {\r\n                variationsComponent: '${ $.variationsComponent }',\r\n                modalComponent: '${ $.modalComponent }'\r\n            },\r\n            notificationMessage: {\r\n                text: null,\r\n                error: null\r\n            },\r\n            gridExisting: [],\r\n            gridNew: [],\r\n            gridDeleted: [],\r\n            variationsExisting: [],\r\n            variationsNew: [],\r\n            variationsDeleted: [],\r\n            pagingExisting: paging({\r\n                name: 'configurableWizard.pagingExisting',\r\n                sizesConfig: {\r\n                    component: 'Magento_ConfigurableProduct/js/variations/paging/sizes',\r\n                    name: 'configurableWizard.pagingExisting_sizes'\r\n                }\r\n            }),\r\n            pagingNew: paging({\r\n                name: 'configurableWizard.pagingNew',\r\n                sizesConfig: {\r\n                    component: 'Magento_ConfigurableProduct/js/variations/paging/sizes',\r\n                    name: 'configurableWizard.pagingNew_sizes'\r\n                }\r\n            }),\r\n            pagingDeleted: paging({\r\n                name: 'configurableWizard.pagingDeleted',\r\n                sizesConfig: {\r\n                    component: 'Magento_ConfigurableProduct/js/variations/paging/sizes',\r\n                    name: 'configurableWizard.pagingDeleted_sizes'\r\n                }\r\n            }),\r\n            attributes: [],\r\n            attributesName: [$.mage.__('Images'), $.mage.__('SKU'), $.mage.__('Quantity'), $.mage.__('Price')],\r\n            sections: [],\r\n            gridTemplate: 'Magento_ConfigurableProduct/variations/steps/summary-grid'\r\n        },\r\n        initObservable: function () {\r\n            var pagingObservables = {\r\n                currentNew: ko.getObservable(this.pagingNew, 'current'),\r\n                currentExisting: ko.getObservable(this.pagingExisting, 'current'),\r\n                currentDeleted: ko.getObservable(this.pagingDeleted, 'current'),\r\n                pageSizeNew: ko.getObservable(this.pagingNew, 'pageSize'),\r\n                pageSizeExisting: ko.getObservable(this.pagingExisting, 'pageSize'),\r\n                pageSizeDeleted: ko.getObservable(this.pagingDeleted, 'pageSize')\r\n            };\r\n\r\n            this._super().observe('gridExisting gridNew gridDeleted attributes sections');\r\n            this.gridExisting.columns = ko.observableArray();\r\n            this.gridNew.columns = ko.observableArray();\r\n            this.gridDeleted.columns = ko.observableArray();\r\n\r\n            _.each(pagingObservables, function (observable) {\r\n                observable.subscribe(function () {\r\n                    this.generateGrid();\r\n                }, this);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n        nextLabelText: $.mage.__('Generate Products'),\r\n        variations: [],\r\n        calculate: function (variations, getSectionValue) {\r\n            var productSku = this.variationsComponent().getProductValue('sku'),\r\n                productPrice = this.variationsComponent().getProductPrice(),\r\n                productWeight = this.variationsComponent().getProductValue('weight'),\r\n                variationsKeys = [],\r\n                gridExisting = [],\r\n                gridNew = [],\r\n                gridDeleted = [];\r\n\r\n            this.variations = [];\r\n            _.each(variations, function (options) {\r\n                var product, images, sku, quantity, price, variation,\r\n                    productId = this.variationsComponent().getProductIdByOptions(options);\r\n\r\n                if (productId) {\r\n                    product = _.findWhere(this.variationsComponent().variations, {\r\n                        productId: productId\r\n                    });\r\n                }\r\n                images = getSectionValue('images', options);\r\n                sku = productSku + _.reduce(options, function (memo, option) {\r\n                    return memo + '-' + option.label;\r\n                }, '');\r\n                quantity = getSectionValue('quantity', options);\r\n\r\n                if (!quantity && productId) {\r\n                    quantity = product.quantity;\r\n                }\r\n                price = getSectionValue('price', options);\r\n\r\n                if (!price) {\r\n                    price = productId ? product.price : productPrice;\r\n                }\r\n\r\n                if (productId && !images.file) {\r\n                    images = product.images;\r\n                }\r\n                variation = {\r\n                    options: options,\r\n                    images: images,\r\n                    sku: sku,\r\n                    name: sku,\r\n                    quantity: quantity,\r\n                    price: price,\r\n                    productId: productId,\r\n                    weight: productWeight,\r\n                    editable: true\r\n                };\r\n\r\n                if (productId) {\r\n                    variation.sku = product.sku;\r\n                    variation.weight = product.weight;\r\n                    variation.name = product.name;\r\n                    gridExisting.push(this.prepareRowForGrid(variation));\r\n                } else {\r\n                    gridNew.push(this.prepareRowForGrid(variation));\r\n                }\r\n                this.variations.push(variation);\r\n                variationsKeys.push(this.variationsComponent().getVariationKey(options));\r\n            }, this);\r\n\r\n            _.each(_.omit(this.variationsComponent().productAttributesMap, variationsKeys), function (productId) {\r\n                gridDeleted.push(this.prepareRowForGrid(\r\n                    _.findWhere(this.variationsComponent().variations, {\r\n                        productId: productId\r\n                    })\r\n                ));\r\n            }.bind(this));\r\n\r\n            this.variationsExisting = gridExisting;\r\n            this.variationsNew = gridNew;\r\n            this.variationsDeleted = gridDeleted;\r\n\r\n        },\r\n        generateGrid: function () {\r\n            var pageExisting = this.pagingExisting.pageSize * this.pagingExisting.current,\r\n                pageNew = this.pagingNew.pageSize * this.pagingNew.current,\r\n                pageDeleted = this.pagingDeleted.pageSize * this.pagingDeleted.current;\r\n\r\n            this.pagingExisting.totalRecords = this.variationsExisting.length;\r\n            this.gridExisting(this.variationsExisting.slice(pageExisting - this.pagingExisting.pageSize, pageExisting));\r\n\r\n            this.pagingNew.totalRecords = this.variationsNew.length;\r\n            this.gridNew(this.variationsNew.slice(pageNew - this.pagingNew.pageSize, pageNew));\r\n\r\n            this.pagingDeleted.totalRecords = this.variationsDeleted.length;\r\n            this.gridDeleted(this.variationsDeleted.slice(pageDeleted - this.pagingDeleted.pageSize, pageDeleted));\r\n        },\r\n        prepareRowForGrid: function (variation) {\r\n            var row = [];\r\n\r\n            row.push(_.extend({\r\n                images: []\r\n            }, variation.images));\r\n            row.push(variation.sku);\r\n            row.push(variation.quantity);\r\n            _.each(variation.options, function (option) {\r\n                row.push(option.label);\r\n            });\r\n            row.push(this.variationsComponent().getCurrencySymbol() +  ' ' + variation.price);\r\n\r\n            return row;\r\n        },\r\n        getGridTemplate: function () {\r\n            return this.gridTemplate;\r\n        },\r\n        getGridId: function () {\r\n            return _.uniqueId('grid_');\r\n        },\r\n        getColumnsName: function (attributes) {\r\n            var columns = this.attributesName.slice(0);\r\n\r\n            attributes.each(function (attribute, index) {\r\n                columns.splice(3 + index, 0, attribute.label);\r\n            }, this);\r\n\r\n            return columns;\r\n        },\r\n        render: function (wizard) {\r\n            this.wizard = wizard;\r\n            this.sections(wizard.data.sections());\r\n            this.attributes(wizard.data.attributes());\r\n            this.gridNew([]);\r\n            this.gridExisting([]);\r\n            this.gridDeleted([]);\r\n            this.gridExisting.columns(this.getColumnsName(this.wizard.data.attributes));\r\n            this.gridNew.columns(this.getColumnsName(this.wizard.data.attributes));\r\n            this.gridDeleted.columns(this.getColumnsName(this.variationsComponent().productAttributes));\r\n            this.calculate(wizard.data.variations, wizard.data.sectionHelper);\r\n            this.generateGrid();\r\n        },\r\n        force: function () {\r\n            this.variationsComponent().render(this.variations, this.attributes());\r\n            this.modalComponent().closeModal();\r\n        },\r\n        back: function () {\r\n        }\r\n    });\r\n});\r\n","Magento_Integration/js/integration.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint jquery:true*/\r\n/*global FORM_KEY*/\r\n/*global integration*/\r\ndefine([\r\n    \"jquery\",\r\n    \"Magento_Ui/js/modal/alert\",\r\n    \"jquery/ui\",\r\n    \"mage/translate\",\r\n    \"Magento_Ui/js/modal/modal\"\r\n], function($, alert){\r\n    \"use strict\";\r\n\r\n    $.widget('mage.integration', {\r\n        /**\r\n         * Options common to all instances of this widget.\r\n         * @type {Object}\r\n         */\r\n        options: {\r\n            /**\r\n             * URL of the integration grid.\r\n             * @type {String}\r\n             */\r\n            gridUrl: ''\r\n        },\r\n\r\n        /**\r\n         * Bind event handler for the action when admin clicks \"Save & Activate\" button.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            if ($('#save-split-button-activate').length) {\r\n                // We're on the \"New integration\" page - bind related handler\r\n                this._form = $('#edit_form');\r\n                this._form.on('saveAndActivate', $.proxy(this._saveAndActivate, this));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Save new integration, then kick off the activate dialog.\r\n         * @private\r\n         */\r\n        _saveAndActivate: function () {\r\n            if (this._form.validation && !this._form.validation('isValid')) {\r\n                return false;\r\n            }\r\n\r\n            $.ajax({\r\n                url: this._form.prop('action'),\r\n                type: 'post',\r\n                data: this._form.serialize(),\r\n                dataType: 'json',\r\n                context: this,\r\n                beforeSend: function () {\r\n                    $('body').trigger('processStart');\r\n                },\r\n                success: function (data) {\r\n                    if (data['_redirect']) {\r\n                        window.location.href = data['_redirect'];\r\n                    } else if (data['integrationId']) {\r\n                        var integrationName = $('#integration_properties_name').val();\r\n                        window.integration.popup.show($('<span>').attr({\r\n                            'data-row-dialog': 'permissions',\r\n                            'data-row-id': data['integrationId'],\r\n                            // We do escaping here instead of the place of actual output because _showPopup()\r\n                            // actually receives dialog window title from couple of places: from here and from the grid.\r\n                            // The issue is we always should escape values in the grid, so that value is already\r\n                            // escaped. To avoid double escaping we do it here instead of the output.\r\n                            'data-row-name': $('<div>').text(integrationName).html(),\r\n                            'data-row-is-reauthorize': '0',\r\n                            'data-row-is-token-exchange': data['isTokenExchange']\r\n                        }));\r\n                        var that = this;\r\n                        $('#integration-popup-container').on('dialogclose', function () {\r\n                            $('body').trigger('processStart');\r\n                            window.location.href = that.options.gridUrl;\r\n                            return false;\r\n                        });\r\n                    }\r\n                },\r\n                error: function (jqXHR, status, error) {\r\n                    alert({\r\n                        content: $.mage.__('Sorry, something went wrong. Please try again later.')\r\n                    });\r\n                    window.console && console.log(status + ': ' + error + \"\\nResponse text:\\n\" + jqXHR.responseText);\r\n                },\r\n                complete: function () {\r\n                    $('body').trigger('processStop');\r\n                }\r\n            });\r\n\r\n            return true;\r\n        }\r\n    });\r\n\r\n    window.Integration = function (\r\n        permissionsDialogUrl,\r\n        tokensDialogUrl,\r\n        tokensExchangeUrl,\r\n        gridUrl,\r\n        successCallbackUrl\r\n    ) {\r\n        var url = {\r\n            permissions: permissionsDialogUrl,\r\n            tokens: tokensDialogUrl,\r\n            tokensExchange: tokensExchangeUrl,\r\n            grid: gridUrl\r\n        };\r\n\r\n        var IdentityLogin = {\r\n            win: null,\r\n            strLocation: null,\r\n            checker: null,\r\n            isCalledBack: false,\r\n            //Info popup dialog. Should be hidden when login window is closed\r\n            jqInfoDialog: $('#integration-popup-container'),\r\n            successCallbackUrl: successCallbackUrl,\r\n            Constants: {\r\n                /*\r\n                 This interval is set such that it adjusts to the child window closing timeout of 1000 ms. This will\r\n                 give the checker function enough time to detect if the successCallback has been invoked\r\n                 */\r\n                CHECKER_INTERVAL: 500,\r\n                //Login screen size plus some buffer\r\n                WIDTH: 680,\r\n                HEIGHT: 510,\r\n                // subtract pixels(30) and width(680) from screen width to move popup from extreme left\r\n                LEFT: screen.width - 680 - 30,\r\n                // subtract pixels(300) and height(300) from screen height to move from top\r\n                TOP: screen.height - 510 - 300\r\n            },\r\n\r\n            invokePopup: function (identityCallbackUrl, consumerKey, jqInfoDialog) {\r\n                // Callback should be invoked only once. Reset callback flag on subsequent invocations.\r\n                IdentityLogin.isCalledBack = false;\r\n                IdentityLogin.jqInfoDialog = jqInfoDialog;\r\n                var param = $.param({\"oauth_consumer_key\": consumerKey, \"success_call_back\": IdentityLogin.successCallbackUrl});\r\n                IdentityLogin.win = window.open(identityCallbackUrl + '?' + param, '',\r\n                    'top=' + IdentityLogin.Constants.TOP +\r\n                        ', left=' + IdentityLogin.Constants.LEFT +\r\n                        ', width=' + IdentityLogin.Constants.WIDTH +\r\n                        ', height=' + IdentityLogin.Constants.HEIGHT + ',scrollbars=no');\r\n\r\n                if (IdentityLogin.checker != null) {\r\n                    //Clear any previous check\r\n                    clearInterval(IdentityLogin.checker);\r\n                }\r\n                //Polling to detect url of the child window.\r\n                IdentityLogin.checker = setInterval(\r\n                    IdentityLogin.fnCheckLocation, IdentityLogin.Constants.CHECKER_INTERVAL\r\n                );\r\n            },\r\n\r\n            /**\r\n             * Function to check the location of the child popoup window.\r\n             * Once detected if the callback is successful, parent window will be reloaded\r\n             */\r\n            fnCheckLocation: function () {\r\n                if (IdentityLogin.win == null) {\r\n                    return;\r\n                }\r\n                // Check to see if the location has changed.\r\n                try {\r\n                    //Is the success callback invoked\r\n                    if (IdentityLogin.win.closed ||\r\n                        IdentityLogin.win.location.href == IdentityLogin.successCallbackUrl //eslint-disable-line eqeqeq\r\n                    ) {\r\n                        //Stop the polling\r\n                        clearInterval(IdentityLogin.checker);\r\n                        $('body').trigger('processStart');\r\n                        //Check for window closed\r\n                        window.location.reload();\r\n                        IdentityLogin.jqInfoDialog.modal('closeModal');\r\n                    }\r\n                } catch (e) {\r\n                    //squash. In case Window closed without success callback, clear polling\r\n                    if (IdentityLogin.win.closed) {\r\n                        IdentityLogin.jqInfoDialog.modal('closeModal');\r\n                        clearInterval(IdentityLogin.checker);\r\n                    }\r\n                    return;\r\n                }\r\n            }\r\n        };\r\n\r\n        var isPopupBlocked = function(popupWindow) {\r\n            try {\r\n                popupWindow.focus();\r\n            } catch (e) {\r\n                alert({\r\n                    content: $.mage.__(\"Popup Blocker is enabled! Please add this site to your exception list.\")\r\n                });\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n\r\n        var _showPopup = function (dialog, title, okButton, url) {\r\n            $.ajax({\r\n                url: url,\r\n                cache: false,\r\n                data: {form_key: window.FORM_KEY},\r\n                method: 'GET',\r\n                beforeSend: function () {\r\n                    // Show the spinner\r\n                    $('body').trigger('processStart');\r\n                },\r\n\r\n                success: function (result) {\r\n                    var redirect = result._redirect;\r\n\r\n                    if (redirect) {\r\n                        window.location.href = redirect;\r\n                        return;\r\n                    }\r\n\r\n                    var identityLinkUrl = null,\r\n                        consumerKey = null,\r\n                        popupHtml = null,\r\n                        popup = $('#integration-popup-container');\r\n\r\n                    try {\r\n                        var resultObj = typeof result === 'string' ?\r\n                            JSON.parse(result) :\r\n                            result;\r\n\r\n                        identityLinkUrl = resultObj['identity_link_url'];\r\n                        consumerKey      = resultObj['oauth_consumer_key'];\r\n                        popupHtml       = resultObj['popup_content'];\r\n\r\n                    } catch (e) {\r\n                        //This is expected if result is not json. Do nothing.\r\n                    }\r\n\r\n                    if (identityLinkUrl && consumerKey && popupHtml) {\r\n                        IdentityLogin.invokePopup(identityLinkUrl, consumerKey, popup);\r\n                        if (isPopupBlocked(IdentityLogin.win)) {\r\n                            return;\r\n                        }\r\n                    } else {\r\n                        popupHtml = result;\r\n                    }\r\n\r\n                    if (popup.length === 0){\r\n                        popup = $('<div/>');\r\n                    }\r\n                    popup.html(popupHtml);\r\n\r\n                    var buttons = [],\r\n                        dialogProperties = {\r\n                            title: title,\r\n                            type: 'slide',\r\n                            dialogClass: dialog == 'permissions' ? 'integration-dialog' : 'integration-dialog no-close',\r\n                        };\r\n\r\n                    // Add confirmation button to the list of dialog buttons. okButton not set for tokenExchange dialog\r\n                    if (okButton) {\r\n                        buttons.push(okButton);\r\n                    }\r\n                    // Add button only if its not empty\r\n                    if (buttons.length > 0) {\r\n                        dialogProperties['buttons'] = buttons\r\n                    }\r\n                    popup.modal(dialogProperties);\r\n                    popup.modal('openModal');\r\n                },\r\n                error: function (jqXHR, status, error) {\r\n                    alert({\r\n                        content: $.mage.__('Sorry, something went wrong. Please try again later.')\r\n                    });\r\n                    window.console && console.log(status + ': ' + error + \"\\nResponse text:\\n\" + jqXHR.responseText);\r\n                },\r\n                complete: function () {\r\n                    // Hide the spinner\r\n                    $('body').trigger('processStop');\r\n                }\r\n            })\r\n        };\r\n\r\n        return {\r\n            popup: {\r\n                show: function (ctx) {\r\n                    var dialog = $(ctx).attr('data-row-dialog');\r\n                    var isReauthorize = $(ctx).attr('data-row-is-reauthorize');\r\n                    var isTokenExchange = $(ctx).attr('data-row-is-token-exchange');\r\n\r\n                    if (!url.hasOwnProperty(dialog)) {\r\n                        throw 'Invalid dialog type';\r\n                    }\r\n\r\n                    var integrationId = $(ctx).attr('data-row-id');\r\n\r\n                    if (!integrationId) {\r\n                        throw 'Unable to find integration ID';\r\n                    }\r\n\r\n                    // Replace placeholders in URL\r\n                    var ajaxUrl = url[dialog].replace(':id', integrationId).replace(':isReauthorize', isReauthorize);\r\n\r\n                    try {\r\n                        // Get integration name either from current element or from neighbor column\r\n                        var integrationName = $(ctx).attr('data-row-name')\r\n                            || $(ctx).parents('tr').find('.col-name').html().trim();\r\n                        if (integrationName.indexOf('<span') > -1) {\r\n                            // Remove unsecure URL warning from popup window title if it is present\r\n                            integrationName = integrationName.substring(0, integrationName.indexOf('<span'));\r\n                        }\r\n                    } catch (e) {\r\n                        throw 'Unable to find integration name';\r\n                    }\r\n\r\n                    var okButton = {\r\n                        permissions: {\r\n                            text: (isReauthorize == '1') ? $.mage.__('Reauthorize') : $.mage.__('Allow'),\r\n                            'class': 'action-primary',\r\n                            attr: {\r\n                                'data-row-id': integrationId,\r\n                                'data-row-name': integrationName,\r\n                                'data-row-dialog': (isTokenExchange == '1') ? 'tokensExchange' : 'tokens',\r\n                                'data-row-is-reauthorize': isReauthorize,\r\n                                'data-row-is-token-exchange': isTokenExchange\r\n                            },\r\n                            click: function () {\r\n                                // Find the 'Allow' button and clone - it has all necessary data, but is going to be\r\n                                // destroyed along with the current dialog\r\n                                var ctx = this.modal.find('button.action-primary').clone(true);\r\n\r\n                                this.closeModal();\r\n                                this.modal.remove();\r\n                                // Make popup out of data we saved from 'Allow' button\r\n                                window.integration.popup.show(ctx);\r\n                            }\r\n                        },\r\n                        tokens: {\r\n                            text: $.mage.__('Done'),\r\n                            'class': 'action-primary',\r\n                            click: function () {\r\n                                // Integration has been activated at the point of generating tokens\r\n                                window.location.href = url.grid;\r\n                            }\r\n                        }\r\n                    };\r\n\r\n                    _showPopup(dialog, integrationName, okButton[dialog], ajaxUrl);\r\n                }\r\n            }\r\n        };\r\n    };\r\n\r\n    return $.mage.integration;\r\n});\r\n","Magento_Vault/js/vault.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*browser:true*/\r\n/*global define*/\r\ndefine([\r\n    'jquery',\r\n    'uiComponent'\r\n], function ($, Class) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n        defaults: {\r\n            $selector: null,\r\n            selector: 'edit_form',\r\n            fieldset: '',\r\n            active: false,\r\n            imports: {\r\n                onActiveChange: 'active'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set list of observable attributes\r\n         * @returns {exports.initObservable}\r\n         */\r\n        initObservable: function () {\r\n            var self = this;\r\n\r\n            self.$selector = $('#' + self.selector);\r\n            this._super()\r\n                .observe(['active']);\r\n\r\n            // re-init payment method events\r\n            self.$selector.off('changePaymentMethod.' + this.getCode())\r\n                .on('changePaymentMethod.' + this.getCode(), this.changePaymentMethod.bind(this));\r\n\r\n            if (this.active()) {\r\n                $('#' + this.fieldset + ' input:radio:first').trigger('click');\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Enable/disable current payment method\r\n         * @param {Object} event\r\n         * @param {String} method\r\n         * @returns {exports.changePaymentMethod}\r\n         */\r\n        changePaymentMethod: function (event, method) {\r\n            this.active(method === this.getCode());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Triggered when payment changed\r\n         * @param {Boolean} isActive\r\n         */\r\n        onActiveChange: function (isActive) {\r\n            if (!isActive) {\r\n                this.$selector.trigger('setVaultNotActive.' + this.getCode());\r\n\r\n                return;\r\n            }\r\n\r\n            $('#' + this.fieldset + ' input:radio:first').trigger('click');\r\n            window.order.addExcludedPaymentMethod(this.getCode());\r\n        },\r\n\r\n        /**\r\n         * Get Vault Payment method code\r\n         * @returns {String}\r\n         */\r\n        getCode: function () {\r\n            return this.code;\r\n        }\r\n    });\r\n});\r\n","Magento_UrlRewrite/js/url-rewrite-validation.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/backend/form',\r\n    'mage/backend/validation'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (data, element) {\r\n\r\n        $(element).form().validation({\r\n            validationUrl: data.url\r\n        });\r\n    };\r\n});\r\n","Magento_Review/js/rating.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    \"jquery\",\r\n    \"jquery/ui\"\r\n], function($){\r\n    'use strict';\r\n    \r\n    $.widget(\"marketing.ratingControl\", {\r\n        options: {\r\n            colorFilled: '#333',\r\n            colorUnfilled: '#CCCCCC',\r\n            colorHover: '#f30'\r\n        },\r\n\r\n        _create: function() {\r\n            this._labels = this.element.find('label');\r\n            this._bind();\r\n        },\r\n\r\n        _bind: function() {\r\n            this._labels.on({\r\n                click: $.proxy(function(e) {\r\n                    $(e.currentTarget).prev().prop('checked', true);\r\n                    this._updateRating();\r\n                }, this),\r\n\r\n                hover: $.proxy(function(e) {\r\n                    this._updateHover($(e.currentTarget), this.options.colorHover);\r\n                }, this),\r\n\r\n                mouseleave: $.proxy(function(e) {\r\n                    this._updateHover($(e.currentTarget), this.options.colorUnfilled);\r\n                }, this)\r\n            });\r\n\r\n            this._updateRating();\r\n        },\r\n\r\n        _updateHover: function(elem, color) {\r\n            elem.nextAll('label').addBack().filter(function() {\r\n                return !$(this).data('checked');\r\n            }).css('color', color);\r\n        },\r\n\r\n        _updateRating: function() {\r\n            var checkedInputs = this.element.find('input[type=\"radio\"]:checked');\r\n            checkedInputs.nextAll('label').addBack().css('color', this.options.colorFilled).data('checked', true);\r\n            checkedInputs.prevAll('label').css('color', this.options.colorUnfilled).data('checked', false);\r\n        }\r\n    });\r\n\r\n});\r\n","Magento_Paypal/js/rule.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'uiClass',\r\n    'Magento_Paypal/js/rules'\r\n], function (Class, Rules) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n\r\n        /**\r\n         * Constructor\r\n         *\r\n         * @param {Object} config\r\n         * @returns {exports.initialize}\r\n         */\r\n        initialize: function (config) {\r\n            this.rules = new Rules();\r\n            this.initConfig(config);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * To apply the rule\r\n         */\r\n        apply: function () {\r\n            this.rules[this.name](this.$target, this.$owner, this.data);\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/rules.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'uiClass',\r\n    'Magento_Ui/js/modal/alert'\r\n], function (Class, alert) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Check is solution enabled\r\n     *\r\n     * @param {*} solution\r\n     * @param {String} enabler\r\n     * @returns {Boolean}\r\n     */\r\n    var isSolutionEnabled = function (solution, enabler) {\r\n        return solution.find(enabler).val() === '1';\r\n    },\r\n\r\n    /**\r\n     * Check is solution has related solutions enabled\r\n     *\r\n     * @param {Object} data\r\n     * @returns {Boolean}\r\n     */\r\n    hasRelationsEnabled = function (data) {\r\n        var name;\r\n\r\n        for (name in data.argument) {\r\n            if (\r\n                data.solutionsElements[name] &&\r\n                isSolutionEnabled(data.solutionsElements[name], data.enableButton)\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * Set solution select-enabler to certain option\r\n     *\r\n     * @param {*} solution\r\n     * @param {String} enabler\r\n     * @param {Boolean} enabled\r\n     */\r\n    setSolutionSelectEnabled = function (solution, enabler, enabled) {\r\n        enabled = !(enabled || typeof enabled === 'undefined') ? '0' : '1';\r\n\r\n        solution.find(enabler + ' option[value=' + enabled + ']')\r\n            .prop('selected', true);\r\n    },\r\n\r\n    /**\r\n     * Set solution property 'disabled' value\r\n     *\r\n     * @param {*} solution\r\n     * @param {String} enabler\r\n     * @param {Boolean} enabled\r\n     */\r\n    setSolutionPropEnabled = function (solution, enabler, enabled) {\r\n        enabled = !(enabled || typeof enabled === 'undefined');\r\n\r\n        solution.find(enabler).prop('disabled', enabled);\r\n    },\r\n\r\n    /**\r\n     * Set/unset solution select-enabler label\r\n     *\r\n     * @param {*} solution\r\n     * @param {String} enabler\r\n     * @param {Boolean} enabled\r\n     */\r\n    setSolutionMarkEnabled = function (solution, enabler, enabled) {\r\n        var solutionEnabler = solution.find('label[for=\"' + solution.find(enabler).attr('id') + '\"]');\r\n\r\n        enabled || typeof enabled === 'undefined' ?\r\n            solutionEnabler.addClass('enabled') :\r\n            solutionEnabler.removeClass('enabled');\r\n    },\r\n\r\n    /**\r\n     * Set/unset solution section label\r\n     *\r\n     * @param {*} solution\r\n     * @param {Boolean} enabled\r\n     */\r\n    setSolutionSectionMarkEnabled = function (solution, enabled) {\r\n        var solutionSection = solution.find('.section-config');\r\n\r\n        enabled || typeof enabled === 'undefined' ?\r\n            solutionSection.addClass('enabled') :\r\n            solutionSection.removeClass('enabled');\r\n    },\r\n\r\n    /**\r\n     * Set/unset solution section inner labels\r\n     *\r\n     * @param {*} solution\r\n     * @param {Boolean} enabled\r\n     */\r\n    setSolutionLabelsMarkEnabled = function (solution, enabled) {\r\n        var solutionLabels = solution.find('label.enabled');\r\n\r\n        enabled || typeof enabled === 'undefined' ?\r\n            solutionLabels.addClass('enabled') :\r\n            solutionLabels.removeClass('enabled');\r\n    },\r\n\r\n    /**\r\n     * Set solution as disabled\r\n     *\r\n     * @param {*} solution\r\n     * @param {String} enabler\r\n     */\r\n    disableSolution = function (solution, enabler) {\r\n        setSolutionMarkEnabled(solution, enabler, false);\r\n        setSolutionSelectEnabled(solution, enabler, false);\r\n        setSolutionPropEnabled(solution, enabler, false);\r\n    },\r\n\r\n    /**\r\n     * Set solution as enabled\r\n     *\r\n     * @param {*} solution\r\n     * @param {String} enabler\r\n     */\r\n    enableSolution = function (solution, enabler) {\r\n        setSolutionPropEnabled(solution, enabler);\r\n        setSolutionSelectEnabled(solution, enabler);\r\n        setSolutionMarkEnabled(solution, enabler);\r\n    },\r\n\r\n    /**\r\n     * Lock/unlock solution configuration button\r\n     *\r\n     * @param {*} solution\r\n     * @param {String} buttonConfiguration\r\n     * @param {Boolean} unlock\r\n     */\r\n    setSolutionConfigurationUnlock = function (solution, buttonConfiguration, unlock) {\r\n        var solutionConfiguration = solution.find(buttonConfiguration);\r\n\r\n        unlock || typeof unlock === 'undefined' ?\r\n            solutionConfiguration.removeClass('disabled').removeAttr('disabled') :\r\n            solutionConfiguration.addClass('disabled').attr('disabled', 'disabled');\r\n    },\r\n\r\n    /**\r\n     * Set/unset solution usedefault checkbox\r\n     *\r\n     * @param {*} solution\r\n     * @param {String} enabler\r\n     * @param {Boolean} checked\r\n     */\r\n    setSolutionUsedefaultEnabled = function (solution, enabler, checked) {\r\n        checked = !(checked || typeof checked === 'undefined');\r\n\r\n        solution.find('input[id=\"' + solution.find(enabler).attr('id') + '_inherit\"]')\r\n            .prop('checked', checked);\r\n    },\r\n\r\n    /**\r\n     * Forward solution select-enabler changes\r\n     *\r\n     * @param {*} solution\r\n     * @param {String} enabler\r\n     */\r\n    forwardSolutionChange = function (solution, enabler) {\r\n        solution.find(enabler).change();\r\n    },\r\n\r\n    /**\r\n     * Show/hide dependent fields\r\n     *\r\n     * @param {*} solution\r\n     * @param {String} identifier\r\n     * @param {Boolean} show\r\n     */\r\n    showDependsField = function (solution, identifier, show) {\r\n        show = show || typeof show === 'undefined';\r\n\r\n        solution.find(identifier).toggle(show);\r\n        solution.find(identifier).closest('tr').toggle(show);\r\n        solution.find(identifier).attr('disabled', !show);\r\n    };\r\n\r\n    return Class.extend({\r\n        defaults: {\r\n            /**\r\n             * Payment conflicts checker\r\n             */\r\n            executed: false\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        simpleDisable: function ($target, $owner, data) {\r\n            setSolutionSelectEnabled($target, data.enableButton, false);\r\n            setSolutionLabelsMarkEnabled($target, false);\r\n            setSolutionSectionMarkEnabled($target, false);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         */\r\n        simpleMarkEnable: function ($target) {\r\n            setSolutionSectionMarkEnabled($target);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        disable: function ($target, $owner, data) {\r\n            this.simpleDisable($target, $owner, data);\r\n            forwardSolutionChange($target, data.enableButton);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalExpressDisable: function ($target, $owner, data) {\r\n            setSolutionSelectEnabled($target, data.enableButton, false);\r\n            setSolutionLabelsMarkEnabled($target, false);\r\n            forwardSolutionChange($target, data.enableButton);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalExpressLockConfiguration: function ($target, $owner, data) {\r\n            setSolutionConfigurationUnlock($target, data.buttonConfiguration, false);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalExpressLockConfigurationConditional: function ($target, $owner, data) {\r\n            if (\r\n                !isSolutionEnabled($target, data.enableInContextPayPal) &&\r\n                hasRelationsEnabled(data)\r\n            ) {\r\n                this.paypalExpressLockConfiguration($target, $owner, data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalExpressMarkDisable: function ($target, $owner, data) {\r\n            if (!hasRelationsEnabled(data)) {\r\n                this.simpleDisable($target, $owner, data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalExpressUnlockConfiguration: function ($target, $owner, data) {\r\n            if (!hasRelationsEnabled(data)) {\r\n                setSolutionConfigurationUnlock($target, data.buttonConfiguration);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalBmlDisable: function ($target, $owner, data) {\r\n            disableSolution($target, data.enableBmlPayPal);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalBmlDisableConditional: function ($target, $owner, data) {\r\n            if (!isSolutionEnabled($target, data.enableButton)) {\r\n                this.paypalBmlDisable($target, $owner, data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalBmlEnable: function ($target, $owner, data) {\r\n            enableSolution($target, data.enableBmlPayPal);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowExpressDisable: function ($target, $owner, data) {\r\n            disableSolution($target, data.enableExpress);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowExpressDisableConditional: function ($target, $owner, data) {\r\n            if (\r\n                !isSolutionEnabled($target, data.enableButton) ||\r\n                hasRelationsEnabled(data)\r\n            ) {\r\n                this.payflowExpressDisable($target, $owner, data);\r\n                forwardSolutionChange($target, data.enableExpress);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowExpressEnable: function ($target, $owner, data) {\r\n            enableSolution($target, data.enableExpress);\r\n            forwardSolutionChange($target, data.enableExpress);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowExpressEnableConditional: function ($target, $owner, data) {\r\n            if (hasRelationsEnabled(data)) {\r\n                setSolutionPropEnabled($target, data.enableExpress, false);\r\n                setSolutionSelectEnabled($target, data.enableExpress);\r\n                setSolutionMarkEnabled($target, data.enableExpress);\r\n            } else {\r\n                disableSolution($target, data.enableExpress);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowExpressLockConditional: function ($target, $owner, data) {\r\n            if (!isSolutionEnabled($target, data.enableButton)) {\r\n                setSolutionPropEnabled($target, data.enableExpress, false);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowExpressUsedefaultDisable: function ($target, $owner, data) {\r\n            setSolutionUsedefaultEnabled($target, data.enableExpress, false);\r\n            this.payflowExpressEnable($target, $owner, data);\r\n            forwardSolutionChange($target, data.enableExpress);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowExpressUsedefaultEnable: function ($target, $owner, data) {\r\n            setSolutionUsedefaultEnabled($target, data.enableExpress);\r\n            this.payflowExpressDisable($target, $owner, data);\r\n            forwardSolutionChange($target, data.enableExpress);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowBmlDisable: function ($target, $owner, data) {\r\n            disableSolution($target, data.enableBml);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowBmlDisableConditional: function ($target, $owner, data) {\r\n            if (\r\n                !isSolutionEnabled($target, data.enableButton) ||\r\n                hasRelationsEnabled(data)\r\n            ) {\r\n                this.payflowBmlDisable($target, $owner, data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowBmlDisableConditionalExpress: function ($target, $owner, data) {\r\n            if (!isSolutionEnabled($target, data.enableExpress)) {\r\n                this.payflowBmlDisable($target, $owner, data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowBmlEnable: function ($target, $owner, data) {\r\n            enableSolution($target, data.enableBml);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowBmlEnableConditional: function ($target, $owner, data) {\r\n            if (hasRelationsEnabled(data)) {\r\n                setSolutionPropEnabled($target, data.enableBml, false);\r\n                setSolutionSelectEnabled($target, data.enableBml);\r\n                setSolutionMarkEnabled($target, data.enableBml);\r\n            } else {\r\n                disableSolution($target, data.enableBml);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowBmlLockConditional: function ($target, $owner, data) {\r\n            if (!isSolutionEnabled($target, data.enableButton)) {\r\n                setSolutionPropEnabled($target, data.enableBml, false);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        inContextEnable: function ($target, $owner, data) {\r\n            enableSolution($target, data.enableInContextPayPal);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        inContextDisable: function ($target, $owner, data) {\r\n            disableSolution($target, data.enableInContextPayPal);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        inContextShowMerchantId: function ($target, $owner, data) {\r\n            showDependsField($target, data.dependsMerchantId);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        inContextHideMerchantId: function ($target, $owner, data) {\r\n            showDependsField($target, data.dependsMerchantId, false);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowShowSortOrder: function ($target, $owner, data) {\r\n            showDependsField($target, data.dependsBmlSortOrder);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        payflowHideSortOrder: function ($target, $owner, data) {\r\n            showDependsField($target, data.dependsBmlSortOrder, false);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalShowSortOrder: function ($target, $owner, data) {\r\n            showDependsField($target, data.dependsBmlApiSortOrder);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        paypalHideSortOrder: function ($target, $owner, data) {\r\n            showDependsField($target, data.dependsBmlApiSortOrder, false);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        inContextActivate: function ($target, $owner, data) {\r\n            setSolutionMarkEnabled($target, data.enableInContextPayPal);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        inContextDeactivate: function ($target, $owner, data) {\r\n            setSolutionMarkEnabled($target, data.enableInContextPayPal, false);\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        inContextDisableConditional: function ($target, $owner, data) {\r\n            if (!isSolutionEnabled($target, data.enableButton)) {\r\n                this.inContextDisable($target, $owner, data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} $target\r\n         * @param {*} $owner\r\n         * @param {Object} data\r\n         */\r\n        conflict: function ($target, $owner, data) {\r\n            var newLine = String.fromCharCode(10, 13);\r\n\r\n            if (\r\n                isSolutionEnabled($owner, data.enableButton) &&\r\n                hasRelationsEnabled(data) &&\r\n                !this.executed\r\n            ) {\r\n                this.executed = true;\r\n                alert({\r\n                    content: 'The following error(s) occurred:' +\r\n                    newLine +\r\n                    'Some PayPal solutions conflict.' +\r\n                    newLine +\r\n                    'Please re-enable the previously enabled payment solutions.'\r\n                });\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/solution.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'uiClass',\r\n    'Magento_Paypal/js/rule',\r\n    'mageUtils',\r\n    'underscore'\r\n], function ($, Class, Rule, utils, _) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n        defaults: {\r\n\r\n            /**\r\n             * The event corresponding to the state change\r\n             */\r\n            systemEvent: 'change',\r\n\r\n            /**\r\n             * The rules applied after the page is loaded\r\n             */\r\n            afterLoadRules: [],\r\n\r\n            /**\r\n             * An attribute of the element responsible for the activation of the payment method (data attribute)\r\n             */\r\n            enableButton:   '[data-enable=\"payment\"]',\r\n\r\n            /**\r\n             * An attribute of the element responsible for the activation of the Payflow Express (data attribute)\r\n             */\r\n            enableExpress:  '[data-enable=\"express\"]',\r\n\r\n            /**\r\n             * An attribute of the element responsible for the activation of the\r\n             * PayPal Express In-Context Checkout Experience (data attribute)\r\n             */\r\n            enableInContextPayPal: '[data-enable=\"in-context-api\"]',\r\n\r\n            /**\r\n             * An attribute of the element responsible for the activation of the Payflow Bml (data attribute)\r\n             */\r\n            enableBml:      '[data-enable=\"bml\"]',\r\n\r\n            /**\r\n             * An attribute of the element responsible for the activation of the PayPal Bml (data attribute)\r\n             */\r\n            enableBmlPayPal:      '[data-enable=\"bml-api\"]',\r\n\r\n            /**\r\n             * An attribute of the element responsible for the visibility of the PayPal Merchant Id (data attribute)\r\n             */\r\n            dependsMerchantId:  '[data-enable=\"merchant-id\"]',\r\n\r\n            /**\r\n             * An attribute of the element responsible for the visibility of the Payflow Bml Sort Order (data attribute)\r\n             */\r\n            dependsBmlSortOrder:    '[data-enable=\"bml-sort-order\"]',\r\n\r\n            /**\r\n             * An attribute of the element responsible for the visibility of the PayPal Bml Sort Order (data attribute)\r\n             */\r\n            dependsBmlApiSortOrder:    '[data-enable=\"bml-api-sort-order\"]',\r\n\r\n            /**\r\n             * Templates element selectors\r\n             */\r\n            templates: {\r\n                elementSelector: 'div.section-config tr[id$=\"${ $.identifier }\"]:first'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Constructor\r\n         *\r\n         * @param {Object} config\r\n         * @param {String} identifier\r\n         * @returns {exports.initialize}\r\n         */\r\n        initialize: function (config, identifier) {\r\n            this.initConfig(config);\r\n            this.$self = this.createElement(identifier);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialization events\r\n         *\r\n         * @returns {exports.initEvents}\r\n         */\r\n        initEvents: function () {\r\n            _.each(this.config.events, function (elementEvents, selector) {\r\n\r\n                var solution = this,\r\n                    selectorButton = solution.$self.find(selector),\r\n                    $self = solution.$self,\r\n                    events = elementEvents;\r\n\r\n                selectorButton.on(solution.systemEvent, function () {\r\n                    _.each(events, function (elementEvent, name) {\r\n\r\n                        var predicate = elementEvent.predicate,\r\n                            result = true,\r\n\r\n                            /**\r\n                             * @param {Function} functionPredicate\r\n                             */\r\n                            predicateCallback = function (functionPredicate) {\r\n                                result = functionPredicate(solution, predicate.message, predicate.argument);\r\n\r\n                                if (result) {\r\n                                    $self.trigger(name);\r\n                                } else {\r\n                                    $self.trigger(predicate.event);\r\n                                }\r\n                            };\r\n\r\n                        if (solution.getValue($(this)) === elementEvent.value) {\r\n                            if (predicate.name) {\r\n                                require([\r\n                                    'Magento_Paypal/js/predicate/' + predicate.name\r\n                                ], predicateCallback);\r\n                            } else {\r\n                                $self.trigger(name);\r\n                            }\r\n                        }\r\n                    }, this);\r\n                });\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} $element\r\n         * @returns {*}\r\n         */\r\n        getValue: function ($element) {\r\n            if ($element.is(':checkbox')) {\r\n                return $element.prop('checked') ? '1' : '0';\r\n            }\r\n\r\n            return $element.val();\r\n        },\r\n\r\n        /**\r\n         * Adding event listeners\r\n         *\r\n         * @returns {exports.addListeners}\r\n         */\r\n        addListeners: function () {\r\n\r\n            _.each(this.config.relations, function (rules, targetName) {\r\n\r\n                var $target = this.createElement(targetName);\r\n\r\n                _.each(rules, function (instances, instanceName) {\r\n\r\n                    _.each(instances, function (instance) {\r\n                        var handler = new Rule({\r\n                            name: instanceName,\r\n                            $target: $target,\r\n                            $owner: this.$self,\r\n                            data: {\r\n                                buttonConfiguration: this.buttonConfiguration,\r\n                                enableButton: this.enableButton,\r\n                                enableExpress: this.enableExpress,\r\n                                enableInContextPayPal: this.enableInContextPayPal,\r\n                                enableBml: this.enableBml,\r\n                                enableBmlPayPal: this.enableBmlPayPal,\r\n                                dependsMerchantId: this.dependsMerchantId,\r\n                                dependsBmlSortOrder: this.dependsBmlSortOrder,\r\n                                dependsBmlApiSortOrder: this.dependsBmlApiSortOrder,\r\n                                solutionsElements: this.solutionsElements,\r\n                                argument: instance.argument\r\n                            }\r\n                        });\r\n\r\n                        if (instance.event === ':load') {\r\n                            this.afterLoadRules.push(handler);\r\n\r\n                            return;\r\n                        }\r\n\r\n                        this.$self.on(instance.event, _.bind(handler.apply, handler));\r\n                    }, this);\r\n                }, this);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create a jQuery element according to selector\r\n         *\r\n         * @param {String} identifier\r\n         * @returns {*}\r\n         */\r\n        createElement: function (identifier) {\r\n            if (identifier === ':self') {\r\n                return this.$self;\r\n            }\r\n\r\n            return $(utils.template(this.templates.elementSelector, {\r\n                'identifier': identifier\r\n            }));\r\n        },\r\n\r\n        /**\r\n         * Assign solutions elements\r\n         *\r\n         * @param {Object} elements\r\n         * @returns {exports.setSolutionsElements}\r\n         */\r\n        setSolutionsElements: function (elements) {\r\n            this.solutionsElements = elements;\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/solutions.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'uiClass',\r\n    'Magento_Paypal/js/solution',\r\n    'underscore'\r\n], function ($, Class, Solution, _) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n        defaults: {\r\n\r\n            /**\r\n             * Initialized solutions\r\n             */\r\n            solutions: {},\r\n\r\n            /**\r\n             * The elements of created solutions\r\n             */\r\n            solutionsElements: {},\r\n\r\n            /**\r\n             * The selector element responsible for configuration of payment method (CSS class)\r\n             */\r\n            buttonConfiguration: '.button.action-configure'\r\n        },\r\n\r\n        /**\r\n         * Constructor\r\n         *\r\n         * @param {Object} config\r\n         * @returns {exports.initialize}\r\n         */\r\n        initialize: function (config) {\r\n            this.initConfig(config)\r\n                .initSolutions();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialization and configuration solutions\r\n         *\r\n         * @returns {exports.initSolutions}\r\n         */\r\n        initSolutions: function () {\r\n            _.each(this.config.solutions, this.addSolution, this);\r\n            this.initializeSolutions()\r\n                .wipeButtonsConfiguration();\r\n            _.each(this.solutions, this.applicationRules);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * The creation and addition of the solution according to the configuration\r\n         *\r\n         * @param {Object} solution\r\n         * @param {String} identifier\r\n         */\r\n        addSolution: function (solution, identifier) {\r\n            this.solutions[identifier] = new Solution({\r\n                config: solution,\r\n                buttonConfiguration: this.buttonConfiguration\r\n            }, identifier);\r\n            this.solutionsElements[identifier] = this.solutions[identifier].$self;\r\n        },\r\n\r\n        /**\r\n         * Wiping buttons configuration of the payment method\r\n         */\r\n        wipeButtonsConfiguration: function () {\r\n            $(this.buttonConfiguration).removeClass('disabled')\r\n                .removeAttr('disabled');\r\n        },\r\n\r\n        /**\r\n         * Application of the rules\r\n         *\r\n         * @param {Object} solution\r\n         */\r\n        applicationRules: function (solution) {\r\n            _.each(solution.afterLoadRules, function (rule) {\r\n                rule.apply();\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Initialize solutions\r\n         *\r\n         * @returns {exports.initializeSolutions}\r\n         */\r\n        initializeSolutions: function () {\r\n            _.each(this.solutions, function (solution) {\r\n                solution.setSolutionsElements(this.solutionsElements)\r\n                    .initEvents()\r\n                    .addListeners();\r\n            }, this);\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/payflowpro/vault.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*browser:true*/\r\n/*global define*/\r\ndefine([\r\n    'jquery',\r\n    'uiComponent'\r\n], function ($, Class) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n        defaults: {\r\n            $selector: null,\r\n            selector: 'edit_form'\r\n        },\r\n\r\n        /**\r\n         * Set list of observable attributes\r\n         * @returns {exports.initObservable}\r\n         */\r\n        initObservable: function () {\r\n            var self = this;\r\n\r\n            self.$selector = $('#' + self.selector);\r\n            this._super();\r\n\r\n            this.initEventHandlers();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get payment code\r\n         * @returns {String}\r\n         */\r\n        getCode: function () {\r\n            return 'payflowpro';\r\n        },\r\n\r\n        /**\r\n         * Init event handlers\r\n         */\r\n        initEventHandlers: function () {\r\n            $('#' + this.container).find('[name=\"payment[token_switcher]\"]')\r\n                .on('click', this.setPaymentDetails.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Store payment details\r\n         */\r\n        setPaymentDetails: function () {\r\n            this.$selector.find('[name=\"payment[public_hash]\"]').val(this.publicHash);\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/predicate/confirm.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(['underscore'], function (_) {\r\n    'use strict';\r\n\r\n    return function (solution, message, argument) {\r\n        var isConfirm = false;\r\n\r\n        _.every(argument, function (name) {\r\n            if (solution.solutionsElements[name] &&\r\n                solution.solutionsElements[name].find(solution.enableButton).val() == 1\r\n            ) {\r\n                isConfirm = true;\r\n\r\n                return !isConfirm;\r\n            }\r\n\r\n            return !isConfirm;\r\n        }, this);\r\n\r\n        if (isConfirm) {\r\n            return confirm(message);\r\n        }\r\n\r\n        return true;\r\n    };\r\n});\r\n","Magento_Bundle/js/bundle-product.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global FORM_KEY*/\r\n/*global bSelection*/\r\n/*global $H*/\r\ndefine([\r\n    \"jquery\",\r\n    \"Magento_Catalog/js/product/weight-handler\",\r\n    \"Magento_Ui/js/modal/modal\",\r\n    \"jquery/ui\",\r\n    \"mage/translate\",\r\n    \"Magento_Theme/js/sortable\",\r\n    \"prototype\"\r\n], function($, weightHandler, modal){\r\n    'use strict';\r\n\r\n    $.widget('mage.bundleProduct', {\r\n        _create: function () {\r\n            this._initOptionBoxes()\r\n                ._initSortableSelections()\r\n                ._bindCheckboxHandlers()\r\n                ._initCheckboxState()\r\n                ._bindAddSelectionDialog()\r\n                ._hideProductTypeSwitcher();\r\n        },\r\n        _initOptionBoxes: function () {\r\n            this.element.sortable({\r\n                axis: 'y',\r\n                handle: '[data-role=draggable-handle]',\r\n                items: '.option-box',\r\n                update: this._updateOptionBoxPositions,\r\n                tolerance: 'pointer'\r\n            });\r\n\r\n            var syncOptionTitle = function (event) {\r\n                var originalValue = $(event.target).attr('data-original-value'),\r\n                    currentValue = $(event.target).val(),\r\n                    optionBoxTitle = $('.title > span', $(event.target).closest('.option-box')),\r\n                    newOptionTitle = $.mage.__('New Option');\r\n\r\n                optionBoxTitle.text(currentValue === '' && !originalValue.length ? newOptionTitle : currentValue);\r\n            };\r\n            this._on({\r\n                'change .field-option-title input[name$=\"[title]\"]': syncOptionTitle,\r\n                'keyup .field-option-title input[name$=\"[title]\"]': syncOptionTitle,\r\n                'paste .field-option-title input[name$=\"[title]\"]': syncOptionTitle\r\n            });\r\n            \r\n            return this;\r\n        },\r\n        _initSortableSelections: function () {\r\n            this.element.find('.option-box .form-list tbody').sortable({\r\n                axis: 'y',\r\n                handle: '[data-role=draggable-handle]',\r\n                helper: function(event, ui) {\r\n                    ui.children().each(function() {\r\n                        $(this).width($(this).width());\r\n                    });\r\n                    return ui;\r\n                },\r\n                update: this._updateSelectionsPositions,\r\n                tolerance: 'pointer'\r\n            });\r\n\r\n            return this;\r\n        },\r\n        _initCheckboxState: function(){\r\n            this.element.find('.is-required').each(function () {\r\n                $(this).prop('checked', $(this).closest('.option-box').find('[name$=\"[required]\"]').val() > 0);\r\n            });\r\n            \r\n            this.element.find('.is-user-defined-qty').each(function () {\r\n                $(this).prop('checked', $(this).closest('.qty-box').find('.select').val() > 0);\r\n            });\r\n\r\n            return this;\r\n        },\r\n        _bindAddSelectionDialog: function () {\r\n            var widget = this;\r\n            this._on({'click .add-selection': function (event) {\r\n                var $optionBox = $(event.target).closest('.option-box'),\r\n                    $selectionGrid = $optionBox.find('.selection-search').clone(),\r\n                    optionIndex = $optionBox.attr('id').replace('bundle_option_', ''),\r\n                    productIds = [],\r\n                    productSkus = [],\r\n                    selectedProductList = {};\r\n\r\n                $optionBox.find('[name$=\"[product_id]\"]').each(function () {\r\n                    if (!$(this).closest('tr').find('[name$=\"[delete]\"]').val()) {\r\n                        productIds.push($(this).val());\r\n                        productSkus.push($(this).closest('tr').find('.col-sku').text());\r\n                    }\r\n                });\r\n\r\n                bSelection.gridSelection.set(optionIndex, $H({}));\r\n                bSelection.gridRemoval = $H({});\r\n                bSelection.gridSelectedProductSkus = productSkus;\r\n\r\n                $selectionGrid.on('contentUpdated', bSelection.gridUpdateCallback);\r\n                $selectionGrid.on('change', '.col-id input', function () {//_on can't be used because of grid reloading\r\n                    var tr = $(this).closest('tr');\r\n                    if ($(this).is(':checked')) {\r\n                        selectedProductList[$(this).val()] = {\r\n                            name: $.trim(tr.find('.col-name').html()),\r\n                            sku: $.trim(tr.find('.col-sku').html()),\r\n                            product_id: $(this).val(),\r\n                            option_id: $('bundle_selection_id_' + optionIndex).val(),\r\n                            selection_price_value: 0,\r\n                            selection_qty: 1\r\n                        };\r\n                    } else {\r\n                        delete selectedProductList[$(this).val()];\r\n                    }\r\n                });\r\n\r\n                $selectionGrid.modal({\r\n                    title: $optionBox.find('input[name$=\"[title]\"]').val() === '' ?\r\n                        $.mage.__('Add Products to New Option') :\r\n                        $.mage.__('Add Products to Option \"%1\"')\r\n                            .replace('%1',($('<div>').text($optionBox.find('input[name$=\"[title]\"]').val()).html())),\r\n                    modalClass: 'bundle',\r\n                    type: 'slide',\r\n                    closed: function(e, modal) {\r\n                        modal.modal.remove();\r\n                    },\r\n                    buttons: [{\r\n                        text: $.mage.__('Add Selected Products'),\r\n                        'class': 'action-primary action-add',\r\n                        click: function () {\r\n                            $.each(selectedProductList, function() {\r\n                                window.bSelection.addRow(optionIndex, this);\r\n                            });\r\n                            bSelection.gridRemoval.each(\r\n                                function(pair) {\r\n                                    $optionBox.find('.col-sku').filter(function () {\r\n                                        return $.trim($(this).text()) === pair.key; // find row by SKU\r\n                                    }).closest('tr').find('button.delete').trigger('click');\r\n                                }\r\n                            );\r\n                            widget.refreshSortableElements();\r\n                            widget._updateSelectionsPositions.apply(widget.element);\r\n                            $selectionGrid.modal('closeModal');\r\n                        }\r\n                    }]\r\n                });\r\n                $.ajax({\r\n                    url: bSelection.selectionSearchUrl,\r\n                    dataType: 'html',\r\n                    data: {\r\n                        index: optionIndex,\r\n                        products: productIds,\r\n                        selected_products: productIds,\r\n                        form_key: FORM_KEY\r\n                    },\r\n                    success: function(data) {\r\n                        $selectionGrid.html(data).modal('openModal');\r\n                    },\r\n                    context: $('body'),\r\n                    showLoader: true\r\n                });\r\n            }});\r\n\r\n            return this;\r\n        },\r\n        _hideProductTypeSwitcher: function () {\r\n            weightHandler.hideWeightSwitcher();\r\n        },\r\n        _bindCheckboxHandlers: function () {\r\n            this._on({\r\n                'change .is-required': function (event) {\r\n                    var $this = $(event.target);\r\n                    $this.closest('.option-box').find('[name$=\"[required]\"]').val($this.is(':checked') ? 1 : 0);\r\n                },\r\n                'change .is-user-defined-qty': function (event) {\r\n                    var $this = $(event.target);\r\n                    $this.closest('.qty-box').find('.select').val($this.is(':checked') ? 1 : 0);\r\n                }\r\n            });\r\n\r\n            return this;\r\n        },\r\n        _updateOptionBoxPositions: function () {\r\n            $(this).find('[name^=bundle_options][name$=\"[position]\"]').each(function (index) {\r\n                $(this).val(index);\r\n            });\r\n\r\n            return this;\r\n        },\r\n        _updateSelectionsPositions: function () {\r\n            $(this).find('[name^=bundle_selections][name$=\"[position]\"]').each(function (index) {\r\n                $(this).val(index);\r\n            });\r\n\r\n            return this;\r\n        },\r\n        refreshSortableElements: function () {\r\n            this.element.sortable('refresh');\r\n            this._updateOptionBoxPositions.apply(this.element);\r\n            this._initSortableSelections();\r\n            this._initCheckboxState();\r\n\r\n            return this;\r\n        }\r\n    });\r\n\r\n});\r\n","Magento_Bundle/js/bundle-type-handler.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true expr:true*/\r\ndefine([\r\n    'jquery',\r\n    'Magento_Catalog/catalog/type-events',\r\n    'Magento_Catalog/js/product/weight-handler'\r\n], function ($, productType, weight) {\r\n    'use strict';\r\n\r\n    return {\r\n\r\n        /**\r\n         * Constructor component\r\n         */\r\n        'Magento_Bundle/js/bundle-type-handler': function () {\r\n            this.bindAll();\r\n            this._initType();\r\n        },\r\n\r\n        /**\r\n         * Bind all\r\n         */\r\n        bindAll: function () {\r\n            $(document).on('changeTypeProduct', this._initType.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Init type\r\n         * @private\r\n         */\r\n        _initType: function () {\r\n            if (\r\n                productType.type.init === 'bundle' &&\r\n                productType.type.current !== 'bundle' &&\r\n                !weight.isLocked()\r\n            ) {\r\n                weight.switchWeight();\r\n            }\r\n        }\r\n    };\r\n});\r\n","Magento_Bundle/js/components/bundle-checkbox.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/element/single-checkbox',\r\n    'uiRegistry'\r\n], function (Checkbox, registry) {\r\n    'use strict';\r\n\r\n    return Checkbox.extend({\r\n        defaults: {\r\n            clearing: false,\r\n            parentContainer: '',\r\n            parentSelections: '',\r\n            changer: ''\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initObservable: function () {\r\n            this._super().\r\n                observe('elementTmpl');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n            this.imports.changeType = this.retrieveParentName(this.parentContainer) + '.' + this.changer + ':value';\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        onUpdate: function () {\r\n            if (this.prefer === 'radio' && this.checked() && !this.clearing) {\r\n                this.clearValues();\r\n            }\r\n\r\n            this._super();\r\n        },\r\n\r\n        /**\r\n         * Checkbox to radio type changer.\r\n         *\r\n         * @param {String} type - type to change.\r\n         */\r\n        changeType: function (type) {\r\n            var typeMap = registry.get(this.retrieveParentName(this.parentContainer) + '.' + this.changer).typeMap;\r\n\r\n            this.prefer = typeMap[type];\r\n            this.elementTmpl(this.templates[typeMap[type]]);\r\n        },\r\n\r\n        /**\r\n         * Clears values in components like this.\r\n         */\r\n        clearValues: function () {\r\n            var records = registry.get(this.retrieveParentName(this.parentSelections)),\r\n                index = this.index,\r\n                uid = this.uid;\r\n\r\n            records.elems.each(function (record) {\r\n                record.elems.filter(function (comp) {\r\n                    return comp.index === index && comp.uid !== uid;\r\n                }).each(function (comp) {\r\n                    comp.clearing = true;\r\n                    comp.clear();\r\n                    comp.clearing = false;\r\n                });\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Retrieve name for the most global parent with provided index.\r\n         *\r\n         * @param {String} parent - parent name.\r\n         * @returns {String}\r\n         */\r\n        retrieveParentName: function (parent) {\r\n            return this.name.replace(new RegExp('^(.+?\\\\.)?' + parent + '\\\\..+'), '$1' + parent);\r\n        }\r\n    });\r\n});\r\n","Magento_Bundle/js/components/bundle-input-type.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/element/select',\r\n    'uiRegistry'\r\n], function (Select, registry) {\r\n    'use strict';\r\n\r\n    return Select.extend({\r\n        defaults: {\r\n            previousType: '',\r\n            parentContainer: '',\r\n            selections: '',\r\n            targetIndex: '',\r\n            typeMap: {}\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        onUpdate: function () {\r\n            var type = this.typeMap[this.value()];\r\n\r\n            if (type !== this.previousType) {\r\n                this.previousType = type;\r\n                this.processSelections(type === 'radio');\r\n            }\r\n\r\n            this._super();\r\n        },\r\n\r\n        /**\r\n         * Toggle 'User Defined' column and clears values\r\n         * @param {Boolean} isRadio\r\n         */\r\n        processSelections: function (isRadio) {\r\n            var records = registry.get(this.retrieveParentName(this.parentContainer) + '.' + this.selections),\r\n                checkedFound = false;\r\n\r\n            records.elems.each(function (record) {\r\n                record.elems.filter(function (comp) {\r\n                    return comp.index === this.userDefinedIndex;\r\n                }, this).each(function (comp) {\r\n                    comp.visible(isRadio);\r\n                });\r\n\r\n                if (isRadio) {\r\n                    record.elems.filter(function (comp) {\r\n                        return comp.index === this.isDefaultIndex;\r\n                    }, this).each(function (comp) {\r\n                        if (comp.checked()) {\r\n                            if (checkedFound) {\r\n                                comp.clearing = true;\r\n                                comp.clear();\r\n                                comp.clearing = false;\r\n                            }\r\n\r\n                            checkedFound = true;\r\n                        }\r\n                    });\r\n                }\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Retrieve name for the most global parent with provided index.\r\n         *\r\n         * @param {String} parent - parent name.\r\n         * @returns {String}\r\n         */\r\n        retrieveParentName: function (parent) {\r\n            return this.name.replace(new RegExp('^(.+?\\\\.)?' + parent + '\\\\..+'), '$1' + parent);\r\n        }\r\n    });\r\n});\r\n","Magento_Bundle/js/components/bundle-option-qty.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/element/abstract'\r\n], function (Abstract) {\r\n    'use strict';\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            valueUpdate: 'input',\r\n            isInteger: true\r\n        },\r\n\r\n        /**\r\n         * update event\r\n         */\r\n        onUpdate: function () {\r\n            this.validation['validate-number'] = true;\r\n            this.validation['validate-digits'] = this.isInteger;\r\n            this.validate();\r\n        }\r\n    });\r\n});\r\n","Magento_Bundle/js/price-bundle.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mage/template',\r\n    'priceUtils',\r\n    'priceBox'\r\n], function ($, _, mageTemplate, utils) {\r\n    'use strict';\r\n\r\n    var globalOptions = {\r\n        optionConfig: null,\r\n        productBundleSelector: 'input.bundle.option, select.bundle.option, textarea.bundle.option',\r\n        qtyFieldSelector: 'input.qty',\r\n        priceBoxSelector: '.price-box',\r\n        optionHandlers: {},\r\n        optionTemplate: '<%- data.label %>' +\r\n        '<% if (data.finalPrice.value) { %>' +\r\n        ' +<%- data.finalPrice.formatted %>' +\r\n        '<% } %>',\r\n        controlContainer: 'dd', // should be eliminated\r\n        priceFormat: {},\r\n        isFixedPrice: false\r\n    };\r\n\r\n    $.widget('mage.priceBundle', {\r\n        options: globalOptions,\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _init: function initPriceBundle() {\r\n            var form = this.element,\r\n                options = $(this.options.productBundleSelector, form);\r\n\r\n            options.trigger('change');\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _create: function createPriceBundle() {\r\n            var form = this.element,\r\n                options = $(this.options.productBundleSelector, form),\r\n                priceBox = $(this.options.priceBoxSelector, form),\r\n                qty = $(this.options.qtyFieldSelector, form);\r\n\r\n            if (priceBox.data('magePriceBox') && priceBox.priceBox('option') && priceBox.priceBox('option').priceConfig) {\r\n                if (priceBox.priceBox('option').priceConfig.optionTemplate) {\r\n                    this._setOption('optionTemplate', priceBox.priceBox('option').priceConfig.optionTemplate);\r\n                }\r\n                this._setOption('priceFormat', priceBox.priceBox('option').priceConfig.priceFormat);\r\n                priceBox.priceBox('setDefault', this.options.optionConfig.prices);\r\n            }\r\n\r\n            this._applyOptionNodeFix(options);\r\n\r\n            options.on('change', this._onBundleOptionChanged.bind(this));\r\n            qty.on('change', this._onQtyFieldChanged.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Handle change on bundle option inputs\r\n         * @param {jQuery.Event} event\r\n         * @private\r\n         */\r\n        _onBundleOptionChanged: function onBundleOptionChanged(event) {\r\n            var changes,\r\n                bundleOption = $(event.target),\r\n                priceBox = $(this.options.priceBoxSelector, this.element),\r\n                handler = this.options.optionHandlers[bundleOption.data('role')];\r\n\r\n            bundleOption.data('optionContainer', bundleOption.closest(this.options.controlContainer));\r\n            bundleOption.data('qtyField', bundleOption.data('optionContainer').find(this.options.qtyFieldSelector));\r\n\r\n            if (handler && handler instanceof Function) {\r\n                changes = handler(bundleOption, this.options.optionConfig, this);\r\n            } else {\r\n                changes = defaultGetOptionValue(bundleOption, this.options.optionConfig);\r\n            }\r\n\r\n            if (changes) {\r\n                priceBox.trigger('updatePrice', changes);\r\n            }\r\n            this.updateProductSummary();\r\n        },\r\n\r\n        /**\r\n         * Handle change on qty inputs near bundle option\r\n         * @param {jQuery.Event} event\r\n         * @private\r\n         */\r\n        _onQtyFieldChanged: function onQtyFieldChanged(event) {\r\n            var field = $(event.target),\r\n                optionInstance,\r\n                optionConfig;\r\n\r\n            if (field.data('optionId') && field.data('optionValueId')) {\r\n                optionInstance = field.data('option');\r\n                optionConfig = this.options.optionConfig\r\n                    .options[field.data('optionId')]\r\n                    .selections[field.data('optionValueId')];\r\n                optionConfig.qty = field.val();\r\n\r\n                optionInstance.trigger('change');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Helper to fix backend behavior:\r\n         *  - if default qty large than 1 then backend multiply price in config\r\n         *\r\n         * @private\r\n         */\r\n        _applyQtyFix: function applyQtyFix() {\r\n            var config = this.options.optionConfig;\r\n            if (config.isFixedPrice) {\r\n                _.each(config.options, function (option) {\r\n                    _.each(option.selections, function (item) {\r\n                        if (item.qty && item.qty !== 1) {\r\n                            _.each(item.prices, function (price) {\r\n                                price.amount = price.amount / item.qty;\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Helper to fix issue with option nodes:\r\n         *  - you can't place any html in option ->\r\n         *    so you can't style it via CSS\r\n         * @param {jQuery} options\r\n         * @private\r\n         */\r\n        _applyOptionNodeFix: function applyOptionNodeFix(options) {\r\n            var config = this.options,\r\n                format = config.priceFormat,\r\n                template = config.optionTemplate;\r\n            template = mageTemplate(template);\r\n            options.filter('select').each(function (index, element) {\r\n                var $element = $(element),\r\n                    optionId = utils.findOptionId($element),\r\n                    optionName = $element.prop('name'),\r\n                    optionType = $element.prop('type'),\r\n                    optionConfig = config.optionConfig && config.optionConfig.options[optionId].selections;\r\n\r\n                $element.find('option').each(function (idx, option) {\r\n                    var $option,\r\n                        optionValue,\r\n                        toTemplate,\r\n                        prices;\r\n\r\n                    $option = $(option);\r\n                    optionValue = $option.val();\r\n\r\n                    if (!optionValue && optionValue !== 0) {\r\n                        return;\r\n                    }\r\n\r\n                    toTemplate = {\r\n                        data: {\r\n                            label: optionConfig[optionValue] && optionConfig[optionValue].name\r\n                        }\r\n                    };\r\n                    prices = optionConfig[optionValue].prices;\r\n\r\n                    _.each(prices, function (price, type) {\r\n                        var value = +(price.amount);\r\n                        value += _.reduce(price.adjustments, function (sum, x) {\r\n                            return sum + x;\r\n                        }, 0);\r\n                        toTemplate.data[type] = {\r\n                            value: value,\r\n                            formatted: utils.formatPrice(value, format)\r\n                        };\r\n                    });\r\n\r\n                    $option.html(template(toTemplate));\r\n                });\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Custom behavior on getting options:\r\n         * now widget able to deep merge accepted configuration with instance options.\r\n         * @param  {Object}  options\r\n         * @return {$.Widget}\r\n         */\r\n        _setOptions: function setOptions(options) {\r\n            $.extend(true, this.options, options);\r\n\r\n            this._super(options);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handler to update productSummary box\r\n         */\r\n        updateProductSummary: function updateProductSummary() {\r\n            this.element.trigger('updateProductSummary', {\r\n                config: this.options.optionConfig\r\n            });\r\n        }\r\n    });\r\n\r\n    return $.mage.priceBundle;\r\n\r\n    /**\r\n     * Converts option value to priceBox object\r\n     *\r\n     * @param   {jQuery} element\r\n     * @param   {Object} config\r\n     * @returns {Object|null} - priceBox object with additional prices\r\n     */\r\n    function defaultGetOptionValue(element, config) {\r\n        var changes = {},\r\n            optionHash,\r\n            tempChanges,\r\n            qtyField,\r\n            optionId = utils.findOptionId(element[0]),\r\n            optionValue = element.val() || null,\r\n            optionName = element.prop('name'),\r\n            optionType = element.prop('type'),\r\n            optionConfig = config.options[optionId].selections,\r\n            optionQty = 0,\r\n            canQtyCustomize = false,\r\n            selectedIds = config.selected;\r\n\r\n        switch (optionType) {\r\n            case 'radio':\r\n\r\n            case 'select-one':\r\n\r\n                if (optionType === 'radio' && !element.is(':checked')) {\r\n                    return null;\r\n                }\r\n\r\n                qtyField = element.data('qtyField');\r\n                qtyField.data('option', element);\r\n\r\n                if (optionValue) {\r\n                    optionQty = optionConfig[optionValue].qty || 0;\r\n                    canQtyCustomize = optionConfig[optionValue].customQty === '1';\r\n                    toggleQtyField(qtyField, optionQty, optionId, optionValue, canQtyCustomize);\r\n                    tempChanges = utils.deepClone(optionConfig[optionValue].prices);\r\n                    tempChanges = applyTierPrice(tempChanges, optionQty, optionConfig[optionValue]);\r\n                    tempChanges = applyQty(tempChanges, optionQty);\r\n                } else {\r\n                    tempChanges = {};\r\n                    toggleQtyField(qtyField, '0', optionId, optionValue, false);\r\n                }\r\n                optionHash = 'bundle-option-' + optionName;\r\n                changes[optionHash] = tempChanges;\r\n                selectedIds[optionId] = [optionValue];\r\n                break;\r\n\r\n            case 'select-multiple':\r\n                optionValue = _.compact(optionValue);\r\n\r\n                _.each(optionConfig, function (row, optionValueCode) {\r\n                    optionHash = 'bundle-option-' + optionName + '##' + optionValueCode;\r\n                    optionQty = row.qty || 0;\r\n                    tempChanges = utils.deepClone(row.prices);\r\n                    tempChanges = applyTierPrice(tempChanges, optionQty, optionConfig);\r\n                    tempChanges = applyQty(tempChanges, optionQty);\r\n                    changes[optionHash] = _.contains(optionValue, optionValueCode) ? tempChanges : {};\r\n                });\r\n\r\n                selectedIds[optionId] = optionValue || [];\r\n                break;\r\n\r\n            case 'checkbox':\r\n                optionHash = 'bundle-option-' + optionName + '##' + optionValue;\r\n                optionQty = optionConfig[optionValue].qty || 0;\r\n                tempChanges = utils.deepClone(optionConfig[optionValue].prices);\r\n                tempChanges = applyTierPrice(tempChanges, optionQty, optionConfig);\r\n                tempChanges = applyQty(tempChanges, optionQty);\r\n                changes[optionHash] = element.is(':checked') ? tempChanges : {};\r\n\r\n                selectedIds[optionId] = selectedIds[optionId] || [];\r\n\r\n                if (!_.contains(selectedIds[optionId], optionValue) && element.is(':checked')) {\r\n                    selectedIds[optionId].push(optionValue);\r\n                } else if (!element.is(':checked')) {\r\n                    selectedIds[optionId] = _.without(selectedIds[optionId], optionValue);\r\n                }\r\n                break;\r\n\r\n            case 'hidden':\r\n                optionHash = 'bundle-option-' + optionName + '##' + optionValue;\r\n                optionQty = optionConfig[optionValue].qty || 0;\r\n                tempChanges = utils.deepClone(optionConfig[optionValue].prices);\r\n                tempChanges = applyTierPrice(tempChanges, optionQty, optionConfig);\r\n                tempChanges = applyQty(tempChanges, optionQty);\r\n\r\n                optionHash = 'bundle-option-' + optionName;\r\n                changes[optionHash] = tempChanges;\r\n                selectedIds[optionId] = [optionValue];\r\n                break;\r\n        }\r\n\r\n        return changes;\r\n    }\r\n\r\n    /**\r\n     * Helper to toggle qty field\r\n     * @param {jQuery} element\r\n     * @param {String|Number} value\r\n     * @param {String|Number} optionId\r\n     * @param {String|Number} optionValueId\r\n     * @param {Boolean} canEdit\r\n     */\r\n    function toggleQtyField(element, value, optionId, optionValueId, canEdit) {\r\n        element\r\n            .val(value)\r\n            .data('optionId', optionId)\r\n            .data('optionValueId', optionValueId)\r\n            .attr('disabled', !canEdit);\r\n\r\n        if (canEdit) {\r\n            element.removeClass('qty-disabled');\r\n        } else {\r\n            element.addClass('qty-disabled');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Helper to multiply on qty\r\n     *\r\n     * @param   {Object} prices\r\n     * @param   {Number} qty\r\n     * @returns {Object}\r\n     */\r\n    function applyQty(prices, qty) {\r\n        _.each(prices, function (everyPrice) {\r\n            everyPrice.amount *= qty;\r\n            _.each(everyPrice.adjustments, function (el, index) {\r\n                everyPrice.adjustments[index] *= qty;\r\n            });\r\n        });\r\n\r\n        return prices;\r\n    }\r\n\r\n    /**\r\n     * Helper to limit price with tier price\r\n     *\r\n     * @param {Object} oneItemPrice\r\n     * @param {Number} qty\r\n     * @param {Object} optionConfig\r\n     * @returns {Object}\r\n     */\r\n    function applyTierPrice(oneItemPrice, qty, optionConfig) {\r\n        var tiers = optionConfig.tierPrice,\r\n            magicKey = _.keys(oneItemPrice)[0],\r\n            lowest = false;\r\n\r\n        _.each(tiers, function (tier, index) {\r\n            // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\r\n            if (tier.price_qty > qty) {\r\n                return;\r\n            }\r\n            // jscs:enable requireCamelCaseOrUpperCaseIdentifiers\r\n\r\n            if (tier.prices[magicKey].amount < oneItemPrice[magicKey].amount) {\r\n                lowest = index;\r\n            }\r\n        });\r\n\r\n        if (lowest !== false) {\r\n            oneItemPrice = utils.deepClone(tiers[lowest].prices);\r\n        }\r\n\r\n        return oneItemPrice;\r\n    }\r\n});\r\n","Magento_Translation/js/i18n-config.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n'use strict';\r\n\r\n(function () {\r\n    require.config({\r\n        config: {\r\n            'Magento_Ui/js/lib/knockout/bindings/i18n': {\r\n                inlineTranslation: true\r\n            }\r\n        }\r\n    });\r\n})();\r\n","Magento_Weee/js/fpt-attribute.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'jquery/ui',\r\n    'mage/adminhtml/form'\r\n], function ($, mageTemplate) {\r\n    'use strict';\r\n\r\n    $.widget('mage.fptAttribute', {\r\n        _create: function () {\r\n            var widget = this;\r\n\r\n            this.rowTmpl = mageTemplate(this.element.find('[data-role=\"row-template\"]').html());\r\n\r\n            this._initOptionItem();\r\n\r\n            if ($(this.options.bundlePriceType).val() === '0') {\r\n                this.element.hide();\r\n            }\r\n\r\n            $.each(this.options.itemsData, function () {\r\n                widget.addItem(this);\r\n            });\r\n        },\r\n        _initOptionItem: function () {\r\n            var widget = this,\r\n                isOriginalRequired = $(widget.element).hasClass('required');\r\n\r\n            this._on({\r\n                //Add new tax item\r\n                'click [data-action=add-fpt-item]': function (event) {\r\n                    this.addItem(event);\r\n                },\r\n                //Delete tax item\r\n                'click [data-action=delete-fpt-item]': function (event) {\r\n                    var parent = $(event.target).closest('[data-role=\"fpt-item-row\"]');\r\n                    parent.find('[data-role=\"delete-fpt-item\"]').val(1);\r\n                    parent.addClass('ignore-validate').hide();\r\n                },\r\n                //Change tax item country/state\r\n                'change [data-role=\"select-country\"]': function (event, data) {\r\n                    var currentElement = event.target || event.srcElement || event.currentTarget,\r\n                        parentElement = $(currentElement).closest('[data-role=\"fpt-item-row\"]');\r\n\r\n                    data = data || {};\r\n                    var updater = new RegionUpdater(\r\n                        parentElement.find('[data-role=\"select-country\"]').attr('id'), null,\r\n                        parentElement.find('[data-role=\"select-state\"]').attr('id'),\r\n                        widget.options.region, 'disable', true\r\n                    );\r\n                    updater.update();\r\n                    //set selected state value if set\r\n                    if (data.state) {\r\n                        parentElement.find('[data-role=\"select-state\"]').val(data.state);\r\n                    }\r\n                    if (!isOriginalRequired && $(widget.element).hasClass('required')) {\r\n                        $(widget.element).removeClass('required');\r\n                    }\r\n                }\r\n            });\r\n\r\n            $(this.options.bundlePriceType).on('change', function (event) {\r\n                var attributeItems = widget.element.find('[data-role=\"delete-fpt-item\"]');\r\n\r\n                if ($(event.target).val() === '0') {\r\n                    widget.element.hide();\r\n                    attributeItems.each(function () {\r\n                        $(this).val(1);\r\n                    });\r\n                } else {\r\n                    widget.element.show();\r\n                    attributeItems.each(function () {\r\n                        if ($(this).closest('[data-role=\"fpt-item-row\"]').is(':visible')) {\r\n                            $(this).val(0);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        //Add custom option\r\n        addItem: function (event) {\r\n            var data = {},\r\n                currentElement = event.target || event.srcElement || event.currentTarget,\r\n                tmpl;\r\n\r\n            if (typeof currentElement !== 'undefined') {\r\n                data.website_id = 0;\r\n            } else {\r\n                data = event;\r\n            }\r\n\r\n            data.index = this.element.find('[data-role=\"fpt-item-row\"]').length;\r\n\r\n            tmpl = this.rowTmpl({\r\n                data: data\r\n            });\r\n\r\n            $(tmpl).appendTo(this.element.find('[data-role=\"fpt-item-container\"]'));\r\n\r\n            //set selected website_id value if set\r\n            if (data.website_id) {\r\n                this.element.find('[data-role=\"select-website\"][id$=\"_' + data.index + '_website\"]')\r\n                    .val(data.website_id);\r\n            }\r\n\r\n            //set selected country value if set\r\n            if (data.country) {\r\n                this.element.find('[data-role=\"select-country\"][id$=\"_' + data.index + '_country\"]')\r\n                    .val(data.country).trigger('change', data);\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.fptAttribute;\r\n});\r\n","Magento_Weee/js/fpt-group.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/components/group',\r\n    'uiRegistry',\r\n    'Magento_Ui/js/lib/validation/validator',\r\n    'mage/translate',\r\n    'underscore'\r\n], function (Group, uiRegistry, validation, $t, _) {\r\n    'use strict';\r\n\r\n    return Group.extend({\r\n        defaults: {\r\n            visible: true,\r\n            label: '',\r\n            showLabel: true,\r\n            required: false,\r\n            template: 'ui/group/group',\r\n            fieldTemplate: 'ui/form/field',\r\n            breakLine: true,\r\n            validateWholeGroup: false,\r\n            additionalClasses: {}\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            validation.addRule('validate-fpt-group', function (value) {\r\n                if (value.indexOf('?') !== -1) {\r\n\r\n                    return false;\r\n                }\r\n\r\n                return true;\r\n            }, $t('You must set unique country-state combinations within the same fixed product tax'));\r\n\r\n            this._super();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _handleOptionsAvailability: function () {\r\n            var parent,\r\n                dup;\r\n\r\n            dup = {};\r\n            parent = uiRegistry.get(uiRegistry.get(this.parentName).parentName);\r\n            _.each(parent.elems(), function (elem) {\r\n                var country,\r\n                    state,\r\n                    val,\r\n                    key;\r\n\r\n                country = uiRegistry.get(elem.name + '.countryState.country');\r\n                state = uiRegistry.get(elem.name + '.countryState.state');\r\n                val = uiRegistry.get(elem.name + '.countryState.val');\r\n\r\n                key = country.value() + (state.value() > 0 ? state.value() : 0);\r\n                dup[key]++;\r\n\r\n                if (!dup[key]) {\r\n                    dup[key] = 1;\r\n                    val.value('');\r\n                } else {\r\n                    dup[key]++;\r\n                    val.value(country.value() + '?' + country.name);\r\n                }\r\n            });\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initElement: function (elem) {\r\n            var obj;\r\n\r\n            obj = this;\r\n            this._super();\r\n            elem.on('value', function () {\r\n                obj._handleOptionsAvailability();\r\n            });\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Weee/js/regions-tax-select.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/form/element/select'\r\n], function (Select) {\r\n    'use strict';\r\n\r\n    return Select.extend({\r\n        defaults: {\r\n            filterBy: {\r\n                field: 'country',\r\n                target: '${ $.parentName }.country:value'\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        filter: function () {\r\n            this._super();\r\n            this.disableSelect();\r\n        },\r\n\r\n        /**\r\n         * Disables select if there's no regions/states\r\n         *\r\n         * @returns {*} instance - Chainable\r\n         */\r\n        disableSelect: function () {\r\n            var empty = !this.options().length;\r\n\r\n            this.disabled(empty);\r\n\r\n            if (empty) {\r\n                this.error('');\r\n            }\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Swatches/js/product-attributes.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/alert',\r\n    'Magento_Ui/js/modal/prompt',\r\n    'uiRegistry',\r\n    'collapsable'\r\n], function ($, alert, prompt, rg) {\r\n    'use strict';\r\n\r\n    return function (optionConfig) {\r\n        var swatchProductAttributes = {\r\n                frontendInput: $('#frontend_input'),\r\n                isFilterable: $('#is_filterable'),\r\n                isFilterableInSearch: $('#is_filterable_in_search'),\r\n                backendType: $('#backend_type'),\r\n                usedForSortBy: $('#used_for_sort_by'),\r\n                frontendClass: $('#frontend_class'),\r\n                isWysiwygEnabled: $('#is_wysiwyg_enabled'),\r\n                isHtmlAllowedOnFront: $('#is_html_allowed_on_front'),\r\n                isRequired: $('#is_required'),\r\n                isUnique: $('#is_unique'),\r\n                defaultValueText: $('#default_value_text'),\r\n                defaultValueTextarea: $('#default_value_textarea'),\r\n                defaultValueDate: $('#default_value_date'),\r\n                defaultValueYesno: $('#default_value_yesno'),\r\n                isGlobal: $('#is_global'),\r\n                useProductImageForSwatch: $('#use_product_image_for_swatch'),\r\n                updateProductPreviewImage: $('#update_product_preview_image'),\r\n                usedInProductListing: $('#used_in_product_listing'),\r\n                isVisibleOnFront: $('#is_visible_on_front'),\r\n                position: $('#position'),\r\n                attrTabsFront: $('#product_attribute_tabs_front'),\r\n\r\n                /**\r\n                 * @returns {*|jQuery|HTMLElement}\r\n                 */\r\n                get tabsFront() {\r\n                    return this.attrTabsFront.length ? this.attrTabsFront.closest('li') : $('#front_fieldset-wrapper');\r\n                },\r\n                selectFields: ['select', 'multiselect', 'price', 'swatch_text', 'swatch_visual'],\r\n\r\n                /**\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                toggleApplyVisibility: function (select) {\r\n                    if ($(select).val() === 1) {\r\n                        $(select).next('select').removeClass('no-display');\r\n                        $(select).next('select').removeClass('ignore-validate');\r\n                    } else {\r\n                        $(select).next('select').addClass('no-display');\r\n                        $(select).next('select').addClass('ignore-validate');\r\n                        $(select).next('select option:selected').each(function () {\r\n                            this.selected = false;\r\n                        });\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                checkOptionsPanelVisibility: function () {\r\n                    var selectOptionsPanel = $('#manage-options-panel'),\r\n                        visualOptionsPanel = $('#swatch-visual-options-panel'),\r\n                        textOptionsPanel = $('#swatch-text-options-panel');\r\n\r\n                    this._hidePanel(selectOptionsPanel);\r\n                    this._hidePanel(visualOptionsPanel);\r\n                    this._hidePanel(textOptionsPanel);\r\n\r\n                    switch (this.frontendInput.val()) {\r\n                        case 'swatch_visual':\r\n                            this._showPanel(visualOptionsPanel);\r\n                            break;\r\n\r\n                        case 'swatch_text':\r\n                            this._showPanel(textOptionsPanel);\r\n                            break;\r\n\r\n                        case 'select':\r\n                        case 'multiselect':\r\n                            this._showPanel(selectOptionsPanel);\r\n                            break;\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                bindAttributeInputType: function () {\r\n                    this.checkOptionsPanelVisibility();\r\n                    this.switchDefaultValueField();\r\n\r\n                    if (!~$.inArray(this.frontendInput.val(), this.selectFields)) {\r\n                        // not in array\r\n                        this.isFilterable.selectedIndex = 0;\r\n                        this._disable(this.isFilterable);\r\n                        this._disable(this.isFilterableInSearch);\r\n                    } else {\r\n                        // in array\r\n                        this._enable(this.isFilterable);\r\n                        this._enable(this.isFilterableInSearch);\r\n                        this.backendType.val('int');\r\n                    }\r\n\r\n                    if (this.frontendInput.val() === 'multiselect' ||\r\n                        this.frontendInput.val() === 'gallery' ||\r\n                        this.frontendInput.val() === 'textarea'\r\n                    ) {\r\n                        this._disable(this.usedForSortBy);\r\n                    } else {\r\n                        this._enable(this.usedForSortBy);\r\n                    }\r\n\r\n                    if (this.frontendInput.val() === 'swatch_text') {\r\n                        $('.swatch-text-field-0').addClass('required-option');\r\n                    } else {\r\n                        $('.swatch-text-field-0').removeClass('required-option');\r\n                    }\r\n\r\n                    this.setRowVisibility(this.isWysiwygEnabled, false);\r\n                    this.setRowVisibility(this.isHtmlAllowedOnFront, false);\r\n\r\n                    switch (this.frontendInput.val()) {\r\n                        case 'textarea':\r\n                            this.setRowVisibility(this.isWysiwygEnabled, true);\r\n\r\n                            if (this.isWysiwygEnabled.val() === '0') {\r\n                                this._enable(this.isHtmlAllowedOnFront);\r\n                            }\r\n                            this.frontendClass.val('');\r\n                            this._disable(this.frontendClass);\r\n                            break;\r\n\r\n                        case 'text':\r\n                            this.setRowVisibility(this.isHtmlAllowedOnFront, true);\r\n                            this._enable(this.frontendClass);\r\n                            break;\r\n\r\n                        case 'select':\r\n                        case 'multiselect':\r\n                            this.setRowVisibility(this.isHtmlAllowedOnFront, true);\r\n                            this.frontendClass.val('');\r\n                            this._disable(this.frontendClass);\r\n                            break;\r\n                        default:\r\n                            this.frontendClass.val('');\r\n                            this._disable(this.frontendClass);\r\n                    }\r\n\r\n                    this.switchIsFilterable();\r\n                },\r\n\r\n                /**\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                switchIsFilterable: function () {\r\n                    if (this.isFilterable.selectedIndex === 0) {\r\n                        this._disable(this.position);\r\n                    } else {\r\n                        this._enable(this.position);\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                switchDefaultValueField: function () {\r\n                    var currentValue = this.frontendInput.val(),\r\n                        defaultValueTextVisibility = false,\r\n                        defaultValueTextareaVisibility = false,\r\n                        defaultValueDateVisibility = false,\r\n                        defaultValueYesnoVisibility = false,\r\n                        scopeVisibility = true,\r\n                        useProductImageForSwatch = false,\r\n                        defaultValueUpdateImage = false,\r\n                        optionDefaultInputType = '',\r\n                        thing = this;\r\n\r\n                    if (!this.frontendInput.length) {\r\n                        return;\r\n                    }\r\n\r\n                    switch (currentValue) {\r\n                        case 'select':\r\n                            optionDefaultInputType = 'radio';\r\n                            break;\r\n\r\n                        case 'multiselect':\r\n                            optionDefaultInputType = 'checkbox';\r\n                            break;\r\n\r\n                        case 'date':\r\n                            defaultValueDateVisibility = true;\r\n                            break;\r\n\r\n                        case 'boolean':\r\n                            defaultValueYesnoVisibility = true;\r\n                            break;\r\n\r\n                        case 'textarea':\r\n                            defaultValueTextareaVisibility = true;\r\n                            break;\r\n\r\n                        case 'media_image':\r\n                            defaultValueTextVisibility = false;\r\n                            break;\r\n\r\n                        case 'price':\r\n                            scopeVisibility = false;\r\n                            break;\r\n\r\n                        case 'swatch_visual':\r\n                            useProductImageForSwatch = true;\r\n                            defaultValueUpdateImage = true;\r\n                            defaultValueTextVisibility = false;\r\n                            break;\r\n\r\n                        case 'swatch_text':\r\n                            useProductImageForSwatch = false;\r\n                            defaultValueUpdateImage = true;\r\n                            defaultValueTextVisibility = false;\r\n                            break;\r\n                        default:\r\n                            defaultValueTextVisibility = true;\r\n                            break;\r\n                    }\r\n\r\n                    delete optionConfig.hiddenFields['swatch_visual'];\r\n                    delete optionConfig.hiddenFields['swatch_text'];\r\n\r\n                    if (currentValue === 'media_image') {\r\n                        this.tabsFront.hide();\r\n                        this.setRowVisibility(this.isRequired, false);\r\n                        this.setRowVisibility(this.isUnique, false);\r\n                        this.setRowVisibility(this.frontendClass, false);\r\n                    } else if (optionConfig.hiddenFields[currentValue]) {\r\n                        $.each(optionConfig.hiddenFields[currentValue], function (key, option) {\r\n                            switch (option) {\r\n                                case '_front_fieldset':\r\n                                    thing.tabsFront.hide();\r\n                                    break;\r\n\r\n                                case '_default_value':\r\n                                    defaultValueTextVisibility = false;\r\n                                    defaultValueTextareaVisibility = false;\r\n                                    defaultValueDateVisibility = false;\r\n                                    defaultValueYesnoVisibility = false;\r\n                                    break;\r\n\r\n                                case '_scope':\r\n                                    scopeVisibility = false;\r\n                                    break;\r\n                                default:\r\n                                    thing.setRowVisibility($('#' + option), false);\r\n                            }\r\n                        });\r\n                    } else {\r\n                        this.tabsFront.show();\r\n                        this.showDefaultRows();\r\n                    }\r\n\r\n                    this.setRowVisibility(this.defaultValueText, defaultValueTextVisibility);\r\n                    this.setRowVisibility(this.defaultValueTextarea, defaultValueTextareaVisibility);\r\n                    this.setRowVisibility(this.defaultValueDate, defaultValueDateVisibility);\r\n                    this.setRowVisibility(this.defaultValueYesno, defaultValueYesnoVisibility);\r\n                    this.setRowVisibility(this.isGlobal, scopeVisibility);\r\n\r\n                    /* swatch attributes */\r\n                    this.setRowVisibility(this.useProductImageForSwatch, useProductImageForSwatch);\r\n                    this.setRowVisibility(this.updateProductPreviewImage, defaultValueUpdateImage);\r\n\r\n                    $('input[name=\\'default[]\\']').each(function () {\r\n                        $(this).attr('type', optionDefaultInputType);\r\n                    });\r\n                },\r\n\r\n                /**\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                showDefaultRows: function () {\r\n                    this.setRowVisibility(this.isRequired, true);\r\n                    this.setRowVisibility(this.isUnique, true);\r\n                    this.setRowVisibility(this.frontendClass, true);\r\n                },\r\n\r\n                /**\r\n                 * @param {Object} el\r\n                 * @param {Boolean} isVisible\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                setRowVisibility: function (el, isVisible) {\r\n                    if (isVisible) {\r\n                        el.show();\r\n                        el.closest('.field').show();\r\n                    } else {\r\n                        el.hide();\r\n                        el.closest('.field').hide();\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * @param {Object} el\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                _disable: function (el) {\r\n                    el.attr('disabled', 'disabled');\r\n                },\r\n\r\n                /**\r\n                 * @param {Object} el\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                _enable: function (el) {\r\n                    if (!el.attr('readonly')) {\r\n                        el.removeAttr('disabled');\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * @param {Object} el\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                _showPanel: function (el) {\r\n                    el.closest('.fieldset').show();\r\n                    this._render(el.attr('id'));\r\n                },\r\n\r\n                /**\r\n                 * @param {Object} el\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                _hidePanel: function (el) {\r\n                    el.closest('.fieldset').hide();\r\n                },\r\n\r\n                /**\r\n                 * @param {String} id\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                _render: function (id) {\r\n                    rg.get(id, function () {\r\n                        $('#' + id).trigger('render');\r\n                    });\r\n                },\r\n\r\n                /**\r\n                 * @param {String} promptMessage\r\n                 * @this {swatchProductAttributes}\r\n                 */\r\n                saveAttributeInNewSet: function (promptMessage) {\r\n\r\n                    prompt({\r\n                        content: promptMessage,\r\n                        actions: {\r\n\r\n                            /**\r\n                             * @param {String} val\r\n                             * @this {actions}\r\n                             */\r\n                            confirm: function (val) {\r\n                                var rules = ['required-entry', 'validate-no-html-tags'],\r\n                                    newAttributeSetNameInputId = $('#new_attribute_set_name'),\r\n                                    editForm = $('#edit_form'),\r\n                                    newAttributeSetName = val,\r\n                                    i;\r\n\r\n                                if (!newAttributeSetName) {\r\n                                    return;\r\n                                }\r\n\r\n                                for (i = 0; i < rules.length; i++) {\r\n                                    if (!$.validator.methods[rules[i]](newAttributeSetName)) {\r\n                                        alert({\r\n                                            content: $.validator.messages[rules[i]]\r\n                                        });\r\n\r\n                                        return;\r\n                                    }\r\n                                }\r\n\r\n                                if (newAttributeSetNameInputId.length) {\r\n                                    newAttributeSetNameInputId.val(newAttributeSetName);\r\n                                } else {\r\n                                    editForm.append(new Element('input', {\r\n                                            type: 'hidden',\r\n                                            id: newAttributeSetNameInputId,\r\n                                            name: 'new_attribute_set_name',\r\n                                            value: newAttributeSetName\r\n                                        })\r\n                                    );\r\n                                }\r\n                                // Temporary solution will replaced after refactoring of attributes functionality\r\n                                editForm.triggerHandler('save');\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            };\r\n\r\n        $(function () {\r\n            $('#frontend_input').bind('change', function () {\r\n                swatchProductAttributes.bindAttributeInputType();\r\n            });\r\n            $('#is_filterable').bind('change', function () {\r\n                swatchProductAttributes.switchIsFilterable();\r\n            });\r\n\r\n            swatchProductAttributes.bindAttributeInputType();\r\n\r\n            // @todo: refactor collapsable component\r\n            $('.attribute-popup .collapse, [data-role=\"advanced_fieldset-content\"]')\r\n                .collapsable()\r\n                .collapse('hide');\r\n        });\r\n\r\n        window.saveAttributeInNewSet = swatchProductAttributes.saveAttributeInNewSet;\r\n        window.toggleApplyVisibility = swatchProductAttributes.toggleApplyVisibility;\r\n    };\r\n});\r\n","Magento_Swatches/js/text.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* global $break $ $$ */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'uiRegistry',\r\n    'jquery/ui',\r\n    'prototype'\r\n], function (jQuery, mageTemplate, rg) {\r\n    'use strict';\r\n\r\n    return function (config) {\r\n        var swatchOptionTextDefaultInputType = 'radio',\r\n            swatchTextOption = {\r\n                table: $('swatch-text-options-table'),\r\n                itemCount: 0,\r\n                totalItems: 0,\r\n                rendered: 0,\r\n                isReadOnly: config.isReadOnly,\r\n                template: mageTemplate('#swatch-text-row-template'),\r\n\r\n                /**\r\n                 * Add option\r\n                 *\r\n                 * @param {Object} data\r\n                 * @param {Object} render\r\n                 */\r\n                add: function (data, render) {\r\n                    var isNewOption = false,\r\n                        element;\r\n\r\n                    if (typeof data.id == 'undefined') {\r\n                        data = {\r\n                            'id': 'option_' + this.itemCount,\r\n                            'sort_order': this.itemCount + 1\r\n                        };\r\n                        isNewOption = true;\r\n                    }\r\n\r\n                    if (!data.intype) {\r\n                        data.intype = swatchOptionTextDefaultInputType;\r\n                    }\r\n\r\n                    element = this.template({\r\n                        data: data\r\n                    });\r\n\r\n                    if (isNewOption && !this.isReadOnly) {\r\n                        this.enableNewOptionDeleteButton(data.id);\r\n                    }\r\n                    this.itemCount++;\r\n                    this.totalItems++;\r\n                    this.elements += element;\r\n\r\n                    if (render) {\r\n                        this.render();\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * Remove option\r\n                 *\r\n                 * @param {Object} event\r\n                 */\r\n                remove: function (event) {\r\n                    var element = $(Event.findElement(event, 'tr')),\r\n                        elementFlags; // !!! Button already have table parent in safari\r\n\r\n                    // Safari workaround\r\n                    element.ancestors().each(function (parentItem) {\r\n                        if (parentItem.hasClassName('option-row')) {\r\n                            element = parentItem;\r\n                            throw $break;\r\n                        } else if (parentItem.hasClassName('box')) {\r\n                            throw $break;\r\n                        }\r\n                    });\r\n\r\n                    if (element) {\r\n                        elementFlags = element.getElementsByClassName('delete-flag');\r\n\r\n                        if (elementFlags[0]) {\r\n                            elementFlags[0].value = 1;\r\n                        }\r\n\r\n                        element.addClassName('no-display');\r\n                        element.addClassName('template');\r\n                        element.hide();\r\n                        this.totalItems--;\r\n                        this.updateItemsCountField();\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * Update items count field\r\n                 */\r\n                updateItemsCountField: function () {\r\n                    $('swatch-text-option-count-check').value = this.totalItems > 0 ? '1' : '';\r\n                },\r\n\r\n                /**\r\n                 * Enable delete button for new option\r\n                 *\r\n                 * @param {String} id\r\n                 */\r\n                enableNewOptionDeleteButton: function (id) {\r\n                    $$('#delete_button_swatch_container_' + id + ' button').each(function (button) {\r\n                        button.enable();\r\n                        button.removeClassName('disabled');\r\n                    });\r\n                },\r\n\r\n                /**\r\n                 * Bind remove button\r\n                 */\r\n                bindRemoveButtons: function () {\r\n                    jQuery('#swatch-text-options-panel').on('click', '.delete-option', this.remove.bind(this));\r\n                },\r\n\r\n                /**\r\n                 * Render action\r\n                 */\r\n                render: function () {\r\n                    Element.insert($$('[data-role=swatch-text-options-container]')[0], this.elements);\r\n                    this.elements = '';\r\n                },\r\n\r\n                /**\r\n                 * Render action with delay (performance fix)\r\n                 *\r\n                 * @param {Object} data\r\n                 * @param {Number} from\r\n                 * @param {Number} step\r\n                 * @param {Number} delay\r\n                 * @returns {Boolean}\r\n                 */\r\n                renderWithDelay: function (data, from, step, delay) {\r\n                    var arrayLength = data.length,\r\n                        len;\r\n\r\n                    for (len = from + step; from < len && from < arrayLength; from++) {\r\n                        this.add(data[from]);\r\n                    }\r\n                    this.render();\r\n\r\n                    if (from === arrayLength) {\r\n                        this.updateItemsCountField();\r\n                        this.rendered = 1;\r\n                        jQuery('body').trigger('processStop');\r\n\r\n                        return true;\r\n                    }\r\n                    setTimeout(this.renderWithDelay.bind(this, data, from, step, delay), delay);\r\n                },\r\n\r\n                /**\r\n                 * Ignore validate action\r\n                 */\r\n                ignoreValidate: function () {\r\n                    var ignore = '.ignore-validate input, ' +\r\n                        '.ignore-validate select, ' +\r\n                        '.ignore-validate textarea';\r\n\r\n                    jQuery('#edit_form').data('validator').settings.forceIgnore = ignore;\r\n                }\r\n            };\r\n\r\n        if ($('add_new_swatch_text_option_button')) {\r\n            Event.observe(\r\n                'add_new_swatch_text_option_button',\r\n                'click',\r\n                swatchTextOption.add.bind(swatchTextOption, true)\r\n            );\r\n        }\r\n        jQuery('#swatch-text-options-panel').on('render', function () {\r\n            swatchTextOption.ignoreValidate();\r\n\r\n            if (swatchTextOption.rendered) {\r\n                return false;\r\n            }\r\n            jQuery('body').trigger('processStart');\r\n            swatchTextOption.renderWithDelay(config.attributesData, 0, 100, 300);\r\n            swatchTextOption.bindRemoveButtons();\r\n        });\r\n\r\n        if (config.isSortable) {\r\n            jQuery(function ($) {\r\n                $('[data-role=swatch-text-options-container]').sortable({\r\n                    distance: 8,\r\n                    tolerance: 'pointer',\r\n                    cancel: 'input, button',\r\n                    axis: 'y',\r\n\r\n                    /**\r\n                     * Update components\r\n                     */\r\n                    update: function () {\r\n                        $('[data-role=swatch-text-options-container] [data-role=order]').each(\r\n                            function (index, element) {\r\n                                $(element).val(index + 1);\r\n                            }\r\n                        );\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        jQuery(document).ready(function () {\r\n            if (jQuery('#frontend_input').val() !== 'swatch_text') {\r\n                jQuery('.swatch-text-field-0').removeClass('required-option');\r\n            }\r\n        });\r\n\r\n        window.swatchTextOption = swatchTextOption;\r\n        window.swatchOptionTextDefaultInputType = swatchOptionTextDefaultInputType;\r\n\r\n        rg.set('swatch-text-options-panel', swatchTextOption);\r\n    };\r\n});\r\n","Magento_Swatches/js/type-change.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\nrequire([\r\n    'jquery',\r\n    'mage/translate'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $(function () {\r\n\r\n        // disabled select only\r\n        $('select#frontend_input:disabled').each(function () {\r\n            var select = $(this),\r\n                currentValue = select.find('option:selected').val(),\r\n                enabledTypes = ['select', 'swatch_visual', 'swatch_text'],\r\n                warning = $('<label>')\r\n                    .hide()\r\n                    .text($.mage.__('These changes affect all related products.'))\r\n                    .addClass('mage-error')\r\n                    .attr({\r\n                        generated: true, for: select.attr('id')\r\n                    }),\r\n\r\n                /**\r\n                 * Toggle hint about changes types\r\n                 */\r\n                toggleWarning = function () {\r\n                    if (select.find('option:selected').val() === currentValue) {\r\n                        warning.hide();\r\n                    } else {\r\n                        warning.show();\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * Remove unsupported options\r\n                 */\r\n                removeOption = function () {\r\n                    if (!~enabledTypes.indexOf($(this).val())) {\r\n                        $(this).remove();\r\n                    }\r\n                };\r\n\r\n            // Check current type (allow only: select, swatch_visual, swatch_text)\r\n            if (!~enabledTypes.indexOf(currentValue)) {\r\n                return;\r\n            }\r\n\r\n            // Enable select and keep only available options (all other will be removed)\r\n            select.removeAttr('disabled').find('option').each(removeOption);\r\n\r\n            // Add warning on page and event for show/hide it\r\n            select.after(warning).on('change', toggleWarning);\r\n        });\r\n    });\r\n});\r\n","Magento_Swatches/js/visual.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* global $break $ $$ FORM_KEY */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'uiRegistry',\r\n    'jquery/colorpicker/js/colorpicker',\r\n    'prototype',\r\n    'jquery/ui'\r\n], function (jQuery, mageTemplate, rg) {\r\n    'use strict';\r\n\r\n    return function (config) {\r\n        var swatchOptionVisualDefaultInputType = 'radio',\r\n            swatchVisualOption = {\r\n                table: $('swatch-visual-options-table'),\r\n                itemCount: 0,\r\n                totalItems: 0,\r\n                rendered: 0,\r\n                isReadOnly: config.isReadOnly,\r\n                template: mageTemplate('#swatch-visual-row-template'),\r\n\r\n                /**\r\n                 * Add new option using template\r\n                 *\r\n                 * @param {Object} data\r\n                 * @param {Object} render\r\n                 */\r\n                add: function (data, render) {\r\n                    var isNewOption = false,\r\n                        element;\r\n\r\n                    if (typeof data.id == 'undefined') {\r\n                        data = {\r\n                            'id': 'option_' + this.itemCount,\r\n                            'sort_order': this.itemCount + 1,\r\n                            'empty_class': 'unavailable'\r\n                        };\r\n                        isNewOption = true;\r\n                    } else if (data.defaultswatch0 === '') {\r\n                        data['empty_class'] = 'unavailable';\r\n                    }\r\n\r\n                    if (!data.intype) {\r\n                        data.intype = swatchOptionVisualDefaultInputType;\r\n                    }\r\n\r\n                    element = this.template({\r\n                        data: data\r\n                    });\r\n\r\n                    if (isNewOption && !this.isReadOnly) {\r\n                        this.enableNewOptionDeleteButton(data.id);\r\n                    }\r\n                    this.itemCount++;\r\n                    this.totalItems++;\r\n                    this.elements += element;\r\n\r\n                    if (render) {\r\n                        this.render();\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * ColorPicker initialization process\r\n                 */\r\n                initColorPicker: function () {\r\n                    var element = this,\r\n                        hiddenColorPicker = !jQuery(element).data('colorpickerId');\r\n\r\n                    jQuery(this).ColorPicker({\r\n\r\n                        /**\r\n                         * ColorPicker onShow action\r\n                         */\r\n                        onShow: function () {\r\n                            var color = jQuery(element).parent().parent().prev().prev('input').val(),\r\n                                menu = jQuery(this).parents('.swatch_sub-menu_container');\r\n\r\n                            menu.hide();\r\n                            jQuery(element).ColorPickerSetColor(color);\r\n                        },\r\n\r\n                        /**\r\n                         * ColorPicker onSubmit action\r\n                         *\r\n                         * @param {String} hsb\r\n                         * @param {String} hex\r\n                         * @param {String} rgb\r\n                         * @param {String} el\r\n                         */\r\n                        onSubmit: function (hsb, hex, rgb, el) {\r\n                            var container = jQuery(el).parent().parent().prev();\r\n\r\n                            jQuery(el).ColorPickerHide();\r\n                            container.parent().removeClass('unavailable');\r\n                            container.prev('input').val('#' + hex);\r\n                            container.css('background', '#' + hex);\r\n                        }\r\n                    });\r\n\r\n                    if (hiddenColorPicker) {\r\n                        jQuery(this).ColorPickerShow();\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * Remove action\r\n                 *\r\n                 * @param {Object} event\r\n                 */\r\n                remove: function (event) {\r\n                    var element = $(Event.findElement(event, 'tr')),\r\n                        elementFlags; // !!! Button already have table parent in safari\r\n\r\n                    // Safari workaround\r\n                    element.ancestors().each(function (parentItem) {\r\n                        if (parentItem.hasClassName('option-row')) {\r\n                            element = parentItem;\r\n                            throw $break;\r\n                        } else if (parentItem.hasClassName('box')) {\r\n                            throw $break;\r\n                        }\r\n                    });\r\n\r\n                    if (element) {\r\n                        elementFlags = element.getElementsByClassName('delete-flag');\r\n\r\n                        if (elementFlags[0]) {\r\n                            elementFlags[0].value = 1;\r\n                        }\r\n\r\n                        element.addClassName('no-display');\r\n                        element.addClassName('template');\r\n                        element.hide();\r\n                        this.totalItems--;\r\n                        this.updateItemsCountField();\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * Update items count field\r\n                 */\r\n                updateItemsCountField: function () {\r\n                    $('swatch-visual-option-count-check').value = this.totalItems > 0 ? '1' : '';\r\n                },\r\n\r\n                /**\r\n                 * Enable delete button for new option\r\n                 *\r\n                 * @param {String} id\r\n                 */\r\n                enableNewOptionDeleteButton: function (id) {\r\n                    $$('#delete_button_swatch_container_' + id + ' button').each(function (button) {\r\n                        button.enable();\r\n                        button.removeClassName('disabled');\r\n                    });\r\n                },\r\n\r\n                /**\r\n                 * Bind remove button\r\n                 */\r\n                bindRemoveButtons: function () {\r\n                    jQuery('#swatch-visual-options-panel').on('click', '.delete-option', this.remove.bind(this));\r\n                },\r\n\r\n                /**\r\n                 * Render options\r\n                 */\r\n                render: function () {\r\n                    Element.insert($$('[data-role=swatch-visual-options-container]')[0], this.elements);\r\n                    this.elements = '';\r\n                },\r\n\r\n                /**\r\n                 * Render elements with delay (performance fix)\r\n                 *\r\n                 * @param {Object} data\r\n                 * @param {Number} from\r\n                 * @param {Number} step\r\n                 * @param {Number} delay\r\n                 * @returns {Boolean}\r\n                 */\r\n                renderWithDelay: function (data, from, step, delay) {\r\n                    var arrayLength = data.length,\r\n                        len;\r\n\r\n                    for (len = from + step; from < len && from < arrayLength; from++) {\r\n                        this.add(data[from]);\r\n                    }\r\n                    this.render();\r\n\r\n                    if (from === arrayLength) {\r\n                        this.updateItemsCountField();\r\n                        this.rendered = 1;\r\n                        jQuery('body').trigger('processStop');\r\n\r\n                        return true;\r\n                    }\r\n                    setTimeout(this.renderWithDelay.bind(this, data, from, step, delay), delay);\r\n                },\r\n\r\n                /**\r\n                 * Ignore validate action\r\n                 */\r\n                ignoreValidate: function () {\r\n                    var ignore = '.ignore-validate input, ' +\r\n                        '.ignore-validate select, ' +\r\n                        '.ignore-validate textarea';\r\n\r\n                    jQuery('#edit_form').data('validator').settings.forceIgnore = ignore;\r\n                }\r\n            };\r\n\r\n        if ($('add_new_swatch_visual_option_button')) {\r\n            Event.observe(\r\n                'add_new_swatch_visual_option_button',\r\n                'click',\r\n                swatchVisualOption.add.bind(swatchVisualOption, {}, true)\r\n            );\r\n        }\r\n\r\n        jQuery('#swatch-visual-options-panel').on('render', function () {\r\n            swatchVisualOption.ignoreValidate();\r\n\r\n            if (swatchVisualOption.rendered) {\r\n                return false;\r\n            }\r\n            jQuery('body').trigger('processStart');\r\n            swatchVisualOption.renderWithDelay(config.attributesData, 0, 100, 300);\r\n            swatchVisualOption.bindRemoveButtons();\r\n            jQuery('#swatch-visual-options-panel').on(\r\n                'click',\r\n                '.colorpicker_handler',\r\n                swatchVisualOption.initColorPicker\r\n            );\r\n        });\r\n        jQuery('body').on('click', function (event) {\r\n            var element = jQuery(event.target);\r\n\r\n            if (\r\n                element.parents('.swatch_sub-menu_container').length === 1 ||\r\n                element.next('div.swatch_sub-menu_container').length === 1\r\n            ) {\r\n                return true;\r\n            }\r\n            jQuery('.swatch_sub-menu_container').hide();\r\n        });\r\n\r\n        if (config.isSortable) {\r\n            jQuery(function ($) {\r\n                $('[data-role=swatch-visual-options-container]').sortable({\r\n                    distance: 8,\r\n                    tolerance: 'pointer',\r\n                    cancel: 'input, button',\r\n                    axis: 'y',\r\n\r\n                    /**\r\n                     * Update component\r\n                     */\r\n                    update: function () {\r\n                        $('[data-role=swatch-visual-options-container] [data-role=order]').each(\r\n                            function (index, element) {\r\n                                $(element).val(index + 1);\r\n                            }\r\n                        );\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        window.swatchVisualOption = swatchVisualOption;\r\n        window.swatchOptionVisualDefaultInputType = swatchOptionVisualDefaultInputType;\r\n\r\n        rg.set('swatch-visual-options-panel', swatchVisualOption);\r\n\r\n        jQuery(function ($) {\r\n\r\n            var swatchComponents = {\r\n\r\n                /**\r\n                 * div wrapper for to hide all evement\r\n                 */\r\n                wrapper: null,\r\n\r\n                /**\r\n                 * iframe component to perform file upload without page reload\r\n                 */\r\n                iframe: null,\r\n\r\n                /**\r\n                 * form component for upload image\r\n                 */\r\n                form: null,\r\n\r\n                /**\r\n                 * Input file component for upload image\r\n                 */\r\n                inputFile: null,\r\n\r\n                /**\r\n                 * Create swatch component for upload files\r\n                 *\r\n                 * @this {swatchComponents}\r\n                 * @public\r\n                 */\r\n                create: function () {\r\n                    this.wrapper = $('<div>').css({\r\n                        display: 'none'\r\n                    }).appendTo($('body'));\r\n\r\n                    this.iframe = $('<iframe />', {\r\n                        id:  'upload_iframe',\r\n                        name: 'upload_iframe'\r\n                    }).appendTo(this.wrapper);\r\n\r\n                    this.form = $('<form />', {\r\n                        id: 'swatch_form_image_upload',\r\n                        name: 'swatch_form_image_upload',\r\n                        target: 'upload_iframe',\r\n                        method: 'post',\r\n                        enctype: 'multipart/form-data',\r\n                        class: 'ignore-validate',\r\n                        action: config.uploadActionUrl\r\n                    }).appendTo(this.wrapper);\r\n\r\n                    this.inputFile = $('<input />', {\r\n                        type: 'file',\r\n                        name: 'datafile',\r\n                        class: 'swatch_option_file'\r\n                    }).appendTo(this.form);\r\n\r\n                    $('<input />', {\r\n                        type: 'hidden',\r\n                        name: 'form_key',\r\n                        value: FORM_KEY\r\n                    }).appendTo(this.form);\r\n                }\r\n            };\r\n\r\n            /**\r\n             * Create swatch components\r\n             */\r\n            swatchComponents.create();\r\n\r\n            /**\r\n             * Register event for swatch input[type=file] change\r\n             */\r\n            swatchComponents.inputFile.change(function () {\r\n                var container = $('#' + $(this).attr('data-called-by')).parents().eq(2).children('.swatch_window'),\r\n\r\n                    /**\r\n                     * @this {iframe}\r\n                     */\r\n                    iframeHandler = function () {\r\n                        var imageParams = $.parseJSON($(this).contents().find('body').html()),\r\n                            fullMediaUrl = imageParams['swatch_path'] + imageParams['file_path'];\r\n\r\n                        container.prev('input').val(imageParams['file_path']);\r\n                        container.css({\r\n                            'background-image': 'url(' + fullMediaUrl + ')',\r\n                            'background-size': 'cover'\r\n                        });\r\n                        container.parent().removeClass('unavailable');\r\n                    };\r\n\r\n                swatchComponents.iframe.off('load');\r\n                swatchComponents.iframe.load(iframeHandler);\r\n                swatchComponents.form.submit();\r\n                $(this).val('');\r\n            });\r\n\r\n            /**\r\n             * Register event for choose \"upload image\" option\r\n             */\r\n            $(document).on('click', '.btn_choose_file_upload', function () {\r\n                swatchComponents.inputFile.attr('data-called-by', $(this).attr('id'));\r\n                swatchComponents.inputFile.click();\r\n            });\r\n\r\n            /**\r\n             * Register event for remove option\r\n             */\r\n            $(document).on('click', '.btn_remove_swatch', function () {\r\n                var optionPanel = $(this).parents().eq(2);\r\n\r\n                optionPanel.children('input').val('');\r\n                optionPanel.children('.swatch_window').css('background', '');\r\n\r\n                optionPanel.addClass('unavailable');\r\n\r\n                jQuery('.swatch_sub-menu_container').hide();\r\n            });\r\n\r\n            /**\r\n             * Toggle color upload chooser\r\n             */\r\n            $(document).on('click', '.swatch_window', function () {\r\n                $(this).next('div').toggle();\r\n            });\r\n        });\r\n    };\r\n});\r\n","Magento_Swatches/js/form/element/swatch-visual.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* global $break $ FORM_KEY */\r\n\r\ndefine([\r\n    'underscore',\r\n    'Magento_Ui/js/lib/view/utils/async',\r\n    'mage/template',\r\n    'uiRegistry',\r\n    'prototype',\r\n    'Magento_Ui/js/form/element/abstract',\r\n    'jquery/colorpicker/js/colorpicker',\r\n    'jquery/ui'\r\n], function (_, jQuery, mageTemplate, rg, prototype, Abstract) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Former implementation.\r\n     *\r\n     * @param {*} value\r\n     * @param {Object} container\r\n     * @param {String} uploadUrl\r\n     * @param {String} elementName\r\n     */\r\n    function oldCode(value, container, uploadUrl, elementName) {\r\n        var swatchVisualOption = {\r\n            itemCount: 0,\r\n            totalItems: 0,\r\n            rendered: 0,\r\n            isReadOnly: false,\r\n\r\n            /**\r\n             * Initialize.\r\n             */\r\n            initialize: function () {\r\n                if (_.isEmpty(value)) {\r\n                    container.addClassName('unavailable');\r\n                }\r\n\r\n                jQuery(container).on(\r\n                    'click',\r\n                    '.colorpicker_handler',\r\n                    this.initColorPicker\r\n                );\r\n            },\r\n\r\n            /**\r\n             * ColorPicker initialization process\r\n             */\r\n            initColorPicker: function () {\r\n                var element = this,\r\n                    hiddenColorPicker = !jQuery(element).data('colorpickerId');\r\n\r\n                jQuery(this).ColorPicker({\r\n\r\n                    /**\r\n                     * ColorPicker onShow action\r\n                     */\r\n                    onShow: function () {\r\n                        var color = jQuery(element).parent().parent().prev().prev('input').val(),\r\n                            menu = jQuery(this).parents('.swatch_sub-menu_container');\r\n\r\n                        menu.hide();\r\n                        jQuery(element).ColorPickerSetColor(color);\r\n                    },\r\n\r\n                    /**\r\n                     * ColorPicker onSubmit action\r\n                     *\r\n                     * @param {String} hsb\r\n                     * @param {String} hex\r\n                     * @param {String} rgb\r\n                     * @param {String} el\r\n                     */\r\n                    onSubmit: function (hsb, hex, rgb, el) {\r\n                        var localContainer = jQuery(el).parent().parent().prev();\r\n\r\n                        jQuery(el).ColorPickerHide();\r\n                        localContainer.parent().removeClass('unavailable');\r\n                        localContainer.prev('input').val('#' + hex).trigger('change');\r\n                        localContainer.css('background', '#' + hex);\r\n                    }\r\n                });\r\n\r\n                if (hiddenColorPicker) {\r\n                    jQuery(this).ColorPickerShow();\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Remove action\r\n             *\r\n             * @param {Object} event\r\n             */\r\n            remove: function (event) {\r\n                var element = $(Event.findElement(event, 'tr')),\r\n                    elementFlags; // !!! Button already have table parent in safari\r\n\r\n                // Safari workaround\r\n                element.ancestors().each(function (parentItem) {\r\n                    if (parentItem.hasClassName('option-row')) {\r\n                        element = parentItem;\r\n                        throw $break;\r\n                    } else if (parentItem.hasClassName('box')) {\r\n                        throw $break;\r\n                    }\r\n                });\r\n\r\n                if (element) {\r\n                    elementFlags = element.getElementsByClassName('delete-flag');\r\n\r\n                    if (elementFlags[0]) {\r\n                        elementFlags[0].value = 1;\r\n                    }\r\n\r\n                    element.addClassName('no-display');\r\n                    element.addClassName('template');\r\n                    element.hide();\r\n                    this.totalItems--;\r\n                    this.updateItemsCountField();\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Update items count field\r\n             */\r\n            updateItemsCountField: function () {\r\n                $('swatch-visual-option-count-check').value = this.totalItems > 0 ? '1' : '';\r\n            }\r\n        };\r\n\r\n        //swatchVisualOption.initColorPicker();\r\n\r\n        jQuery('body').on('click', function (event) {\r\n            var element = jQuery(event.target);\r\n\r\n            if (\r\n                element.parents('.swatch_sub-menu_container').length === 1 ||\r\n                element.next('div.swatch_sub-menu_container').length === 1\r\n            ) {\r\n                return true;\r\n            }\r\n            jQuery('.swatch_sub-menu_container').hide();\r\n        });\r\n\r\n        jQuery(function ($) {\r\n\r\n            var swatchComponents = {\r\n\r\n                /**\r\n                 * div wrapper for to hide all evement\r\n                 */\r\n                wrapper: null,\r\n\r\n                /**\r\n                 * iframe component to perform file upload without page reload\r\n                 */\r\n                iframe: null,\r\n\r\n                /**\r\n                 * form component for upload image\r\n                 */\r\n                form: null,\r\n\r\n                /**\r\n                 * Input file component for upload image\r\n                 */\r\n                inputFile: null,\r\n\r\n                /**\r\n                 * Create swatch component for upload files\r\n                 *\r\n                 * @this {swatchComponents}\r\n                 * @public\r\n                 */\r\n                create: function () {\r\n                    this.wrapper = $('<div>').css({\r\n                        display: 'none'\r\n                    }).appendTo($('body'));\r\n\r\n                    this.iframe = $('<iframe />', {\r\n                        name: 'upload_iframe_' + elementName\r\n                    }).appendTo(this.wrapper);\r\n\r\n                    this.form = $('<form />', {\r\n                        name: 'swatch_form_image_upload_' + elementName,\r\n                        target: 'upload_iframe_' + elementName,\r\n                        method: 'post',\r\n                        enctype: 'multipart/form-data',\r\n                        class: 'ignore-validate',\r\n                        action: uploadUrl\r\n                    }).appendTo(this.wrapper);\r\n\r\n                    this.inputFile = $('<input />', {\r\n                        type: 'file',\r\n                        name: 'datafile',\r\n                        class: 'swatch_option_file'\r\n                    }).appendTo(this.form);\r\n\r\n                    $('<input />', {\r\n                        type: 'hidden',\r\n                        name: 'form_key',\r\n                        value: FORM_KEY\r\n                    }).appendTo(this.form);\r\n                }\r\n            };\r\n\r\n            swatchVisualOption.initialize();\r\n\r\n            /**\r\n             * Create swatch components\r\n             */\r\n            swatchComponents.create();\r\n\r\n            /**\r\n             * Register event for swatch input[type=file] change\r\n             */\r\n            swatchComponents.inputFile.change(function () {\r\n                var localContainer = $('.' + $(this).attr('data-called-by')).parents().eq(2).children('.swatch_window'),\r\n\r\n                    /**\r\n                     * @this {iframe}\r\n                     */\r\n                    iframeHandler = function () {\r\n                        var imageParams = $.parseJSON($(this).contents().find('body').html()),\r\n                            fullMediaUrl = imageParams['swatch_path'] + imageParams['file_path'];\r\n\r\n                        localContainer.prev('input').val(imageParams['file_path']).trigger('change');\r\n                        localContainer.css({\r\n                            'background-image': 'url(' + fullMediaUrl + ')',\r\n                            'background-size': 'cover'\r\n                        });\r\n                        localContainer.parent().removeClass('unavailable');\r\n                    };\r\n\r\n                swatchComponents.iframe.off('load');\r\n                swatchComponents.iframe.load(iframeHandler);\r\n                swatchComponents.form.submit();\r\n                $(this).val('');\r\n            });\r\n\r\n            /**\r\n             * Register event for choose \"upload image\" option\r\n             */\r\n            $(container).on('click', '.btn_choose_file_upload', function () {\r\n                swatchComponents.inputFile.attr('data-called-by', $(this).data('class'));\r\n                swatchComponents.inputFile.click();\r\n            });\r\n\r\n            /**\r\n             * Register event for remove option\r\n             */\r\n            $(container).on('click', '.btn_remove_swatch', function () {\r\n                var optionPanel = $(this).parents().eq(2);\r\n\r\n                optionPanel.children('input').val('').trigger('change');\r\n                optionPanel.children('.swatch_window').css('background', '');\r\n                optionPanel.addClass('unavailable');\r\n                jQuery('.swatch_sub-menu_container').hide();\r\n            });\r\n\r\n            /**\r\n             * Toggle color upload chooser\r\n             */\r\n            $(container).on('click', '.swatch_window', function () {\r\n                jQuery('.swatch_sub-menu_container').hide();\r\n                $(this).next('div').toggle();\r\n            });\r\n        });\r\n    }\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            elementId: 0,\r\n            prefixName: '',\r\n            prefixElementName: '',\r\n            elementName: '',\r\n            value: '',\r\n            uploadUrl: ''\r\n        },\r\n\r\n        /**\r\n         * Parses options and merges the result with instance\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n\r\n            this.configureDataScope();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .initOldCode();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize wrapped former implementation.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initOldCode: function () {\r\n            jQuery.async('.' + this.elementName, function (elem) {\r\n                oldCode(this.value(), elem.parentElement, this.uploadUrl, this.elementName);\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Configure data scope.\r\n         */\r\n        configureDataScope: function () {\r\n            var recordId, prefixName;\r\n\r\n            // Get recordId\r\n            recordId = this.parentName.split('.').last();\r\n\r\n            prefixName = this.dataScopeToHtmlArray(this.prefixName);\r\n            this.elementName = this.prefixElementName + recordId;\r\n\r\n            this.inputName = prefixName + '[' + this.elementName + ']';\r\n            this.dataScope = 'data.' + this.prefixName + '.' + this.elementName;\r\n\r\n            this.links.value = this.provider + ':' + this.dataScope;\r\n        },\r\n\r\n        /**\r\n         * Get HTML array from data scope.\r\n         *\r\n         * @param {String} dataScopeString\r\n         * @returns {String}\r\n         */\r\n        dataScopeToHtmlArray: function (dataScopeString) {\r\n            var dataScopeArray, dataScope, reduceFunction;\r\n\r\n            /**\r\n             * Add new level of nesting.\r\n             *\r\n             * @param {String} prev\r\n             * @param {String} curr\r\n             * @returns {String}\r\n             */\r\n            reduceFunction = function (prev, curr) {\r\n                return prev + '[' + curr + ']';\r\n            };\r\n\r\n            dataScopeArray = dataScopeString.split('.');\r\n\r\n            dataScope = dataScopeArray.shift();\r\n            dataScope += dataScopeArray.reduce(reduceFunction, '');\r\n\r\n            return dataScope;\r\n        }\r\n    });\r\n});\r\n","Magento_ProductVideo/js/get-video-information.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/alert',\r\n    'jquery/ui',\r\n    'mage/translate'\r\n], function ($, alert) {\r\n        'use strict';\r\n\r\n        var videoRegister = {\r\n            _register: {},\r\n\r\n            /**\r\n             * Checks, if api is already registered\r\n             *\r\n             * @param {String} api\r\n             * @returns {bool}\r\n             */\r\n            isRegistered: function (api) {\r\n                return this._register[api] !== undefined;\r\n            },\r\n\r\n            /**\r\n             * Checks, if api is loaded\r\n             *\r\n             * @param {String} api\r\n             * @returns {bool}\r\n             */\r\n            isLoaded: function (api) {\r\n                return this._register[api] !== undefined && this._register[api] === true;\r\n            },\r\n\r\n            /**\r\n             * Register new video api\r\n             * @param {String} api\r\n             * @param {bool} loaded\r\n             */\r\n            register: function (api, loaded) {\r\n                loaded = loaded || false;\r\n                this._register[api] = loaded;\r\n            }\r\n        };\r\n\r\n        $.widget('mage.productVideoLoader', {\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _create: function () {\r\n                switch (this.element.data('type')) {\r\n                    case 'youtube':\r\n                        this.element.videoYoutube();\r\n                        this._player = this.element.data('mageVideoYoutube');\r\n                        break;\r\n\r\n                    case 'vimeo':\r\n                        this.element.videoVimeo();\r\n                        this._player = this.element.data('mageVideoVimeo');\r\n                        break;\r\n                    default:\r\n                        throw {\r\n                            name: $.mage.__('Video Error'),\r\n                            message: $.mage.__('Unknown video type'),\r\n\r\n                            /**\r\n                             * Return string\r\n                             */\r\n                            toString: function () {\r\n                                return this.name + ': ' + this.message;\r\n                            }\r\n                        };\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Initializes variables\r\n             * @private\r\n             */\r\n            _initialize: function () {\r\n                this._params = this.element.data('params') || {};\r\n                this._code = this.element.data('code');\r\n                this._width = this.element.data('width');\r\n                this._height = this.element.data('height');\r\n                this._autoplay = !!this.element.data('autoplay');\r\n                this._playing = this._autoplay || false;\r\n                this.useYoutubeNocookie = this.element.data('youtubenocookie') || false;\r\n\r\n                this._responsive = this.element.data('responsive') !== false;\r\n\r\n                if (this._responsive === true) {\r\n                    this.element.addClass('responsive');\r\n                }\r\n\r\n                this._calculateRatio();\r\n            },\r\n\r\n            /**\r\n             * Abstract play command\r\n             */\r\n            play: function () {\r\n                this._player.play();\r\n            },\r\n\r\n            /**\r\n             * Abstract pause command\r\n             */\r\n            pause: function () {\r\n                this._player.pause();\r\n            },\r\n\r\n            /**\r\n             * Abstract stop command\r\n             */\r\n            stop: function () {\r\n                this._player.stop();\r\n            },\r\n\r\n            /**\r\n             * Abstract playing command\r\n             */\r\n            playing: function () {\r\n                return this._player.playing();\r\n            },\r\n\r\n            /**\r\n             * Abstract destroying command\r\n             */\r\n            destroy: function () {\r\n                this._player.destroy();\r\n            },\r\n\r\n            /**\r\n             * Calculates ratio for responsive videos\r\n             * @private\r\n             */\r\n            _calculateRatio: function () {\r\n                if (!this._responsive) {\r\n                    return;\r\n                }\r\n                this.element.css('paddingBottom', this._height / this._width * 100 + '%');\r\n            }\r\n        });\r\n\r\n        $.widget('mage.videoYoutube', $.mage.productVideoLoader, {\r\n\r\n            /**\r\n             * Initialization of the Youtube widget\r\n             * @private\r\n             */\r\n            _create: function () {\r\n                var self = this;\r\n\r\n                this._initialize();\r\n\r\n                this.element.append('<div/>');\r\n\r\n                this._on(window, {\r\n\r\n                    /**\r\n                     * Youtube state check\r\n                     * @private\r\n                     */\r\n                    'youtubeapiready': function () {\r\n                        var host = 'https://www.youtube.com';\r\n\r\n                        if (self.useYoutubeNocookie) {\r\n                            host = 'https://www.youtube-nocookie.com';\r\n                        }\r\n\r\n                        if (self._player !== undefined) {\r\n                            return;\r\n                        }\r\n\r\n                        if (self._autoplay) {\r\n                            self._params.autoplay = 1;\r\n                        }\r\n                        self._params.rel = 0;\r\n\r\n                        self._player = new window.YT.Player(self.element.children(':first')[0], {\r\n                            height: self._height,\r\n                            width: self._width,\r\n                            videoId: self._code,\r\n                            playerVars: self._params,\r\n                            host: host,\r\n                            events: {\r\n\r\n                                /**\r\n                                 * @private\r\n                                 */\r\n                                'onReady': function onPlayerReady() {\r\n                                    self._player.getDuration();\r\n                                },\r\n\r\n                                /**\r\n                                 * State change flag init\r\n                                 */\r\n                                onStateChange: function (data) {\r\n                                    switch (window.parseInt(data.data, 10)) {\r\n                                        case 1:\r\n                                            self._playing = true;\r\n                                            break;\r\n                                        default:\r\n                                            self._playing = false;\r\n                                            break;\r\n                                    }\r\n\r\n                                    self._trigger('statechange', {}, data);\r\n                                }\r\n                            }\r\n\r\n                        });\r\n                    }\r\n                });\r\n\r\n                this._loadApi();\r\n            },\r\n\r\n            /**\r\n             * Loads Youtube API and triggers event, when loaded\r\n             * @private\r\n             */\r\n            _loadApi: function () {\r\n                var element,\r\n                    scriptTag;\r\n\r\n                if (videoRegister.isRegistered('youtube')) {\r\n                    if (videoRegister.isLoaded('youtube')) {\r\n                        $(window).trigger('youtubeapiready');\r\n                    }\r\n\r\n                    return;\r\n                }\r\n                videoRegister.register('youtube');\r\n\r\n                element = document.createElement('script');\r\n                scriptTag = document.getElementsByTagName('script')[0];\r\n\r\n                element.async = true;\r\n                element.src = 'https://www.youtube.com/iframe_api';\r\n                scriptTag.parentNode.insertBefore(element, scriptTag);\r\n\r\n                /**\r\n                 * Trigger youtube api ready event\r\n                 */\r\n                window.onYouTubeIframeAPIReady = function () {\r\n                    $(window).trigger('youtubeapiready');\r\n                    videoRegister.register('youtube', true);\r\n                };\r\n            },\r\n\r\n            /**\r\n             * Play command for Youtube\r\n             */\r\n            play: function () {\r\n                this._player.playVideo();\r\n                this._playing = true;\r\n            },\r\n\r\n            /**\r\n             * Pause command for Youtube\r\n             */\r\n            pause: function () {\r\n                this._player.pauseVideo();\r\n                this._playing = false;\r\n            },\r\n\r\n            /**\r\n             * Stop command for Youtube\r\n             */\r\n            stop: function () {\r\n                this._player.stopVideo();\r\n                this._playing = false;\r\n            },\r\n\r\n            /**\r\n             * Playing command for Youtube\r\n             */\r\n            playing: function () {\r\n                return this._playing;\r\n            },\r\n\r\n            /**\r\n             * stops and unloads player\r\n             * @private\r\n             */\r\n            destroy: function () {\r\n                this.stop();\r\n                this._player.destroy();\r\n            }\r\n        });\r\n\r\n        $.widget('mage.videoVimeo', $.mage.productVideoLoader, {\r\n\r\n            /**\r\n             * Initialize the Vimeo widget\r\n             * @private\r\n             */\r\n            _create: function () {\r\n                var timestamp,\r\n                    src,\r\n                    additionalParams;\r\n\r\n                this._initialize();\r\n                timestamp = new Date().getTime();\r\n\r\n                if (this._autoplay) {\r\n                    additionalParams += '&autoplay=1';\r\n                }\r\n\r\n                src = 'https://player.vimeo.com/video/' +\r\n                    this._code + '?api=1&player_id=vimeo' +\r\n                    this._code +\r\n                    timestamp +\r\n                    additionalParams;\r\n                this.element.append(\r\n                    $('<iframe/>')\r\n                        .attr('frameborder', 0)\r\n                        .attr('id', 'vimeo' + this._code + timestamp)\r\n                        .attr('width', this._width)\r\n                        .attr('height', this._height)\r\n                        .attr('src', src)\r\n                );\r\n\r\n            }\r\n        });\r\n\r\n        $.widget('mage.videoData', {\r\n            options: {\r\n                youtubeKey: '',\r\n                eventSource: '' //where is data going from - focus out or click on button\r\n            },\r\n\r\n            _REQUEST_VIDEO_INFORMATION_TRIGGER: 'request_video_information',\r\n\r\n            _UPDATE_VIDEO_INFORMATION_TRIGGER: 'updated_video_information',\r\n\r\n            _START_UPDATE_INFORMATION_TRIGGER: 'update_video_information',\r\n\r\n            _ERROR_UPDATE_INFORMATION_TRIGGER: 'error_updated_information',\r\n\r\n            _FINISH_UPDATE_INFORMATION_TRIGGER: 'finish_update_information',\r\n\r\n            _VIDEO_URL_VALIDATE_TRIGGER: 'validate_video_url',\r\n\r\n            _videoInformation: null,\r\n\r\n            _currentVideoUrl: null,\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _init: function () {\r\n                this.element.on(this._START_UPDATE_INFORMATION_TRIGGER, $.proxy(this._onRequestHandler, this));\r\n                this.element.on(this._ERROR_UPDATE_INFORMATION_TRIGGER, $.proxy(this._onVideoInvalid, this));\r\n                this.element.on(this._FINISH_UPDATE_INFORMATION_TRIGGER, $.proxy(\r\n                    function () {\r\n                        this._currentVideoUrl = null;\r\n                    }, this\r\n                ));\r\n                this.element.on(this._VIDEO_URL_VALIDATE_TRIGGER, $.proxy(this._onUrlValidateHandler, this));\r\n            },\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _onUrlValidateHandler: function (event, callback, forceVideo) {\r\n                var url = this.element.val(),\r\n                    videoInfo;\r\n\r\n                videoInfo = this._validateURL(url, forceVideo);\r\n\r\n                if (videoInfo) {\r\n                    callback();\r\n                } else {\r\n                    this._onRequestError($.mage.__('Invalid video url'));\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _onRequestHandler: function () {\r\n                var url = this.element.val(),\r\n                    self = this,\r\n                    videoInfo,\r\n                    type,\r\n                    id,\r\n                    googleapisUrl;\r\n\r\n                if (this._currentVideoUrl === url) {\r\n                    return;\r\n                }\r\n\r\n                this._currentVideoUrl = url;\r\n\r\n                this.element.trigger(this._REQUEST_VIDEO_INFORMATION_TRIGGER, {\r\n                    url: url\r\n                });\r\n\r\n                if (!url) {\r\n                    return;\r\n                }\r\n\r\n                videoInfo = this._validateURL(url);\r\n\r\n                if (!videoInfo) {\r\n                    this._onRequestError($.mage.__('Invalid video url'));\r\n\r\n                    return;\r\n                }\r\n\r\n                /**\r\n                 *\r\n                 * @param {Object} data\r\n                 * @private\r\n                 */\r\n                function _onYouTubeLoaded(data) {\r\n                    var tmp,\r\n                        uploadedFormatted,\r\n                        respData,\r\n                        createErrorMessage;\r\n\r\n                    /**\r\n                     * Create errors message\r\n                     *\r\n                     * @returns {String}\r\n                     */\r\n                    createErrorMessage = function () {\r\n                        var error = data.error,\r\n                            errors = error.errors,\r\n                            i,\r\n                            errLength = errors.length,\r\n                            tmpError,\r\n                            errReason,\r\n                            errorsMessage = [];\r\n\r\n                        for (i = 0; i < errLength; i++) {\r\n                            tmpError = errors[i];\r\n                            errReason = tmpError.reason;\r\n\r\n                            if (['keyInvalid'].indexOf(errReason) !== -1) {\r\n                                errorsMessage.push($.mage.__('Youtube API key is invalid'));\r\n\r\n                                break;\r\n                            }\r\n\r\n                            errorsMessage.push(tmpError.message);\r\n                        }\r\n\r\n                        return $.mage.__('Video cant be shown due to the following reason: ') +\r\n                            $.unique(errorsMessage).join(', ');\r\n                    };\r\n\r\n                    if (data.error && [400, 402, 403].indexOf(data.error.code) !== -1) {\r\n                        this._onRequestError(createErrorMessage());\r\n\r\n                        return;\r\n                    }\r\n\r\n                    if (!data.items || data.items.length < 1) {\r\n                        this._onRequestError($.mage.__('Video not found'));\r\n\r\n                        return;\r\n                    }\r\n\r\n                    tmp = data.items[0];\r\n                    uploadedFormatted = tmp.snippet.publishedAt.replace('T', ' ').replace(/\\..+/g, '');\r\n                    respData = {\r\n                        duration: this._formatYoutubeDuration(tmp.contentDetails.duration),\r\n                        channel: tmp.snippet.channelTitle,\r\n                        channelId: tmp.snippet.channelId,\r\n                        uploaded: uploadedFormatted,\r\n                        title: tmp.snippet.localized.title,\r\n                        description: tmp.snippet.description,\r\n                        thumbnail: tmp.snippet.thumbnails.high.url,\r\n                        videoId: videoInfo.id,\r\n                        videoProvider: videoInfo.type,\r\n                        useYoutubeNocookie: videoInfo.useYoutubeNocookie\r\n                    };\r\n                    this._videoInformation = respData;\r\n                    this.element.trigger(this._UPDATE_VIDEO_INFORMATION_TRIGGER, respData);\r\n                    this.element.trigger(this._FINISH_UPDATE_INFORMATION_TRIGGER, true);\r\n                }\r\n\r\n                /**\r\n                 * @private\r\n                 */\r\n                function _onVimeoLoaded(data) {\r\n                    var tmp,\r\n                        respData;\r\n\r\n                    if (data.length < 1) {\r\n                        this._onRequestError($.mage.__('Video not found'));\r\n\r\n                        return null;\r\n                    }\r\n                    tmp = data[0];\r\n                    respData = {\r\n                        duration: this._formatVimeoDuration(tmp.duration),\r\n                        channel: tmp['user_name'],\r\n                        channelId: tmp['user_url'],\r\n                        uploaded: tmp['upload_date'],\r\n                        title: tmp.title,\r\n                        description: tmp.description.replace(/(&nbsp;|<([^>]+)>)/ig, ''),\r\n                        thumbnail: tmp['thumbnail_large'],\r\n                        videoId: videoInfo.id,\r\n                        videoProvider: videoInfo.type\r\n                    };\r\n                    this._videoInformation = respData;\r\n                    this.element.trigger(this._UPDATE_VIDEO_INFORMATION_TRIGGER, respData);\r\n                    this.element.trigger(this._FINISH_UPDATE_INFORMATION_TRIGGER, true);\r\n                }\r\n\r\n                type = videoInfo.type;\r\n                id = videoInfo.id;\r\n\r\n                if (type === 'youtube') {\r\n                    googleapisUrl = 'https://www.googleapis.com/youtube/v3/videos?id=' +\r\n                        id +\r\n                        '&part=snippet,contentDetails,statistics,status&key=' +\r\n                        this.options.youtubeKey + '&alt=json&callback=?';\r\n                    $.getJSON(googleapisUrl,\r\n                        {\r\n                            format: 'json'\r\n                        },\r\n                        $.proxy(_onYouTubeLoaded, self)\r\n                    ).fail(\r\n                        function () {\r\n                            self._onRequestError('Video not found');\r\n                        }\r\n                    );\r\n                } else if (type === 'vimeo') {\r\n                    $.ajax({\r\n                        url: 'https://www.vimeo.com/api/v2/video/' + id + '.json',\r\n                        dataType: 'jsonp',\r\n                        data: {\r\n                            format: 'json'\r\n                        },\r\n                        timeout: 5000,\r\n                        success:  $.proxy(_onVimeoLoaded, self),\r\n\r\n                        /**\r\n                         * @private\r\n                         */\r\n                        error: function () {\r\n                            self._onRequestError($.mage.__('Video not found'));\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _onVideoInvalid: function (event, data) {\r\n                this._videoInformation = null;\r\n                this.element.val('');\r\n                alert({\r\n                    content: 'Error: \"' + data + '\"'\r\n                });\r\n            },\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _onRequestError: function (error) {\r\n                this.element.trigger(this._ERROR_UPDATE_INFORMATION_TRIGGER, error);\r\n                this.element.trigger(this._FINISH_UPDATE_INFORMATION_TRIGGER, false);\r\n                this._currentVideoUrl = null;\r\n            },\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _formatYoutubeDuration: function (duration) {\r\n                var match = duration.match(/PT(\\d+H)?(\\d+M)?(\\d+S)?/),\r\n                    hours = parseInt(match[1], 10) || 0,\r\n                    minutes = parseInt(match[2], 10) || 0,\r\n                    seconds = parseInt(match[3], 10) || 0;\r\n\r\n                return this._formatVimeoDuration(hours * 3600 + minutes * 60 + seconds);\r\n            },\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _formatVimeoDuration: function (seconds) {\r\n                return (new Date(seconds * 1000)).toUTCString().match(/(\\d\\d:\\d\\d:\\d\\d)/)[0];\r\n            },\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _parseHref: function (href) {\r\n                var a = document.createElement('a');\r\n\r\n                a.href = href;\r\n\r\n                return a;\r\n            },\r\n\r\n            /**\r\n             * @private\r\n             */\r\n            _validateURL: function (href, forceVideo) {\r\n                var id,\r\n                    type,\r\n                    ampersandPosition,\r\n                    vimeoRegex,\r\n                    useYoutubeNocookie = false;\r\n\r\n                if (typeof href !== 'string') {\r\n                    return href;\r\n                }\r\n                href = this._parseHref(href);\r\n\r\n                if (href.host.match(/youtube\\.com/) && href.search) {\r\n\r\n                    id = href.search.split('v=')[1];\r\n\r\n                    if (id) {\r\n                        ampersandPosition = id.indexOf('&');\r\n                        type = 'youtube';\r\n                    }\r\n\r\n                    if (id && ampersandPosition !== -1) {\r\n                        id = id.substring(0, ampersandPosition);\r\n                    }\r\n\r\n                } else if (href.host.match(/youtube\\.com|youtu\\.be|youtube-nocookie.com/)) {\r\n                    id = href.pathname.replace(/^\\/(embed\\/|v\\/)?/, '').replace(/\\/.*/, '');\r\n                    type = 'youtube';\r\n\r\n                    if (href.host.match(/youtube-nocookie.com/)) {\r\n                        useYoutubeNocookie = true;\r\n                    }\r\n                } else if (href.host.match(/vimeo\\.com/)) {\r\n                    type = 'vimeo';\r\n                    vimeoRegex = new RegExp(['https?:\\\\/\\\\/(?:www\\\\.|player\\\\.)?vimeo.com\\\\/(?:channels\\\\/(?:\\\\w+\\\\/)',\r\n                        '?|groups\\\\/([^\\\\/]*)\\\\/videos\\\\/|album\\\\/(\\\\d+)\\\\/video\\\\/|video\\\\/|)(\\\\d+)(?:$|\\\\/|\\\\?)'\r\n                    ].join(''));\r\n\r\n                    if (href.href.match(vimeoRegex) != null) {\r\n                        id = href.href.match(vimeoRegex)[3];\r\n                    }\r\n                }\r\n\r\n                if ((!id || !type) && forceVideo) {\r\n                    id = href.href;\r\n                    type = 'custom';\r\n                }\r\n\r\n                return id ? {\r\n                    id: id, type: type, s: href.search.replace(/^\\?/, ''), useYoutubeNocookie: useYoutubeNocookie\r\n                } : false;\r\n            }\r\n        });\r\n    });\r\n","Magento_ProductVideo/js/new-video-dialog.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'jquery/ui',\r\n    'Magento_Ui/js/modal/modal',\r\n    'mage/translate',\r\n    'mage/backend/tree-suggest',\r\n    'mage/backend/validation',\r\n    'Magento_ProductVideo/js/get-video-information'\r\n], function ($, _) {\r\n    'use strict';\r\n\r\n    $.widget('mage.createVideoPlayer', {\r\n        options: {\r\n            videoId: '',\r\n            videoProvider: '',\r\n            container: '.video-player-container',\r\n            videoClass: 'product-video',\r\n            reset: false,\r\n            useYoutubeNocookie: false,\r\n            metaData: {\r\n                DOM: {\r\n                    title: '.video-information.title span',\r\n                    uploaded: '.video-information.uploaded span',\r\n                    uploader: '.video-information.uploader span',\r\n                    duration: '.video-information.duration span',\r\n                    all: '.video-information span',\r\n                    wrapper: '.video-information'\r\n                },\r\n                data: {\r\n                    title: '',\r\n                    uploaded: '',\r\n                    uploader: '',\r\n                    uploaderUrl: '',\r\n                    duration: ''\r\n                }\r\n            }\r\n        },\r\n\r\n        _FINISH_CREATE_VIDEO_TRIGGER: 'finish_create_video',\r\n\r\n        _FINISH_UPDATE_VIDEO_TRIGGER: 'finish_update_video',\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _init: function () {\r\n            if (this.options.reset) {\r\n                this.reset();\r\n            } else {\r\n                this.update();\r\n            }\r\n\r\n            this.element.on('reset', $.proxy(this.reset, this));\r\n\r\n        },\r\n\r\n        /**\r\n         * @returns {Boolean}\r\n         */\r\n        update: function () {\r\n            var checkVideoID = this.element.find(this.options.container).find(\r\n                    '.' + this.options.videoClass\r\n                ).data('code'),\r\n                eventVideoData = {\r\n                    oldVideoId: checkVideoID ? checkVideoID.toString() : checkVideoID,\r\n                    newVideoId: this.options.videoId ? this.options.videoId.toString() : this.options.videoId\r\n                };\r\n\r\n            if (checkVideoID && checkVideoID !== this.options.videoId) {\r\n                this._doUpdate();\r\n                this.element.trigger(this._FINISH_UPDATE_VIDEO_TRIGGER, eventVideoData);\r\n            } else if (checkVideoID && checkVideoID === this.options.videoId) {\r\n                return false;\r\n            } else if (!checkVideoID) {\r\n                this._doUpdate();\r\n                this.element.trigger(this._FINISH_CREATE_VIDEO_TRIGGER, eventVideoData);\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _doUpdate: function () {\r\n            var uploaderLinkUrl,\r\n                uploaderLink;\r\n\r\n            this.reset();\r\n            this.element.find(this.options.container).append(\r\n                '<div class=\"' +\r\n                this.options.videoClass +\r\n                '\" data-type=\"' +\r\n                this.options.videoProvider +\r\n                '\" data-code=\"' +\r\n                this.options.videoId +\r\n                '\" data-youtubenocookie=\"' +\r\n                this.options.useYoutubeNocookie +\r\n                '\" data-width=\"100%\" data-height=\"100%\"></div>'\r\n            );\r\n            this.element.find(this.options.metaData.DOM.wrapper).show();\r\n            this.element.find(this.options.metaData.DOM.title).text(this.options.metaData.data.title);\r\n            this.element.find(this.options.metaData.DOM.uploaded).text(this.options.metaData.data.uploaded);\r\n            this.element.find(this.options.metaData.DOM.duration).text(this.options.metaData.data.duration);\r\n\r\n            if (this.options.videoProvider === 'youtube') {\r\n                uploaderLinkUrl = 'https://youtube.com/channel/' + this.options.metaData.data.uploaderUrl;\r\n            } else if (this.options.videoProvider === 'vimeo') {\r\n                uploaderLinkUrl = this.options.metaData.data.uploaderUrl;\r\n            }\r\n            uploaderLink = document.createElement('a');\r\n            uploaderLink.setAttribute('href', uploaderLinkUrl);\r\n            uploaderLink.setAttribute('target', '_blank');\r\n            uploaderLink.innerText = this.options.metaData.data.uploader;\r\n            this.element.find(this.options.metaData.DOM.uploader)[0].appendChild(uploaderLink);\r\n            this.element.find('.' + this.options.videoClass).productVideoLoader();\r\n\r\n        },\r\n\r\n        /**\r\n         * Reset\r\n         */\r\n        reset: function () {\r\n            this.element.find(this.options.container).find('.' + this.options.videoClass).remove();\r\n            this.element.find(this.options.metaData.DOM.wrapper).hide();\r\n            this.element.find(this.options.metaData.DOM.all).text('');\r\n\r\n        }\r\n    });\r\n\r\n    $.widget('mage.updateInputFields', {\r\n        options: {\r\n            reset: false,\r\n            DOM: {\r\n                urlField: 'input[name=\"video_url\"]',\r\n                titleField: 'input[name=\"video_title\"]',\r\n                fileField: '#file_name',\r\n                descriptionField: 'textarea[name=\"video_description\"]',\r\n                thumbnailLocation: '.field-new_video_screenshot_preview .admin__field-control'\r\n            },\r\n            data: {\r\n                url: '',\r\n                title: '',\r\n                description: '',\r\n                thumbnail: ''\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _init: function () {\r\n            if (this.options.reset) {\r\n                this.reset();\r\n            } else {\r\n                this.update();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update\r\n         */\r\n        update: function () {\r\n            $(this.options.DOM.titleField).val(this.options.data.title);\r\n            $(this.options.DOM.descriptionField).val(this.options.data.description);\r\n        },\r\n\r\n        /**\r\n         * Reset\r\n         */\r\n        reset: function () {\r\n            $(this.options.DOM.fileField).val('');\r\n            $(this.options.DOM.urlField).val('');\r\n            $(this.options.DOM.titleField).val('');\r\n            $(this.options.DOM.descriptionField).val('');\r\n        }\r\n    });\r\n\r\n    /**\r\n     */\r\n    $.widget('mage.newVideoDialog', {\r\n\r\n        _previewImage: null,\r\n\r\n        clickedElement: '',\r\n\r\n        _images: {},\r\n\r\n        _imageTypes: [\r\n            '.jpeg',\r\n            '.pjpeg',\r\n            '.jpeg',\r\n            '.jpg',\r\n            '.pjpeg',\r\n            '.png',\r\n            '.gif'\r\n        ],\r\n\r\n        _imageProductGalleryWrapperSelector: '#image-container',\r\n\r\n        _videoPreviewInputSelector: '#new_video_screenshot',\r\n\r\n        _videoPreviewRemoteSelector: '',\r\n\r\n        _videoDisableinputSelector: '#new_video_disabled',\r\n\r\n        _videoPreviewImagePointer: '#new_video_screenshot_preview',\r\n\r\n        _videoFormSelector: '#new_video_form',\r\n\r\n        _itemIdSelector: '#item_id',\r\n\r\n        _videoUrlSelector: '[name=\"video_url\"]',\r\n\r\n        _videoImageFilenameselector: '#file_name',\r\n\r\n        _videoUrlWidget: null,\r\n\r\n        _videoInformationBtnSelector: '[name=\"new_video_get\"]',\r\n\r\n        _editVideoBtnSelector: '.image',\r\n\r\n        _deleteGalleryVideoSelector: '[data-role=delete-button]',\r\n\r\n        _deleteGalleryVideoSelectorBtn: null,\r\n\r\n        _videoInformationGetBtn: null,\r\n\r\n        _videoInformationGetUrlField: null,\r\n\r\n        _videoInformationGetEditBtn: null,\r\n\r\n        _isEditPage: false,\r\n\r\n        _onlyVideoPlayer: false,\r\n\r\n        _tempPreviewImageData: null,\r\n\r\n        _videoPlayerSelector: '.mage-new-video-dialog',\r\n\r\n        _videoRequestComplete: null,\r\n\r\n        _gallery: null,\r\n\r\n        /**\r\n         * Bind events\r\n         * @private\r\n         */\r\n        _bind: function () {\r\n            var events = {\r\n                'setImage': '_onSetImage'\r\n            };\r\n\r\n            this._on(events);\r\n\r\n            this._videoUrlWidget = this.element.find(this._videoUrlSelector).videoData({\r\n                youtubeKey: this.options.youTubeApiKey,\r\n                eventSource: 'focusout'\r\n            });\r\n\r\n            this._videoInformationGetBtn = this.element.find(this._videoInformationBtnSelector);\r\n            this._videoInformationGetUrlField = this.element.find(this._videoUrlSelector);\r\n            this._videoInformationGetEditBtn = this._gallery.find(this._editVideoBtnSelector);\r\n\r\n            this._videoInformationGetBtn.on('click', $.proxy(this._onGetVideoInformationClick, this));\r\n            this._videoInformationGetUrlField.on('focusout', $.proxy(this._onGetVideoInformationFocusOut, this));\r\n\r\n            this._videoUrlWidget.on('updated_video_information', $.proxy(this._onGetVideoInformationSuccess, this));\r\n            this._videoUrlWidget.on('error_updated_information', $.proxy(this._onGetVideoInformationError, this));\r\n            this._videoUrlWidget.on(\r\n                'request_video_information',\r\n                $.proxy(this._onGetVideoInformationStartRequest, this)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Fired when user click on button \"Get video information\"\r\n         * @private\r\n         */\r\n        _onGetVideoInformationClick: function () {\r\n            this._onlyVideoPlayer = false;\r\n            this._isEditPage = false;\r\n            this._videoUrlWidget.trigger('update_video_information');\r\n        },\r\n\r\n        /**\r\n         * Fired when user do focus out from url field\r\n         * @private\r\n         */\r\n        _onGetVideoInformationFocusOut: function () {\r\n            this._videoUrlWidget.trigger('update_video_information');\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _onGetVideoInformationStartRequest: function () {\r\n            this._videoRequestComplete = false;\r\n        },\r\n\r\n        /**\r\n         * Fired when user click Edit Video button\r\n         * @private\r\n         */\r\n        _onGetVideoInformationEditClick: function () {\r\n            this._onlyVideoPlayer = true;\r\n            this._isEditPage = true;\r\n            this._videoUrlWidget.trigger('update_video_information');\r\n        },\r\n\r\n        /**\r\n         * Fired when successfully received information about the video.\r\n         * @param {Object} e\r\n         * @param {Object} data\r\n         * @private\r\n         */\r\n        _onGetVideoInformationSuccess: function (e, data) {\r\n            var self = this;\r\n\r\n            self.element.on('finish_update_video finish_create_video', $.proxy(function (element, playerData) {\r\n                    if (!self._onlyVideoPlayer ||\r\n                        !self._isEditPage && playerData.oldVideoId !== playerData.newVideoId ||\r\n                        playerData.oldVideoId && playerData.oldVideoId !== playerData.newVideoId\r\n                    ) {\r\n                        self.element.updateInputFields({\r\n                            reset: false,\r\n                            data: {\r\n                                title: data.title,\r\n                                description: data.description\r\n                            }\r\n                        });\r\n                        this._loadRemotePreview(data.thumbnail);\r\n                    }\r\n                    self._onlyVideoPlayer = true;\r\n                }, this))\r\n                .createVideoPlayer({\r\n                    videoId: data.videoId,\r\n                    videoProvider: data.videoProvider,\r\n                    useYoutubeNocookie: data.useYoutubeNocookie,\r\n                    reset: false,\r\n                    metaData: {\r\n                        DOM: {\r\n                            title: '.video-information.title span',\r\n                            uploaded: '.video-information.uploaded span',\r\n                            uploader: '.video-information.uploader span',\r\n                            duration: '.video-information.duration span',\r\n                            all: '.video-information span',\r\n                            wrapper: '.video-information'\r\n                        },\r\n                        data: {\r\n                            title: data.title,\r\n                            uploaded: data.uploaded,\r\n                            uploader: data.channel,\r\n                            duration: data.duration,\r\n                            uploaderUrl: data.channelId\r\n                        }\r\n                    }\r\n                })\r\n                .off('finish_update_video finish_create_video');\r\n\r\n            this._videoRequestComplete = true;\r\n        },\r\n\r\n        /**\r\n         * Load preview from youtube/vimeo\r\n         * @param {String} sourceUrl\r\n         * @private\r\n         */\r\n        _loadRemotePreview: function (sourceUrl) {\r\n            var url = this.options.saveRemoteVideoUrl,\r\n                self = this;\r\n\r\n            this._getPreviewImage().attr('src', sourceUrl).hide();\r\n            this._blockActionButtons(true, true);\r\n            $.ajax({\r\n                url: url,\r\n                data: 'remote_image=' + sourceUrl,\r\n                type: 'post',\r\n                success: $.proxy(function (result) {\r\n                    this._tempPreviewImageData = result;\r\n                    this._getPreviewImage().attr('src', sourceUrl).show();\r\n                    this._blockActionButtons(false, true);\r\n                }, self)\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Fired when receiving information about the video ended with error\r\n         * @private\r\n         */\r\n        _onGetVideoInformationError: function () {\r\n        },\r\n\r\n        /**\r\n         * Remove \".tmp\"\r\n         * @param {String} name\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        __prepareFilename: function (name) {\r\n            var tmppost = '.tmp';\r\n\r\n            if (!name) {\r\n                return name;\r\n            }\r\n\r\n            if (name.endsWith(tmppost)) {\r\n                name = name.slice(0, name.length - tmppost.length);\r\n            }\r\n\r\n            return name;\r\n        },\r\n\r\n        /**\r\n         * Set image data\r\n         * @param {String} file\r\n         * @param {Object} imageData\r\n         * @private\r\n         */\r\n        _setImage: function (file, imageData) {\r\n            file = this.__prepareFilename(file);\r\n            this._images[file] = imageData;\r\n            this._gallery.trigger('addItem', imageData);\r\n            this.element.trigger('setImage', imageData);\r\n            this._addVideoClass(imageData.url);\r\n        },\r\n\r\n        /**\r\n         * Get image data\r\n         *\r\n         * @param {String} file\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _getImage: function (file) {\r\n            file = this.__prepareFilename(file);\r\n\r\n            return this._images[file];\r\n        },\r\n\r\n        /**\r\n         * Replace image (update)\r\n         * @param {String} oldFile\r\n         * @param {String} newFile\r\n         * @param {Object} imageData\r\n         * @private\r\n         */\r\n        _replaceImage: function (oldFile, newFile, imageData) {\r\n            var tmpNewFile = newFile,\r\n                tmpOldImage,\r\n                newImageId,\r\n                oldNewFilePosition,\r\n                fc,\r\n                suff,\r\n                searchsuff,\r\n                key,\r\n                oldValIdElem;\r\n\r\n            oldFile = this.__prepareFilename(oldFile);\r\n            newFile = this.__prepareFilename(newFile);\r\n            tmpOldImage = this._images[oldFile];\r\n\r\n            if (newFile === oldFile) {\r\n                this._images[newFile] = imageData;\r\n                this.saveImageRoles(imageData);\r\n                this._updateVisibility(imageData);\r\n                this._updateImageTitle(imageData);\r\n\r\n                return null;\r\n            }\r\n\r\n            this._removeImage(oldFile);\r\n            this._setImage(newFile, imageData);\r\n\r\n            if (!oldFile || !imageData.oldFile) {\r\n                return null;\r\n            }\r\n\r\n            newImageId = this.findElementId(tmpNewFile);\r\n            fc = this.element.find(this._itemIdSelector).val();\r\n\r\n            suff = 'product[media_gallery][images]' + fc;\r\n\r\n            searchsuff = 'input[name=\"' + suff + '[value_id]\"]';\r\n            key = this._gallery.find(searchsuff).val();\r\n\r\n            if (!key) {\r\n                return null;\r\n            }\r\n\r\n            oldValIdElem = document.createElement('input');\r\n            this._gallery.find('form[data-form=\"edit-product\"]').append(oldValIdElem);\r\n            $(oldValIdElem).attr({\r\n                type: 'hidden',\r\n                name: 'product[media_gallery][images][' + newImageId + '][save_data_from]'\r\n            }).val(key);\r\n\r\n            oldNewFilePosition = parseInt(tmpOldImage.position, 10);\r\n            imageData.position = oldNewFilePosition;\r\n\r\n            this._gallery.trigger('setPosition', {\r\n                imageData: imageData,\r\n                position: oldNewFilePosition\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Remove image data\r\n         * @param {String} file\r\n         * @private\r\n         */\r\n        _removeImage: function (file) {\r\n            var imageData = this._getImage(file);\r\n\r\n            if (!imageData) {\r\n                return null;\r\n            }\r\n\r\n            this._gallery.trigger('removeItem', imageData);\r\n            this.element.trigger('removeImage', imageData);\r\n            delete this._images[file];\r\n        },\r\n\r\n        /**\r\n         * Fired when image setted\r\n         * @param {Event} event\r\n         * @param {Object} imageData\r\n         * @private\r\n         */\r\n        _onSetImage: function (event, imageData) {\r\n            this.saveImageRoles(imageData);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * Wrap _uploadFile\r\n         * @param {String} file\r\n         * @param {String} oldFile\r\n         * @param {Function} callback\r\n         * @private\r\n         */\r\n        _uploadImage: function (file, oldFile, callback) {\r\n            var url = this.options.saveVideoUrl,\r\n                data = {\r\n                    files: file,\r\n                    url: url\r\n                };\r\n\r\n            this._blockActionButtons(true, true);\r\n            this._uploadFile(data, $.proxy(function (result) {\r\n                this._onImageLoaded(result, file, oldFile, callback);\r\n                this._blockActionButtons(false);\r\n            }, this));\r\n\r\n        },\r\n\r\n        /**\r\n         * @param {String} result\r\n         * @param {String} file\r\n         * @param {String} oldFile\r\n         * @param {Function} callback\r\n         * @private\r\n         */\r\n        _onImageLoaded: function (result, file, oldFile, callback) {\r\n            var data = JSON.parse(result);\r\n\r\n            if (this.element.find('#video_url').parent().find('.image-upload-error').length > 0) {\r\n                this.element.find('.image-upload-error').remove();\r\n            }\r\n\r\n            if (data.errorcode || data.error) {\r\n                this.element.find('#video_url').parent().append('<div class=\"image-upload-error\">' +\r\n                '<div class=\"image-upload-error-cross\"></div><span>' + data.error + '</span></div>');\r\n\r\n                return;\r\n            }\r\n            $.each(this.element.find(this._videoFormSelector).serializeArray(), function (i, field) {\r\n                data[field.name] = field.value;\r\n            });\r\n            data.disabled = this.element.find(this._videoDisableinputSelector).attr('checked') ? 1 : 0;\r\n            data['media_type'] = 'external-video';\r\n            data.oldFile = oldFile;\r\n\r\n            oldFile ?\r\n                this._replaceImage(oldFile, data.file, data) :\r\n                this._setImage(data.file, data);\r\n            callback.call(0, data);\r\n        },\r\n\r\n        /**\r\n         * File uploader\r\n         * @private\r\n         */\r\n        _uploadFile: function (data, callback) {\r\n            var fu = this.element.find(this._videoPreviewInputSelector),\r\n                tmpInput = document.createElement('input'),\r\n                fileUploader = null;\r\n\r\n            $(tmpInput).attr({\r\n                'name': fu.attr('name'),\r\n                'value': fu.val(),\r\n                'type': 'file',\r\n                'data-ui-ud': fu.attr('data-ui-ud')\r\n            }).css('display', 'none');\r\n            fu.parent().append(tmpInput);\r\n            fileUploader = $(tmpInput).fileupload();\r\n            fileUploader.fileupload('send', data).success(function (result, textStatus, jqXHR) {\r\n                tmpInput.remove();\r\n                callback.call(null, result, textStatus, jqXHR);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Update style\r\n         * @param {String} url\r\n         * @private\r\n         */\r\n        _addVideoClass: function (url) {\r\n            var classVideo = 'video-item';\r\n\r\n            this._gallery.find('img[src=\"' + url + '\"]').addClass(classVideo);\r\n        },\r\n\r\n        /**\r\n         * Build widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var imgs = _.values(this.element.closest(this.options.videoSelector).data('images')) || [],\r\n                widget,\r\n                uploader,\r\n                tmp,\r\n                i;\r\n\r\n            this._gallery =  this.element.closest(this.options.videoSelector);\r\n\r\n            for (i = 0; i < imgs.length; i++) {\r\n                tmp = imgs[i];\r\n                this._images[tmp.file] = tmp;\r\n\r\n                if (tmp['media_type'] === 'external-video') {\r\n                    tmp.subclass = 'video-item';\r\n                    this._addVideoClass(tmp.url);\r\n                }\r\n            }\r\n\r\n            this._gallery.on('openDialog', $.proxy(this._onOpenDialog, this));\r\n            this._bind();\r\n            this.createVideoItemIcons();\r\n            widget = this;\r\n            uploader = this.element.find(this._videoPreviewInputSelector);\r\n            uploader.on('change', this._onImageInputChange.bind(this));\r\n            uploader.attr('accept', this._imageTypes.join(','));\r\n\r\n            this.element.modal({\r\n                type: 'slide',\r\n                //appendTo: this._gallery,\r\n                modalClass: 'mage-new-video-dialog form-inline',\r\n                title: $.mage.__('New Video'),\r\n                buttons: [\r\n                    {\r\n                        text: $.mage.__('Save'),\r\n                        class: 'action-primary video-create-button',\r\n                        click: $.proxy(widget._onCreate, widget)\r\n                    },\r\n                    {\r\n                        text: $.mage.__('Cancel'),\r\n                        class: 'video-cancel-button',\r\n                        click: $.proxy(widget._onCancel, widget)\r\n                    },\r\n                    {\r\n                        text: $.mage.__('Delete'),\r\n                        class: 'video-delete-button',\r\n                        click: $.proxy(widget._onDelete, widget)\r\n                    },\r\n                    {\r\n                        text: $.mage.__('Save'),\r\n                        class: 'action-primary video-edit',\r\n                        click: $.proxy(widget._onUpdate, widget)\r\n                    }\r\n                ],\r\n\r\n                /**\r\n                 * @returns {null}\r\n                 */\r\n                opened: function () {\r\n                    var roles,\r\n                        file,\r\n                        modalTitleElement,\r\n                        imageData,\r\n                        modal = widget.element.closest('.mage-new-video-dialog');\r\n\r\n                    widget.element.find('#video_url').focus();\r\n                    roles = widget.element.find('.video_image_role');\r\n                    roles.prop('disabled', false);\r\n                    file = widget.element.find('#file_name').val();\r\n                    widget._onGetVideoInformationEditClick();\r\n                    modalTitleElement = modal.find('.modal-title');\r\n\r\n                    if (!file) {\r\n                        widget._blockActionButtons(true);\r\n\r\n                        modal.find('.video-delete-button').hide();\r\n                        modal.find('.video-edit').hide();\r\n                        modal.find('.video-create-button').show();\r\n                        roles.prop('checked', widget._gallery.find('.image.item:not(.removed)').length < 1);\r\n                        modalTitleElement.text($.mage.__('New Video'));\r\n                        widget._isEditPage = false;\r\n\r\n                        return null;\r\n                    }\r\n                    widget._blockActionButtons(false);\r\n                    modalTitleElement.text($.mage.__('Edit Video'));\r\n                    widget._isEditPage = true;\r\n                    imageData = widget._getImage(file);\r\n\r\n                    if (!imageData) {\r\n                        imageData = {\r\n                            url: _.find(widget._gallery.find('.product-image'), function (image) {\r\n                                return image.src.indexOf(file) > -1;\r\n                            }).src\r\n                        };\r\n                    }\r\n\r\n                    widget._onPreview(null, imageData.url, false);\r\n                },\r\n\r\n                /**\r\n                 * Closed\r\n                 */\r\n                closed: function () {\r\n                    widget._onClose();\r\n                    widget.createVideoItemIcons();\r\n                }\r\n            });\r\n            this.toggleButtons();\r\n        },\r\n\r\n        /**\r\n         * @param {String} status\r\n         * @private\r\n         */\r\n        _blockActionButtons: function (status) {\r\n            this.element\r\n                .closest('.mage-new-video-dialog')\r\n                .find('.page-actions-buttons button.video-create-button, .page-actions-buttons button.video-edit')\r\n                .attr('disabled', status);\r\n        },\r\n\r\n        /**\r\n         * Check form\r\n         * @param {Function} callback\r\n         */\r\n        isValid: function (callback) {\r\n            var videoForm = this.element.find(this._videoFormSelector),\r\n                videoLoaded = true;\r\n\r\n            this._blockActionButtons(true);\r\n\r\n            this._videoUrlWidget.trigger('validate_video_url', $.proxy(function () {\r\n\r\n                videoForm.mage('validation', {\r\n\r\n                    /**\r\n                     * @param {jQuery} error\r\n                     * @param {jQuery} element\r\n                     */\r\n                    errorPlacement: function (error, element) {\r\n                        error.insertAfter(element);\r\n                    }\r\n                }).on('highlight.validate', function () {\r\n                    $(this).validation('option');\r\n                });\r\n\r\n                videoForm.validation();\r\n\r\n                if (this._videoRequestComplete === false) {\r\n                    videoLoaded = false;\r\n                }\r\n\r\n                callback(videoForm.valid() && videoLoaded);\r\n            }, this));\r\n\r\n            this._blockActionButtons(false);\r\n        },\r\n\r\n        /**\r\n         * Create video item icons\r\n         */\r\n        createVideoItemIcons: function () {\r\n            var $imageWidget = this._gallery.find('.product-image.video-item'),\r\n                $productGalleryWrapper = $(this._imageProductGalleryWrapperSelector).find('.product-image.video-item');\r\n\r\n            $imageWidget.parent().addClass('video-item');\r\n            $productGalleryWrapper.parent().addClass('video-item');\r\n            $imageWidget.removeClass('video-item');\r\n            $productGalleryWrapper.removeClass('video-item');\r\n            $('.video-item .action-delete').attr('title', $.mage.__('Delete video'));\r\n            $('.video-item .action-delete span').html($.mage.__('Delete video'));\r\n        },\r\n\r\n        /**\r\n         * Fired when click on create video\r\n         * @private\r\n         */\r\n        _onCreate: function () {\r\n            var nvs = this.element.find(this._videoPreviewInputSelector),\r\n                file = nvs.get(0),\r\n                reqClass = 'required-entry _required';\r\n\r\n            if (file && file.files && file.files.length) {\r\n                file = file.files[0];\r\n            } else {\r\n                file = null;\r\n            }\r\n\r\n            if (!file && !this._tempPreviewImageData) {\r\n                nvs.addClass(reqClass);\r\n            }\r\n\r\n            this.isValid($.proxy(\r\n                function (videoValidStatus) {\r\n\r\n                    if (!videoValidStatus) {\r\n                        return;\r\n                    }\r\n\r\n                    if (this._tempPreviewImageData) {\r\n                        this._onImageLoaded(this._tempPreviewImageData, null, null, $.proxy(this.close, this));\r\n                    } else {\r\n                        this._uploadImage(file, null, $.proxy(function () {\r\n                            this.close();\r\n                        }, this));\r\n                    }\r\n\r\n                    nvs.removeClass(reqClass);\r\n                }, this\r\n            ));\r\n        },\r\n\r\n        /**\r\n         * Fired when click on update video\r\n         * @private\r\n         */\r\n        _onUpdate: function () {\r\n            var inputFile, itemId, _inputSelector, mediaFields, imageData, flagChecked, fileName, callback;\r\n\r\n            this.isValid($.proxy(\r\n                function (videoValidStatus) {\r\n\r\n                    if (!videoValidStatus) {\r\n                        return;\r\n                    }\r\n\r\n                    imageData = this.imageData || {};\r\n                    inputFile = this.element.find(this._videoPreviewInputSelector);\r\n                    itemId = this.element.find(this._itemIdSelector).val();\r\n                    itemId = itemId.slice(1, itemId.length - 1);\r\n                    _inputSelector = '[name*=\"[' + itemId + ']\"]';\r\n                    mediaFields = this._gallery.find('input' + _inputSelector);\r\n                    $.each(mediaFields, function (i, el) {\r\n                        var elName = el.name,\r\n                            start = elName.indexOf(itemId) + itemId.length + 2,\r\n                            fieldName = elName.substring(start, el.name.length - 1),\r\n                            _field = this.element.find('#' + fieldName),\r\n                            _tmp;\r\n\r\n                        if (_field.length > 0) {\r\n                            _tmp = _inputSelector.slice(0, _inputSelector.length - 2) + '[' + fieldName + ']\"]';\r\n                            this._gallery.find(_tmp).val(_field.val());\r\n                            imageData[fieldName] = _field.val();\r\n                        }\r\n                    }.bind(this));\r\n                    flagChecked = this.element.find(this._videoDisableinputSelector).attr('checked') ? 1 : 0;\r\n                    this._gallery.find('input[name*=\"' + itemId + '][disabled]\"]').val(flagChecked);\r\n                    this._gallery.find(_inputSelector).siblings('.image-fade').css(\r\n                        'visibility', flagChecked ? 'visible' : 'hidden'\r\n                    );\r\n                    imageData.disabled = flagChecked;\r\n\r\n                    if (this._tempPreviewImageData) {\r\n                        this._onImageLoaded(\r\n                            this._tempPreviewImageData,\r\n                            null,\r\n                            imageData.file,\r\n                            $.proxy(this.close, this)\r\n                        );\r\n\r\n                        return;\r\n                    }\r\n                    fileName = inputFile.get(0).files;\r\n\r\n                    if (!fileName || !fileName.length) {\r\n                        fileName = null;\r\n                    }\r\n                    inputFile.replaceWith(inputFile);\r\n\r\n                    callback = $.proxy(function () {\r\n                        this.close();\r\n                    }, this);\r\n\r\n                    if (fileName) {\r\n                        this._uploadImage(fileName, imageData.file, callback);\r\n                    } else {\r\n                        this._replaceImage(imageData.file, imageData.file, imageData);\r\n                        callback(0, imageData);\r\n                    }\r\n                }, this\r\n            ));\r\n        },\r\n\r\n        /**\r\n         * Delegates call to producwt gallery to update video visibility.\r\n         *\r\n         * @param {Object} imageData\r\n         */\r\n        _updateVisibility: function (imageData) {\r\n            this._gallery.trigger('updateVisibility', {\r\n                disabled: imageData.disabled,\r\n                imageData: imageData\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Delegates call to product gallery to update video title.\r\n         *\r\n         * @param {Object} imageData\r\n         */\r\n        _updateImageTitle: function (imageData) {\r\n            this._gallery.trigger('updateImageTitle', {\r\n                imageData: imageData\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Fired when clicked on cancel\r\n         * @private\r\n         */\r\n        _onCancel: function () {\r\n            this.close();\r\n        },\r\n\r\n        /**\r\n         * Fired when clicked on delete\r\n         * @private\r\n         */\r\n        _onDelete: function () {\r\n            var filename = this.element.find(this._videoImageFilenameselector).val();\r\n\r\n            this._removeImage(filename);\r\n            this.close();\r\n        },\r\n\r\n        /**\r\n         * @param {String} file\r\n         * @param {Function} callback\r\n         * @private\r\n         */\r\n        _readPreviewLocal: function (file, callback) {\r\n            var fr = new FileReader;\r\n\r\n            if (!window.FileReader) {\r\n                return;\r\n            }\r\n\r\n            /**\r\n             * On load end\r\n             */\r\n            fr.onloadend = function () {\r\n                callback(fr.result);\r\n            };\r\n            fr.readAsDataURL(file);\r\n        },\r\n\r\n        /**\r\n         *  Image file input handler\r\n         * @private\r\n         */\r\n        _onImageInputChange: function () {\r\n            var jFile = this.element.find(this._videoPreviewInputSelector),\r\n                file = jFile[0],\r\n                val = jFile.val(),\r\n                prev = this._getPreviewImage(),\r\n                ext = '.' + val.split('.').pop();\r\n\r\n            if (!val) {\r\n                return;\r\n            }\r\n            ext = ext ? ext.toLowerCase() : '';\r\n\r\n            if (\r\n                ext.length < 2 ||\r\n                this._imageTypes.indexOf(ext.toLowerCase()) === -1 || !file.files || !file.files.length\r\n            ) {\r\n                prev.remove();\r\n                this._previewImage = null;\r\n                jFile.val('');\r\n\r\n                return;\r\n            } // end if\r\n            file = file.files[0];\r\n            this._tempPreviewImageData = null;\r\n            this._onPreview(null, file, true);\r\n        },\r\n\r\n        /**\r\n         * Change Preview\r\n         * @param {String} error\r\n         * @param {String} src\r\n         * @param {Boolean} local\r\n         * @private\r\n         */\r\n        _onPreview: function (error, src, local) {\r\n            var img, renderImage;\r\n\r\n            img = this._getPreviewImage();\r\n\r\n            /**\r\n             * Callback\r\n             * @param {String} source\r\n             */\r\n            renderImage = function (source) {\r\n                img.attr({\r\n                    'src': source\r\n                }).show();\r\n            };\r\n\r\n            if (error) {\r\n                return;\r\n            }\r\n\r\n            if (!local) {\r\n                renderImage(src);\r\n            } else {\r\n                this._readPreviewLocal(src, renderImage);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * Return preview image imstance\r\n         * @returns {null}\r\n         * @private\r\n         */\r\n        _getPreviewImage: function () {\r\n\r\n            if (!this._previewImage) {\r\n                this._previewImage = $(document.createElement('img')).css({\r\n                    'width': '100%',\r\n                    'display': 'none',\r\n                    'src': ''\r\n                });\r\n                $(this._previewImage).insertAfter(this.element.find(this._videoPreviewImagePointer));\r\n                $(this._previewImage).attr('data-role', 'video_preview_image');\r\n            }\r\n\r\n            return this._previewImage;\r\n        },\r\n\r\n        /**\r\n         * Close slideout dialog\r\n         */\r\n        close: function () {\r\n            this.element.modal('closeModal');\r\n        },\r\n\r\n        /**\r\n         * Close dialog wrap\r\n         * @private\r\n         */\r\n        _onClose: function () {\r\n            var newVideoForm;\r\n\r\n            this._isEditPage = true;\r\n            this.imageData = null;\r\n\r\n            if (this._previewImage) {\r\n                this._previewImage.remove();\r\n                this._previewImage = null;\r\n            }\r\n            this._tempPreviewImageData = null;\r\n            this.element.trigger('reset');\r\n            newVideoForm = this.element.find(this._videoFormSelector);\r\n\r\n            $(newVideoForm).find('input[type=\"hidden\"][name!=\"form_key\"]').val('');\r\n            this._gallery.find('input[name*=\"' + this.element.find(\r\n                    this._itemIdSelector).val() + '\"]'\r\n            ).parent().removeClass('active');\r\n\r\n            try {\r\n                newVideoForm.validation('clearError');\r\n            } catch (e) {\r\n\r\n            }\r\n            newVideoForm.trigger('reset');\r\n        },\r\n\r\n        /**\r\n         * Find element by fileName\r\n         * @param {String} file\r\n         */\r\n        findElementId: function (file) {\r\n            var elem = this._gallery.find('.image.item').find('input[value=\"' + file + '\"]');\r\n\r\n            if (!elem.length) {\r\n                return null;\r\n            }\r\n\r\n            return $(elem).attr('name').replace('product[media_gallery][images][', '').replace('][file]', '');\r\n        },\r\n\r\n        /**\r\n         * Save image roles\r\n         * @param {Object} imageData\r\n         */\r\n        saveImageRoles: function (imageData) {\r\n            var data = imageData.file,\r\n                self = this,\r\n                containers;\r\n\r\n            if (data && data.length > 0) {\r\n                containers = this._gallery.find('.image-placeholder').siblings('input');\r\n                $.each(containers, function (i, el) {\r\n                    var start = el.name.indexOf('[') + 1,\r\n                        end = el.name.indexOf(']'),\r\n                        imageType = el.name.substring(start, end),\r\n                        imageCheckbox = self.element.find(\r\n                            self._videoFormSelector + ' input[value=\"' + imageType + '\"]'\r\n                        );\r\n\r\n                    self._changeRole(imageType, imageCheckbox.attr('checked'), imageData);\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Change image role\r\n         * @param {String} imageType - role name\r\n         * @param {bool} isEnabled - role active status\r\n         * @param {Object} imageData - image data object\r\n         * @private\r\n         */\r\n        _changeRole: function (imageType, isEnabled, imageData) {\r\n            var needCheked = true;\r\n\r\n            if (!isEnabled) {\r\n                needCheked = this._gallery.find('input[name=\"product[' + imageType + ']\"]').val() === imageData.file;\r\n            }\r\n\r\n            if (!needCheked) {\r\n                return null;\r\n            }\r\n\r\n            this._gallery.trigger('setImageType', {\r\n                type: imageType,\r\n                imageData: isEnabled ? imageData : null\r\n            });\r\n        },\r\n\r\n        /**\r\n         * On open dialog\r\n         * @param {Object} e\r\n         * @param {Object} imageData\r\n         * @private\r\n         */\r\n        _onOpenDialog: function (e, imageData) {\r\n            var formFields, flagChecked, file,\r\n                modal = this.element.closest('.mage-new-video-dialog');\r\n\r\n            if (imageData['media_type'] === 'external-video') {\r\n                this.imageData = imageData;\r\n                modal.find('.video-create-button').hide();\r\n                modal.find('.video-delete-button').show();\r\n                modal.find('.video-edit').show();\r\n                modal.createVideoPlayer({\r\n                    reset: true\r\n                }).createVideoPlayer('reset');\r\n\r\n                formFields = modal.find(this._videoFormSelector).find('.edited-data');\r\n\r\n                $.each(formFields, function (i, field) {\r\n                    $(field).val(imageData[field.name]);\r\n                });\r\n\r\n                flagChecked = imageData.disabled > 0;\r\n                modal.find(this._videoDisableinputSelector).prop('checked', flagChecked);\r\n\r\n                file = modal.find('#file_name').val(imageData.file);\r\n\r\n                $.each(modal.find('.video_image_role'), function () {\r\n                    $(this).prop('checked', false).prop('disabled', false);\r\n                });\r\n\r\n                $.each(this._gallery.find('.image-placeholder').siblings('input:hidden'), function () {\r\n                    var start, end, imageRole;\r\n\r\n                    if ($(this).val() === file.val()) {\r\n                        start = this.name.indexOf('[') + 1;\r\n                        end = this.name.length - 1;\r\n                        imageRole = this.name.substring(start, end);\r\n                        modal.find('#new_video_form input[value=\"' + imageRole + '\"]').prop('checked', true);\r\n                    }\r\n                });\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * Toggle buttons\r\n         */\r\n        toggleButtons: function () {\r\n            var self = this,\r\n                modal = this.element.closest('.mage-new-video-dialog');\r\n\r\n            modal.find('.video-placeholder, .add-video-button-container > button').click(function () {\r\n                modal.find('.video-create-button').show();\r\n                modal.find('.video-delete-button').hide();\r\n                modal.find('.video-edit').hide();\r\n                modal.createVideoPlayer({\r\n                    reset: true\r\n                }).createVideoPlayer('reset').updateInputFields({\r\n                    reset: true\r\n                }).updateInputFields('reset');\r\n            });\r\n            this._gallery.on('click', '.item.video-item', function () {\r\n                modal.find('.video-create-button').hide();\r\n                modal.find('.video-delete-button').show();\r\n                modal.find('.video-edit').show();\r\n                modal.find('.mage-new-video-dialog').createVideoPlayer({\r\n                    reset: true\r\n                }).createVideoPlayer('reset');\r\n            });\r\n            this._gallery.on('click', '.item.video-item:not(.removed)', function () {\r\n                var flagChecked,\r\n                    file,\r\n                    formFields = modal.find('.edited-data'),\r\n                    container = $(this);\r\n\r\n                $.each(formFields, function (i, field) {\r\n                    $(field).val(container.find('input[name*=\"' + field.name + '\"]').val());\r\n                });\r\n\r\n                flagChecked = container.find('input[name*=\"disabled\"]').val() > 0;\r\n                self._gallery.find(self._videoDisableinputSelector).attr('checked', flagChecked);\r\n\r\n                file = self._gallery.find('#file_name').val(container.find('input[name*=\"file\"]').val());\r\n\r\n                $.each(self._gallery.find('.video_image_role'), function () {\r\n                    $(this).prop('checked', false).prop('disabled', false);\r\n                });\r\n\r\n                $.each(self._gallery.find('.image-placeholder').siblings('input:hidden'), function () {\r\n                    var start, end, imageRole;\r\n\r\n                    if ($(this).val() !== file.val()) {\r\n                        return null;\r\n                    }\r\n\r\n                    start = this.name.indexOf('[') + 1;\r\n                    end = this.name.length - 1;\r\n                    imageRole = this.name.substring(start, end);\r\n                    self._gallery.find('input[value=\"' + imageRole + '\"]').prop('checked', true);\r\n                });\r\n            });\r\n        }\r\n    });\r\n\r\n    $('#group-fields-image-management > legend > span').text($.mage.__('Images and Videos'));\r\n\r\n    return $.mage.newVideoDialog;\r\n});\r\n","Magento_ProductVideo/js/video-modal.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'productGallery',\r\n    'jquery/ui',\r\n    'Magento_Ui/js/modal/modal',\r\n    'mage/translate',\r\n    'mage/backend/tree-suggest',\r\n    'mage/backend/validation',\r\n    'newVideoDialog'\r\n], function ($, productGallery) {\r\n    'use strict';\r\n\r\n    $.widget('mage.productGallery', productGallery, {\r\n\r\n        /**\r\n         * Bind events\r\n         * @private\r\n         */\r\n        _bind: function () {\r\n            var events = {},\r\n                itemId;\r\n\r\n            this._super();\r\n\r\n            /**\r\n             * Add item_id value to opened modal\r\n             * @param {Object} event\r\n             */\r\n            events['click ' + this.options.imageSelector] = function (event) {\r\n                if (!$(event.currentTarget).is('.ui-sortable-helper')) {\r\n                    itemId = $(event.currentTarget).find('input')[0].name.match(/\\[([^\\]]*)\\]/g)[2];\r\n                    this.videoDialog.find('#item_id').val(itemId);\r\n                }\r\n            };\r\n            this._on(events);\r\n            this.element.prev().find('[data-role=\"add-video-button\"]').on('click', this.showModal.bind(this));\r\n            this.element.on('openDialog', '.gallery.ui-sortable', $.proxy(this._onOpenDialog, this));\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this._super();\r\n            this.videoDialog = this.element.find('#new-video');\r\n            this.videoDialog.mage('newVideoDialog', this.videoDialog.data('modalInfo'));\r\n        },\r\n\r\n        /**\r\n         * Open dialog for external video\r\n         * @private\r\n         */\r\n        _onOpenDialog: function (e, imageData) {\r\n\r\n            if (imageData['media_type'] !== 'external-video') {\r\n                this._superApply(arguments);\r\n            } else {\r\n                this.showModal();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Fired on trigger \"openModal\"\r\n         */\r\n        showModal: function () {\r\n            this.videoDialog.modal('openModal');\r\n        }\r\n    });\r\n\r\n    return $.mage.productGallery;\r\n});\r\n","Magento_Braintree/js/braintree.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*browser:true*/\r\n/*global define*/\r\ndefine([\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Ui/js/modal/alert',\r\n    'Magento_Ui/js/lib/view/utils/dom-observer',\r\n    'mage/translate',\r\n    'Magento_Braintree/js/validator'\r\n], function ($, Class, alert, domObserver, $t, validator) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n\r\n        defaults: {\r\n            $selector: null,\r\n            selector: 'edit_form',\r\n            container: 'payment_form_braintree',\r\n            active: false,\r\n            scriptLoaded: false,\r\n            braintree: null,\r\n            selectedCardType: null,\r\n            imports: {\r\n                onActiveChange: 'active'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set list of observable attributes\r\n         * @returns {exports.initObservable}\r\n         */\r\n        initObservable: function () {\r\n            var self = this;\r\n\r\n            validator.setConfig(this);\r\n\r\n            self.$selector = $('#' + self.selector);\r\n            this._super()\r\n                .observe([\r\n                    'active',\r\n                    'scriptLoaded',\r\n                    'selectedCardType'\r\n                ]);\r\n\r\n            // re-init payment method events\r\n            self.$selector.off('changePaymentMethod.' + this.code)\r\n                .on('changePaymentMethod.' + this.code, this.changePaymentMethod.bind(this));\r\n\r\n            // listen block changes\r\n            domObserver.get('#' + self.container, function () {\r\n                if (self.scriptLoaded()) {\r\n                    self.$selector.off('submit');\r\n                    self.initBraintree();\r\n                }\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Enable/disable current payment method\r\n         * @param {Object} event\r\n         * @param {String} method\r\n         * @returns {exports.changePaymentMethod}\r\n         */\r\n        changePaymentMethod: function (event, method) {\r\n            this.active(method === this.code);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Triggered when payment changed\r\n         * @param {Boolean} isActive\r\n         */\r\n        onActiveChange: function (isActive) {\r\n            if (!isActive) {\r\n                this.$selector.off('submitOrder.braintree');\r\n\r\n                return;\r\n            }\r\n            this.disableEventListeners();\r\n            window.order.addExcludedPaymentMethod(this.code);\r\n\r\n            if (!this.clientToken) {\r\n                this.error($.mage.__('This payment is not available'));\r\n\r\n                return;\r\n            }\r\n\r\n            this.enableEventListeners();\r\n\r\n            if (!this.scriptLoaded()) {\r\n                this.loadScript();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Load external Braintree SDK\r\n         */\r\n        loadScript: function () {\r\n            var self = this,\r\n                state = self.scriptLoaded;\r\n\r\n            $('body').trigger('processStart');\r\n            require([this.sdkUrl], function (braintree) {\r\n                state(true);\r\n                self.braintree = braintree;\r\n                self.initBraintree();\r\n                $('body').trigger('processStop');\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Retrieves client token and setup Braintree SDK\r\n         */\r\n        initBraintree: function () {\r\n            var self = this;\r\n\r\n            try {\r\n                $('body').trigger('processStart');\r\n\r\n                $.getJSON(self.clientTokenUrl).done(function (response) {\r\n                    self.clientToken = response.clientToken;\r\n                    self._initBraintree();\r\n                }).fail(function (response) {\r\n                    var failed = JSON.parse(response.responseText);\r\n\r\n                    $('body').trigger('processStop');\r\n                    self.error(failed.message);\r\n                });\r\n            } catch (e) {\r\n                $('body').trigger('processStop');\r\n                self.error(e.message);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Setup Braintree SDK\r\n         */\r\n        _initBraintree: function () {\r\n            var self = this;\r\n\r\n            self.braintree.setup(self.clientToken, 'custom', {\r\n                id: self.selector,\r\n                hostedFields: self.getHostedFields(),\r\n\r\n                /**\r\n                 * Triggered when sdk was loaded\r\n                 */\r\n                onReady: function () {\r\n                    $('body').trigger('processStop');\r\n                },\r\n\r\n                /**\r\n                 * Callback for success response\r\n                 * @param {Object} response\r\n                 */\r\n                onPaymentMethodReceived: function (response) {\r\n                    if (self.validateCardType()) {\r\n                        self.setPaymentDetails(response.nonce);\r\n                        self.placeOrder();\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * Error callback\r\n                 * @param {Object} response\r\n                 */\r\n                onError: function (response) {\r\n                    self.error(response.message);\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get hosted fields configuration\r\n         * @returns {Object}\r\n         */\r\n        getHostedFields: function () {\r\n            var self = this,\r\n                fields = {\r\n                    number: {\r\n                        selector: self.getSelector('cc_number')\r\n                    },\r\n                    expirationMonth: {\r\n                        selector: self.getSelector('cc_exp_month'),\r\n                        placeholder: $t('MM')\r\n                    },\r\n                    expirationYear: {\r\n                        selector: self.getSelector('cc_exp_year'),\r\n                        placeholder: $t('YY')\r\n                    },\r\n\r\n                    /**\r\n                     * Triggered when hosted field is changed\r\n                     * @param {Object} event\r\n                     */\r\n                    onFieldEvent: function (event) {\r\n                        return self.fieldEventHandler(event);\r\n                    }\r\n                };\r\n\r\n            if (self.useCvv) {\r\n                fields.cvv = {\r\n                    selector: self.getSelector('cc_cid')\r\n                };\r\n            }\r\n\r\n            return fields;\r\n        },\r\n\r\n        /**\r\n         * Function to handle hosted fields events\r\n         * @param {Object} event\r\n         * @returns {Boolean}\r\n         */\r\n        fieldEventHandler: function (event) {\r\n            var self = this,\r\n                $cardType = $('#' + self.container).find('.icon-type');\r\n\r\n            if (event.isEmpty === false) {\r\n                self.validateCardType();\r\n            }\r\n\r\n            if (event.type !== 'fieldStateChange') {\r\n\r\n                return false;\r\n            }\r\n\r\n            // Handle a change in validation or card type\r\n            if (event.target.fieldKey === 'number') {\r\n                self.selectedCardType(null);\r\n            }\r\n\r\n            // remove previously set classes\r\n            $cardType.attr('class', 'icon-type');\r\n\r\n            if (event.card) {\r\n                $cardType.addClass('icon-type-' + event.card.type);\r\n                self.selectedCardType(\r\n                    validator.getMageCardType(event.card.type, self.getCcAvailableTypes())\r\n                );\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Show alert message\r\n         * @param {String} message\r\n         */\r\n        error: function (message) {\r\n            alert({\r\n                content: message\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Enable form event listeners\r\n         */\r\n        enableEventListeners: function () {\r\n            this.$selector.on('submitOrder.braintree', this.submitOrder.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Disable form event listeners\r\n         */\r\n        disableEventListeners: function () {\r\n            this.$selector.off('submitOrder');\r\n            this.$selector.off('submit');\r\n        },\r\n\r\n        /**\r\n         * Store payment details\r\n         * @param {String} nonce\r\n         */\r\n        setPaymentDetails: function (nonce) {\r\n            var $container = $('#' + this.container);\r\n\r\n            $container.find('[name=\"payment[payment_method_nonce]\"]').val(nonce);\r\n        },\r\n\r\n        /**\r\n         * Trigger order submit\r\n         */\r\n        submitOrder: function () {\r\n            this.$selector.validate().form();\r\n            this.$selector.trigger('afterValidate.beforeSubmit');\r\n            $('body').trigger('processStop');\r\n\r\n            // validate parent form\r\n            if (this.$selector.validate().errorList.length) {\r\n                return false;\r\n            }\r\n\r\n            $('#' + this.container).find('[type=\"submit\"]').trigger('click');\r\n        },\r\n\r\n        /**\r\n         * Place order\r\n         */\r\n        placeOrder: function () {\r\n            $('#' + this.selector).trigger('realOrder');\r\n        },\r\n\r\n        /**\r\n         * Get list of currently available card types\r\n         * @returns {Array}\r\n         */\r\n        getCcAvailableTypes: function () {\r\n            var types = [],\r\n                $options = $(this.getSelector('cc_type')).find('option');\r\n\r\n            $.map($options, function (option) {\r\n                types.push($(option).val());\r\n            });\r\n\r\n            return types;\r\n        },\r\n\r\n        /**\r\n         * Validate current entered card type\r\n         * @returns {Boolean}\r\n         */\r\n        validateCardType: function () {\r\n            var $input = $(this.getSelector('cc_number'));\r\n\r\n            $input.removeClass('braintree-hosted-fields-invalid');\r\n\r\n            if (!this.selectedCardType()) {\r\n                $input.addClass('braintree-hosted-fields-invalid');\r\n\r\n                return false;\r\n            }\r\n            $(this.getSelector('cc_type')).val(this.selectedCardType());\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Get jQuery selector\r\n         * @param {String} field\r\n         * @returns {String}\r\n         */\r\n        getSelector: function (field) {\r\n            return '#' + this.code + '_' + field;\r\n        }\r\n    });\r\n});\r\n","Magento_Braintree/js/vault.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*browser:true*/\r\n/*global define*/\r\ndefine([\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Ui/js/modal/alert'\r\n], function ($, Class, alert) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n        defaults: {\r\n            $selector: null,\r\n            selector: 'edit_form',\r\n            $container: null\r\n        },\r\n\r\n        /**\r\n         * Set list of observable attributes\r\n         * @returns {exports.initObservable}\r\n         */\r\n        initObservable: function () {\r\n            var self = this;\r\n\r\n            self.$selector = $('#' + self.selector);\r\n            self.$container =  $('#' + self.container);\r\n            self.$selector.on(\r\n                'setVaultNotActive.' + self.getCode(),\r\n                function () {\r\n                    self.$selector.off('submitOrder.' + self.getCode());\r\n                }\r\n            );\r\n            self._super();\r\n\r\n            self.initEventHandlers();\r\n\r\n            return self;\r\n        },\r\n\r\n        /**\r\n         * Get payment code\r\n         * @returns {String}\r\n         */\r\n        getCode: function () {\r\n            return this.code;\r\n        },\r\n\r\n        /**\r\n         * Init event handlers\r\n         */\r\n        initEventHandlers: function () {\r\n            $(this.$container).find('[name=\"payment[token_switcher]\"]')\r\n                .on('click', this.selectPaymentMethod.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Select current payment token\r\n         */\r\n        selectPaymentMethod: function () {\r\n            this.disableEventListeners();\r\n            this.enableEventListeners();\r\n        },\r\n\r\n        /**\r\n         * Enable form event listeners\r\n         */\r\n        enableEventListeners: function () {\r\n            this.$selector.on('submitOrder.' + this.getCode(), this.submitOrder.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Disable form event listeners\r\n         */\r\n        disableEventListeners: function () {\r\n            this.$selector.off('submitOrder');\r\n        },\r\n\r\n        /**\r\n         * Pre submit for order\r\n         * @returns {Boolean}\r\n         */\r\n        submitOrder: function () {\r\n            this.$selector.validate().form();\r\n            this.$selector.trigger('afterValidate.beforeSubmit');\r\n            $('body').trigger('processStop');\r\n\r\n            // validate parent form\r\n            if (this.$selector.validate().errorList.length) {\r\n                return false;\r\n            }\r\n            this.getPaymentMethodNonce();\r\n        },\r\n\r\n        /**\r\n         * Place order\r\n         */\r\n        placeOrder: function () {\r\n            this.$selector.trigger('realOrder');\r\n        },\r\n\r\n        /**\r\n         * Send request to get payment method nonce\r\n         */\r\n        getPaymentMethodNonce: function () {\r\n            var self = this;\r\n\r\n            $('body').trigger('processStart');\r\n\r\n            $.getJSON(self.nonceUrl, {\r\n                'public_hash': self.publicHash\r\n            }).done(function (response) {\r\n                self.setPaymentDetails(response.paymentMethodNonce);\r\n                self.placeOrder();\r\n            }).fail(function (response) {\r\n                var failed = JSON.parse(response.responseText);\r\n\r\n                self.error(failed.message);\r\n            }).always(function () {\r\n                $('body').trigger('processStop');\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Store payment details\r\n         * @param {String} nonce\r\n         */\r\n        setPaymentDetails: function (nonce) {\r\n            this.createPublicHashSelector();\r\n\r\n            this.$selector.find('[name=\"payment[public_hash]\"]').val(this.publicHash);\r\n            this.$container.find('#' + this.getNonceSelectorName()).val(nonce);\r\n        },\r\n\r\n        /**\r\n         * Creates public hash selector\r\n         */\r\n        createPublicHashSelector: function () {\r\n            var $input;\r\n\r\n            if (this.$container.find('#' + this.getNonceSelectorName()).size() === 0) {\r\n                $input = $('<input>').attr(\r\n                    {\r\n                        type: 'hidden',\r\n                        id: this.getNonceSelectorName(),\r\n                        name: 'payment[payment_method_nonce]'\r\n                    }\r\n                );\r\n\r\n                $input.appendTo(this.$container);\r\n                $input.prop('disabled', false);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Show alert message\r\n         * @param {String} message\r\n         */\r\n        error: function (message) {\r\n            alert({\r\n                content: message\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get selector name for nonce input\r\n         * @returns {String}\r\n         */\r\n        getNonceSelectorName: function () {\r\n            return 'nonce_' + this.getCode();\r\n        }\r\n    });\r\n});\r\n","Magento_Braintree/js/grid/provider.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'Magento_Ui/js/grid/provider'\r\n], function (_, Provider) {\r\n    'use strict';\r\n\r\n    return Provider.extend({\r\n\r\n        /**\r\n         * Reload grid\r\n         * @returns {exports}\r\n         */\r\n        reload: function () {\r\n            if (this.hasFilters()) {\r\n                this._super();\r\n\r\n                return this;\r\n            }\r\n\r\n            this.trigger('reload');\r\n\r\n            this.onReload({\r\n                items: [],\r\n                totalRecords: 0\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Has filters checker\r\n         * @returns {Boolean}\r\n         */\r\n        hasFilters: function () {\r\n            var params = this.params,\r\n                filters = params.filters || {};\r\n\r\n            return _.keys(filters).length > 1;\r\n        }\r\n    });\r\n});\r\n","Magento_Braintree/js/validator.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*browser:true*/\r\n/*global define*/\r\ndefine([\r\n    'underscore'\r\n], function (_) {\r\n    'use strict';\r\n\r\n    return {\r\n        config: {},\r\n\r\n        /**\r\n         * Set configuration\r\n         * @param {Object} config\r\n         */\r\n        setConfig: function (config) {\r\n            this.config = config;\r\n        },\r\n\r\n        /**\r\n         * Get List of available card types\r\n         * @returns {*|exports.defaults.availableCardTypes|{}}\r\n         */\r\n        getAvailableCardTypes: function () {\r\n            return this.config.availableCardTypes;\r\n        },\r\n\r\n        /**\r\n         * Get list of card types\r\n         * @returns {Object}\r\n         */\r\n        getCcTypesMapper: function () {\r\n            return this.config.ccTypesMapper;\r\n        },\r\n\r\n        /**\r\n         * Find mage card type by Braintree type\r\n         * @param {String} type\r\n         * @param {Object} availableTypes\r\n         * @returns {*}\r\n         */\r\n        getMageCardType: function (type, availableTypes) {\r\n            var storedCardType = null,\r\n                mapper = this.getCcTypesMapper();\r\n\r\n            if (type && typeof mapper[type] !== 'undefined') {\r\n                storedCardType = mapper[type];\r\n\r\n                if (_.indexOf(availableTypes, storedCardType) !== -1) {\r\n                    return storedCardType;\r\n                }\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Filter list of available card types\r\n         * @param {Object} availableTypes\r\n         * @param {Object} countrySpecificCardTypes\r\n         * @returns {Object}\r\n         */\r\n        collectTypes: function (availableTypes, countrySpecificCardTypes) {\r\n            var key,\r\n                filteredTypes = [];\r\n\r\n            for (key in availableTypes) {\r\n                if (_.indexOf(countrySpecificCardTypes, availableTypes[key]) !== -1) {\r\n                    filteredTypes.push(availableTypes[key]);\r\n                }\r\n            }\r\n\r\n            return filteredTypes;\r\n        },\r\n\r\n        /**\r\n         * Get list of card types for country\r\n         * @param {String} countryId\r\n         * @returns {*}\r\n         */\r\n        getCountrySpecificCardTypes: function (countryId) {\r\n            if (typeof this.config.countrySpecificCardTypes[countryId] !== 'undefined') {\r\n\r\n                return this.config.countrySpecificCardTypes[countryId];\r\n            }\r\n\r\n            return false;\r\n        }\r\n    };\r\n});\r\n","Magento_Authorizenet/js/direct-post.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n(function (factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define([\r\n            \"jquery\",\r\n            \"mage/backend/validation\",\r\n            \"prototype\"\r\n        ], factory);\r\n    } else {\r\n        factory(jQuery);\r\n    }\r\n}(function (jQuery) {\r\n\r\nwindow.directPost = Class.create();\r\ndirectPost.prototype = {\r\n    initialize : function(methodCode, iframeId, controller, orderSaveUrl, cgiUrl, nativeAction) {\r\n        var prepare = function (event, method) {\r\n            if (method === 'authorizenet_directpost') {\r\n                this.preparePayment();\r\n            } else {\r\n                jQuery('#edit_form')\r\n                    .off('submitOrder.authorizenet');\r\n            }\r\n        };\r\n        this.iframeId = iframeId;\r\n        this.controller = controller;\r\n        this.orderSaveUrl = orderSaveUrl;\r\n        this.nativeAction = nativeAction;\r\n        this.cgiUrl = cgiUrl;\r\n        this.code = methodCode;\r\n        this.inputs = ['cc_type', 'cc_number', 'expiration', 'expiration_yr', 'cc_cid'];\r\n        this.headers = [];\r\n        this.isValid = true;\r\n        this.paymentRequestSent = false;\r\n        this.orderIncrementId = false;\r\n        this.successUrl = false;\r\n        this.hasError = false;\r\n        this.tmpForm = false;\r\n\r\n        this.onLoadIframe = this.loadIframe.bindAsEventListener(this);\r\n        this.onLoadOrderIframe = this.loadOrderIframe.bindAsEventListener(this);\r\n        this.onSubmitAdminOrder = this.submitAdminOrder.bindAsEventListener(this);\r\n\r\n        jQuery('#edit_form').on('changePaymentMethod', prepare.bind(this));\r\n\r\n        jQuery('#edit_form').trigger(\r\n            'changePaymentMethod',\r\n            [\r\n                jQuery('#edit_form').find(':radio[name=\"payment[method]\"]:checked').val()\r\n            ]\r\n        );\r\n    },\r\n\r\n    validate : function() {\r\n        this.isValid = true;\r\n        this.inputs.each(function(elemIndex) {\r\n            if ($(this.code + '_' + elemIndex)) {\r\n                if (!jQuery.validator.validateElement($(this.code + '_' + elemIndex))) {\r\n                    this.isValid = false;\r\n                }\r\n            }\r\n        }, this);\r\n\r\n        return this.isValid;\r\n    },\r\n\r\n    changeInputOptions : function(param, value) {\r\n        this.inputs.each(function(elemIndex) {\r\n            if ($(this.code + '_' + elemIndex)) {\r\n                $(this.code + '_' + elemIndex).writeAttribute(param, value);\r\n            }\r\n        }, this);\r\n    },\r\n\r\n    preparePayment : function() {\r\n        this.changeInputOptions('autocomplete', 'off');\r\n        jQuery('#edit_form')\r\n            .off('submitOrder')\r\n            .on('submitOrder.authorizenet', this.submitAdminOrder.bind(this));\r\n        if ($(this.iframeId)) {\r\n            // Temporary solution will be removed after refactoring Authorize.Net (sales) functionality\r\n            jQuery('.scalable.save:not(disabled)').removeAttr('onclick');\r\n            jQuery(document).off('click.directPost');\r\n            jQuery(document).on(\r\n                'click.directPost',\r\n                '.scalable.save:not(disabled)',\r\n                jQuery.proxy(this.onSubmitAdminOrder, this)\r\n            );\r\n            $('order-' + this.iframeId).observe('load', this.onLoadOrderIframe);\r\n            $(this.iframeId).observe('load', this.onLoadIframe);\r\n        }\r\n    },\r\n\r\n    loadIframe : function() {\r\n        if (this.paymentRequestSent) {\r\n            if (!this.orderRequestSent) {\r\n                this.paymentRequestSent = false;\r\n                if (!this.hasError) {\r\n                    this.returnQuote();\r\n                } else {\r\n                    this.changeInputOptions('disabled', false);\r\n                    jQuery('body').trigger('processStop');\r\n                    enableElements('save');\r\n                }\r\n            }\r\n            if (this.tmpForm) {\r\n                document.body.removeChild(this.tmpForm);\r\n            }\r\n        }\r\n    },\r\n\r\n    loadOrderIframe : function() {\r\n        if (this.orderRequestSent) {\r\n            $(this.iframeId).hide();\r\n            var data = $('order-' + this.iframeId).contentWindow.document.body.getElementsByTagName('pre')[0].innerHTML;\r\n            this.saveAdminOrderSuccess(data);\r\n            this.orderRequestSent = false;\r\n        }\r\n    },\r\n\r\n    showError : function(msg) {\r\n        this.hasError = true;\r\n        if (this.controller == 'onepage') {\r\n            $(this.iframeId).hide();\r\n            this.resetLoadWaiting();\r\n        }\r\n        alert(msg);\r\n    },\r\n\r\n    returnQuote : function() {\r\n        var url = this.orderSaveUrl.replace('place', 'returnQuote');\r\n        new Ajax.Request(url, {\r\n            onSuccess : function(transport) {\r\n                try {\r\n                    response = transport.responseText.evalJSON(true);\r\n                } catch (e) {\r\n                    response = {};\r\n                }\r\n                if (response.error_message) {\r\n                    alert(response.error_message);\r\n                }\r\n                $(this.iframeId).show();\r\n                this.changeInputOptions('disabled', false);\r\n                jQuery('body').trigger('processStop');\r\n                enableElements('save');\r\n            }.bind(this)\r\n        });\r\n    },\r\n\r\n    setLoadWaiting : function() {\r\n        this.headers.each(function(header) {\r\n            header.removeClassName('allow');\r\n        });\r\n        checkout.setLoadWaiting('review');\r\n    },\r\n\r\n    resetLoadWaiting : function() {\r\n        this.headers.each(function(header) {\r\n            header.addClassName('allow');\r\n        });\r\n        checkout.setLoadWaiting(false);\r\n    },\r\n\r\n    submitAdminOrder : function() {\r\n        // Temporary solution will be removed after refactoring Authorize.Net (sales) functionality\r\n        var editForm = jQuery('#edit_form');\r\n        if (editForm.valid()) {\r\n            // Temporary solution will be removed after refactoring Authorize.Net (sales) functionality\r\n            paymentMethodEl = editForm.find(':radio[name=\"payment[method]\"]:checked');\r\n            this.hasError = false;\r\n            if (paymentMethodEl.val() == this.code) {\r\n                jQuery('body').trigger('processStart');\r\n                setLoaderPosition();\r\n                this.changeInputOptions('disabled', 'disabled');\r\n                this.paymentRequestSent = true;\r\n                this.orderRequestSent = true;\r\n                // Temporary solutions will be removed after refactoring Authorize.Net (sales) functionality\r\n                editForm.attr('action', this.orderSaveUrl);\r\n                editForm.attr('target',\r\n                        jQuery('#order-' + this.iframeId).attr('name'));\r\n                editForm.append(this.createHiddenElement('controller', this.controller));\r\n                disableElements('save');\r\n                // Temporary solutions will be removed after refactoring Authorize.Net (sales) functionality\r\n                order._realSubmit();\r\n            } else {\r\n                editForm.attr('action', this.nativeAction);\r\n                editForm.attr('target', '_top');\r\n                disableElements('save');\r\n                // Temporary solutions will be removed after refactoring Authorize.Net (sales) functionality\r\n                order._realSubmit();\r\n            }\r\n        }\r\n    },\r\n\r\n    recollectQuote : function() {\r\n        var area = [ 'sidebar', 'items', 'shipping_method', 'billing_method', 'totals', 'giftmessage' ];\r\n        area = order.prepareArea(area);\r\n        var url = order.loadBaseUrl + 'block/' + area;\r\n        var info = $('order-items_grid').select('input', 'select', 'textarea');\r\n        var data = {};\r\n        for ( var i = 0; i < info.length; i++) {\r\n            if (!info[i].disabled && (info[i].type != 'checkbox' || info[i].checked)) {\r\n                data[info[i].name] = info[i].getValue();\r\n            }\r\n        }\r\n        data.reset_shipping = true;\r\n        data.update_items = true;\r\n        if ($('coupons:code') && $F('coupons:code')) {\r\n            data['order[coupon][code]'] = $F('coupons:code');\r\n        }\r\n        data.json = true;\r\n        new Ajax.Request(url, {\r\n            parameters : data,\r\n            loaderArea : 'html-body',\r\n            onSuccess : function(transport) {\r\n                jQuery('#edit_form').submit();\r\n            }.bind(this)\r\n        });\r\n\r\n    },\r\n\r\n    saveAdminOrderSuccess : function(data) {\r\n        try {\r\n            response = data.evalJSON(true);\r\n        } catch (e) {\r\n            response = {};\r\n        }\r\n\r\n        if (response.directpost) {\r\n            this.orderIncrementId = response.directpost.fields.x_invoice_num;\r\n            var paymentData = {};\r\n            for ( var key in response.directpost.fields) {\r\n                paymentData[key] = response.directpost.fields[key];\r\n            }\r\n            var preparedData = this.preparePaymentRequest(paymentData);\r\n            this.sendPaymentRequest(preparedData);\r\n        } else {\r\n            if (response.redirect) {\r\n                window.location = response.redirect;\r\n            }\r\n            if (response.error_messages) {\r\n                var msg = response.error_messages;\r\n                if (typeof (msg) == 'object') {\r\n                    msg = msg.join(\"\\n\");\r\n                }\r\n                if (msg) {\r\n                    alert(msg);\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    preparePaymentRequest : function(data) {\r\n        if ($(this.code + '_cc_cid')) {\r\n            data.x_card_code = $(this.code + '_cc_cid').value;\r\n        }\r\n        var year = $(this.code + '_expiration_yr').value;\r\n        if (year.length > 2) {\r\n            year = year.substring(2);\r\n        }\r\n        var month = parseInt($(this.code + '_expiration').value, 10);\r\n        if (month < 10) {\r\n            month = '0' + month;\r\n        }\r\n\r\n        data.x_exp_date = month + '/' + year;\r\n        data.x_card_num = $(this.code + '_cc_number').value;\r\n\r\n        return data;\r\n    },\r\n\r\n    sendPaymentRequest : function(preparedData) {\r\n        this.recreateIframe();\r\n        this.tmpForm = document.createElement('form');\r\n        this.tmpForm.style.display = 'none';\r\n        this.tmpForm.enctype = 'application/x-www-form-urlencoded';\r\n        this.tmpForm.method = 'POST';\r\n        document.body.appendChild(this.tmpForm);\r\n        this.tmpForm.action = this.cgiUrl;\r\n        this.tmpForm.target = $(this.iframeId).readAttribute('name');\r\n        this.tmpForm.setAttribute('target', $(this.iframeId).readAttribute('name'));\r\n\r\n        for ( var param in preparedData) {\r\n            this.tmpForm.appendChild(this.createHiddenElement(param, preparedData[param]));\r\n        }\r\n\r\n        this.paymentRequestSent = true;\r\n        this.tmpForm.submit();\r\n    },\r\n\r\n    createHiddenElement : function(name, value) {\r\n        var field;\r\n        if (isIE) {\r\n            field = document.createElement('input');\r\n            field.setAttribute('type', 'hidden');\r\n            field.setAttribute('name', name);\r\n            field.setAttribute('value', value);\r\n        } else {\r\n            field = document.createElement('input');\r\n            field.type = 'hidden';\r\n            field.name = name;\r\n            field.value = value;\r\n        }\r\n\r\n        return field;\r\n    },\r\n\r\n    recreateIframe : function() {\r\n        if ($(this.iframeId)) {\r\n            var nextElement = $(this.iframeId).next();\r\n            var src = $(this.iframeId).readAttribute('src');\r\n            var name = $(this.iframeId).readAttribute('name');\r\n            $(this.iframeId).stopObserving();\r\n            $(this.iframeId).remove();\r\n            var iframe = '<iframe id=\"' + this.iframeId +\r\n                '\" allowtransparency=\"true\" frameborder=\"0\"  name=\"' + name +\r\n                '\" style=\"display:none;width:100%;background-color:transparent\" src=\"' + src + '\" />';\r\n            Element.insert(nextElement, {'before':iframe});\r\n            $(this.iframeId).observe('load', this.onLoadIframe);\r\n        }\r\n    }\r\n};\r\n}));\r\n","Magento_AdminNotification/toolbar_entry.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    \"jquery\",\r\n    \"jquery/ui\",\r\n    \"domReady!\"\r\n], function ($) {\r\n    'use strict';\r\n\r\n    // Mark notification as read via AJAX call\r\n    var markNotificationAsRead = function (notificationId) {\r\n            var requestUrl = $('.notifications-wrapper .admin__action-dropdown-menu').attr('data-mark-as-read-url');\r\n            $.ajax({\r\n                url: requestUrl,\r\n                type: 'POST',\r\n                dataType: 'json',\r\n                data: {\r\n                    id: notificationId\r\n                },\r\n                showLoader: false\r\n            });\r\n        },\r\n\r\n        notificationCount = $('.notifications-wrapper').attr('data-notification-count'),\r\n\r\n        // Remove notification from the list\r\n        removeNotificationFromList = function (notificationEntry) {\r\n            notificationEntry.remove();\r\n            notificationCount--;\r\n            $('.notifications-wrapper').attr('data-notification-count', notificationCount);\r\n\r\n            if (notificationCount == 0) {\r\n                // Change appearance of the bubble and its behavior when the last notification is removed\r\n                $('.notifications-wrapper .admin__action-dropdown-menu').remove();\r\n                var notificationIcon = $('.notifications-wrapper .notifications-icon');\r\n                notificationIcon.removeAttr('data-toggle');\r\n                notificationIcon.off('click.dropdown');\r\n                $('.notifications-action .notifications-counter').text('').hide();\r\n            } else {\r\n                // Change top counter only for allowable range\r\n                if (notificationCount <= 99) {\r\n                    $('.notifications-action .notifications-counter').text(notificationCount);\r\n                }\r\n                $('.notifications-entry-last .notifications-counter').text(notificationCount);\r\n                // Modify caption of the 'See All' link\r\n                var actionElement = $('.notifications-wrapper .admin__action-dropdown-menu .last .action-more');\r\n                actionElement.text(actionElement.text().replace(/\\d+/, notificationCount));\r\n            }\r\n        },\r\n\r\n        // Show notification details\r\n        showNotificationDetails = function (notificationEntry) {\r\n            var notificationDescription = notificationEntry.find('.notifications-entry-description'),\r\n                notificationDescriptionEnd = notificationEntry.find('.notifications-entry-description-end');\r\n\r\n            if (notificationDescriptionEnd.length > 0) {\r\n                notificationDescriptionEnd.addClass('_show');\r\n            }\r\n\r\n            if(notificationDescription.hasClass('_cutted')) {\r\n                notificationDescription.removeClass('_cutted');\r\n            }\r\n        };\r\n\r\n    // Show notification description when corresponding item is clicked\r\n    $('.notifications-wrapper .admin__action-dropdown-menu .notifications-entry').on('click.showNotification', function (event) {\r\n        // hide notification dropdown\r\n        $('.notifications-wrapper .notifications-icon').trigger('click.dropdown');\r\n\r\n        showNotificationDetails($(this));\r\n        event.stopPropagation();\r\n\r\n    });\r\n\r\n    // Remove corresponding notification from the list and mark it as read\r\n    $('.notifications-close').on('click.removeNotification', function (event) {\r\n        var notificationEntry = $(this).closest('.notifications-entry'),\r\n            notificationId = notificationEntry.attr('data-notification-id');\r\n\r\n        markNotificationAsRead(notificationId);\r\n        removeNotificationFromList(notificationEntry);\r\n\r\n        // Checking for last unread notification to hide dropdown\r\n        if (notificationCount == 0) {\r\n            $('.notifications-wrapper').removeClass('active')\r\n                                       .find('.notifications-action').removeAttr('data-toggle')\r\n                                                                     .off('click.dropdown');\r\n        }\r\n        event.stopPropagation();\r\n    });\r\n\r\n    // Hide notifications bubble\r\n    if (notificationCount == 0) {\r\n        $('.notifications-action .notifications-counter').hide();\r\n    } else {\r\n        $('.notifications-action .notifications-counter').show();\r\n    }\r\n\r\n});\r\n","Magento_AdminNotification/js/system/messages/popup.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/modal'\r\n], function ($, modal) {\r\n    'use strict';\r\n\r\n    return function (data, element) {\r\n\r\n        if (modal.modal) {\r\n            modal.modal.html($(element).html());\r\n        } else {\r\n            modal.modal = $(element).modal({\r\n                modalClass: data.class,\r\n                type: 'popup',\r\n                buttons: []\r\n            });\r\n        }\r\n\r\n        modal.modal.modal('openModal');\r\n    };\r\n});\r\n","Magento_AdminNotification/system/notification.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'jquery/ui',\r\n    'Magento_Ui/js/modal/modal'\r\n], function ($, mageTemplate) {\r\n    'use strict';\r\n\r\n    $.widget('mage.systemMessageDialog', $.mage.modal, {\r\n        options: {\r\n            modalClass: 'modal-system-messages',\r\n            systemMessageTemplate:\r\n                '<% _.each(data.items, function(item) { %>' +\r\n                    '<li class=\"message message-warning <% if (item.severity == 1) { %>error<% } else { %>warning<% } %>\">' +\r\n                        '<%= item.text %>' +\r\n                    '</li>' +\r\n                '<% }); %>'\r\n        },\r\n\r\n        _create: function() {\r\n            this.options.title = $('#message-system-all').attr('title');\r\n            this._super();\r\n        },\r\n\r\n        openModal: function (severity) {\r\n            var superMethod = $.proxy(this._super, this);\r\n            //this.modal.options\r\n\r\n            $.ajax({\r\n                url: this.options.ajaxUrl,\r\n                type: 'GET',\r\n                data: {\r\n                    severity: severity\r\n                }\r\n            }).done($.proxy(function (data) {\r\n                var tmpl = mageTemplate(this.options.systemMessageTemplate, {\r\n                    data: {\r\n                        items: data\r\n                    }\r\n                });\r\n\r\n                tmpl = $(tmpl);\r\n\r\n                this.element.html(\r\n                    $('<ul />', {\r\n                        'class': 'message-system-list'\r\n                    }).append(tmpl)\r\n                ).trigger('contentUpdated');\r\n\r\n                superMethod();\r\n            }, this));\r\n\r\n            return this;\r\n        },\r\n        closeModal: function () {\r\n            this._super();\r\n        }\r\n    });\r\n\r\n    $(document).ready(function () {\r\n        $('#system_messages .message-system-short .error').on('click', function () {\r\n            $('#message-system-all').systemMessageDialog('openModal', 1);\r\n        });\r\n\r\n        $('#system_messages .message-system-short .warning').on('click', function () {\r\n            $('#message-system-all').systemMessageDialog('openModal', 2);\r\n        });\r\n    });\r\n\r\n    return $.mage.systemMessageDialog;\r\n});\r\n","Magento_Marketplace/default.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (configFromPage) {\r\n        var url = configFromPage.url;\r\n\r\n        $.ajax({\r\n            method: 'GET',\r\n            url: url\r\n        }).done(function (data) {\r\n            $('div[data-role=partners-block]').html(data);\r\n        });\r\n    };\r\n});\r\n","Mageplaza_Core/js/jscolor.min.js":"/**\r\n * jscolor - JavaScript Color Picker\r\n *\r\n * @link    http://jscolor.com\r\n * @license For open source use: GPLv3\r\n *          For commercial use: JSColor Commercial License\r\n * @author  Jan Odvarko\r\n *\r\n * See usage examples at http://jscolor.com/examples/\r\n */\"use strict\";window.jscolor||(window.jscolor=function(){var e={register:function(){e.attachDOMReadyEvent(e.init),e.attachEvent(document,\"mousedown\",e.onDocumentMouseDown),e.attachEvent(document,\"touchstart\",e.onDocumentTouchStart),e.attachEvent(window,\"resize\",e.onWindowResize)},init:function(){e.jscolor.lookupClass&&e.jscolor.installByClassName(e.jscolor.lookupClass)},tryInstallOnElements:function(t,n){var r=new RegExp(\"(^|\\\\s)(\"+n+\")(\\\\s*(\\\\{[^}]*\\\\})|\\\\s|$)\",\"i\");for(var i=0;i<t.length;i+=1){if(t[i].type!==undefined&&t[i].type.toLowerCase()==\"color\"&&e.isColorAttrSupported)continue;var s;if(!t[i].jscolor&&t[i].className&&(s=t[i].className.match(r))){var o=t[i],u=null,a=e.getDataAttr(o,\"jscolor\");a!==null?u=a:s[4]&&(u=s[4]);var f={};if(u)try{f=(new Function(\"return (\"+u+\")\"))()}catch(l){e.warn(\"Error parsing jscolor options: \"+l+\":\\n\"+u)}o.jscolor=new e.jscolor(o,f)}}},isColorAttrSupported:function(){var e=document.createElement(\"input\");if(e.setAttribute){e.setAttribute(\"type\",\"color\");if(e.type.toLowerCase()==\"color\")return!0}return!1}(),isCanvasSupported:function(){var e=document.createElement(\"canvas\");return!!e.getContext&&!!e.getContext(\"2d\")}(),fetchElement:function(e){return typeof e==\"string\"?document.getElementById(e):e},isElementType:function(e,t){return e.nodeName.toLowerCase()===t.toLowerCase()},getDataAttr:function(e,t){var n=\"data-\"+t,r=e.getAttribute(n);return r!==null?r:null},attachEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent(\"on\"+t,n)},detachEvent:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent(\"on\"+t,n)},_attachedGroupEvents:{},attachGroupEvent:function(t,n,r,i){e._attachedGroupEvents.hasOwnProperty(t)||(e._attachedGroupEvents[t]=[]),e._attachedGroupEvents[t].push([n,r,i]),e.attachEvent(n,r,i)},detachGroupEvents:function(t){if(e._attachedGroupEvents.hasOwnProperty(t)){for(var n=0;n<e._attachedGroupEvents[t].length;n+=1){var r=e._attachedGroupEvents[t][n];e.detachEvent(r[0],r[1],r[2])}delete e._attachedGroupEvents[t]}},attachDOMReadyEvent:function(e){var t=!1,n=function(){t||(t=!0,e())};if(document.readyState===\"complete\"){setTimeout(n,1);return}if(document.addEventListener)document.addEventListener(\"DOMContentLoaded\",n,!1),window.addEventListener(\"load\",n,!1);else if(document.attachEvent){document.attachEvent(\"onreadystatechange\",function(){document.readyState===\"complete\"&&(document.detachEvent(\"onreadystatechange\",arguments.callee),n())}),window.attachEvent(\"onload\",n);if(document.documentElement.doScroll&&window==window.top){var r=function(){if(!document.body)return;try{document.documentElement.doScroll(\"left\"),n()}catch(e){setTimeout(r,1)}};r()}}},warn:function(e){window.console&&window.console.warn&&window.console.warn(e)},preventDefault:function(e){e.preventDefault&&e.preventDefault(),e.returnValue=!1},captureTarget:function(t){t.setCapture&&(e._capturedTarget=t,e._capturedTarget.setCapture())},releaseTarget:function(){e._capturedTarget&&(e._capturedTarget.releaseCapture(),e._capturedTarget=null)},fireEvent:function(e,t){if(!e)return;if(document.createEvent){var n=document.createEvent(\"HTMLEvents\");n.initEvent(t,!0,!0),e.dispatchEvent(n)}else if(document.createEventObject){var n=document.createEventObject();e.fireEvent(\"on\"+t,n)}else e[\"on\"+t]&&e[\"on\"+t]()},classNameToList:function(e){return e.replace(/^\\s+|\\s+$/g,\"\").split(/\\s+/)},hasClass:function(e,t){return t?-1!=(\" \"+e.className.replace(/\\s+/g,\" \")+\" \").indexOf(\" \"+t+\" \"):!1},setClass:function(t,n){var r=e.classNameToList(n);for(var i=0;i<r.length;i+=1)e.hasClass(t,r[i])||(t.className+=(t.className?\" \":\"\")+r[i])},unsetClass:function(t,n){var r=e.classNameToList(n);for(var i=0;i<r.length;i+=1){var s=new RegExp(\"^\\\\s*\"+r[i]+\"\\\\s*|\"+\"\\\\s*\"+r[i]+\"\\\\s*$|\"+\"\\\\s+\"+r[i]+\"(\\\\s+)\",\"g\");t.className=t.className.replace(s,\"$1\")}},getStyle:function(e){return window.getComputedStyle?window.getComputedStyle(e):e.currentStyle},setStyle:function(){var e=document.createElement(\"div\"),t=function(t){for(var n=0;n<t.length;n+=1)if(t[n]in e.style)return t[n]},n={borderRadius:t([\"borderRadius\",\"MozBorderRadius\",\"webkitBorderRadius\"]),boxShadow:t([\"boxShadow\",\"MozBoxShadow\",\"webkitBoxShadow\"])};return function(e,t,r){switch(t.toLowerCase()){case\"opacity\":var i=Math.round(parseFloat(r)*100);e.style.opacity=r,e.style.filter=\"alpha(opacity=\"+i+\")\";break;default:e.style[n[t]]=r}}}(),setBorderRadius:function(t,n){e.setStyle(t,\"borderRadius\",n||\"0\")},setBoxShadow:function(t,n){e.setStyle(t,\"boxShadow\",n||\"none\")},getElementPos:function(t,n){var r=0,i=0,s=t.getBoundingClientRect();r=s.left,i=s.top;if(!n){var o=e.getViewPos();r+=o[0],i+=o[1]}return[r,i]},getElementSize:function(e){return[e.offsetWidth,e.offsetHeight]},getAbsPointerPos:function(e){e||(e=window.event);var t=0,n=0;return typeof e.changedTouches!=\"undefined\"&&e.changedTouches.length?(t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY):typeof e.clientX==\"number\"&&(t=e.clientX,n=e.clientY),{x:t,y:n}},getRelPointerPos:function(e){e||(e=window.event);var t=e.target||e.srcElement,n=t.getBoundingClientRect(),r=0,i=0,s=0,o=0;return typeof e.changedTouches!=\"undefined\"&&e.changedTouches.length?(s=e.changedTouches[0].clientX,o=e.changedTouches[0].clientY):typeof e.clientX==\"number\"&&(s=e.clientX,o=e.clientY),r=s-n.left,i=o-n.top,{x:r,y:i}},getViewPos:function(){var e=document.documentElement;return[(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0),(window.pageYOffset||e.scrollTop)-(e.clientTop||0)]},getViewSize:function(){var e=document.documentElement;return[window.innerWidth||e.clientWidth,window.innerHeight||e.clientHeight]},redrawPosition:function(){if(e.picker&&e.picker.owner){var t=e.picker.owner,n,r;t.fixed?(n=e.getElementPos(t.targetElement,!0),r=[0,0]):(n=e.getElementPos(t.targetElement),r=e.getViewPos());var i=e.getElementSize(t.targetElement),s=e.getViewSize(),o=e.getPickerOuterDims(t),u,a,f;switch(t.position.toLowerCase()){case\"left\":u=1,a=0,f=-1;break;case\"right\":u=1,a=0,f=1;break;case\"top\":u=0,a=1,f=-1;break;default:u=0,a=1,f=1}var l=(i[a]+o[a])/2;if(!t.smartPosition)var c=[n[u],n[a]+i[a]-l+l*f];else var c=[-r[u]+n[u]+o[u]>s[u]?-r[u]+n[u]+i[u]/2>s[u]/2&&n[u]+i[u]-o[u]>=0?n[u]+i[u]-o[u]:n[u]:n[u],-r[a]+n[a]+i[a]+o[a]-l+l*f>s[a]?-r[a]+n[a]+i[a]/2>s[a]/2&&n[a]+i[a]-l-l*f>=0?n[a]+i[a]-l-l*f:n[a]+i[a]-l+l*f:n[a]+i[a]-l+l*f>=0?n[a]+i[a]-l+l*f:n[a]+i[a]-l-l*f];var h=c[u],p=c[a],d=t.fixed?\"fixed\":\"absolute\",v=(c[0]+o[0]>n[0]||c[0]<n[0]+i[0])&&c[1]+o[1]<n[1]+i[1];e._drawPosition(t,h,p,d,v)}},_drawPosition:function(t,n,r,i,s){var o=s?0:t.shadowBlur;e.picker.wrap.style.position=i,e.picker.wrap.style.left=n+\"px\",e.picker.wrap.style.top=r+\"px\",e.setBoxShadow(e.picker.boxS,t.shadow?new e.BoxShadow(0,o,t.shadowBlur,0,t.shadowColor):null)},getPickerDims:function(t){var n=!!e.getSliderComponent(t),r=[2*t.insetWidth+2*t.padding+t.width+(n?2*t.insetWidth+e.getPadToSliderPadding(t)+t.sliderSize:0),2*t.insetWidth+2*t.padding+t.height+(t.closable?2*t.insetWidth+t.padding+t.buttonHeight:0)];return r},getPickerOuterDims:function(t){var n=e.getPickerDims(t);return[n[0]+2*t.borderWidth,n[1]+2*t.borderWidth]},getPadToSliderPadding:function(e){return Math.max(e.padding,1.5*(2*e.pointerBorderWidth+e.pointerThickness))},getPadYComponent:function(e){switch(e.mode.charAt(1).toLowerCase()){case\"v\":return\"v\"}return\"s\"},getSliderComponent:function(e){if(e.mode.length>2)switch(e.mode.charAt(2).toLowerCase()){case\"s\":return\"s\";case\"v\":return\"v\"}return null},onDocumentMouseDown:function(t){t||(t=window.event);var n=t.target||t.srcElement;n._jscLinkedInstance?n._jscLinkedInstance.showOnClick&&n._jscLinkedInstance.show():n._jscControlName?e.onControlPointerStart(t,n,n._jscControlName,\"mouse\"):e.picker&&e.picker.owner&&e.picker.owner.hide()},onDocumentTouchStart:function(t){t||(t=window.event);var n=t.target||t.srcElement;n._jscLinkedInstance?n._jscLinkedInstance.showOnClick&&n._jscLinkedInstance.show():n._jscControlName?e.onControlPointerStart(t,n,n._jscControlName,\"touch\"):e.picker&&e.picker.owner&&e.picker.owner.hide()},onWindowResize:function(t){e.redrawPosition()},onParentScroll:function(t){e.picker&&e.picker.owner&&e.picker.owner.hide()},_pointerMoveEvent:{mouse:\"mousemove\",touch:\"touchmove\"},_pointerEndEvent:{mouse:\"mouseup\",touch:\"touchend\"},_pointerOrigin:null,_capturedTarget:null,onControlPointerStart:function(t,n,r,i){var s=n._jscInstance;e.preventDefault(t),e.captureTarget(n);var o=function(s,o){e.attachGroupEvent(\"drag\",s,e._pointerMoveEvent[i],e.onDocumentPointerMove(t,n,r,i,o)),e.attachGroupEvent(\"drag\",s,e._pointerEndEvent[i],e.onDocumentPointerEnd(t,n,r,i))};o(document,[0,0]);if(window.parent&&window.frameElement){var u=window.frameElement.getBoundingClientRect(),a=[-u.left,-u.top];o(window.parent.window.document,a)}var f=e.getAbsPointerPos(t),l=e.getRelPointerPos(t);e._pointerOrigin={x:f.x-l.x,y:f.y-l.y};switch(r){case\"pad\":switch(e.getSliderComponent(s)){case\"s\":s.hsv[1]===0&&s.fromHSV(null,100,null);break;case\"v\":s.hsv[2]===0&&s.fromHSV(null,null,100)}e.setPad(s,t,0,0);break;case\"sld\":e.setSld(s,t,0)}e.dispatchFineChange(s)},onDocumentPointerMove:function(t,n,r,i,s){return function(t){var i=n._jscInstance;switch(r){case\"pad\":t||(t=window.event),e.setPad(i,t,s[0],s[1]),e.dispatchFineChange(i);break;case\"sld\":t||(t=window.event),e.setSld(i,t,s[1]),e.dispatchFineChange(i)}}},onDocumentPointerEnd:function(t,n,r,i){return function(t){var r=n._jscInstance;e.detachGroupEvents(\"drag\"),e.releaseTarget(),e.dispatchChange(r)}},dispatchChange:function(t){t.valueElement&&e.isElementType(t.valueElement,\"input\")&&e.fireEvent(t.valueElement,\"change\")},dispatchFineChange:function(e){if(e.onFineChange){var t;typeof e.onFineChange==\"string\"?t=new Function(e.onFineChange):t=e.onFineChange,t.call(e)}},setPad:function(t,n,r,i){var s=e.getAbsPointerPos(n),o=r+s.x-e._pointerOrigin.x-t.padding-t.insetWidth,u=i+s.y-e._pointerOrigin.y-t.padding-t.insetWidth,a=o*(360/(t.width-1)),f=100-u*(100/(t.height-1));switch(e.getPadYComponent(t)){case\"s\":t.fromHSV(a,f,null,e.leaveSld);break;case\"v\":t.fromHSV(a,null,f,e.leaveSld)}},setSld:function(t,n,r){var i=e.getAbsPointerPos(n),s=r+i.y-e._pointerOrigin.y-t.padding-t.insetWidth,o=100-s*(100/(t.height-1));switch(e.getSliderComponent(t)){case\"s\":t.fromHSV(null,o,null,e.leavePad);break;case\"v\":t.fromHSV(null,null,o,e.leavePad)}},_vmlNS:\"jsc_vml_\",_vmlCSS:\"jsc_vml_css_\",_vmlReady:!1,initVML:function(){if(!e._vmlReady){var t=document;t.namespaces[e._vmlNS]||t.namespaces.add(e._vmlNS,\"urn:schemas-microsoft-com:vml\");if(!t.styleSheets[e._vmlCSS]){var n=[\"shape\",\"shapetype\",\"group\",\"background\",\"path\",\"formulas\",\"handles\",\"fill\",\"stroke\",\"shadow\",\"textbox\",\"textpath\",\"imagedata\",\"line\",\"polyline\",\"curve\",\"rect\",\"roundrect\",\"oval\",\"arc\",\"image\"],r=t.createStyleSheet();r.owningElement.id=e._vmlCSS;for(var i=0;i<n.length;i+=1)r.addRule(e._vmlNS+\"\\\\:\"+n[i],\"behavior:url(#default#VML);\")}e._vmlReady=!0}},createPalette:function(){var t={elm:null,draw:null};if(e.isCanvasSupported){var n=document.createElement(\"canvas\"),r=n.getContext(\"2d\"),i=function(e,t,i){n.width=e,n.height=t,r.clearRect(0,0,n.width,n.height);var s=r.createLinearGradient(0,0,n.width,0);s.addColorStop(0,\"#F00\"),s.addColorStop(1/6,\"#FF0\"),s.addColorStop(2/6,\"#0F0\"),s.addColorStop(.5,\"#0FF\"),s.addColorStop(4/6,\"#00F\"),s.addColorStop(5/6,\"#F0F\"),s.addColorStop(1,\"#F00\"),r.fillStyle=s,r.fillRect(0,0,n.width,n.height);var o=r.createLinearGradient(0,0,0,n.height);switch(i.toLowerCase()){case\"s\":o.addColorStop(0,\"rgba(255,255,255,0)\"),o.addColorStop(1,\"rgba(255,255,255,1)\");break;case\"v\":o.addColorStop(0,\"rgba(0,0,0,0)\"),o.addColorStop(1,\"rgba(0,0,0,1)\")}r.fillStyle=o,r.fillRect(0,0,n.width,n.height)};t.elm=n,t.draw=i}else{e.initVML();var s=document.createElement(\"div\");s.style.position=\"relative\",s.style.overflow=\"hidden\";var o=document.createElement(e._vmlNS+\":fill\");o.type=\"gradient\",o.method=\"linear\",o.angle=\"90\",o.colors=\"16.67% #F0F, 33.33% #00F, 50% #0FF, 66.67% #0F0, 83.33% #FF0\";var u=document.createElement(e._vmlNS+\":rect\");u.style.position=\"absolute\",u.style.left=\"-1px\",u.style.top=\"-1px\",u.stroked=!1,u.appendChild(o),s.appendChild(u);var a=document.createElement(e._vmlNS+\":fill\");a.type=\"gradient\",a.method=\"linear\",a.angle=\"180\",a.opacity=\"0\";var f=document.createElement(e._vmlNS+\":rect\");f.style.position=\"absolute\",f.style.left=\"-1px\",f.style.top=\"-1px\",f.stroked=!1,f.appendChild(a),s.appendChild(f);var i=function(e,t,n){s.style.width=e+\"px\",s.style.height=t+\"px\",u.style.width=f.style.width=e+1+\"px\",u.style.height=f.style.height=t+1+\"px\",o.color=\"#F00\",o.color2=\"#F00\";switch(n.toLowerCase()){case\"s\":a.color=a.color2=\"#FFF\";break;case\"v\":a.color=a.color2=\"#000\"}};t.elm=s,t.draw=i}return t},createSliderGradient:function(){var t={elm:null,draw:null};if(e.isCanvasSupported){var n=document.createElement(\"canvas\"),r=n.getContext(\"2d\"),i=function(e,t,i,s){n.width=e,n.height=t,r.clearRect(0,0,n.width,n.height);var o=r.createLinearGradient(0,0,0,n.height);o.addColorStop(0,i),o.addColorStop(1,s),r.fillStyle=o,r.fillRect(0,0,n.width,n.height)};t.elm=n,t.draw=i}else{e.initVML();var s=document.createElement(\"div\");s.style.position=\"relative\",s.style.overflow=\"hidden\";var o=document.createElement(e._vmlNS+\":fill\");o.type=\"gradient\",o.method=\"linear\",o.angle=\"180\";var u=document.createElement(e._vmlNS+\":rect\");u.style.position=\"absolute\",u.style.left=\"-1px\",u.style.top=\"-1px\",u.stroked=!1,u.appendChild(o),s.appendChild(u);var i=function(e,t,n,r){s.style.width=e+\"px\",s.style.height=t+\"px\",u.style.width=e+1+\"px\",u.style.height=t+1+\"px\",o.color=n,o.color2=r};t.elm=s,t.draw=i}return t},leaveValue:1,leaveStyle:2,leavePad:4,leaveSld:8,BoxShadow:function(){var e=function(e,t,n,r,i,s){this.hShadow=e,this.vShadow=t,this.blur=n,this.spread=r,this.color=i,this.inset=!!s};return e.prototype.toString=function(){var e=[Math.round(this.hShadow)+\"px\",Math.round(this.vShadow)+\"px\",Math.round(this.blur)+\"px\",Math.round(this.spread)+\"px\",this.color];return this.inset&&e.push(\"inset\"),e.join(\" \")},e}(),jscolor:function(t,n){function i(e,t,n){e/=255,t/=255,n/=255;var r=Math.min(Math.min(e,t),n),i=Math.max(Math.max(e,t),n),s=i-r;if(s===0)return[null,0,100*i];var o=e===r?3+(n-t)/s:t===r?5+(e-n)/s:1+(t-e)/s;return[60*(o===6?0:o),100*(s/i),100*i]}function s(e,t,n){var r=255*(n/100);if(e===null)return[r,r,r];e/=60,t/=100;var i=Math.floor(e),s=i%2?e-i:1-(e-i),o=r*(1-t),u=r*(1-t*s);switch(i){case 6:case 0:return[r,u,o];case 1:return[u,r,o];case 2:return[o,r,u];case 3:return[o,u,r];case 4:return[u,o,r];case 5:return[r,o,u]}}function o(){e.unsetClass(d.targetElement,d.activeClass),e.picker.wrap.parentNode.removeChild(e.picker.wrap),delete e.picker.owner}function u(){function l(){var e=d.insetColor.split(/\\s+/),n=e.length<2?e[0]:e[1]+\" \"+e[0]+\" \"+e[0]+\" \"+e[1];t.btn.style.borderColor=n}d._processParentElementsInDOM(),e.picker||(e.picker={owner:null,wrap:document.createElement(\"div\"),box:document.createElement(\"div\"),boxS:document.createElement(\"div\"),boxB:document.createElement(\"div\"),pad:document.createElement(\"div\"),padB:document.createElement(\"div\"),padM:document.createElement(\"div\"),padPal:e.createPalette(),cross:document.createElement(\"div\"),crossBY:document.createElement(\"div\"),crossBX:document.createElement(\"div\"),crossLY:document.createElement(\"div\"),crossLX:document.createElement(\"div\"),sld:document.createElement(\"div\"),sldB:document.createElement(\"div\"),sldM:document.createElement(\"div\"),sldGrad:e.createSliderGradient(),sldPtrS:document.createElement(\"div\"),sldPtrIB:document.createElement(\"div\"),sldPtrMB:document.createElement(\"div\"),sldPtrOB:document.createElement(\"div\"),btn:document.createElement(\"div\"),btnT:document.createElement(\"span\")},e.picker.pad.appendChild(e.picker.padPal.elm),e.picker.padB.appendChild(e.picker.pad),e.picker.cross.appendChild(e.picker.crossBY),e.picker.cross.appendChild(e.picker.crossBX),e.picker.cross.appendChild(e.picker.crossLY),e.picker.cross.appendChild(e.picker.crossLX),e.picker.padB.appendChild(e.picker.cross),e.picker.box.appendChild(e.picker.padB),e.picker.box.appendChild(e.picker.padM),e.picker.sld.appendChild(e.picker.sldGrad.elm),e.picker.sldB.appendChild(e.picker.sld),e.picker.sldB.appendChild(e.picker.sldPtrOB),e.picker.sldPtrOB.appendChild(e.picker.sldPtrMB),e.picker.sldPtrMB.appendChild(e.picker.sldPtrIB),e.picker.sldPtrIB.appendChild(e.picker.sldPtrS),e.picker.box.appendChild(e.picker.sldB),e.picker.box.appendChild(e.picker.sldM),e.picker.btn.appendChild(e.picker.btnT),e.picker.box.appendChild(e.picker.btn),e.picker.boxB.appendChild(e.picker.box),e.picker.wrap.appendChild(e.picker.boxS),e.picker.wrap.appendChild(e.picker.boxB));var t=e.picker,n=!!e.getSliderComponent(d),r=e.getPickerDims(d),i=2*d.pointerBorderWidth+d.pointerThickness+2*d.crossSize,s=e.getPadToSliderPadding(d),o=Math.min(d.borderRadius,Math.round(d.padding*Math.PI)),u=\"crosshair\";t.wrap.style.clear=\"both\",t.wrap.style.width=r[0]+2*d.borderWidth+\"px\",t.wrap.style.height=r[1]+2*d.borderWidth+\"px\",t.wrap.style.zIndex=d.zIndex,t.box.style.width=r[0]+\"px\",t.box.style.height=r[1]+\"px\",t.boxS.style.position=\"absolute\",t.boxS.style.left=\"0\",t.boxS.style.top=\"0\",t.boxS.style.width=\"100%\",t.boxS.style.height=\"100%\",e.setBorderRadius(t.boxS,o+\"px\"),t.boxB.style.position=\"relative\",t.boxB.style.border=d.borderWidth+\"px solid\",t.boxB.style.borderColor=d.borderColor,t.boxB.style.background=d.backgroundColor,e.setBorderRadius(t.boxB,o+\"px\"),t.padM.style.background=t.sldM.style.background=\"#FFF\",e.setStyle(t.padM,\"opacity\",\"0\"),e.setStyle(t.sldM,\"opacity\",\"0\"),t.pad.style.position=\"relative\",t.pad.style.width=d.width+\"px\",t.pad.style.height=d.height+\"px\",t.padPal.draw(d.width,d.height,e.getPadYComponent(d)),t.padB.style.position=\"absolute\",t.padB.style.left=d.padding+\"px\",t.padB.style.top=d.padding+\"px\",t.padB.style.border=d.insetWidth+\"px solid\",t.padB.style.borderColor=d.insetColor,t.padM._jscInstance=d,t.padM._jscControlName=\"pad\",t.padM.style.position=\"absolute\",t.padM.style.left=\"0\",t.padM.style.top=\"0\",t.padM.style.width=d.padding+2*d.insetWidth+d.width+s/2+\"px\",t.padM.style.height=r[1]+\"px\",t.padM.style.cursor=u,t.cross.style.position=\"absolute\",t.cross.style.left=t.cross.style.top=\"0\",t.cross.style.width=t.cross.style.height=i+\"px\",t.crossBY.style.position=t.crossBX.style.position=\"absolute\",t.crossBY.style.background=t.crossBX.style.background=d.pointerBorderColor,t.crossBY.style.width=t.crossBX.style.height=2*d.pointerBorderWidth+d.pointerThickness+\"px\",t.crossBY.style.height=t.crossBX.style.width=i+\"px\",t.crossBY.style.left=t.crossBX.style.top=Math.floor(i/2)-Math.floor(d.pointerThickness/2)-d.pointerBorderWidth+\"px\",t.crossBY.style.top=t.crossBX.style.left=\"0\",t.crossLY.style.position=t.crossLX.style.position=\"absolute\",t.crossLY.style.background=t.crossLX.style.background=d.pointerColor,t.crossLY.style.height=t.crossLX.style.width=i-2*d.pointerBorderWidth+\"px\",t.crossLY.style.width=t.crossLX.style.height=d.pointerThickness+\"px\",t.crossLY.style.left=t.crossLX.style.top=Math.floor(i/2)-Math.floor(d.pointerThickness/2)+\"px\",t.crossLY.style.top=t.crossLX.style.left=d.pointerBorderWidth+\"px\",t.sld.style.overflow=\"hidden\",t.sld.style.width=d.sliderSize+\"px\",t.sld.style.height=d.height+\"px\",t.sldGrad.draw(d.sliderSize,d.height,\"#000\",\"#000\"),t.sldB.style.display=n?\"block\":\"none\",t.sldB.style.position=\"absolute\",t.sldB.style.right=d.padding+\"px\",t.sldB.style.top=d.padding+\"px\",t.sldB.style.border=d.insetWidth+\"px solid\",t.sldB.style.borderColor=d.insetColor,t.sldM._jscInstance=d,t.sldM._jscControlName=\"sld\",t.sldM.style.display=n?\"block\":\"none\",t.sldM.style.position=\"absolute\",t.sldM.style.right=\"0\",t.sldM.style.top=\"0\",t.sldM.style.width=d.sliderSize+s/2+d.padding+2*d.insetWidth+\"px\",t.sldM.style.height=r[1]+\"px\",t.sldM.style.cursor=\"default\",t.sldPtrIB.style.border=t.sldPtrOB.style.border=d.pointerBorderWidth+\"px solid \"+d.pointerBorderColor,t.sldPtrOB.style.position=\"absolute\",t.sldPtrOB.style.left=-(2*d.pointerBorderWidth+d.pointerThickness)+\"px\",t.sldPtrOB.style.top=\"0\",t.sldPtrMB.style.border=d.pointerThickness+\"px solid \"+d.pointerColor,t.sldPtrS.style.width=d.sliderSize+\"px\",t.sldPtrS.style.height=m+\"px\",t.btn.style.display=d.closable?\"block\":\"none\",t.btn.style.position=\"absolute\",t.btn.style.left=d.padding+\"px\",t.btn.style.bottom=d.padding+\"px\",t.btn.style.padding=\"0 15px\",t.btn.style.height=d.buttonHeight+\"px\",t.btn.style.border=d.insetWidth+\"px solid\",l(),t.btn.style.color=d.buttonColor,t.btn.style.font=\"12px sans-serif\",t.btn.style.textAlign=\"center\";try{t.btn.style.cursor=\"pointer\"}catch(c){t.btn.style.cursor=\"hand\"}t.btn.onmousedown=function(){d.hide()},t.btnT.style.lineHeight=d.buttonHeight+\"px\",t.btnT.innerHTML=\"\",t.btnT.appendChild(document.createTextNode(d.closeText)),a(),f(),e.picker.owner&&e.picker.owner!==d&&e.unsetClass(e.picker.owner.targetElement,d.activeClass),e.picker.owner=d,e.isElementType(v,\"body\")?e.redrawPosition():e._drawPosition(d,0,0,\"relative\",!1),t.wrap.parentNode!=v&&v.appendChild(t.wrap),e.setClass(d.targetElement,d.activeClass)}function a(){switch(e.getPadYComponent(d)){case\"s\":var t=1;break;case\"v\":var t=2}var n=Math.round(d.hsv[0]/360*(d.width-1)),r=Math.round((1-d.hsv[t]/100)*(d.height-1)),i=2*d.pointerBorderWidth+d.pointerThickness+2*d.crossSize,o=-Math.floor(i/2);e.picker.cross.style.left=n+o+\"px\",e.picker.cross.style.top=r+o+\"px\";switch(e.getSliderComponent(d)){case\"s\":var u=s(d.hsv[0],100,d.hsv[2]),a=s(d.hsv[0],0,d.hsv[2]),f=\"rgb(\"+Math.round(u[0])+\",\"+Math.round(u[1])+\",\"+Math.round(u[2])+\")\",l=\"rgb(\"+Math.round(a[0])+\",\"+Math.round(a[1])+\",\"+Math.round(a[2])+\")\";e.picker.sldGrad.draw(d.sliderSize,d.height,f,l);break;case\"v\":var c=s(d.hsv[0],d.hsv[1],100),f=\"rgb(\"+Math.round(c[0])+\",\"+Math.round(c[1])+\",\"+Math.round(c[2])+\")\",l=\"#000\";e.picker.sldGrad.draw(d.sliderSize,d.height,f,l)}}function f(){var t=e.getSliderComponent(d);if(t){switch(t){case\"s\":var n=1;break;case\"v\":var n=2}var r=Math.round((1-d.hsv[n]/100)*(d.height-1));e.picker.sldPtrOB.style.top=r-(2*d.pointerBorderWidth+d.pointerThickness)-Math.floor(m/2)+\"px\"}}function l(){return e.picker&&e.picker.owner===d}function c(){d.importColor()}this.value=null,this.valueElement=t,this.styleElement=t,this.required=!0,this.refine=!0,this.hash=!1,this.uppercase=!0,this.onFineChange=null,this.activeClass=\"jscolor-active\",this.minS=0,this.maxS=100,this.minV=0,this.maxV=100,this.hsv=[0,0,100],this.rgb=[255,255,255],this.width=181,this.height=101,this.showOnClick=!0,this.mode=\"HSV\",this.position=\"bottom\",this.smartPosition=!0,this.sliderSize=16,this.crossSize=8,this.closable=!1,this.closeText=\"Close\",this.buttonColor=\"#000000\",this.buttonHeight=18,this.padding=12,this.backgroundColor=\"#FFFFFF\",this.borderWidth=1,this.borderColor=\"#BBBBBB\",this.borderRadius=8,this.insetWidth=1,this.insetColor=\"#BBBBBB\",this.shadow=!0,this.shadowBlur=15,this.shadowColor=\"rgba(0,0,0,0.2)\",this.pointerColor=\"#4C4C4C\",this.pointerBorderColor=\"#FFFFFF\",this.pointerBorderWidth=1,this.pointerThickness=2,this.zIndex=1e3,this.container=null;for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.hide=function(){l()&&o()},this.show=function(){u()},this.redraw=function(){l()&&u()},this.importColor=function(){this.valueElement?e.isElementType(this.valueElement,\"input\")?this.refine?!this.required&&/^\\s*$/.test(this.valueElement.value)?(this.valueElement.value=\"\",this.styleElement&&(this.styleElement.style.backgroundImage=this.styleElement._jscOrigStyle.backgroundImage,this.styleElement.style.backgroundColor=this.styleElement._jscOrigStyle.backgroundColor,this.styleElement.style.color=this.styleElement._jscOrigStyle.color),this.exportColor(e.leaveValue|e.leaveStyle)):this.fromString(this.valueElement.value)||this.exportColor():this.fromString(this.valueElement.value,e.leaveValue)||(this.styleElement&&(this.styleElement.style.backgroundImage=this.styleElement._jscOrigStyle.backgroundImage,this.styleElement.style.backgroundColor=this.styleElement._jscOrigStyle.backgroundColor,this.styleElement.style.color=this.styleElement._jscOrigStyle.color),this.exportColor(e.leaveValue|e.leaveStyle)):this.exportColor():this.exportColor()},this.exportColor=function(t){if(!(t&e.leaveValue)&&this.valueElement){var n=this.toString();this.uppercase&&(n=n.toUpperCase()),this.hash&&(n=\"#\"+n),e.isElementType(this.valueElement,\"input\")?this.valueElement.value=n:this.valueElement.innerHTML=n}t&e.leaveStyle||this.styleElement&&(this.styleElement.style.backgroundImage=\"none\",this.styleElement.style.backgroundColor=\"#\"+this.toString(),this.styleElement.style.color=this.isLight()?\"#000\":\"#FFF\"),!(t&e.leavePad)&&l()&&a(),!(t&e.leaveSld)&&l()&&f()},this.fromHSV=function(e,t,n,r){if(e!==null){if(isNaN(e))return!1;e=Math.max(0,Math.min(360,e))}if(t!==null){if(isNaN(t))return!1;t=Math.max(0,Math.min(100,this.maxS,t),this.minS)}if(n!==null){if(isNaN(n))return!1;n=Math.max(0,Math.min(100,this.maxV,n),this.minV)}this.rgb=s(e===null?this.hsv[0]:this.hsv[0]=e,t===null?this.hsv[1]:this.hsv[1]=t,n===null?this.hsv[2]:this.hsv[2]=n),this.exportColor(r)},this.fromRGB=function(e,t,n,r){if(e!==null){if(isNaN(e))return!1;e=Math.max(0,Math.min(255,e))}if(t!==null){if(isNaN(t))return!1;t=Math.max(0,Math.min(255,t))}if(n!==null){if(isNaN(n))return!1;n=Math.max(0,Math.min(255,n))}var o=i(e===null?this.rgb[0]:e,t===null?this.rgb[1]:t,n===null?this.rgb[2]:n);o[0]!==null&&(this.hsv[0]=Math.max(0,Math.min(360,o[0]))),o[2]!==0&&(this.hsv[1]=o[1]===null?null:Math.max(0,this.minS,Math.min(100,this.maxS,o[1]))),this.hsv[2]=o[2]===null?null:Math.max(0,this.minV,Math.min(100,this.maxV,o[2]));var u=s(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=u[0],this.rgb[1]=u[1],this.rgb[2]=u[2],this.exportColor(r)},this.fromString=function(e,t){var n;if(n=e.match(/^\\W*([0-9A-F]{3}([0-9A-F]{3})?)\\W*$/i))return n[1].length===6?this.fromRGB(parseInt(n[1].substr(0,2),16),parseInt(n[1].substr(2,2),16),parseInt(n[1].substr(4,2),16),t):this.fromRGB(parseInt(n[1].charAt(0)+n[1].charAt(0),16),parseInt(n[1].charAt(1)+n[1].charAt(1),16),parseInt(n[1].charAt(2)+n[1].charAt(2),16),t),!0;if(n=e.match(/^\\W*rgba?\\(([^)]*)\\)\\W*$/i)){var r=n[1].split(\",\"),i=/^\\s*(\\d*)(\\.\\d+)?\\s*$/,s,o,u;if(r.length>=3&&(s=r[0].match(i))&&(o=r[1].match(i))&&(u=r[2].match(i))){var a=parseFloat((s[1]||\"0\")+(s[2]||\"\")),f=parseFloat((o[1]||\"0\")+(o[2]||\"\")),l=parseFloat((u[1]||\"0\")+(u[2]||\"\"));return this.fromRGB(a,f,l,t),!0}}return!1},this.toString=function(){return(256|Math.round(this.rgb[0])).toString(16).substr(1)+(256|Math.round(this.rgb[1])).toString(16).substr(1)+(256|Math.round(this.rgb[2])).toString(16).substr(1)},this.toHEXString=function(){return\"#\"+this.toString().toUpperCase()},this.toRGBString=function(){return\"rgb(\"+Math.round(this.rgb[0])+\",\"+Math.round(this.rgb[1])+\",\"+Math.round(this.rgb[2])+\")\"},this.isLight=function(){return.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]>127.5},this._processParentElementsInDOM=function(){if(this._linkedElementsProcessed)return;this._linkedElementsProcessed=!0;var t=this.targetElement;do{var n=e.getStyle(t);n&&n.position.toLowerCase()===\"fixed\"&&(this.fixed=!0),t!==this.targetElement&&(t._jscEventsAttached||(e.attachEvent(t,\"scroll\",e.onParentScroll),t._jscEventsAttached=!0))}while((t=t.parentNode)&&!e.isElementType(t,\"body\"))};if(typeof t==\"string\"){var h=t,p=document.getElementById(h);p?this.targetElement=p:e.warn(\"Could not find target element with ID '\"+h+\"'\")}else t?this.targetElement=t:e.warn(\"Invalid target element: '\"+t+\"'\");if(this.targetElement._jscLinkedInstance){e.warn(\"Cannot link jscolor twice to the same element. Skipping.\");return}this.targetElement._jscLinkedInstance=this,this.valueElement=e.fetchElement(this.valueElement),this.styleElement=e.fetchElement(this.styleElement);var d=this,v=this.container?e.fetchElement(this.container):document.getElementsByTagName(\"body\")[0],m=3;if(e.isElementType(this.targetElement,\"button\"))if(this.targetElement.onclick){var g=this.targetElement.onclick;this.targetElement.onclick=function(e){return g.call(this,e),!1}}else this.targetElement.onclick=function(){return!1};if(this.valueElement&&e.isElementType(this.valueElement,\"input\")){var y=function(){d.fromString(d.valueElement.value,e.leaveValue),e.dispatchFineChange(d)};e.attachEvent(this.valueElement,\"keyup\",y),e.attachEvent(this.valueElement,\"input\",y),e.attachEvent(this.valueElement,\"blur\",c),this.valueElement.setAttribute(\"autocomplete\",\"off\")}this.styleElement&&(this.styleElement._jscOrigStyle={backgroundImage:this.styleElement.style.backgroundImage,backgroundColor:this.styleElement.style.backgroundColor,color:this.styleElement.style.color}),this.value?this.fromString(this.value)||this.exportColor():this.importColor()}};return e.jscolor.lookupClass=\"jscolor\",e.jscolor.installByClassName=function(t){var n=document.getElementsByTagName(\"input\"),r=document.getElementsByTagName(\"button\");e.tryInstallOnElements(n,t),e.tryInstallOnElements(r,t)},e.register(),e.jscolor}());","Mageplaza_Core/js/bootstrap.min.js":"/*!\r\n * Bootstrap v3.3.6 (http://getbootstrap.com)\r\n * Copyright 2011-2015 Twitter, Inc.\r\n * Licensed under the MIT license\r\n */\r\nif(\"undefined\"==typeof jQuery)throw new Error(\"Bootstrap's JavaScript requires jQuery\");+function(a){\"use strict\";var b=a.fn.jquery.split(\" \")[0].split(\".\");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>2)throw new Error(\"Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3\")}(jQuery),+function(a){\"use strict\";function b(){var a=document.createElement(\"bootstrap\"),b={WebkitTransition:\"webkitTransitionEnd\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd otransitionend\",transition:\"transitionend\"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(\"bsTransitionEnd\",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var c=a(this),e=c.data(\"bs.alert\");e||c.data(\"bs.alert\",e=new d(this)),\"string\"==typeof b&&e[b].call(c)})}var c='[data-dismiss=\"alert\"]',d=function(b){a(b).on(\"click\",c,this.close)};d.VERSION=\"3.3.6\",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger(\"closed.bs.alert\").remove()}var e=a(this),f=e.attr(\"data-target\");f||(f=e.attr(\"href\"),f=f&&f.replace(/.*(?=#[^\\s]*$)/,\"\"));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(\".alert\")),g.trigger(b=a.Event(\"close.bs.alert\")),b.isDefaultPrevented()||(g.removeClass(\"in\"),a.support.transition&&g.hasClass(\"fade\")?g.one(\"bsTransitionEnd\",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on(\"click.bs.alert.data-api\",c,d.prototype.close)}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.button\"),f=\"object\"==typeof b&&b;e||d.data(\"bs.button\",e=new c(this,f)),\"toggle\"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION=\"3.3.6\",c.DEFAULTS={loadingText:\"loading...\"},c.prototype.setState=function(b){var c=\"disabled\",d=this.$element,e=d.is(\"input\")?\"val\":\"html\",f=d.data();b+=\"Text\",null==f.resetText&&d.data(\"resetText\",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),\"loadingText\"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle=\"buttons\"]');if(b.length){var c=this.$element.find(\"input\");\"radio\"==c.prop(\"type\")?(c.prop(\"checked\")&&(a=!1),b.find(\".active\").removeClass(\"active\"),this.$element.addClass(\"active\")):\"checkbox\"==c.prop(\"type\")&&(c.prop(\"checked\")!==this.$element.hasClass(\"active\")&&(a=!1),this.$element.toggleClass(\"active\")),c.prop(\"checked\",this.$element.hasClass(\"active\")),a&&c.trigger(\"change\")}else this.$element.attr(\"aria-pressed\",!this.$element.hasClass(\"active\")),this.$element.toggleClass(\"active\")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on(\"click.bs.button.data-api\",'[data-toggle^=\"button\"]',function(c){var d=a(c.target);d.hasClass(\"btn\")||(d=d.closest(\".btn\")),b.call(d,\"toggle\"),a(c.target).is('input[type=\"radio\"]')||a(c.target).is('input[type=\"checkbox\"]')||c.preventDefault()}).on(\"focus.bs.button.data-api blur.bs.button.data-api\",'[data-toggle^=\"button\"]',function(b){a(b.target).closest(\".btn\").toggleClass(\"focus\",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.carousel\"),f=a.extend({},c.DEFAULTS,d.data(),\"object\"==typeof b&&b),g=\"string\"==typeof b?b:f.slide;e||d.data(\"bs.carousel\",e=new c(this,f)),\"number\"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(\".carousel-indicators\"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on(\"keydown.bs.carousel\",a.proxy(this.keydown,this)),\"hover\"==this.options.pause&&!(\"ontouchstart\"in document.documentElement)&&this.$element.on(\"mouseenter.bs.carousel\",a.proxy(this.pause,this)).on(\"mouseleave.bs.carousel\",a.proxy(this.cycle,this))};c.VERSION=\"3.3.6\",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:\"hover\",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(\".item\"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d=\"prev\"==a&&0===c||\"next\"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e=\"prev\"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(\".item.active\"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one(\"slid.bs.carousel\",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?\"next\":\"prev\",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(\".next, .prev\").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide(\"next\")},c.prototype.prev=function(){return this.sliding?void 0:this.slide(\"prev\")},c.prototype.slide=function(b,d){var e=this.$element.find(\".item.active\"),f=d||this.getItemForDirection(b,e),g=this.interval,h=\"next\"==b?\"left\":\"right\",i=this;if(f.hasClass(\"active\"))return this.sliding=!1;var j=f[0],k=a.Event(\"slide.bs.carousel\",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(\".active\").removeClass(\"active\");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass(\"active\")}var m=a.Event(\"slid.bs.carousel\",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass(\"slide\")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one(\"bsTransitionEnd\",function(){f.removeClass([b,h].join(\" \")).addClass(\"active\"),e.removeClass([\"active\",h].join(\" \")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass(\"active\"),f.addClass(\"active\"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr(\"data-target\")||(d=e.attr(\"href\"))&&d.replace(/.*(?=#[^\\s]+$)/,\"\"));if(f.hasClass(\"carousel\")){var g=a.extend({},f.data(),e.data()),h=e.attr(\"data-slide-to\");h&&(g.interval=!1),b.call(f,g),h&&f.data(\"bs.carousel\").to(h),c.preventDefault()}};a(document).on(\"click.bs.carousel.data-api\",\"[data-slide]\",e).on(\"click.bs.carousel.data-api\",\"[data-slide-to]\",e),a(window).on(\"load\",function(){a('[data-ride=\"carousel\"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){\"use strict\";function b(b){var c,d=b.attr(\"data-target\")||(c=b.attr(\"href\"))&&c.replace(/.*(?=#[^\\s]+$)/,\"\");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data(\"bs.collapse\"),f=a.extend({},d.DEFAULTS,c.data(),\"object\"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data(\"bs.collapse\",e=new d(this,f)),\"string\"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle=\"collapse\"][href=\"#'+b.id+'\"],[data-toggle=\"collapse\"][data-target=\"#'+b.id+'\"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION=\"3.3.6\",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass(\"width\");return a?\"width\":\"height\"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass(\"in\")){var b,e=this.$parent&&this.$parent.children(\".panel\").children(\".in, .collapsing\");if(!(e&&e.length&&(b=e.data(\"bs.collapse\"),b&&b.transitioning))){var f=a.Event(\"show.bs.collapse\");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,\"hide\"),b||e.data(\"bs.collapse\",null));var g=this.dimension();this.$element.removeClass(\"collapse\").addClass(\"collapsing\")[g](0).attr(\"aria-expanded\",!0),this.$trigger.removeClass(\"collapsed\").attr(\"aria-expanded\",!0),this.transitioning=1;var h=function(){this.$element.removeClass(\"collapsing\").addClass(\"collapse in\")[g](\"\"),this.transitioning=0,this.$element.trigger(\"shown.bs.collapse\")};if(!a.support.transition)return h.call(this);var i=a.camelCase([\"scroll\",g].join(\"-\"));this.$element.one(\"bsTransitionEnd\",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass(\"in\")){var b=a.Event(\"hide.bs.collapse\");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass(\"collapsing\").removeClass(\"collapse in\").attr(\"aria-expanded\",!1),this.$trigger.addClass(\"collapsed\").attr(\"aria-expanded\",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass(\"collapsing\").addClass(\"collapse\").trigger(\"hidden.bs.collapse\")};return a.support.transition?void this.$element[c](0).one(\"bsTransitionEnd\",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass(\"in\")?\"hide\":\"show\"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle=\"collapse\"][data-parent=\"'+this.options.parent+'\"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass(\"in\");a.attr(\"aria-expanded\",c),b.toggleClass(\"collapsed\",!c).attr(\"aria-expanded\",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on(\"click.bs.collapse.data-api\",'[data-toggle=\"collapse\"]',function(d){var e=a(this);e.attr(\"data-target\")||d.preventDefault();var f=b(e),g=f.data(\"bs.collapse\"),h=g?\"toggle\":e.data();c.call(f,h)})}(jQuery),+function(a){\"use strict\";function b(b){var c=b.attr(\"data-target\");c||(c=b.attr(\"href\"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\\s]*$)/,\"\"));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass(\"open\")&&(c&&\"click\"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event(\"hide.bs.dropdown\",f)),c.isDefaultPrevented()||(d.attr(\"aria-expanded\",\"false\"),e.removeClass(\"open\").trigger(a.Event(\"hidden.bs.dropdown\",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data(\"bs.dropdown\");d||c.data(\"bs.dropdown\",d=new g(this)),\"string\"==typeof b&&d[b].call(c)})}var e=\".dropdown-backdrop\",f='[data-toggle=\"dropdown\"]',g=function(b){a(b).on(\"click.bs.dropdown\",this.toggle)};g.VERSION=\"3.3.6\",g.prototype.toggle=function(d){var e=a(this);if(!e.is(\".disabled, :disabled\")){var f=b(e),g=f.hasClass(\"open\");if(c(),!g){\"ontouchstart\"in document.documentElement&&!f.closest(\".navbar-nav\").length&&a(document.createElement(\"div\")).addClass(\"dropdown-backdrop\").insertAfter(a(this)).on(\"click\",c);var h={relatedTarget:this};if(f.trigger(d=a.Event(\"show.bs.dropdown\",h)),d.isDefaultPrevented())return;e.trigger(\"focus\").attr(\"aria-expanded\",\"true\"),f.toggleClass(\"open\").trigger(a.Event(\"shown.bs.dropdown\",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(\".disabled, :disabled\")){var e=b(d),g=e.hasClass(\"open\");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger(\"focus\"),d.trigger(\"click\");var h=\" li:not(.disabled):visible a\",i=e.find(\".dropdown-menu\"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger(\"focus\")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on(\"click.bs.dropdown.data-api\",c).on(\"click.bs.dropdown.data-api\",\".dropdown form\",function(a){a.stopPropagation()}).on(\"click.bs.dropdown.data-api\",f,g.prototype.toggle).on(\"keydown.bs.dropdown.data-api\",f,g.prototype.keydown).on(\"keydown.bs.dropdown.data-api\",\".dropdown-menu\",g.prototype.keydown)}(jQuery),+function(a){\"use strict\";function b(b,d){return this.each(function(){var e=a(this),f=e.data(\"bs.modal\"),g=a.extend({},c.DEFAULTS,e.data(),\"object\"==typeof b&&b);f||e.data(\"bs.modal\",f=new c(this,g)),\"string\"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(\".modal-dialog\"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(\".modal-content\").load(this.options.remote,a.proxy(function(){this.$element.trigger(\"loaded.bs.modal\")},this))};c.VERSION=\"3.3.6\",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event(\"show.bs.modal\",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass(\"modal-open\"),this.escape(),this.resize(),this.$element.on(\"click.dismiss.bs.modal\",'[data-dismiss=\"modal\"]',a.proxy(this.hide,this)),this.$dialog.on(\"mousedown.dismiss.bs.modal\",function(){d.$element.one(\"mouseup.dismiss.bs.modal\",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass(\"fade\");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass(\"in\"),d.enforceFocus();var f=a.Event(\"shown.bs.modal\",{relatedTarget:b});e?d.$dialog.one(\"bsTransitionEnd\",function(){d.$element.trigger(\"focus\").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger(\"focus\").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event(\"hide.bs.modal\"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off(\"focusin.bs.modal\"),this.$element.removeClass(\"in\").off(\"click.dismiss.bs.modal\").off(\"mouseup.dismiss.bs.modal\"),this.$dialog.off(\"mousedown.dismiss.bs.modal\"),a.support.transition&&this.$element.hasClass(\"fade\")?this.$element.one(\"bsTransitionEnd\",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off(\"focusin.bs.modal\").on(\"focusin.bs.modal\",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger(\"focus\")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on(\"keydown.dismiss.bs.modal\",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off(\"keydown.dismiss.bs.modal\")},c.prototype.resize=function(){this.isShown?a(window).on(\"resize.bs.modal\",a.proxy(this.handleUpdate,this)):a(window).off(\"resize.bs.modal\")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass(\"modal-open\"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger(\"hidden.bs.modal\")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass(\"fade\")?\"fade\":\"\";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement(\"div\")).addClass(\"modal-backdrop \"+e).appendTo(this.$body),this.$element.on(\"click.dismiss.bs.modal\",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&(\"static\"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass(\"in\"),!b)return;f?this.$backdrop.one(\"bsTransitionEnd\",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass(\"in\");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass(\"fade\")?this.$backdrop.one(\"bsTransitionEnd\",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:\"\",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:\"\"})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:\"\",paddingRight:\"\"})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css(\"padding-right\")||0,10);this.originalBodyPad=document.body.style.paddingRight||\"\",this.bodyIsOverflowing&&this.$body.css(\"padding-right\",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css(\"padding-right\",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement(\"div\");a.className=\"modal-scrollbar-measure\",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on(\"click.bs.modal.data-api\",'[data-toggle=\"modal\"]',function(c){var d=a(this),e=d.attr(\"href\"),f=a(d.attr(\"data-target\")||e&&e.replace(/.*(?=#[^\\s]+$)/,\"\")),g=f.data(\"bs.modal\")?\"toggle\":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is(\"a\")&&c.preventDefault(),f.one(\"show.bs.modal\",function(a){a.isDefaultPrevented()||f.one(\"hidden.bs.modal\",function(){d.is(\":visible\")&&d.trigger(\"focus\")})}),b.call(f,g,this)})}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.tooltip\"),f=\"object\"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data(\"bs.tooltip\",e=new c(this,f)),\"string\"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init(\"tooltip\",a,b)};c.VERSION=\"3.3.6\",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:\"top\",selector:!1,template:'<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',trigger:\"hover focus\",title:\"\",delay:0,html:!1,container:!1,viewport:{selector:\"body\",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error(\"`selector` option must be specified when initializing \"+this.type+\" on the window.document object!\");for(var e=this.options.trigger.split(\" \"),f=e.length;f--;){var g=e[f];if(\"click\"==g)this.$element.on(\"click.\"+this.type,this.options.selector,a.proxy(this.toggle,this));else if(\"manual\"!=g){var h=\"hover\"==g?\"mouseenter\":\"focusin\",i=\"hover\"==g?\"mouseleave\":\"focusout\";this.$element.on(h+\".\"+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+\".\"+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:\"manual\",selector:\"\"}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&\"number\"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data(\"bs.\"+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data(\"bs.\"+this.type,c)),b instanceof a.Event&&(c.inState[\"focusin\"==b.type?\"focus\":\"hover\"]=!0),c.tip().hasClass(\"in\")||\"in\"==c.hoverState?void(c.hoverState=\"in\"):(clearTimeout(c.timeout),c.hoverState=\"in\",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){\"in\"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data(\"bs.\"+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data(\"bs.\"+this.type,c)),b instanceof a.Event&&(c.inState[\"focusout\"==b.type?\"focus\":\"hover\"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState=\"out\",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){\"out\"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())},c.prototype.show=function(){var b=a.Event(\"show.bs.\"+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr(\"id\",g),this.$element.attr(\"aria-describedby\",g),this.options.animation&&f.addClass(\"fade\");var h=\"function\"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\\s?auto?\\s?/i,j=i.test(h);j&&(h=h.replace(i,\"\")||\"top\"),f.detach().css({top:0,left:0,display:\"block\"}).addClass(h).data(\"bs.\"+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger(\"inserted.bs.\"+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h=\"bottom\"==h&&k.bottom+m>o.bottom?\"top\":\"top\"==h&&k.top-m<o.top?\"bottom\":\"right\"==h&&k.right+l>o.width?\"left\":\"left\"==h&&k.left-l<o.left?\"right\":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger(\"shown.bs.\"+e.type),e.hoverState=null,\"out\"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass(\"fade\")?f.one(\"bsTransitionEnd\",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css(\"margin-top\"),10),h=parseInt(d.css(\"margin-left\"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass(\"in\");var i=d[0].offsetWidth,j=d[0].offsetHeight;\"top\"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?\"offsetWidth\":\"offsetHeight\";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?\"left\":\"top\",50*(1-a/b)+\"%\").css(c?\"top\":\"left\",\"\")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(\".tooltip-inner\")[this.options.html?\"html\":\"text\"](b),a.removeClass(\"fade in top bottom left right\")},c.prototype.hide=function(b){function d(){\"in\"!=e.hoverState&&f.detach(),e.$element.removeAttr(\"aria-describedby\").trigger(\"hidden.bs.\"+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event(\"hide.bs.\"+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass(\"in\"),a.support.transition&&f.hasClass(\"fade\")?f.one(\"bsTransitionEnd\",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr(\"title\")||\"string\"!=typeof a.attr(\"data-original-title\"))&&a.attr(\"data-original-title\",a.attr(\"title\")||\"\").attr(\"title\",\"\")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d=\"BODY\"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return\"bottom\"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:\"top\"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:\"left\"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr(\"data-original-title\")||(\"function\"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+\" `template` option must consist of exactly 1 top-level element!\");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(\".tooltip-arrow\")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data(\"bs.\"+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data(\"bs.\"+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass(\"in\")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off(\".\"+a.type).removeData(\"bs.\"+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.popover\"),f=\"object\"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data(\"bs.popover\",e=new c(this,f)),\"string\"==typeof b&&e[b]())})}var c=function(a,b){this.init(\"popover\",a,b)};if(!a.fn.tooltip)throw new Error(\"Popover requires tooltip.js\");c.VERSION=\"3.3.6\",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:\"right\",trigger:\"click\",content:\"\",template:'<div class=\"popover\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(\".popover-title\")[this.options.html?\"html\":\"text\"](b),a.find(\".popover-content\").children().detach().end()[this.options.html?\"string\"==typeof c?\"html\":\"append\":\"text\"](c),a.removeClass(\"fade top bottom left right in\"),a.find(\".popover-title\").html()||a.find(\".popover-title\").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr(\"data-content\")||(\"function\"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(\".arrow\")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){\"use strict\";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||\"\")+\" .nav li > a\",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on(\"scroll.bs.scrollspy\",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data(\"bs.scrollspy\"),f=\"object\"==typeof c&&c;e||d.data(\"bs.scrollspy\",e=new b(this,f)),\"string\"==typeof c&&e[c]()})}b.VERSION=\"3.3.6\",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c=\"offset\",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c=\"position\",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data(\"target\")||b.attr(\"href\"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(\":visible\")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target=\"'+b+'\"],'+this.selector+'[href=\"'+b+'\"]',d=a(c).parents(\"li\").addClass(\"active\");\r\n    d.parent(\".dropdown-menu\").length&&(d=d.closest(\"li.dropdown\").addClass(\"active\")),d.trigger(\"activate.bs.scrollspy\")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,\".active\").removeClass(\"active\")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on(\"load.bs.scrollspy.data-api\",function(){a('[data-spy=\"scroll\"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.tab\");e||d.data(\"bs.tab\",e=new c(this)),\"string\"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION=\"3.3.6\",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest(\"ul:not(.dropdown-menu)\"),d=b.data(\"target\");if(d||(d=b.attr(\"href\"),d=d&&d.replace(/.*(?=#[^\\s]*$)/,\"\")),!b.parent(\"li\").hasClass(\"active\")){var e=c.find(\".active:last a\"),f=a.Event(\"hide.bs.tab\",{relatedTarget:b[0]}),g=a.Event(\"show.bs.tab\",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest(\"li\"),c),this.activate(h,h.parent(),function(){e.trigger({type:\"hidden.bs.tab\",relatedTarget:b[0]}),b.trigger({type:\"shown.bs.tab\",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass(\"active\").find(\"> .dropdown-menu > .active\").removeClass(\"active\").end().find('[data-toggle=\"tab\"]').attr(\"aria-expanded\",!1),b.addClass(\"active\").find('[data-toggle=\"tab\"]').attr(\"aria-expanded\",!0),h?(b[0].offsetWidth,b.addClass(\"in\")):b.removeClass(\"fade\"),b.parent(\".dropdown-menu\").length&&b.closest(\"li.dropdown\").addClass(\"active\").end().find('[data-toggle=\"tab\"]').attr(\"aria-expanded\",!0),e&&e()}var g=d.find(\"> .active\"),h=e&&a.support.transition&&(g.length&&g.hasClass(\"fade\")||!!d.find(\"> .fade\").length);g.length&&h?g.one(\"bsTransitionEnd\",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass(\"in\")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),\"show\")};a(document).on(\"click.bs.tab.data-api\",'[data-toggle=\"tab\"]',e).on(\"click.bs.tab.data-api\",'[data-toggle=\"pill\"]',e)}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.affix\"),f=\"object\"==typeof b&&b;e||d.data(\"bs.affix\",e=new c(this,f)),\"string\"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on(\"scroll.bs.affix.data-api\",a.proxy(this.checkPosition,this)).on(\"click.bs.affix.data-api\",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION=\"3.3.6\",c.RESET=\"affix affix-top affix-bottom\",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&\"top\"==this.affixed)return c>e?\"top\":!1;if(\"bottom\"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:\"bottom\":a-d>=e+g?!1:\"bottom\";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?\"top\":null!=d&&i+j>=a-d?\"bottom\":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass(\"affix\");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(\":visible\")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());\"object\"!=typeof d&&(f=e=d),\"function\"==typeof e&&(e=d.top(this.$element)),\"function\"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css(\"top\",\"\");var i=\"affix\"+(h?\"-\"+h:\"\"),j=a.Event(i+\".bs.affix\");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin=\"bottom\"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace(\"affix\",\"affixed\")+\".bs.affix\")}\"bottom\"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on(\"load\",function(){a('[data-spy=\"affix\"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);","Mageplaza_Core/js/ion.rangeSlider.min.js":"// Ion.RangeSlider | version 2.1.6 | https://github.com/IonDen/ion.rangeSlider\r\n;(function(f){\"function\"===typeof define&&define.amd?define([\"jquery\"],function(p){return f(p,document,window,navigator)}):\"object\"===typeof exports?f(require(\"jquery\"),document,window,navigator):f(jQuery,document,window,navigator)})(function(f,p,h,t,q){var u=0,m=function(){var a=t.userAgent,b=/msie\\s\\d+/i;return 0<a.search(b)&&(a=b.exec(a).toString(),a=a.split(\" \")[1],9>a)?(f(\"html\").addClass(\"lt-ie9\"),!0):!1}();Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,d=[].slice;if(\"function\"!=\r\n    typeof b)throw new TypeError;var c=d.call(arguments,1),e=function(){if(this instanceof e){var g=function(){};g.prototype=b.prototype;var g=new g,l=b.apply(g,c.concat(d.call(arguments)));return Object(l)===l?l:g}return b.apply(a,c.concat(d.call(arguments)))};return e});Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var d;if(null==this)throw new TypeError('\"this\" is null or not defined');var c=Object(this),e=c.length>>>0;if(0===e)return-1;d=+b||0;Infinity===Math.abs(d)&&(d=0);if(d>=\r\n    e)return-1;for(d=Math.max(0<=d?d:e-Math.abs(d),0);d<e;){if(d in c&&c[d]===a)return d;d++}return-1});var r=function(a,b,d){this.VERSION=\"2.1.6\";this.input=a;this.plugin_count=d;this.old_to=this.old_from=this.update_tm=this.calc_count=this.current_plugin=0;this.raf_id=this.old_min_interval=null;this.is_update=this.is_key=this.no_diapason=this.force_redraw=this.dragging=!1;this.is_start=this.is_first_update=!0;this.is_click=this.is_resize=this.is_active=this.is_finish=!1;b=b||{};this.$cache={win:f(h),\r\n    body:f(p.body),input:f(a),cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,edge:null,grid:null,grid_labels:[]};this.coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single_fake:0,p_single_real:0,p_from_fake:0,p_from_real:0,p_to_fake:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],\r\n    big_x:[]};this.labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from_fake:0,p_from_left:0,p_to_fake:0,p_to_left:0,p_single_fake:0,p_single_left:0};var c=this.$cache.input;a=c.prop(\"value\");var e;d={type:\"single\",min:10,max:100,from:null,to:null,step:1,min_interval:0,max_interval:0,drag_interval:!1,values:[],p_values:[],from_fixed:!1,from_min:null,from_max:null,from_shadow:!1,to_fixed:!1,to_min:null,to_max:null,to_shadow:!1,prettify_enabled:!0,prettify_separator:\" \",prettify:null,\r\n    force_edges:!1,keyboard:!1,keyboard_step:5,grid:!1,grid_margin:!0,grid_num:4,grid_snap:!1,hide_min_max:!1,hide_from_to:!1,prefix:\"\",postfix:\"\",max_postfix:\"\",decorate_both:!0,values_separator:\" \\u2014 \",input_values_separator:\";\",disable:!1,onStart:null,onChange:null,onFinish:null,onUpdate:null};\"INPUT\"!==c[0].nodeName&&console&&console.warn&&console.warn(\"Base element should be <input>!\",c[0]);c={type:c.data(\"type\"),min:c.data(\"min\"),max:c.data(\"max\"),from:c.data(\"from\"),to:c.data(\"to\"),step:c.data(\"step\"),\r\n    min_interval:c.data(\"minInterval\"),max_interval:c.data(\"maxInterval\"),drag_interval:c.data(\"dragInterval\"),values:c.data(\"values\"),from_fixed:c.data(\"fromFixed\"),from_min:c.data(\"fromMin\"),from_max:c.data(\"fromMax\"),from_shadow:c.data(\"fromShadow\"),to_fixed:c.data(\"toFixed\"),to_min:c.data(\"toMin\"),to_max:c.data(\"toMax\"),to_shadow:c.data(\"toShadow\"),prettify_enabled:c.data(\"prettifyEnabled\"),prettify_separator:c.data(\"prettifySeparator\"),force_edges:c.data(\"forceEdges\"),keyboard:c.data(\"keyboard\"),\r\n    keyboard_step:c.data(\"keyboardStep\"),grid:c.data(\"grid\"),grid_margin:c.data(\"gridMargin\"),grid_num:c.data(\"gridNum\"),grid_snap:c.data(\"gridSnap\"),hide_min_max:c.data(\"hideMinMax\"),hide_from_to:c.data(\"hideFromTo\"),prefix:c.data(\"prefix\"),postfix:c.data(\"postfix\"),max_postfix:c.data(\"maxPostfix\"),decorate_both:c.data(\"decorateBoth\"),values_separator:c.data(\"valuesSeparator\"),input_values_separator:c.data(\"inputValuesSeparator\"),disable:c.data(\"disable\")};c.values=c.values&&c.values.split(\",\");for(e in c)c.hasOwnProperty(e)&&\r\n(c[e]!==q&&\"\"!==c[e]||delete c[e]);a!==q&&\"\"!==a&&(a=a.split(c.input_values_separator||b.input_values_separator||\";\"),a[0]&&a[0]==+a[0]&&(a[0]=+a[0]),a[1]&&a[1]==+a[1]&&(a[1]=+a[1]),b&&b.values&&b.values.length?(d.from=a[0]&&b.values.indexOf(a[0]),d.to=a[1]&&b.values.indexOf(a[1])):(d.from=a[0]&&+a[0],d.to=a[1]&&+a[1]));f.extend(d,b);f.extend(d,c);this.options=d;this.update_check={};this.validate();this.result={input:this.$cache.input,slider:null,min:this.options.min,max:this.options.max,from:this.options.from,\r\n    from_percent:0,from_value:null,to:this.options.to,to_percent:0,to_value:null};this.init()};r.prototype={init:function(a){this.no_diapason=!1;this.coords.p_step=this.convertToPercent(this.options.step,!0);this.target=\"base\";this.toggleInput();this.append();this.setMinMax();a?(this.force_redraw=!0,this.calc(!0),this.callOnUpdate()):(this.force_redraw=!0,this.calc(!0),this.callOnStart());this.updateScene()},append:function(){this.$cache.input.before('<span class=\"irs js-irs-'+this.plugin_count+'\"></span>');\r\n        this.$cache.input.prop(\"readonly\",!0);this.$cache.cont=this.$cache.input.prev();this.result.slider=this.$cache.cont;this.$cache.cont.html('<span class=\"irs\"><span class=\"irs-line\" tabindex=\"-1\"><span class=\"irs-line-left\"></span><span class=\"irs-line-mid\"></span><span class=\"irs-line-right\"></span></span><span class=\"irs-min\">0</span><span class=\"irs-max\">1</span><span class=\"irs-from\">0</span><span class=\"irs-to\">0</span><span class=\"irs-single\">0</span></span><span class=\"irs-grid\"></span><span class=\"irs-bar\"></span>');\r\n        this.$cache.rs=this.$cache.cont.find(\".irs\");this.$cache.min=this.$cache.cont.find(\".irs-min\");this.$cache.max=this.$cache.cont.find(\".irs-max\");this.$cache.from=this.$cache.cont.find(\".irs-from\");this.$cache.to=this.$cache.cont.find(\".irs-to\");this.$cache.single=this.$cache.cont.find(\".irs-single\");this.$cache.bar=this.$cache.cont.find(\".irs-bar\");this.$cache.line=this.$cache.cont.find(\".irs-line\");this.$cache.grid=this.$cache.cont.find(\".irs-grid\");\"single\"===this.options.type?(this.$cache.cont.append('<span class=\"irs-bar-edge\"></span><span class=\"irs-shadow shadow-single\"></span><span class=\"irs-slider single\"></span>'),\r\n            this.$cache.edge=this.$cache.cont.find(\".irs-bar-edge\"),this.$cache.s_single=this.$cache.cont.find(\".single\"),this.$cache.from[0].style.visibility=\"hidden\",this.$cache.to[0].style.visibility=\"hidden\",this.$cache.shad_single=this.$cache.cont.find(\".shadow-single\")):(this.$cache.cont.append('<span class=\"irs-shadow shadow-from\"></span><span class=\"irs-shadow shadow-to\"></span><span class=\"irs-slider from\"></span><span class=\"irs-slider to\"></span>'),this.$cache.s_from=this.$cache.cont.find(\".from\"),\r\n            this.$cache.s_to=this.$cache.cont.find(\".to\"),this.$cache.shad_from=this.$cache.cont.find(\".shadow-from\"),this.$cache.shad_to=this.$cache.cont.find(\".shadow-to\"),this.setTopHandler());this.options.hide_from_to&&(this.$cache.from[0].style.display=\"none\",this.$cache.to[0].style.display=\"none\",this.$cache.single[0].style.display=\"none\");this.appendGrid();this.options.disable?(this.appendDisableMask(),this.$cache.input[0].disabled=!0):(this.$cache.cont.removeClass(\"irs-disabled\"),this.$cache.input[0].disabled=\r\n            !1,this.bindEvents());this.options.drag_interval&&(this.$cache.bar[0].style.cursor=\"ew-resize\")},setTopHandler:function(){var a=this.options.max,b=this.options.to;this.options.from>this.options.min&&b===a?this.$cache.s_from.addClass(\"type_last\"):b<a&&this.$cache.s_to.addClass(\"type_last\")},changeLevel:function(a){switch(a){case \"single\":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_single_fake);break;case \"from\":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake);\r\n        this.$cache.s_from.addClass(\"state_hover\");this.$cache.s_from.addClass(\"type_last\");this.$cache.s_to.removeClass(\"type_last\");break;case \"to\":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_to_fake);this.$cache.s_to.addClass(\"state_hover\");this.$cache.s_to.addClass(\"type_last\");this.$cache.s_from.removeClass(\"type_last\");break;case \"both\":this.coords.p_gap_left=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.coords.p_gap_right=this.toFixed(this.coords.p_to_fake-\r\n        this.coords.p_pointer),this.$cache.s_to.removeClass(\"type_last\"),this.$cache.s_from.removeClass(\"type_last\")}},appendDisableMask:function(){this.$cache.cont.append('<span class=\"irs-disable-mask\"></span>');this.$cache.cont.addClass(\"irs-disabled\")},remove:function(){this.$cache.cont.remove();this.$cache.cont=null;this.$cache.line.off(\"keydown.irs_\"+this.plugin_count);this.$cache.body.off(\"touchmove.irs_\"+this.plugin_count);this.$cache.body.off(\"mousemove.irs_\"+this.plugin_count);this.$cache.win.off(\"touchend.irs_\"+\r\n        this.plugin_count);this.$cache.win.off(\"mouseup.irs_\"+this.plugin_count);m&&(this.$cache.body.off(\"mouseup.irs_\"+this.plugin_count),this.$cache.body.off(\"mouseleave.irs_\"+this.plugin_count));this.$cache.grid_labels=[];this.coords.big=[];this.coords.big_w=[];this.coords.big_p=[];this.coords.big_x=[];cancelAnimationFrame(this.raf_id)},bindEvents:function(){if(!this.no_diapason){this.$cache.body.on(\"touchmove.irs_\"+this.plugin_count,this.pointerMove.bind(this));this.$cache.body.on(\"mousemove.irs_\"+this.plugin_count,\r\n        this.pointerMove.bind(this));this.$cache.win.on(\"touchend.irs_\"+this.plugin_count,this.pointerUp.bind(this));this.$cache.win.on(\"mouseup.irs_\"+this.plugin_count,this.pointerUp.bind(this));this.$cache.line.on(\"touchstart.irs_\"+this.plugin_count,this.pointerClick.bind(this,\"click\"));this.$cache.line.on(\"mousedown.irs_\"+this.plugin_count,this.pointerClick.bind(this,\"click\"));this.options.drag_interval&&\"double\"===this.options.type?(this.$cache.bar.on(\"touchstart.irs_\"+this.plugin_count,this.pointerDown.bind(this,\r\n        \"both\")),this.$cache.bar.on(\"mousedown.irs_\"+this.plugin_count,this.pointerDown.bind(this,\"both\"))):(this.$cache.bar.on(\"touchstart.irs_\"+this.plugin_count,this.pointerClick.bind(this,\"click\")),this.$cache.bar.on(\"mousedown.irs_\"+this.plugin_count,this.pointerClick.bind(this,\"click\")));\"single\"===this.options.type?(this.$cache.single.on(\"touchstart.irs_\"+this.plugin_count,this.pointerDown.bind(this,\"single\")),this.$cache.s_single.on(\"touchstart.irs_\"+this.plugin_count,this.pointerDown.bind(this,\"single\")),\r\n        this.$cache.shad_single.on(\"touchstart.irs_\"+this.plugin_count,this.pointerClick.bind(this,\"click\")),this.$cache.single.on(\"mousedown.irs_\"+this.plugin_count,this.pointerDown.bind(this,\"single\")),this.$cache.s_single.on(\"mousedown.irs_\"+this.plugin_count,this.pointerDown.bind(this,\"single\")),this.$cache.edge.on(\"mousedown.irs_\"+this.plugin_count,this.pointerClick.bind(this,\"click\")),this.$cache.shad_single.on(\"mousedown.irs_\"+this.plugin_count,this.pointerClick.bind(this,\"click\"))):(this.$cache.single.on(\"touchstart.irs_\"+\r\n        this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.single.on(\"mousedown.irs_\"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.from.on(\"touchstart.irs_\"+this.plugin_count,this.pointerDown.bind(this,\"from\")),this.$cache.s_from.on(\"touchstart.irs_\"+this.plugin_count,this.pointerDown.bind(this,\"from\")),this.$cache.to.on(\"touchstart.irs_\"+this.plugin_count,this.pointerDown.bind(this,\"to\")),this.$cache.s_to.on(\"touchstart.irs_\"+this.plugin_count,this.pointerDown.bind(this,\"to\")),\r\n        this.$cache.shad_from.on(\"touchstart.irs_\"+this.plugin_count,this.pointerClick.bind(this,\"click\")),this.$cache.shad_to.on(\"touchstart.irs_\"+this.plugin_count,this.pointerClick.bind(this,\"click\")),this.$cache.from.on(\"mousedown.irs_\"+this.plugin_count,this.pointerDown.bind(this,\"from\")),this.$cache.s_from.on(\"mousedown.irs_\"+this.plugin_count,this.pointerDown.bind(this,\"from\")),this.$cache.to.on(\"mousedown.irs_\"+this.plugin_count,this.pointerDown.bind(this,\"to\")),this.$cache.s_to.on(\"mousedown.irs_\"+\r\n        this.plugin_count,this.pointerDown.bind(this,\"to\")),this.$cache.shad_from.on(\"mousedown.irs_\"+this.plugin_count,this.pointerClick.bind(this,\"click\")),this.$cache.shad_to.on(\"mousedown.irs_\"+this.plugin_count,this.pointerClick.bind(this,\"click\")));if(this.options.keyboard)this.$cache.line.on(\"keydown.irs_\"+this.plugin_count,this.key.bind(this,\"keyboard\"));m&&(this.$cache.body.on(\"mouseup.irs_\"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.body.on(\"mouseleave.irs_\"+this.plugin_count,this.pointerUp.bind(this)))}},\r\n    pointerMove:function(a){this.dragging&&(this.coords.x_pointer=(a.pageX||a.originalEvent.touches&&a.originalEvent.touches[0].pageX)-this.coords.x_gap,this.calc())},pointerUp:function(a){this.current_plugin===this.plugin_count&&this.is_active&&(this.is_active=!1,this.$cache.cont.find(\".state_hover\").removeClass(\"state_hover\"),this.force_redraw=!0,m&&f(\"*\").prop(\"unselectable\",!1),this.updateScene(),this.restoreOriginalMinInterval(),(f.contains(this.$cache.cont[0],a.target)||this.dragging)&&this.callOnFinish(),\r\n        this.dragging=!1)},pointerDown:function(a,b){b.preventDefault();var d=b.pageX||b.originalEvent.touches&&b.originalEvent.touches[0].pageX;2!==b.button&&(\"both\"===a&&this.setTempMinInterval(),a||(a=this.target||\"from\"),this.current_plugin=this.plugin_count,this.target=a,this.dragging=this.is_active=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=d-this.coords.x_gap,this.calcPointerPercent(),this.changeLevel(a),m&&f(\"*\").prop(\"unselectable\",!0),this.$cache.line.trigger(\"focus\"),\r\n        this.updateScene())},pointerClick:function(a,b){b.preventDefault();var d=b.pageX||b.originalEvent.touches&&b.originalEvent.touches[0].pageX;2!==b.button&&(this.current_plugin=this.plugin_count,this.target=a,this.is_click=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=+(d-this.coords.x_gap).toFixed(),this.force_redraw=!0,this.calc(),this.$cache.line.trigger(\"focus\"))},key:function(a,b){if(!(this.current_plugin!==this.plugin_count||b.altKey||b.ctrlKey||b.shiftKey||b.metaKey)){switch(b.which){case 83:case 65:case 40:case 37:b.preventDefault();\r\n        this.moveByKey(!1);break;case 87:case 68:case 38:case 39:b.preventDefault(),this.moveByKey(!0)}return!0}},moveByKey:function(a){var b=this.coords.p_pointer,b=a?b+this.options.keyboard_step:b-this.options.keyboard_step;this.coords.x_pointer=this.toFixed(this.coords.w_rs/100*b);this.is_key=!0;this.calc()},setMinMax:function(){this.options&&(this.options.hide_min_max?(this.$cache.min[0].style.display=\"none\",this.$cache.max[0].style.display=\"none\"):(this.options.values.length?(this.$cache.min.html(this.decorate(this.options.p_values[this.options.min])),\r\n        this.$cache.max.html(this.decorate(this.options.p_values[this.options.max]))):(this.$cache.min.html(this.decorate(this._prettify(this.options.min),this.options.min)),this.$cache.max.html(this.decorate(this._prettify(this.options.max),this.options.max))),this.labels.w_min=this.$cache.min.outerWidth(!1),this.labels.w_max=this.$cache.max.outerWidth(!1)))},setTempMinInterval:function(){var a=this.result.to-this.result.from;null===this.old_min_interval&&(this.old_min_interval=this.options.min_interval);\r\n        this.options.min_interval=a},restoreOriginalMinInterval:function(){null!==this.old_min_interval&&(this.options.min_interval=this.old_min_interval,this.old_min_interval=null)},calc:function(a){if(this.options){this.calc_count++;if(10===this.calc_count||a)this.calc_count=0,this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.calcHandlePercent();if(this.coords.w_rs){this.calcPointerPercent();a=this.getHandleX();\"both\"===this.target&&(this.coords.p_gap=0,a=this.getHandleX());\"click\"===this.target&&(this.coords.p_gap=\r\n        this.coords.p_handle/2,a=this.getHandleX(),this.target=this.options.drag_interval?\"both_one\":this.chooseHandle(a));switch(this.target){case \"base\":var b=(this.options.max-this.options.min)/100;a=(this.result.from-this.options.min)/b;b=(this.result.to-this.options.min)/b;this.coords.p_single_real=this.toFixed(a);this.coords.p_from_real=this.toFixed(a);this.coords.p_to_real=this.toFixed(b);this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max);\r\n        this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);this.target=null;break;case \"single\":if(this.options.from_fixed)break;\r\n        this.coords.p_single_real=this.convertToRealPercent(a);this.coords.p_single_real=this.calcWithStep(this.coords.p_single_real);this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max);this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);break;case \"from\":if(this.options.from_fixed)break;this.coords.p_from_real=this.convertToRealPercent(a);this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real);this.coords.p_from_real>\r\n    this.coords.p_to_real&&(this.coords.p_from_real=this.coords.p_to_real);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,\"from\");this.coords.p_from_real=this.checkMaxInterval(this.coords.p_from_real,this.coords.p_to_real,\"from\");this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);break;case \"to\":if(this.options.to_fixed)break;\r\n        this.coords.p_to_real=this.convertToRealPercent(a);this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real);this.coords.p_to_real<this.coords.p_from_real&&(this.coords.p_to_real=this.coords.p_from_real);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,\"to\");this.coords.p_to_real=this.checkMaxInterval(this.coords.p_to_real,this.coords.p_from_real,\"to\");\r\n        this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case \"both\":if(this.options.from_fixed||this.options.to_fixed)break;a=this.toFixed(a+.001*this.coords.p_handle);this.coords.p_from_real=this.convertToRealPercent(a)-this.coords.p_gap_left;this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,\r\n        this.coords.p_to_real,\"from\");this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);this.coords.p_to_real=this.convertToRealPercent(a)+this.coords.p_gap_right;this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,\"to\");this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);\r\n        break;case \"both_one\":if(!this.options.from_fixed&&!this.options.to_fixed){var d=this.convertToRealPercent(a);a=this.result.to_percent-this.result.from_percent;var c=a/2,b=d-c,d=d+c;0>b&&(b=0,d=b+a);100<d&&(d=100,b=d-a);this.coords.p_from_real=this.calcWithStep(b);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);this.coords.p_to_real=this.calcWithStep(d);this.coords.p_to_real=\r\n        this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real)}}\"single\"===this.options.type?(this.coords.p_bar_x=this.coords.p_handle/2,this.coords.p_bar_w=this.coords.p_single_fake,this.result.from_percent=this.coords.p_single_real,this.result.from=this.convertToValue(this.coords.p_single_real),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from])):(this.coords.p_bar_x=\r\n        this.toFixed(this.coords.p_from_fake+this.coords.p_handle/2),this.coords.p_bar_w=this.toFixed(this.coords.p_to_fake-this.coords.p_from_fake),this.result.from_percent=this.coords.p_from_real,this.result.from=this.convertToValue(this.coords.p_from_real),this.result.to_percent=this.coords.p_to_real,this.result.to=this.convertToValue(this.coords.p_to_real),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from],this.result.to_value=this.options.values[this.result.to]));\r\n        this.calcMinMax();this.calcLabels()}}},calcPointerPercent:function(){this.coords.w_rs?(0>this.coords.x_pointer||isNaN(this.coords.x_pointer)?this.coords.x_pointer=0:this.coords.x_pointer>this.coords.w_rs&&(this.coords.x_pointer=this.coords.w_rs),this.coords.p_pointer=this.toFixed(this.coords.x_pointer/this.coords.w_rs*100)):this.coords.p_pointer=0},convertToRealPercent:function(a){return a/(100-this.coords.p_handle)*100},convertToFakePercent:function(a){return a/100*(100-this.coords.p_handle)},getHandleX:function(){var a=\r\n        100-this.coords.p_handle,b=this.toFixed(this.coords.p_pointer-this.coords.p_gap);0>b?b=0:b>a&&(b=a);return b},calcHandlePercent:function(){this.coords.w_handle=\"single\"===this.options.type?this.$cache.s_single.outerWidth(!1):this.$cache.s_from.outerWidth(!1);this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100)},chooseHandle:function(a){return\"single\"===this.options.type?\"single\":a>=this.coords.p_from_real+(this.coords.p_to_real-this.coords.p_from_real)/2?this.options.to_fixed?\r\n        \"from\":\"to\":this.options.from_fixed?\"to\":\"from\"},calcMinMax:function(){this.coords.w_rs&&(this.labels.p_min=this.labels.w_min/this.coords.w_rs*100,this.labels.p_max=this.labels.w_max/this.coords.w_rs*100)},calcLabels:function(){this.coords.w_rs&&!this.options.hide_from_to&&(\"single\"===this.options.type?(this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=this.coords.p_single_fake+this.coords.p_handle/\r\n        2-this.labels.p_single_fake/2):(this.labels.w_from=this.$cache.from.outerWidth(!1),this.labels.p_from_fake=this.labels.w_from/this.coords.w_rs*100,this.labels.p_from_left=this.coords.p_from_fake+this.coords.p_handle/2-this.labels.p_from_fake/2,this.labels.p_from_left=this.toFixed(this.labels.p_from_left),this.labels.p_from_left=this.checkEdges(this.labels.p_from_left,this.labels.p_from_fake),this.labels.w_to=this.$cache.to.outerWidth(!1),this.labels.p_to_fake=this.labels.w_to/this.coords.w_rs*100,\r\n        this.labels.p_to_left=this.coords.p_to_fake+this.coords.p_handle/2-this.labels.p_to_fake/2,this.labels.p_to_left=this.toFixed(this.labels.p_to_left),this.labels.p_to_left=this.checkEdges(this.labels.p_to_left,this.labels.p_to_fake),this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=(this.labels.p_from_left+this.labels.p_to_left+this.labels.p_to_fake)/2-this.labels.p_single_fake/2,this.labels.p_single_left=\r\n        this.toFixed(this.labels.p_single_left)),this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single_fake))},updateScene:function(){this.raf_id&&(cancelAnimationFrame(this.raf_id),this.raf_id=null);clearTimeout(this.update_tm);this.update_tm=null;this.options&&(this.drawHandles(),this.is_active?this.raf_id=requestAnimationFrame(this.updateScene.bind(this)):this.update_tm=setTimeout(this.updateScene.bind(this),300))},drawHandles:function(){this.coords.w_rs=this.$cache.rs.outerWidth(!1);\r\n        if(this.coords.w_rs){this.coords.w_rs!==this.coords.w_rs_old&&(this.target=\"base\",this.is_resize=!0);if(this.coords.w_rs!==this.coords.w_rs_old||this.force_redraw)this.setMinMax(),this.calc(!0),this.drawLabels(),this.options.grid&&(this.calcGridMargin(),this.calcGridLabels()),this.force_redraw=!0,this.coords.w_rs_old=this.coords.w_rs,this.drawShadow();if(this.coords.w_rs&&(this.dragging||this.force_redraw||this.is_key)){if(this.old_from!==this.result.from||this.old_to!==this.result.to||this.force_redraw||\r\n            this.is_key){this.drawLabels();this.$cache.bar[0].style.left=this.coords.p_bar_x+\"%\";this.$cache.bar[0].style.width=this.coords.p_bar_w+\"%\";if(\"single\"===this.options.type)this.$cache.s_single[0].style.left=this.coords.p_single_fake+\"%\";else{this.$cache.s_from[0].style.left=this.coords.p_from_fake+\"%\";this.$cache.s_to[0].style.left=this.coords.p_to_fake+\"%\";if(this.old_from!==this.result.from||this.force_redraw)this.$cache.from[0].style.left=this.labels.p_from_left+\"%\";if(this.old_to!==this.result.to||\r\n            this.force_redraw)this.$cache.to[0].style.left=this.labels.p_to_left+\"%\"}this.$cache.single[0].style.left=this.labels.p_single_left+\"%\";this.writeToInput();this.old_from===this.result.from&&this.old_to===this.result.to||this.is_start||(this.$cache.input.trigger(\"change\"),this.$cache.input.trigger(\"input\"));this.old_from=this.result.from;this.old_to=this.result.to;this.is_resize||this.is_update||this.is_start||this.is_finish||this.callOnChange();if(this.is_key||this.is_click||this.is_first_update)this.is_first_update=\r\n            this.is_click=this.is_key=!1,this.callOnFinish();this.is_finish=this.is_resize=this.is_update=!1}this.force_redraw=this.is_click=this.is_key=this.is_start=!1}}},drawLabels:function(){if(this.options){var a=this.options.values.length,b=this.options.p_values,d;if(!this.options.hide_from_to)if(\"single\"===this.options.type)a=a?this.decorate(b[this.result.from]):this.decorate(this._prettify(this.result.from),this.result.from),this.$cache.single.html(a),this.calcLabels(),this.$cache.min[0].style.visibility=\r\n        this.labels.p_single_left<this.labels.p_min+1?\"hidden\":\"visible\",this.$cache.max[0].style.visibility=this.labels.p_single_left+this.labels.p_single_fake>100-this.labels.p_max-1?\"hidden\":\"visible\";else{a?(this.options.decorate_both?(a=this.decorate(b[this.result.from]),a+=this.options.values_separator,a+=this.decorate(b[this.result.to])):a=this.decorate(b[this.result.from]+this.options.values_separator+b[this.result.to]),d=this.decorate(b[this.result.from]),b=this.decorate(b[this.result.to])):(this.options.decorate_both?\r\n        (a=this.decorate(this._prettify(this.result.from),this.result.from),a+=this.options.values_separator,a+=this.decorate(this._prettify(this.result.to),this.result.to)):a=this.decorate(this._prettify(this.result.from)+this.options.values_separator+this._prettify(this.result.to),this.result.to),d=this.decorate(this._prettify(this.result.from),this.result.from),b=this.decorate(this._prettify(this.result.to),this.result.to));this.$cache.single.html(a);this.$cache.from.html(d);this.$cache.to.html(b);this.calcLabels();\r\n        b=Math.min(this.labels.p_single_left,this.labels.p_from_left);a=this.labels.p_single_left+this.labels.p_single_fake;d=this.labels.p_to_left+this.labels.p_to_fake;var c=Math.max(a,d);this.labels.p_from_left+this.labels.p_from_fake>=this.labels.p_to_left?(this.$cache.from[0].style.visibility=\"hidden\",this.$cache.to[0].style.visibility=\"hidden\",this.$cache.single[0].style.visibility=\"visible\",this.result.from===this.result.to?(\"from\"===this.target?this.$cache.from[0].style.visibility=\"visible\":\"to\"===\r\n        this.target?this.$cache.to[0].style.visibility=\"visible\":this.target||(this.$cache.from[0].style.visibility=\"visible\"),this.$cache.single[0].style.visibility=\"hidden\",c=d):(this.$cache.from[0].style.visibility=\"hidden\",this.$cache.to[0].style.visibility=\"hidden\",this.$cache.single[0].style.visibility=\"visible\",c=Math.max(a,d))):(this.$cache.from[0].style.visibility=\"visible\",this.$cache.to[0].style.visibility=\"visible\",this.$cache.single[0].style.visibility=\"hidden\");this.$cache.min[0].style.visibility=\r\n            b<this.labels.p_min+1?\"hidden\":\"visible\";this.$cache.max[0].style.visibility=c>100-this.labels.p_max-1?\"hidden\":\"visible\"}}},drawShadow:function(){var a=this.options,b=this.$cache,d=\"number\"===typeof a.from_min&&!isNaN(a.from_min),c=\"number\"===typeof a.from_max&&!isNaN(a.from_max),e=\"number\"===typeof a.to_min&&!isNaN(a.to_min),g=\"number\"===typeof a.to_max&&!isNaN(a.to_max);\"single\"===a.type?a.from_shadow&&(d||c)?(d=this.convertToPercent(d?a.from_min:a.min),c=this.convertToPercent(c?a.from_max:a.max)-\r\n        d,d=this.toFixed(d-this.coords.p_handle/100*d),c=this.toFixed(c-this.coords.p_handle/100*c),d+=this.coords.p_handle/2,b.shad_single[0].style.display=\"block\",b.shad_single[0].style.left=d+\"%\",b.shad_single[0].style.width=c+\"%\"):b.shad_single[0].style.display=\"none\":(a.from_shadow&&(d||c)?(d=this.convertToPercent(d?a.from_min:a.min),c=this.convertToPercent(c?a.from_max:a.max)-d,d=this.toFixed(d-this.coords.p_handle/100*d),c=this.toFixed(c-this.coords.p_handle/100*c),d+=this.coords.p_handle/2,b.shad_from[0].style.display=\r\n        \"block\",b.shad_from[0].style.left=d+\"%\",b.shad_from[0].style.width=c+\"%\"):b.shad_from[0].style.display=\"none\",a.to_shadow&&(e||g)?(e=this.convertToPercent(e?a.to_min:a.min),a=this.convertToPercent(g?a.to_max:a.max)-e,e=this.toFixed(e-this.coords.p_handle/100*e),a=this.toFixed(a-this.coords.p_handle/100*a),e+=this.coords.p_handle/2,b.shad_to[0].style.display=\"block\",b.shad_to[0].style.left=e+\"%\",b.shad_to[0].style.width=a+\"%\"):b.shad_to[0].style.display=\"none\")},writeToInput:function(){\"single\"===\r\n    this.options.type?(this.options.values.length?this.$cache.input.prop(\"value\",this.result.from_value):this.$cache.input.prop(\"value\",this.result.from),this.$cache.input.data(\"from\",this.result.from)):(this.options.values.length?this.$cache.input.prop(\"value\",this.result.from_value+this.options.input_values_separator+this.result.to_value):this.$cache.input.prop(\"value\",this.result.from+this.options.input_values_separator+this.result.to),this.$cache.input.data(\"from\",this.result.from),this.$cache.input.data(\"to\",\r\n        this.result.to))},callOnStart:function(){this.writeToInput();if(this.options.onStart&&\"function\"===typeof this.options.onStart)this.options.onStart(this.result)},callOnChange:function(){this.writeToInput();if(this.options.onChange&&\"function\"===typeof this.options.onChange)this.options.onChange(this.result)},callOnFinish:function(){this.writeToInput();if(this.options.onFinish&&\"function\"===typeof this.options.onFinish)this.options.onFinish(this.result)},callOnUpdate:function(){this.writeToInput();\r\n        if(this.options.onUpdate&&\"function\"===typeof this.options.onUpdate)this.options.onUpdate(this.result)},toggleInput:function(){this.$cache.input.toggleClass(\"irs-hidden-input\")},convertToPercent:function(a,b){var d=this.options.max-this.options.min;return d?this.toFixed((b?a:a-this.options.min)/(d/100)):(this.no_diapason=!0,0)},convertToValue:function(a){var b=this.options.min,d=this.options.max,c=b.toString().split(\".\")[1],e=d.toString().split(\".\")[1],g,l,f=0,k=0;if(0===a)return this.options.min;\r\n        if(100===a)return this.options.max;c&&(f=g=c.length);e&&(f=l=e.length);g&&l&&(f=g>=l?g:l);0>b&&(k=Math.abs(b),b=+(b+k).toFixed(f),d=+(d+k).toFixed(f));a=(d-b)/100*a+b;(b=this.options.step.toString().split(\".\")[1])?a=+a.toFixed(b.length):(a/=this.options.step,a*=this.options.step,a=+a.toFixed(0));k&&(a-=k);k=b?+a.toFixed(b.length):this.toFixed(a);k<this.options.min?k=this.options.min:k>this.options.max&&(k=this.options.max);return k},calcWithStep:function(a){var b=Math.round(a/this.coords.p_step)*\r\n        this.coords.p_step;100<b&&(b=100);100===a&&(b=100);return this.toFixed(b)},checkMinInterval:function(a,b,d){var c=this.options;if(!c.min_interval)return a;a=this.convertToValue(a);b=this.convertToValue(b);\"from\"===d?b-a<c.min_interval&&(a=b-c.min_interval):a-b<c.min_interval&&(a=b+c.min_interval);return this.convertToPercent(a)},checkMaxInterval:function(a,b,d){var c=this.options;if(!c.max_interval)return a;a=this.convertToValue(a);b=this.convertToValue(b);\"from\"===d?b-a>c.max_interval&&(a=b-c.max_interval):\r\n        a-b>c.max_interval&&(a=b+c.max_interval);return this.convertToPercent(a)},checkDiapason:function(a,b,d){a=this.convertToValue(a);var c=this.options;\"number\"!==typeof b&&(b=c.min);\"number\"!==typeof d&&(d=c.max);a<b&&(a=b);a>d&&(a=d);return this.convertToPercent(a)},toFixed:function(a){a=a.toFixed(20);return+a},_prettify:function(a){return this.options.prettify_enabled?this.options.prettify&&\"function\"===typeof this.options.prettify?this.options.prettify(a):this.prettify(a):a},prettify:function(a){return a.toString().replace(/(\\d{1,3}(?=(?:\\d\\d\\d)+(?!\\d)))/g,\r\n        \"$1\"+this.options.prettify_separator)},checkEdges:function(a,b){if(!this.options.force_edges)return this.toFixed(a);0>a?a=0:a>100-b&&(a=100-b);return this.toFixed(a)},validate:function(){var a=this.options,b=this.result,d=a.values,c=d.length,e,g;\"string\"===typeof a.min&&(a.min=+a.min);\"string\"===typeof a.max&&(a.max=+a.max);\"string\"===typeof a.from&&(a.from=+a.from);\"string\"===typeof a.to&&(a.to=+a.to);\"string\"===typeof a.step&&(a.step=+a.step);\"string\"===typeof a.from_min&&(a.from_min=+a.from_min);\r\n        \"string\"===typeof a.from_max&&(a.from_max=+a.from_max);\"string\"===typeof a.to_min&&(a.to_min=+a.to_min);\"string\"===typeof a.to_max&&(a.to_max=+a.to_max);\"string\"===typeof a.keyboard_step&&(a.keyboard_step=+a.keyboard_step);\"string\"===typeof a.grid_num&&(a.grid_num=+a.grid_num);a.max<a.min&&(a.max=a.min);if(c)for(a.p_values=[],a.min=0,a.max=c-1,a.step=1,a.grid_num=a.max,a.grid_snap=!0,g=0;g<c;g++)e=+d[g],isNaN(e)?e=d[g]:(d[g]=e,e=this._prettify(e)),a.p_values.push(e);if(\"number\"!==typeof a.from||isNaN(a.from))a.from=\r\n            a.min;if(\"number\"!==typeof a.to||isNaN(a.to))a.to=a.max;\"single\"===a.type?(a.from<a.min&&(a.from=a.min),a.from>a.max&&(a.from=a.max)):(a.from<a.min&&(a.from=a.min),a.from>a.max&&(a.from=a.max),a.to<a.min&&(a.to=a.min),a.to>a.max&&(a.to=a.max),this.update_check.from&&(this.update_check.from!==a.from&&a.from>a.to&&(a.from=a.to),this.update_check.to!==a.to&&a.to<a.from&&(a.to=a.from)),a.from>a.to&&(a.from=a.to),a.to<a.from&&(a.to=a.from));if(\"number\"!==typeof a.step||isNaN(a.step)||!a.step||0>a.step)a.step=\r\n            1;if(\"number\"!==typeof a.keyboard_step||isNaN(a.keyboard_step)||!a.keyboard_step||0>a.keyboard_step)a.keyboard_step=5;\"number\"===typeof a.from_min&&a.from<a.from_min&&(a.from=a.from_min);\"number\"===typeof a.from_max&&a.from>a.from_max&&(a.from=a.from_max);\"number\"===typeof a.to_min&&a.to<a.to_min&&(a.to=a.to_min);\"number\"===typeof a.to_max&&a.from>a.to_max&&(a.to=a.to_max);if(b){b.min!==a.min&&(b.min=a.min);b.max!==a.max&&(b.max=a.max);if(b.from<b.min||b.from>b.max)b.from=a.from;if(b.to<b.min||b.to>\r\n            b.max)b.to=a.to}if(\"number\"!==typeof a.min_interval||isNaN(a.min_interval)||!a.min_interval||0>a.min_interval)a.min_interval=0;if(\"number\"!==typeof a.max_interval||isNaN(a.max_interval)||!a.max_interval||0>a.max_interval)a.max_interval=0;a.min_interval&&a.min_interval>a.max-a.min&&(a.min_interval=a.max-a.min);a.max_interval&&a.max_interval>a.max-a.min&&(a.max_interval=a.max-a.min)},decorate:function(a,b){var d=\"\",c=this.options;c.prefix&&(d+=c.prefix);d+=a;c.max_postfix&&(c.values.length&&a===c.p_values[c.max]?\r\n        (d+=c.max_postfix,c.postfix&&(d+=\" \")):b===c.max&&(d+=c.max_postfix,c.postfix&&(d+=\" \")));c.postfix&&(d+=c.postfix);return d},updateFrom:function(){this.result.from=this.options.from;this.result.from_percent=this.convertToPercent(this.result.from);this.options.values&&(this.result.from_value=this.options.values[this.result.from])},updateTo:function(){this.result.to=this.options.to;this.result.to_percent=this.convertToPercent(this.result.to);this.options.values&&(this.result.to_value=this.options.values[this.result.to])},\r\n    updateResult:function(){this.result.min=this.options.min;this.result.max=this.options.max;this.updateFrom();this.updateTo()},appendGrid:function(){if(this.options.grid){var a=this.options,b,d;b=a.max-a.min;var c=a.grid_num,e,g,f=4,h,k,m,n=\"\";this.calcGridMargin();a.grid_snap?(c=b/a.step,e=this.toFixed(a.step/(b/100))):e=this.toFixed(100/c);4<c&&(f=3);7<c&&(f=2);14<c&&(f=1);28<c&&(f=0);for(b=0;b<c+1;b++){h=f;g=this.toFixed(e*b);100<g&&(g=100,h-=2,0>h&&(h=0));this.coords.big[b]=g;k=(g-e*(b-1))/(h+1);\r\n        for(d=1;d<=h&&0!==g;d++)m=this.toFixed(g-k*d),n+='<span class=\"irs-grid-pol small\" style=\"left: '+m+'%\"></span>';n+='<span class=\"irs-grid-pol\" style=\"left: '+g+'%\"></span>';d=this.convertToValue(g);d=a.values.length?a.p_values[d]:this._prettify(d);n+='<span class=\"irs-grid-text js-grid-text-'+b+'\" style=\"left: '+g+'%\">'+d+\"</span>\"}this.coords.big_num=Math.ceil(c+1);this.$cache.cont.addClass(\"irs-with-grid\");this.$cache.grid.html(n);this.cacheGridLabels()}},cacheGridLabels:function(){var a,b,d=this.coords.big_num;\r\n        for(b=0;b<d;b++)a=this.$cache.grid.find(\".js-grid-text-\"+b),this.$cache.grid_labels.push(a);this.calcGridLabels()},calcGridLabels:function(){var a,b;b=[];var d=[],c=this.coords.big_num;for(a=0;a<c;a++)this.coords.big_w[a]=this.$cache.grid_labels[a].outerWidth(!1),this.coords.big_p[a]=this.toFixed(this.coords.big_w[a]/this.coords.w_rs*100),this.coords.big_x[a]=this.toFixed(this.coords.big_p[a]/2),b[a]=this.toFixed(this.coords.big[a]-this.coords.big_x[a]),d[a]=this.toFixed(b[a]+this.coords.big_p[a]);\r\n        this.options.force_edges&&(b[0]<-this.coords.grid_gap&&(b[0]=-this.coords.grid_gap,d[0]=this.toFixed(b[0]+this.coords.big_p[0]),this.coords.big_x[0]=this.coords.grid_gap),d[c-1]>100+this.coords.grid_gap&&(d[c-1]=100+this.coords.grid_gap,b[c-1]=this.toFixed(d[c-1]-this.coords.big_p[c-1]),this.coords.big_x[c-1]=this.toFixed(this.coords.big_p[c-1]-this.coords.grid_gap)));this.calcGridCollision(2,b,d);this.calcGridCollision(4,b,d);for(a=0;a<c;a++)b=this.$cache.grid_labels[a][0],this.coords.big_x[a]!==\r\n        Number.POSITIVE_INFINITY&&(b.style.marginLeft=-this.coords.big_x[a]+\"%\")},calcGridCollision:function(a,b,d){var c,e,g,f=this.coords.big_num;for(c=0;c<f;c+=a){e=c+a/2;if(e>=f)break;g=this.$cache.grid_labels[e][0];g.style.visibility=d[c]<=b[e]?\"visible\":\"hidden\"}},calcGridMargin:function(){this.options.grid_margin&&(this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&(this.coords.w_handle=\"single\"===this.options.type?this.$cache.s_single.outerWidth(!1):this.$cache.s_from.outerWidth(!1),\r\n        this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100),this.coords.grid_gap=this.toFixed(this.coords.p_handle/2-.1),this.$cache.grid[0].style.width=this.toFixed(100-this.coords.p_handle)+\"%\",this.$cache.grid[0].style.left=this.coords.grid_gap+\"%\"))},update:function(a){this.input&&(this.is_update=!0,this.options.from=this.result.from,this.options.to=this.result.to,this.update_check.from=this.result.from,this.update_check.to=this.result.to,this.options=f.extend(this.options,a),\r\n        this.validate(),this.updateResult(a),this.toggleInput(),this.remove(),this.init(!0))},reset:function(){this.input&&(this.updateResult(),this.update())},destroy:function(){this.input&&(this.toggleInput(),this.$cache.input.prop(\"readonly\",!1),f.data(this.input,\"ionRangeSlider\",null),this.remove(),this.options=this.input=null)}};f.fn.ionRangeSlider=function(a){return this.each(function(){f.data(this,\"ionRangeSlider\")||f.data(this,\"ionRangeSlider\",new r(this,a,u++))})};(function(){for(var a=0,b=[\"ms\",\r\n    \"moz\",\"webkit\",\"o\"],d=0;d<b.length&&!h.requestAnimationFrame;++d)h.requestAnimationFrame=h[b[d]+\"RequestAnimationFrame\"],h.cancelAnimationFrame=h[b[d]+\"CancelAnimationFrame\"]||h[b[d]+\"CancelRequestAnimationFrame\"];h.requestAnimationFrame||(h.requestAnimationFrame=function(b,d){var c=(new Date).getTime(),e=Math.max(0,16-(c-a)),f=h.setTimeout(function(){b(c+e)},e);a=c+e;return f});h.cancelAnimationFrame||(h.cancelAnimationFrame=function(a){clearTimeout(a)})})()});\r\n","Mageplaza_Core/js/jquery.autocomplete.min.js":"/**\r\n *  Ajax Autocomplete for jQuery, version 1.3.0\r\n *  (c) 2017 Tomas Kirda\r\n *\r\n *  Ajax Autocomplete for jQuery is freely distributable under the terms of an MIT-style license.\r\n *  For details, see the web site: https://github.com/devbridge/jQuery-Autocomplete\r\n */\r\n!function(a){\"use strict\";\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(\"object\"==typeof exports&&\"function\"==typeof require?require(\"jquery\"):jQuery)}(function(a){\"use strict\";function b(c,d){var e=a.noop,f=this,g={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:\"auto\",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:b.formatResult,formatGroup:b.formatGroup,delimiter:null,zIndex:9999,type:\"GET\",noCache:!1,onSearchStart:e,onSearchComplete:e,onSearchError:e,preserveInput:!1,containerClass:\"autocomplete-suggestions\",tabDisabled:!1,dataType:\"text\",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(a,b,c){return-1!==a.value.toLowerCase().indexOf(c)},paramName:\"query\",transformResult:function(b){return\"string\"==typeof b?a.parseJSON(b):b},showNoSuggestionNotice:!1,noSuggestionNotice:\"No results\",orientation:\"bottom\",forceFixPosition:!1};f.element=c,f.el=a(c),f.suggestions=[],f.badQueries=[],f.selectedIndex=-1,f.currentValue=f.element.value,f.intervalId=0,f.cachedResponse={},f.onChangeInterval=null,f.onChange=null,f.isLocal=!1,f.suggestionsContainer=null,f.noSuggestionsContainer=null,f.options=a.extend({},g,d),f.classes={selected:\"autocomplete-selected\",suggestion:\"autocomplete-suggestion\"},f.hint=null,f.hintValue=\"\",f.selection=null,f.initialize(),f.setOptions(d)}var c=function(){return{escapeRegExChars:function(a){return a.replace(/[|\\\\{}()[\\]^$+*?.]/g,\"\\\\$&\")},createNode:function(a){var b=document.createElement(\"div\");return b.className=a,b.style.position=\"absolute\",b.style.display=\"none\",b}}}(),d={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40};b.utils=c,a.Autocomplete=b,b.formatResult=function(a,b){if(!b)return a.value;var d=\"(\"+c.escapeRegExChars(b)+\")\";return a.value.replace(new RegExp(d,\"gi\"),\"<strong>$1</strong>\").replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\").replace(/&lt;(\\/?strong)&gt;/g,\"<$1>\")},b.formatGroup=function(a,b){return'<div class=\"autocomplete-group\"><strong>'+b+\"</strong></div>\"},b.prototype={killerFn:null,initialize:function(){var c,d=this,e=\".\"+d.classes.suggestion,f=d.classes.selected,g=d.options;d.element.setAttribute(\"autocomplete\",\"off\"),d.killerFn=function(b){a(b.target).closest(\".\"+d.options.containerClass).length||(d.killSuggestions(),d.disableKillerFn())},d.noSuggestionsContainer=a('<div class=\"autocomplete-no-suggestion\"></div>').html(this.options.noSuggestionNotice).get(0),d.suggestionsContainer=b.utils.createNode(g.containerClass),c=a(d.suggestionsContainer),c.appendTo(g.appendTo),\"auto\"!==g.width&&c.css(\"width\",g.width),c.on(\"mouseover.autocomplete\",e,function(){d.activate(a(this).data(\"index\"))}),c.on(\"mouseout.autocomplete\",function(){d.selectedIndex=-1,c.children(\".\"+f).removeClass(f)}),c.on(\"click.autocomplete\",e,function(){return d.select(a(this).data(\"index\")),!1}),d.fixPositionCapture=function(){d.visible&&d.fixPosition()},a(window).on(\"resize.autocomplete\",d.fixPositionCapture),d.el.on(\"keydown.autocomplete\",function(a){d.onKeyPress(a)}),d.el.on(\"keyup.autocomplete\",function(a){d.onKeyUp(a)}),d.el.on(\"blur.autocomplete\",function(){d.onBlur()}),d.el.on(\"focus.autocomplete\",function(){d.onFocus()}),d.el.on(\"change.autocomplete\",function(a){d.onKeyUp(a)}),d.el.on(\"input.autocomplete\",function(a){d.onKeyUp(a)})},onFocus:function(){var a=this;a.fixPosition(),a.el.val().length>=a.options.minChars&&a.onValueChange()},onBlur:function(){this.enableKillerFn()},abortAjax:function(){var a=this;a.currentRequest&&(a.currentRequest.abort(),a.currentRequest=null)},setOptions:function(b){var c=this,d=c.options;a.extend(d,b),c.isLocal=a.isArray(d.lookup),c.isLocal&&(d.lookup=c.verifySuggestionsFormat(d.lookup)),d.orientation=c.validateOrientation(d.orientation,\"bottom\"),a(c.suggestionsContainer).css({\"max-height\":d.maxHeight+\"px\",width:d.width+\"px\",\"z-index\":d.zIndex})},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue=\"\",this.suggestions=[]},disable:function(){var a=this;a.disabled=!0,clearInterval(a.onChangeInterval),a.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var b=this,c=a(b.suggestionsContainer),d=c.parent().get(0);if(d===document.body||b.options.forceFixPosition){var e=b.options.orientation,f=c.outerHeight(),g=b.el.outerHeight(),h=b.el.offset(),i={top:h.top,left:h.left};if(\"auto\"===e){var j=a(window).height(),k=a(window).scrollTop(),l=-k+h.top-f,m=k+j-(h.top+g+f);e=Math.max(l,m)===l?\"top\":\"bottom\"}if(\"top\"===e?i.top+=-f:i.top+=g,d!==document.body){var n,o=c.css(\"opacity\");b.visible||c.css(\"opacity\",0).show(),n=c.offsetParent().offset(),i.top-=n.top,i.left-=n.left,b.visible||c.css(\"opacity\",o).hide()}\"auto\"===b.options.width&&(i.width=b.el.outerWidth()+\"px\"),c.css(i)}},enableKillerFn:function(){var b=this;a(document).on(\"click.autocomplete\",b.killerFn)},disableKillerFn:function(){var b=this;a(document).off(\"click.autocomplete\",b.killerFn)},killSuggestions:function(){var a=this;a.stopKillSuggestions(),a.intervalId=window.setInterval(function(){a.visible&&(a.options.preserveInput||a.el.val(a.currentValue),a.hide()),a.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var a,b=this,c=b.el.val().length,d=b.element.selectionStart;return\"number\"==typeof d?d===c:document.selection?(a=document.selection.createRange(),a.moveStart(\"character\",-c),c===a.text.length):!0},onKeyPress:function(a){var b=this;if(!b.disabled&&!b.visible&&a.which===d.DOWN&&b.currentValue)return void b.suggest();if(!b.disabled&&b.visible){switch(a.which){case d.ESC:b.el.val(b.currentValue),b.hide();break;case d.RIGHT:if(b.hint&&b.options.onHint&&b.isCursorAtEnd()){b.selectHint();break}return;case d.TAB:if(b.hint&&b.options.onHint)return void b.selectHint();if(-1===b.selectedIndex)return void b.hide();if(b.select(b.selectedIndex),b.options.tabDisabled===!1)return;break;case d.RETURN:if(-1===b.selectedIndex)return void b.hide();b.select(b.selectedIndex);break;case d.UP:b.moveUp();break;case d.DOWN:b.moveDown();break;default:return}a.stopImmediatePropagation(),a.preventDefault()}},onKeyUp:function(a){var b=this;if(!b.disabled){switch(a.which){case d.UP:case d.DOWN:return}clearInterval(b.onChangeInterval),b.currentValue!==b.el.val()&&(b.findBestHint(),b.options.deferRequestBy>0?b.onChangeInterval=setInterval(function(){b.onValueChange()},b.options.deferRequestBy):b.onValueChange())}},onValueChange:function(){var b=this,c=b.options,d=b.el.val(),e=b.getQuery(d);return b.selection&&b.currentValue!==e&&(b.selection=null,(c.onInvalidateSelection||a.noop).call(b.element)),clearInterval(b.onChangeInterval),b.currentValue=d,b.selectedIndex=-1,c.triggerSelectOnValidInput&&b.isExactMatch(e)?void b.select(0):void(e.length<c.minChars?b.hide():b.getSuggestions(e))},isExactMatch:function(a){var b=this.suggestions;return 1===b.length&&b[0].value.toLowerCase()===a.toLowerCase()},getQuery:function(b){var c,d=this.options.delimiter;return d?(c=b.split(d),a.trim(c[c.length-1])):b},getSuggestionsLocal:function(b){var c,d=this,e=d.options,f=b.toLowerCase(),g=e.lookupFilter,h=parseInt(e.lookupLimit,10);return c={suggestions:a.grep(e.lookup,function(a){return g(a,b,f)})},h&&c.suggestions.length>h&&(c.suggestions=c.suggestions.slice(0,h)),c},getSuggestions:function(b){var c,d,e,f,g=this,h=g.options,i=h.serviceUrl;if(h.params[h.paramName]=b,d=h.ignoreParams?null:h.params,h.onSearchStart.call(g.element,h.params)!==!1){if(a.isFunction(h.lookup))return void h.lookup(b,function(a){g.suggestions=a.suggestions,g.suggest(),h.onSearchComplete.call(g.element,b,a.suggestions)});g.isLocal?c=g.getSuggestionsLocal(b):(a.isFunction(i)&&(i=i.call(g.element,b)),e=i+\"?\"+a.param(d||{}),c=g.cachedResponse[e]),c&&a.isArray(c.suggestions)?(g.suggestions=c.suggestions,g.suggest(),h.onSearchComplete.call(g.element,b,c.suggestions)):g.isBadQuery(b)?h.onSearchComplete.call(g.element,b,[]):(g.abortAjax(),f={url:i,data:d,type:h.type,dataType:h.dataType},a.extend(f,h.ajaxSettings),g.currentRequest=a.ajax(f).done(function(a){var c;g.currentRequest=null,c=h.transformResult(a,b),g.processResponse(c,b,e),h.onSearchComplete.call(g.element,b,c.suggestions)}).fail(function(a,c,d){h.onSearchError.call(g.element,b,a,c,d)}))}},isBadQuery:function(a){if(!this.options.preventBadQueries)return!1;for(var b=this.badQueries,c=b.length;c--;)if(0===a.indexOf(b[c]))return!0;return!1},hide:function(){var b=this,c=a(b.suggestionsContainer);a.isFunction(b.options.onHide)&&b.visible&&b.options.onHide.call(b.element,c),b.visible=!1,b.selectedIndex=-1,clearInterval(b.onChangeInterval),a(b.suggestionsContainer).hide(),b.signalHint(null)},suggest:function(){if(!this.suggestions.length)return void(this.options.showNoSuggestionNotice?this.noSuggestions():this.hide());var b,c=this,d=c.options,e=d.groupBy,f=d.formatResult,g=c.getQuery(c.currentValue),h=c.classes.suggestion,i=c.classes.selected,j=a(c.suggestionsContainer),k=a(c.noSuggestionsContainer),l=d.beforeRender,m=\"\",n=function(a,c){var f=a.data[e];return b===f?\"\":(b=f,d.formatGroup(a,b))};return d.triggerSelectOnValidInput&&c.isExactMatch(g)?void c.select(0):(a.each(c.suggestions,function(a,b){e&&(m+=n(b,g,a)),m+='<div class=\"'+h+'\" data-index=\"'+a+'\">'+f(b,g,a)+\"</div>\"}),this.adjustContainerWidth(),k.detach(),j.html(m),a.isFunction(l)&&l.call(c.element,j,c.suggestions),c.fixPosition(),j.show(),d.autoSelectFirst&&(c.selectedIndex=0,j.scrollTop(0),j.children(\".\"+h).first().addClass(i)),c.visible=!0,void c.findBestHint())},noSuggestions:function(){var b=this,c=a(b.suggestionsContainer),d=a(b.noSuggestionsContainer);this.adjustContainerWidth(),d.detach(),c.empty(),c.append(d),b.fixPosition(),c.show(),b.visible=!0},adjustContainerWidth:function(){var b,c=this,d=c.options,e=a(c.suggestionsContainer);\"auto\"===d.width?(b=c.el.outerWidth(),e.css(\"width\",b>0?b:300)):\"flex\"===d.width&&e.css(\"width\",\"\")},findBestHint:function(){var b=this,c=b.el.val().toLowerCase(),d=null;c&&(a.each(b.suggestions,function(a,b){var e=0===b.value.toLowerCase().indexOf(c);return e&&(d=b),!e}),b.signalHint(d))},signalHint:function(b){var c=\"\",d=this;b&&(c=d.currentValue+b.value.substr(d.currentValue.length)),d.hintValue!==c&&(d.hintValue=c,d.hint=b,(this.options.onHint||a.noop)(c))},verifySuggestionsFormat:function(b){return b.length&&\"string\"==typeof b[0]?a.map(b,function(a){return{value:a,data:null}}):b},validateOrientation:function(b,c){return b=a.trim(b||\"\").toLowerCase(),-1===a.inArray(b,[\"auto\",\"bottom\",\"top\"])&&(b=c),b},processResponse:function(a,b,c){var d=this,e=d.options;a.suggestions=d.verifySuggestionsFormat(a.suggestions),e.noCache||(d.cachedResponse[c]=a,e.preventBadQueries&&!a.suggestions.length&&d.badQueries.push(b)),b===d.getQuery(d.currentValue)&&(d.suggestions=a.suggestions,d.suggest())},activate:function(b){var c,d=this,e=d.classes.selected,f=a(d.suggestionsContainer),g=f.find(\".\"+d.classes.suggestion);return f.find(\".\"+e).removeClass(e),d.selectedIndex=b,-1!==d.selectedIndex&&g.length>d.selectedIndex?(c=g.get(d.selectedIndex),a(c).addClass(e),c):null},selectHint:function(){var b=this,c=a.inArray(b.hint,b.suggestions);b.select(c)},select:function(a){var b=this;b.hide(),b.onSelect(a),b.disableKillerFn()},moveUp:function(){var b=this;if(-1!==b.selectedIndex)return 0===b.selectedIndex?(a(b.suggestionsContainer).children().first().removeClass(b.classes.selected),b.selectedIndex=-1,b.el.val(b.currentValue),void b.findBestHint()):void b.adjustScroll(b.selectedIndex-1)},moveDown:function(){var a=this;a.selectedIndex!==a.suggestions.length-1&&a.adjustScroll(a.selectedIndex+1)},adjustScroll:function(b){var c=this,d=c.activate(b);if(d){var e,f,g,h=a(d).outerHeight();e=d.offsetTop,f=a(c.suggestionsContainer).scrollTop(),g=f+c.options.maxHeight-h,f>e?a(c.suggestionsContainer).scrollTop(e):e>g&&a(c.suggestionsContainer).scrollTop(e-c.options.maxHeight+h),c.options.preserveInput||c.el.val(c.getValue(c.suggestions[b].value)),c.signalHint(null)}},onSelect:function(b){var c=this,d=c.options.onSelect,e=c.suggestions[b];c.currentValue=c.getValue(e.value),c.currentValue===c.el.val()||c.options.preserveInput||c.el.val(c.currentValue),c.signalHint(null),c.suggestions=[],c.selection=e,a.isFunction(d)&&d.call(c.element,e)},getValue:function(a){var b,c,d=this,e=d.options.delimiter;return e?(b=d.currentValue,c=b.split(e),1===c.length?a:b.substr(0,b.length-c[c.length-1].length)+a):a},dispose:function(){var b=this;b.el.off(\".autocomplete\").removeData(\"autocomplete\"),b.disableKillerFn(),a(window).off(\"resize.autocomplete\",b.fixPositionCapture),a(b.suggestionsContainer).remove()}},a.fn.autocomplete=a.fn.devbridgeAutocomplete=function(c,d){var e=\"autocomplete\";return arguments.length?this.each(function(){var f=a(this),g=f.data(e);\"string\"==typeof c?g&&\"function\"==typeof g[c]&&g[c](d):(g&&g.dispose&&g.dispose(),g=new b(this,c),f.data(e,g))}):this.first().data(e)}});","Mageplaza_Core/js/jquery.magnific-popup.min.js":"// Magnific Popup v1.1.0 by Dmitry Semenov\r\n// http://bit.ly/magnific-popup#build=inline+image+ajax+iframe+gallery+retina+imagezoom\r\n(function(a){typeof define==\"function\"&&define.amd?define([\"jquery\"],a):typeof exports==\"object\"?a(require(\"jquery\")):a(window.jQuery||window.Zepto)})(function(a){var b=\"Close\",c=\"BeforeClose\",d=\"AfterClose\",e=\"BeforeAppend\",f=\"MarkupParse\",g=\"Open\",h=\"Change\",i=\"mfp\",j=\".\"+i,k=\"mfp-ready\",l=\"mfp-removing\",m=\"mfp-prevent-close\",n,o=function(){},p=!!window.jQuery,q,r=a(window),s,t,u,v,w=function(a,b){n.ev.on(i+a+j,b)},x=function(b,c,d,e){var f=document.createElement(\"div\");return f.className=\"mfp-\"+b,d&&(f.innerHTML=d),e?c&&c.appendChild(f):(f=a(f),c&&f.appendTo(c)),f},y=function(b,c){n.ev.triggerHandler(i+b,c),n.st.callbacks&&(b=b.charAt(0).toLowerCase()+b.slice(1),n.st.callbacks[b]&&n.st.callbacks[b].apply(n,a.isArray(c)?c:[c]))},z=function(b){if(b!==v||!n.currTemplate.closeBtn)n.currTemplate.closeBtn=a(n.st.closeMarkup.replace(\"%title%\",n.st.tClose)),v=b;return n.currTemplate.closeBtn},A=function(){a.magnificPopup.instance||(n=new o,n.init(),a.magnificPopup.instance=n)},B=function(){var a=document.createElement(\"p\").style,b=[\"ms\",\"O\",\"Moz\",\"Webkit\"];if(a.transition!==undefined)return!0;while(b.length)if(b.pop()+\"Transition\"in a)return!0;return!1};o.prototype={constructor:o,init:function(){var b=navigator.appVersion;n.isLowIE=n.isIE8=document.all&&!document.addEventListener,n.isAndroid=/android/gi.test(b),n.isIOS=/iphone|ipad|ipod/gi.test(b),n.supportsTransition=B(),n.probablyMobile=n.isAndroid||n.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),s=a(document),n.popupsCache={}},open:function(b){var c;if(b.isObj===!1){n.items=b.items.toArray(),n.index=0;var d=b.items,e;for(c=0;c<d.length;c++){e=d[c],e.parsed&&(e=e.el[0]);if(e===b.el[0]){n.index=c;break}}}else n.items=a.isArray(b.items)?b.items:[b.items],n.index=b.index||0;if(n.isOpen){n.updateItemHTML();return}n.types=[],u=\"\",b.mainEl&&b.mainEl.length?n.ev=b.mainEl.eq(0):n.ev=s,b.key?(n.popupsCache[b.key]||(n.popupsCache[b.key]={}),n.currTemplate=n.popupsCache[b.key]):n.currTemplate={},n.st=a.extend(!0,{},a.magnificPopup.defaults,b),n.fixedContentPos=n.st.fixedContentPos===\"auto\"?!n.probablyMobile:n.st.fixedContentPos,n.st.modal&&(n.st.closeOnContentClick=!1,n.st.closeOnBgClick=!1,n.st.showCloseBtn=!1,n.st.enableEscapeKey=!1),n.bgOverlay||(n.bgOverlay=x(\"bg\").on(\"click\"+j,function(){n.close()}),n.wrap=x(\"wrap\").attr(\"tabindex\",-1).on(\"click\"+j,function(a){n._checkIfClose(a.target)&&n.close()}),n.container=x(\"container\",n.wrap)),n.contentContainer=x(\"content\"),n.st.preloader&&(n.preloader=x(\"preloader\",n.container,n.st.tLoading));var h=a.magnificPopup.modules;for(c=0;c<h.length;c++){var i=h[c];i=i.charAt(0).toUpperCase()+i.slice(1),n[\"init\"+i].call(n)}y(\"BeforeOpen\"),n.st.showCloseBtn&&(n.st.closeBtnInside?(w(f,function(a,b,c,d){c.close_replaceWith=z(d.type)}),u+=\" mfp-close-btn-in\"):n.wrap.append(z())),n.st.alignTop&&(u+=\" mfp-align-top\"),n.fixedContentPos?n.wrap.css({overflow:n.st.overflowY,overflowX:\"hidden\",overflowY:n.st.overflowY}):n.wrap.css({top:r.scrollTop(),position:\"absolute\"}),(n.st.fixedBgPos===!1||n.st.fixedBgPos===\"auto\"&&!n.fixedContentPos)&&n.bgOverlay.css({height:s.height(),position:\"absolute\"}),n.st.enableEscapeKey&&s.on(\"keyup\"+j,function(a){a.keyCode===27&&n.close()}),r.on(\"resize\"+j,function(){n.updateSize()}),n.st.closeOnContentClick||(u+=\" mfp-auto-cursor\"),u&&n.wrap.addClass(u);var l=n.wH=r.height(),m={};if(n.fixedContentPos&&n._hasScrollBar(l)){var o=n._getScrollbarSize();o&&(m.marginRight=o)}n.fixedContentPos&&(n.isIE7?a(\"body, html\").css(\"overflow\",\"hidden\"):m.overflow=\"hidden\");var p=n.st.mainClass;return n.isIE7&&(p+=\" mfp-ie7\"),p&&n._addClassToMFP(p),n.updateItemHTML(),y(\"BuildControls\"),a(\"html\").css(m),n.bgOverlay.add(n.wrap).prependTo(n.st.prependTo||a(document.body)),n._lastFocusedEl=document.activeElement,setTimeout(function(){n.content?(n._addClassToMFP(k),n._setFocus()):n.bgOverlay.addClass(k),s.on(\"focusin\"+j,n._onFocusIn)},16),n.isOpen=!0,n.updateSize(l),y(g),b},close:function(){if(!n.isOpen)return;y(c),n.isOpen=!1,n.st.removalDelay&&!n.isLowIE&&n.supportsTransition?(n._addClassToMFP(l),setTimeout(function(){n._close()},n.st.removalDelay)):n._close()},_close:function(){y(b);var c=l+\" \"+k+\" \";n.bgOverlay.detach(),n.wrap.detach(),n.container.empty(),n.st.mainClass&&(c+=n.st.mainClass+\" \"),n._removeClassFromMFP(c);if(n.fixedContentPos){var e={marginRight:\"\"};n.isIE7?a(\"body, html\").css(\"overflow\",\"\"):e.overflow=\"\",a(\"html\").css(e)}s.off(\"keyup\"+j+\" focusin\"+j),n.ev.off(j),n.wrap.attr(\"class\",\"mfp-wrap\").removeAttr(\"style\"),n.bgOverlay.attr(\"class\",\"mfp-bg\"),n.container.attr(\"class\",\"mfp-container\"),n.st.showCloseBtn&&(!n.st.closeBtnInside||n.currTemplate[n.currItem.type]===!0)&&n.currTemplate.closeBtn&&n.currTemplate.closeBtn.detach(),n.st.autoFocusLast&&n._lastFocusedEl&&a(n._lastFocusedEl).focus(),n.currItem=null,n.content=null,n.currTemplate=null,n.prevHeight=0,y(d)},updateSize:function(a){if(n.isIOS){var b=document.documentElement.clientWidth/window.innerWidth,c=window.innerHeight*b;n.wrap.css(\"height\",c),n.wH=c}else n.wH=a||r.height();n.fixedContentPos||n.wrap.css(\"height\",n.wH),y(\"Resize\")},updateItemHTML:function(){var b=n.items[n.index];n.contentContainer.detach(),n.content&&n.content.detach(),b.parsed||(b=n.parseEl(n.index));var c=b.type;y(\"BeforeChange\",[n.currItem?n.currItem.type:\"\",c]),n.currItem=b;if(!n.currTemplate[c]){var d=n.st[c]?n.st[c].markup:!1;y(\"FirstMarkupParse\",d),d?n.currTemplate[c]=a(d):n.currTemplate[c]=!0}t&&t!==b.type&&n.container.removeClass(\"mfp-\"+t+\"-holder\");var e=n[\"get\"+c.charAt(0).toUpperCase()+c.slice(1)](b,n.currTemplate[c]);n.appendContent(e,c),b.preloaded=!0,y(h,b),t=b.type,n.container.prepend(n.contentContainer),y(\"AfterChange\")},appendContent:function(a,b){n.content=a,a?n.st.showCloseBtn&&n.st.closeBtnInside&&n.currTemplate[b]===!0?n.content.find(\".mfp-close\").length||n.content.append(z()):n.content=a:n.content=\"\",y(e),n.container.addClass(\"mfp-\"+b+\"-holder\"),n.contentContainer.append(n.content)},parseEl:function(b){var c=n.items[b],d;c.tagName?c={el:a(c)}:(d=c.type,c={data:c,src:c.src});if(c.el){var e=n.types;for(var f=0;f<e.length;f++)if(c.el.hasClass(\"mfp-\"+e[f])){d=e[f];break}c.src=c.el.attr(\"data-mfp-src\"),c.src||(c.src=c.el.attr(\"href\"))}return c.type=d||n.st.type||\"inline\",c.index=b,c.parsed=!0,n.items[b]=c,y(\"ElementParse\",c),n.items[b]},addGroup:function(a,b){var c=function(c){c.mfpEl=this,n._openClick(c,a,b)};b||(b={});var d=\"click.magnificPopup\";b.mainEl=a,b.items?(b.isObj=!0,a.off(d).on(d,c)):(b.isObj=!1,b.delegate?a.off(d).on(d,b.delegate,c):(b.items=a,a.off(d).on(d,c)))},_openClick:function(b,c,d){var e=d.midClick!==undefined?d.midClick:a.magnificPopup.defaults.midClick;if(!e&&(b.which===2||b.ctrlKey||b.metaKey||b.altKey||b.shiftKey))return;var f=d.disableOn!==undefined?d.disableOn:a.magnificPopup.defaults.disableOn;if(f)if(a.isFunction(f)){if(!f.call(n))return!0}else if(r.width()<f)return!0;b.type&&(b.preventDefault(),n.isOpen&&b.stopPropagation()),d.el=a(b.mfpEl),d.delegate&&(d.items=c.find(d.delegate)),n.open(d)},updateStatus:function(a,b){if(n.preloader){q!==a&&n.container.removeClass(\"mfp-s-\"+q),!b&&a===\"loading\"&&(b=n.st.tLoading);var c={status:a,text:b};y(\"UpdateStatus\",c),a=c.status,b=c.text,n.preloader.html(b),n.preloader.find(\"a\").on(\"click\",function(a){a.stopImmediatePropagation()}),n.container.addClass(\"mfp-s-\"+a),q=a}},_checkIfClose:function(b){if(a(b).hasClass(m))return;var c=n.st.closeOnContentClick,d=n.st.closeOnBgClick;if(c&&d)return!0;if(!n.content||a(b).hasClass(\"mfp-close\")||n.preloader&&b===n.preloader[0])return!0;if(b!==n.content[0]&&!a.contains(n.content[0],b)){if(d&&a.contains(document,b))return!0}else if(c)return!0;return!1},_addClassToMFP:function(a){n.bgOverlay.addClass(a),n.wrap.addClass(a)},_removeClassFromMFP:function(a){this.bgOverlay.removeClass(a),n.wrap.removeClass(a)},_hasScrollBar:function(a){return(n.isIE7?s.height():document.body.scrollHeight)>(a||r.height())},_setFocus:function(){(n.st.focus?n.content.find(n.st.focus).eq(0):n.wrap).focus()},_onFocusIn:function(b){if(b.target!==n.wrap[0]&&!a.contains(n.wrap[0],b.target))return n._setFocus(),!1},_parseMarkup:function(b,c,d){var e;d.data&&(c=a.extend(d.data,c)),y(f,[b,c,d]),a.each(c,function(c,d){if(d===undefined||d===!1)return!0;e=c.split(\"_\");if(e.length>1){var f=b.find(j+\"-\"+e[0]);if(f.length>0){var g=e[1];g===\"replaceWith\"?f[0]!==d[0]&&f.replaceWith(d):g===\"img\"?f.is(\"img\")?f.attr(\"src\",d):f.replaceWith(a(\"<img>\").attr(\"src\",d).attr(\"class\",f.attr(\"class\"))):f.attr(e[1],d)}}else b.find(j+\"-\"+c).html(d)})},_getScrollbarSize:function(){if(n.scrollbarSize===undefined){var a=document.createElement(\"div\");a.style.cssText=\"width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;\",document.body.appendChild(a),n.scrollbarSize=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return n.scrollbarSize}},a.magnificPopup={instance:null,proto:o.prototype,modules:[],open:function(b,c){return A(),b?b=a.extend(!0,{},b):b={},b.isObj=!0,b.index=c||0,this.instance.open(b)},close:function(){return a.magnificPopup.instance&&a.magnificPopup.instance.close()},registerModule:function(b,c){c.options&&(a.magnificPopup.defaults[b]=c.options),a.extend(this.proto,c.proto),this.modules.push(b)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:\"\",preloader:!0,focus:\"\",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:\"auto\",fixedBgPos:\"auto\",overflowY:\"auto\",closeMarkup:'<button title=\"%title%\" type=\"button\" class=\"mfp-close\">&#215;</button>',tClose:\"Close (Esc)\",tLoading:\"Loading...\",autoFocusLast:!0}},a.fn.magnificPopup=function(b){A();var c=a(this);if(typeof b==\"string\")if(b===\"open\"){var d,e=p?c.data(\"magnificPopup\"):c[0].magnificPopup,f=parseInt(arguments[1],10)||0;e.items?d=e.items[f]:(d=c,e.delegate&&(d=d.find(e.delegate)),d=d.eq(f)),n._openClick({mfpEl:d},c,e)}else n.isOpen&&n[b].apply(n,Array.prototype.slice.call(arguments,1));else b=a.extend(!0,{},b),p?c.data(\"magnificPopup\",b):c[0].magnificPopup=b,n.addGroup(c,b);return c};var C=\"inline\",D,E,F,G=function(){F&&(E.after(F.addClass(D)).detach(),F=null)};a.magnificPopup.registerModule(C,{options:{hiddenClass:\"hide\",markup:\"\",tNotFound:\"Content not found\"},proto:{initInline:function(){n.types.push(C),w(b+\".\"+C,function(){G()})},getInline:function(b,c){G();if(b.src){var d=n.st.inline,e=a(b.src);if(e.length){var f=e[0].parentNode;f&&f.tagName&&(E||(D=d.hiddenClass,E=x(D),D=\"mfp-\"+D),F=e.after(E).detach().removeClass(D)),n.updateStatus(\"ready\")}else n.updateStatus(\"error\",d.tNotFound),e=a(\"<div>\");return b.inlineElement=e,e}return n.updateStatus(\"ready\"),n._parseMarkup(c,{},b),c}}});var H=\"ajax\",I,J=function(){I&&a(document.body).removeClass(I)},K=function(){J(),n.req&&n.req.abort()};a.magnificPopup.registerModule(H,{options:{settings:null,cursor:\"mfp-ajax-cur\",tError:'<a href=\"%url%\">The content</a> could not be loaded.'},proto:{initAjax:function(){n.types.push(H),I=n.st.ajax.cursor,w(b+\".\"+H,K),w(\"BeforeChange.\"+H,K)},getAjax:function(b){I&&a(document.body).addClass(I),n.updateStatus(\"loading\");var c=a.extend({url:b.src,success:function(c,d,e){var f={data:c,xhr:e};y(\"ParseAjax\",f),n.appendContent(a(f.data),H),b.finished=!0,J(),n._setFocus(),setTimeout(function(){n.wrap.addClass(k)},16),n.updateStatus(\"ready\"),y(\"AjaxContentAdded\")},error:function(){J(),b.finished=b.loadError=!0,n.updateStatus(\"error\",n.st.ajax.tError.replace(\"%url%\",b.src))}},n.st.ajax.settings);return n.req=a.ajax(c),\"\"}}});var L,M=function(b){if(b.data&&b.data.title!==undefined)return b.data.title;var c=n.st.image.titleSrc;if(c){if(a.isFunction(c))return c.call(n,b);if(b.el)return b.el.attr(c)||\"\"}return\"\"};a.magnificPopup.registerModule(\"image\",{options:{markup:'<div class=\"mfp-figure\"><div class=\"mfp-close\"></div><figure><div class=\"mfp-img\"></div><figcaption><div class=\"mfp-bottom-bar\"><div class=\"mfp-title\"></div><div class=\"mfp-counter\"></div></div></figcaption></figure></div>',cursor:\"mfp-zoom-out-cur\",titleSrc:\"title\",verticalFit:!0,tError:'<a href=\"%url%\">The image</a> could not be loaded.'},proto:{initImage:function(){var c=n.st.image,d=\".image\";n.types.push(\"image\"),w(g+d,function(){n.currItem.type===\"image\"&&c.cursor&&a(document.body).addClass(c.cursor)}),w(b+d,function(){c.cursor&&a(document.body).removeClass(c.cursor),r.off(\"resize\"+j)}),w(\"Resize\"+d,n.resizeImage),n.isLowIE&&w(\"AfterChange\",n.resizeImage)},resizeImage:function(){var a=n.currItem;if(!a||!a.img)return;if(n.st.image.verticalFit){var b=0;n.isLowIE&&(b=parseInt(a.img.css(\"padding-top\"),10)+parseInt(a.img.css(\"padding-bottom\"),10)),a.img.css(\"max-height\",n.wH-b)}},_onImageHasSize:function(a){a.img&&(a.hasSize=!0,L&&clearInterval(L),a.isCheckingImgSize=!1,y(\"ImageHasSize\",a),a.imgHidden&&(n.content&&n.content.removeClass(\"mfp-loading\"),a.imgHidden=!1))},findImageSize:function(a){var b=0,c=a.img[0],d=function(e){L&&clearInterval(L),L=setInterval(function(){if(c.naturalWidth>0){n._onImageHasSize(a);return}b>200&&clearInterval(L),b++,b===3?d(10):b===40?d(50):b===100&&d(500)},e)};d(1)},getImage:function(b,c){var d=0,e=function(){b&&(b.img[0].complete?(b.img.off(\".mfploader\"),b===n.currItem&&(n._onImageHasSize(b),n.updateStatus(\"ready\")),b.hasSize=!0,b.loaded=!0,y(\"ImageLoadComplete\")):(d++,d<200?setTimeout(e,100):f()))},f=function(){b&&(b.img.off(\".mfploader\"),b===n.currItem&&(n._onImageHasSize(b),n.updateStatus(\"error\",g.tError.replace(\"%url%\",b.src))),b.hasSize=!0,b.loaded=!0,b.loadError=!0)},g=n.st.image,h=c.find(\".mfp-img\");if(h.length){var i=document.createElement(\"img\");i.className=\"mfp-img\",b.el&&b.el.find(\"img\").length&&(i.alt=b.el.find(\"img\").attr(\"alt\")),b.img=a(i).on(\"load.mfploader\",e).on(\"error.mfploader\",f),i.src=b.src,h.is(\"img\")&&(b.img=b.img.clone()),i=b.img[0],i.naturalWidth>0?b.hasSize=!0:i.width||(b.hasSize=!1)}return n._parseMarkup(c,{title:M(b),img_replaceWith:b.img},b),n.resizeImage(),b.hasSize?(L&&clearInterval(L),b.loadError?(c.addClass(\"mfp-loading\"),n.updateStatus(\"error\",g.tError.replace(\"%url%\",b.src))):(c.removeClass(\"mfp-loading\"),n.updateStatus(\"ready\")),c):(n.updateStatus(\"loading\"),b.loading=!0,b.hasSize||(b.imgHidden=!0,c.addClass(\"mfp-loading\"),n.findImageSize(b)),c)}}});var N,O=function(){return N===undefined&&(N=document.createElement(\"p\").style.MozTransform!==undefined),N};a.magnificPopup.registerModule(\"zoom\",{options:{enabled:!1,easing:\"ease-in-out\",duration:300,opener:function(a){return a.is(\"img\")?a:a.find(\"img\")}},proto:{initZoom:function(){var a=n.st.zoom,d=\".zoom\",e;if(!a.enabled||!n.supportsTransition)return;var f=a.duration,g=function(b){var c=b.clone().removeAttr(\"style\").removeAttr(\"class\").addClass(\"mfp-animated-image\"),d=\"all \"+a.duration/1e3+\"s \"+a.easing,e={position:\"fixed\",zIndex:9999,left:0,top:0,\"-webkit-backface-visibility\":\"hidden\"},f=\"transition\";return e[\"-webkit-\"+f]=e[\"-moz-\"+f]=e[\"-o-\"+f]=e[f]=d,c.css(e),c},h=function(){n.content.css(\"visibility\",\"visible\")},i,j;w(\"BuildControls\"+d,function(){if(n._allowZoom()){clearTimeout(i),n.content.css(\"visibility\",\"hidden\"),e=n._getItemToZoom();if(!e){h();return}j=g(e),j.css(n._getOffset()),n.wrap.append(j),i=setTimeout(function(){j.css(n._getOffset(!0)),i=setTimeout(function(){h(),setTimeout(function(){j.remove(),e=j=null,y(\"ZoomAnimationEnded\")},16)},f)},16)}}),w(c+d,function(){if(n._allowZoom()){clearTimeout(i),n.st.removalDelay=f;if(!e){e=n._getItemToZoom();if(!e)return;j=g(e)}j.css(n._getOffset(!0)),n.wrap.append(j),n.content.css(\"visibility\",\"hidden\"),setTimeout(function(){j.css(n._getOffset())},16)}}),w(b+d,function(){n._allowZoom()&&(h(),j&&j.remove(),e=null)})},_allowZoom:function(){return n.currItem.type===\"image\"},_getItemToZoom:function(){return n.currItem.hasSize?n.currItem.img:!1},_getOffset:function(b){var c;b?c=n.currItem.img:c=n.st.zoom.opener(n.currItem.el||n.currItem);var d=c.offset(),e=parseInt(c.css(\"padding-top\"),10),f=parseInt(c.css(\"padding-bottom\"),10);d.top-=a(window).scrollTop()-e;var g={width:c.width(),height:(p?c.innerHeight():c[0].offsetHeight)-f-e};return O()?g[\"-moz-transform\"]=g.transform=\"translate(\"+d.left+\"px,\"+d.top+\"px)\":(g.left=d.left,g.top=d.top),g}}});var P=\"iframe\",Q=\"//about:blank\",R=function(a){if(n.currTemplate[P]){var b=n.currTemplate[P].find(\"iframe\");b.length&&(a||(b[0].src=Q),n.isIE8&&b.css(\"display\",a?\"block\":\"none\"))}};a.magnificPopup.registerModule(P,{options:{markup:'<div class=\"mfp-iframe-scaler\"><div class=\"mfp-close\"></div><iframe class=\"mfp-iframe\" src=\"//about:blank\" frameborder=\"0\" allowfullscreen></iframe></div>',srcAction:\"iframe_src\",patterns:{youtube:{index:\"youtube.com\",id:\"v=\",src:\"//www.youtube.com/embed/%id%?autoplay=1\"},vimeo:{index:\"vimeo.com/\",id:\"/\",src:\"//player.vimeo.com/video/%id%?autoplay=1\"},gmaps:{index:\"//maps.google.\",src:\"%id%&output=embed\"}}},proto:{initIframe:function(){n.types.push(P),w(\"BeforeChange\",function(a,b,c){b!==c&&(b===P?R():c===P&&R(!0))}),w(b+\".\"+P,function(){R()})},getIframe:function(b,c){var d=b.src,e=n.st.iframe;a.each(e.patterns,function(){if(d.indexOf(this.index)>-1)return this.id&&(typeof this.id==\"string\"?d=d.substr(d.lastIndexOf(this.id)+this.id.length,d.length):d=this.id.call(this,d)),d=this.src.replace(\"%id%\",d),!1});var f={};return e.srcAction&&(f[e.srcAction]=d),n._parseMarkup(c,f,b),n.updateStatus(\"ready\"),c}}});var S=function(a){var b=n.items.length;return a>b-1?a-b:a<0?b+a:a},T=function(a,b,c){return a.replace(/%curr%/gi,b+1).replace(/%total%/gi,c)};a.magnificPopup.registerModule(\"gallery\",{options:{enabled:!1,arrowMarkup:'<button title=\"%title%\" type=\"button\" class=\"mfp-arrow mfp-arrow-%dir%\"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:\"Previous (Left arrow key)\",tNext:\"Next (Right arrow key)\",tCounter:\"%curr% of %total%\"},proto:{initGallery:function(){var c=n.st.gallery,d=\".mfp-gallery\";n.direction=!0;if(!c||!c.enabled)return!1;u+=\" mfp-gallery\",w(g+d,function(){c.navigateByImgClick&&n.wrap.on(\"click\"+d,\".mfp-img\",function(){if(n.items.length>1)return n.next(),!1}),s.on(\"keydown\"+d,function(a){a.keyCode===37?n.prev():a.keyCode===39&&n.next()})}),w(\"UpdateStatus\"+d,function(a,b){b.text&&(b.text=T(b.text,n.currItem.index,n.items.length))}),w(f+d,function(a,b,d,e){var f=n.items.length;d.counter=f>1?T(c.tCounter,e.index,f):\"\"}),w(\"BuildControls\"+d,function(){if(n.items.length>1&&c.arrows&&!n.arrowLeft){var b=c.arrowMarkup,d=n.arrowLeft=a(b.replace(/%title%/gi,c.tPrev).replace(/%dir%/gi,\"left\")).addClass(m),e=n.arrowRight=a(b.replace(/%title%/gi,c.tNext).replace(/%dir%/gi,\"right\")).addClass(m);d.click(function(){n.prev()}),e.click(function(){n.next()}),n.container.append(d.add(e))}}),w(h+d,function(){n._preloadTimeout&&clearTimeout(n._preloadTimeout),n._preloadTimeout=setTimeout(function(){n.preloadNearbyImages(),n._preloadTimeout=null},16)}),w(b+d,function(){s.off(d),n.wrap.off(\"click\"+d),n.arrowRight=n.arrowLeft=null})},next:function(){n.direction=!0,n.index=S(n.index+1),n.updateItemHTML()},prev:function(){n.direction=!1,n.index=S(n.index-1),n.updateItemHTML()},goTo:function(a){n.direction=a>=n.index,n.index=a,n.updateItemHTML()},preloadNearbyImages:function(){var a=n.st.gallery.preload,b=Math.min(a[0],n.items.length),c=Math.min(a[1],n.items.length),d;for(d=1;d<=(n.direction?c:b);d++)n._preloadItem(n.index+d);for(d=1;d<=(n.direction?b:c);d++)n._preloadItem(n.index-d)},_preloadItem:function(b){b=S(b);if(n.items[b].preloaded)return;var c=n.items[b];c.parsed||(c=n.parseEl(b)),y(\"LazyLoad\",c),c.type===\"image\"&&(c.img=a('<img class=\"mfp-img\" />').on(\"load.mfploader\",function(){c.hasSize=!0}).on(\"error.mfploader\",function(){c.hasSize=!0,c.loadError=!0,y(\"LazyLoadError\",c)}).attr(\"src\",c.src)),c.preloaded=!0}}});var U=\"retina\";a.magnificPopup.registerModule(U,{options:{replaceSrc:function(a){return a.src.replace(/\\.\\w+$/,function(a){return\"@2x\"+a})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var a=n.st.retina,b=a.ratio;b=isNaN(b)?b():b,b>1&&(w(\"ImageHasSize.\"+U,function(a,c){c.img.css({\"max-width\":c.img[0].naturalWidth/b,width:\"100%\"})}),w(\"ElementParse.\"+U,function(c,d){d.src=a.replaceSrc(d,b)}))}}}}),A()})","Mageplaza_Core/js/jquery.ui.touch-punch.min.js":"/*!\r\n * jQuery UI Touch Punch 0.2.3\r\n *\r\n * Copyright 2011\u00e2\u0080\u00932014, Dave Furfero\r\n * Dual licensed under the MIT or GPL Version 2 licenses.\r\n *\r\n * Depends:\r\n *  jquery.ui.widget.js\r\n *  jquery.ui.mouse.js\r\n */\r\n!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent(\"MouseEvents\");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch=\"ontouchend\"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,\"mouseover\"),f(a,\"mousemove\"),f(a,\"mousedown\"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,\"mousemove\"))},b._touchEnd=function(a){e&&(f(a,\"mouseup\"),f(a,\"mouseout\"),this._touchMoved||f(a,\"click\"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,\"_touchStart\"),touchmove:a.proxy(b,\"_touchMove\"),touchend:a.proxy(b,\"_touchEnd\")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,\"_touchStart\"),touchmove:a.proxy(b,\"_touchMove\"),touchend:a.proxy(b,\"_touchEnd\")}),d.call(b)}}}(jQuery);\r\n","Mageplaza_Core/js/owl.carousel.min.js":"!function(a,b,c,d){function e(b,c){this.settings=null,this.options=a.extend({},e.Defaults,c),this.$element=a(b),this.drag=a.extend({},m),this.state=a.extend({},n),this.e=a.extend({},o),this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._invalidated={},this._pipe=[],a.each(e.Plugins,a.proxy(function(a,b){this._plugins[a[0].toLowerCase()+a.slice(1)]=new b(this)},this)),a.each(e.Pipe,a.proxy(function(b,c){this._pipe.push({filter:c.filter,run:a.proxy(c.run,this)})},this)),this.setup(),this.initialize()}function f(a){if(a.touches!==d)return{x:a.touches[0].pageX,y:a.touches[0].pageY};if(a.touches===d){if(a.pageX!==d)return{x:a.pageX,y:a.pageY};if(a.pageX===d)return{x:a.clientX,y:a.clientY}}}function g(a){var b,d,e=c.createElement(\"div\"),f=a;for(b in f)if(d=f[b],\"undefined\"!=typeof e.style[d])return e=null,[d,b];return[!1]}function h(){return g([\"transition\",\"WebkitTransition\",\"MozTransition\",\"OTransition\"])[1]}function i(){return g([\"transform\",\"WebkitTransform\",\"MozTransform\",\"OTransform\",\"msTransform\"])[0]}function j(){return g([\"perspective\",\"webkitPerspective\",\"MozPerspective\",\"OPerspective\",\"MsPerspective\"])[0]}function k(){return\"ontouchstart\"in b||!!navigator.msMaxTouchPoints}function l(){return b.navigator.msPointerEnabled}var m,n,o;m={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,offsetX:0,offsetY:0,distance:null,startTime:0,endTime:0,updatedX:0,targetEl:null},n={isTouch:!1,isScrolling:!1,isSwiping:!1,direction:!1,inMotion:!1},o={_onDragStart:null,_onDragMove:null,_onDragEnd:null,_transitionEnd:null,_resizer:null,_responsiveCall:null,_goToLoop:null,_checkVisibile:null},e.Defaults={items:3,loop:!1,center:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:b,responsiveClass:!1,fallbackEasing:\"swing\",info:!1,nestedItemSelector:!1,itemElement:\"div\",stageElement:\"div\",themeClass:\"owl-theme\",baseClass:\"owl-carousel\",itemClass:\"owl-item\",centerClass:\"center\",activeClass:\"active\"},e.Width={Default:\"default\",Inner:\"inner\",Outer:\"outer\"},e.Plugins={},e.Pipe=[{filter:[\"width\",\"items\",\"settings\"],run:function(a){a.current=this._items&&this._items[this.relative(this._current)]}},{filter:[\"items\",\"settings\"],run:function(){var a=this._clones,b=this.$stage.children(\".cloned\");(b.length!==a.length||!this.settings.loop&&a.length>0)&&(this.$stage.children(\".cloned\").remove(),this._clones=[])}},{filter:[\"items\",\"settings\"],run:function(){var a,b,c=this._clones,d=this._items,e=this.settings.loop?c.length-Math.max(2*this.settings.items,4):0;for(a=0,b=Math.abs(e/2);b>a;a++)e>0?(this.$stage.children().eq(d.length+c.length-1).remove(),c.pop(),this.$stage.children().eq(0).remove(),c.pop()):(c.push(c.length/2),this.$stage.append(d[c[c.length-1]].clone().addClass(\"cloned\")),c.push(d.length-1-(c.length-1)/2),this.$stage.prepend(d[c[c.length-1]].clone().addClass(\"cloned\")))}},{filter:[\"width\",\"items\",\"settings\"],run:function(){var a,b,c,d=this.settings.rtl?1:-1,e=(this.width()/this.settings.items).toFixed(3),f=0;for(this._coordinates=[],b=0,c=this._clones.length+this._items.length;c>b;b++)a=this._mergers[this.relative(b)],a=this.settings.mergeFit&&Math.min(a,this.settings.items)||a,f+=(this.settings.autoWidth?this._items[this.relative(b)].width()+this.settings.margin:e*a)*d,this._coordinates.push(f)}},{filter:[\"width\",\"items\",\"settings\"],run:function(){var b,c,d=(this.width()/this.settings.items).toFixed(3),e={width:Math.abs(this._coordinates[this._coordinates.length-1])+2*this.settings.stagePadding,\"padding-left\":this.settings.stagePadding||\"\",\"padding-right\":this.settings.stagePadding||\"\"};if(this.$stage.css(e),e={width:this.settings.autoWidth?\"auto\":d-this.settings.margin},e[this.settings.rtl?\"margin-left\":\"margin-right\"]=this.settings.margin,!this.settings.autoWidth&&a.grep(this._mergers,function(a){return a>1}).length>0)for(b=0,c=this._coordinates.length;c>b;b++)e.width=Math.abs(this._coordinates[b])-Math.abs(this._coordinates[b-1]||0)-this.settings.margin,this.$stage.children().eq(b).css(e);else this.$stage.children().css(e)}},{filter:[\"width\",\"items\",\"settings\"],run:function(a){a.current&&this.reset(this.$stage.children().index(a.current))}},{filter:[\"position\"],run:function(){this.animate(this.coordinates(this._current))}},{filter:[\"width\",\"position\",\"items\",\"settings\"],run:function(){var a,b,c,d,e=this.settings.rtl?1:-1,f=2*this.settings.stagePadding,g=this.coordinates(this.current())+f,h=g+this.width()*e,i=[];for(c=0,d=this._coordinates.length;d>c;c++)a=this._coordinates[c-1]||0,b=Math.abs(this._coordinates[c])+f*e,(this.op(a,\"<=\",g)&&this.op(a,\">\",h)||this.op(b,\"<\",g)&&this.op(b,\">\",h))&&i.push(c);this.$stage.children(\".\"+this.settings.activeClass).removeClass(this.settings.activeClass),this.$stage.children(\":eq(\"+i.join(\"), :eq(\")+\")\").addClass(this.settings.activeClass),this.settings.center&&(this.$stage.children(\".\"+this.settings.centerClass).removeClass(this.settings.centerClass),this.$stage.children().eq(this.current()).addClass(this.settings.centerClass))}}],e.prototype.initialize=function(){if(this.trigger(\"initialize\"),this.$element.addClass(this.settings.baseClass).addClass(this.settings.themeClass).toggleClass(\"owl-rtl\",this.settings.rtl),this.browserSupport(),this.settings.autoWidth&&this.state.imagesLoaded!==!0){var b,c,e;if(b=this.$element.find(\"img\"),c=this.settings.nestedItemSelector?\".\"+this.settings.nestedItemSelector:d,e=this.$element.children(c).width(),b.length&&0>=e)return this.preloadAutoWidthImages(b),!1}this.$element.addClass(\"owl-loading\"),this.$stage=a(\"<\"+this.settings.stageElement+' class=\"owl-stage\"/>').wrap('<div class=\"owl-stage-outer\">'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this._width=this.$element.width(),this.refresh(),this.$element.removeClass(\"owl-loading\").addClass(\"owl-loaded\"),this.eventsCall(),this.internalEvents(),this.addTriggerableEvents(),this.trigger(\"initialized\")},e.prototype.setup=function(){var b=this.viewport(),c=this.options.responsive,d=-1,e=null;c?(a.each(c,function(a){b>=a&&a>d&&(d=Number(a))}),e=a.extend({},this.options,c[d]),delete e.responsive,e.responsiveClass&&this.$element.attr(\"class\",function(a,b){return b.replace(/\\b owl-responsive-\\S+/g,\"\")}).addClass(\"owl-responsive-\"+d)):e=a.extend({},this.options),(null===this.settings||this._breakpoint!==d)&&(this.trigger(\"change\",{property:{name:\"settings\",value:e}}),this._breakpoint=d,this.settings=e,this.invalidate(\"settings\"),this.trigger(\"changed\",{property:{name:\"settings\",value:this.settings}}))},e.prototype.optionsLogic=function(){this.$element.toggleClass(\"owl-center\",this.settings.center),this.settings.loop&&this._items.length<this.settings.items&&(this.settings.loop=!1),this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},e.prototype.prepare=function(b){var c=this.trigger(\"prepare\",{content:b});return c.data||(c.data=a(\"<\"+this.settings.itemElement+\"/>\").addClass(this.settings.itemClass).append(b)),this.trigger(\"prepared\",{content:c.data}),c.data},e.prototype.update=function(){for(var b=0,c=this._pipe.length,d=a.proxy(function(a){return this[a]},this._invalidated),e={};c>b;)(this._invalidated.all||a.grep(this._pipe[b].filter,d).length>0)&&this._pipe[b].run(e),b++;this._invalidated={}},e.prototype.width=function(a){switch(a=a||e.Width.Default){case e.Width.Inner:case e.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},e.prototype.refresh=function(){if(0===this._items.length)return!1;(new Date).getTime();this.trigger(\"refresh\"),this.setup(),this.optionsLogic(),this.$stage.addClass(\"owl-refresh\"),this.update(),this.$stage.removeClass(\"owl-refresh\"),this.state.orientation=b.orientation,this.watchVisibility(),this.trigger(\"refreshed\")},e.prototype.eventsCall=function(){this.e._onDragStart=a.proxy(function(a){this.onDragStart(a)},this),this.e._onDragMove=a.proxy(function(a){this.onDragMove(a)},this),this.e._onDragEnd=a.proxy(function(a){this.onDragEnd(a)},this),this.e._onResize=a.proxy(function(a){this.onResize(a)},this),this.e._transitionEnd=a.proxy(function(a){this.transitionEnd(a)},this),this.e._preventClick=a.proxy(function(a){this.preventClick(a)},this)},e.prototype.onThrottledResize=function(){b.clearTimeout(this.resizeTimer),this.resizeTimer=b.setTimeout(this.e._onResize,this.settings.responsiveRefreshRate)},e.prototype.onResize=function(){return this._items.length?this._width===this.$element.width()?!1:this.trigger(\"resize\").isDefaultPrevented()?!1:(this._width=this.$element.width(),this.invalidate(\"width\"),this.refresh(),void this.trigger(\"resized\")):!1},e.prototype.eventsRouter=function(a){var b=a.type;\"mousedown\"===b||\"touchstart\"===b?this.onDragStart(a):\"mousemove\"===b||\"touchmove\"===b?this.onDragMove(a):\"mouseup\"===b||\"touchend\"===b?this.onDragEnd(a):\"touchcancel\"===b&&this.onDragEnd(a)},e.prototype.internalEvents=function(){var c=(k(),l());this.settings.mouseDrag?(this.$stage.on(\"mousedown\",a.proxy(function(a){this.eventsRouter(a)},this)),this.$stage.on(\"dragstart\",function(){return!1}),this.$stage.get(0).onselectstart=function(){return!1}):this.$element.addClass(\"owl-text-select-on\"),this.settings.touchDrag&&!c&&this.$stage.on(\"touchstart touchcancel\",a.proxy(function(a){this.eventsRouter(a)},this)),this.transitionEndVendor&&this.on(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd,!1),this.settings.responsive!==!1&&this.on(b,\"resize\",a.proxy(this.onThrottledResize,this))},e.prototype.onDragStart=function(d){var e,g,h,i;if(e=d.originalEvent||d||b.event,3===e.which||this.state.isTouch)return!1;if(\"mousedown\"===e.type&&this.$stage.addClass(\"owl-grab\"),this.trigger(\"drag\"),this.drag.startTime=(new Date).getTime(),this.speed(0),this.state.isTouch=!0,this.state.isScrolling=!1,this.state.isSwiping=!1,this.drag.distance=0,g=f(e).x,h=f(e).y,this.drag.offsetX=this.$stage.position().left,this.drag.offsetY=this.$stage.position().top,this.settings.rtl&&(this.drag.offsetX=this.$stage.position().left+this.$stage.width()-this.width()+this.settings.margin),this.state.inMotion&&this.support3d)i=this.getTransformProperty(),this.drag.offsetX=i,this.animate(i),this.state.inMotion=!0;else if(this.state.inMotion&&!this.support3d)return this.state.inMotion=!1,!1;this.drag.startX=g-this.drag.offsetX,this.drag.startY=h-this.drag.offsetY,this.drag.start=g-this.drag.startX,this.drag.targetEl=e.target||e.srcElement,this.drag.updatedX=this.drag.start,(\"IMG\"===this.drag.targetEl.tagName||\"A\"===this.drag.targetEl.tagName)&&(this.drag.targetEl.draggable=!1),a(c).on(\"mousemove.owl.dragEvents mouseup.owl.dragEvents touchmove.owl.dragEvents touchend.owl.dragEvents\",a.proxy(function(a){this.eventsRouter(a)},this))},e.prototype.onDragMove=function(a){var c,e,g,h,i,j;this.state.isTouch&&(this.state.isScrolling||(c=a.originalEvent||a||b.event,e=f(c).x,g=f(c).y,this.drag.currentX=e-this.drag.startX,this.drag.currentY=g-this.drag.startY,this.drag.distance=this.drag.currentX-this.drag.offsetX,this.drag.distance<0?this.state.direction=this.settings.rtl?\"right\":\"left\":this.drag.distance>0&&(this.state.direction=this.settings.rtl?\"left\":\"right\"),this.settings.loop?this.op(this.drag.currentX,\">\",this.coordinates(this.minimum()))&&\"right\"===this.state.direction?this.drag.currentX-=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length):this.op(this.drag.currentX,\"<\",this.coordinates(this.maximum()))&&\"left\"===this.state.direction&&(this.drag.currentX+=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length)):(h=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),i=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),j=this.settings.pullDrag?this.drag.distance/5:0,this.drag.currentX=Math.max(Math.min(this.drag.currentX,h+j),i+j)),(this.drag.distance>8||this.drag.distance<-8)&&(c.preventDefault!==d?c.preventDefault():c.returnValue=!1,this.state.isSwiping=!0),this.drag.updatedX=this.drag.currentX,(this.drag.currentY>16||this.drag.currentY<-16)&&this.state.isSwiping===!1&&(this.state.isScrolling=!0,this.drag.updatedX=this.drag.start),this.animate(this.drag.updatedX)))},e.prototype.onDragEnd=function(b){var d,e,f;if(this.state.isTouch){if(\"mouseup\"===b.type&&this.$stage.removeClass(\"owl-grab\"),this.trigger(\"dragged\"),this.drag.targetEl.removeAttribute(\"draggable\"),this.state.isTouch=!1,this.state.isScrolling=!1,this.state.isSwiping=!1,0===this.drag.distance&&this.state.inMotion!==!0)return this.state.inMotion=!1,!1;this.drag.endTime=(new Date).getTime(),d=this.drag.endTime-this.drag.startTime,e=Math.abs(this.drag.distance),(e>3||d>300)&&this.removeClick(this.drag.targetEl),f=this.closest(this.drag.updatedX),this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(f),this.invalidate(\"position\"),this.update(),this.settings.pullDrag||this.drag.updatedX!==this.coordinates(f)||this.transitionEnd(),this.drag.distance=0,a(c).off(\".owl.dragEvents\")}},e.prototype.removeClick=function(c){this.drag.targetEl=c,a(c).on(\"click.preventClick\",this.e._preventClick),b.setTimeout(function(){a(c).off(\"click.preventClick\")},300)},e.prototype.preventClick=function(b){b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation&&b.stopPropagation(),a(b.target).off(\"click.preventClick\")},e.prototype.getTransformProperty=function(){var a,c;return a=b.getComputedStyle(this.$stage.get(0),null).getPropertyValue(this.vendorName+\"transform\"),a=a.replace(/matrix(3d)?\\(|\\)/g,\"\").split(\",\"),c=16===a.length,c!==!0?a[4]:a[12]},e.prototype.closest=function(b){var c=-1,d=30,e=this.width(),f=this.coordinates();return this.settings.freeDrag||a.each(f,a.proxy(function(a,g){return b>g-d&&g+d>b?c=a:this.op(b,\"<\",g)&&this.op(b,\">\",f[a+1]||g-e)&&(c=\"left\"===this.state.direction?a+1:a),-1===c},this)),this.settings.loop||(this.op(b,\">\",f[this.minimum()])?c=b=this.minimum():this.op(b,\"<\",f[this.maximum()])&&(c=b=this.maximum())),c},e.prototype.animate=function(b){this.trigger(\"translate\"),this.state.inMotion=this.speed()>0,this.support3d?this.$stage.css({transform:\"translate3d(\"+b+\"px,0px, 0px)\",transition:this.speed()/1e3+\"s\"}):this.state.isTouch?this.$stage.css({left:b+\"px\"}):this.$stage.animate({left:b},this.speed()/1e3,this.settings.fallbackEasing,a.proxy(function(){this.state.inMotion&&this.transitionEnd()},this))},e.prototype.current=function(a){if(a===d)return this._current;if(0===this._items.length)return d;if(a=this.normalize(a),this._current!==a){var b=this.trigger(\"change\",{property:{name:\"position\",value:a}});b.data!==d&&(a=this.normalize(b.data)),this._current=a,this.invalidate(\"position\"),this.trigger(\"changed\",{property:{name:\"position\",value:this._current}})}return this._current},e.prototype.invalidate=function(a){this._invalidated[a]=!0},e.prototype.reset=function(a){a=this.normalize(a),a!==d&&(this._speed=0,this._current=a,this.suppress([\"translate\",\"translated\"]),this.animate(this.coordinates(a)),this.release([\"translate\",\"translated\"]))},e.prototype.normalize=function(b,c){var e=c?this._items.length:this._items.length+this._clones.length;return!a.isNumeric(b)||1>e?d:b=this._clones.length?(b%e+e)%e:Math.max(this.minimum(c),Math.min(this.maximum(c),b))},e.prototype.relative=function(a){return a=this.normalize(a),a-=this._clones.length/2,this.normalize(a,!0)},e.prototype.maximum=function(a){var b,c,d,e=0,f=this.settings;if(a)return this._items.length-1;if(!f.loop&&f.center)b=this._items.length-1;else if(f.loop||f.center)if(f.loop||f.center)b=this._items.length+f.items;else{if(!f.autoWidth&&!f.merge)throw\"Can not detect maximum absolute position.\";for(revert=f.rtl?1:-1,c=this.$stage.width()-this.$element.width();(d=this.coordinates(e))&&!(d*revert>=c);)b=++e}else b=this._items.length-f.items;return b},e.prototype.minimum=function(a){return a?0:this._clones.length/2},e.prototype.items=function(a){return a===d?this._items.slice():(a=this.normalize(a,!0),this._items[a])},e.prototype.mergers=function(a){return a===d?this._mergers.slice():(a=this.normalize(a,!0),this._mergers[a])},e.prototype.clones=function(b){var c=this._clones.length/2,e=c+this._items.length,f=function(a){return a%2===0?e+a/2:c-(a+1)/2};return b===d?a.map(this._clones,function(a,b){return f(b)}):a.map(this._clones,function(a,c){return a===b?f(c):null})},e.prototype.speed=function(a){return a!==d&&(this._speed=a),this._speed},e.prototype.coordinates=function(b){var c=null;return b===d?a.map(this._coordinates,a.proxy(function(a,b){return this.coordinates(b)},this)):(this.settings.center?(c=this._coordinates[b],c+=(this.width()-c+(this._coordinates[b-1]||0))/2*(this.settings.rtl?-1:1)):c=this._coordinates[b-1]||0,c)},e.prototype.duration=function(a,b,c){return Math.min(Math.max(Math.abs(b-a),1),6)*Math.abs(c||this.settings.smartSpeed)},e.prototype.to=function(c,d){if(this.settings.loop){var e=c-this.relative(this.current()),f=this.current(),g=this.current(),h=this.current()+e,i=0>g-h?!0:!1,j=this._clones.length+this._items.length;h<this.settings.items&&i===!1?(f=g+this._items.length,this.reset(f)):h>=j-this.settings.items&&i===!0&&(f=g-this._items.length,this.reset(f)),b.clearTimeout(this.e._goToLoop),this.e._goToLoop=b.setTimeout(a.proxy(function(){this.speed(this.duration(this.current(),f+e,d)),this.current(f+e),this.update()},this),30)}else this.speed(this.duration(this.current(),c,d)),this.current(c),this.update()},e.prototype.next=function(a){a=a||!1,this.to(this.relative(this.current())+1,a)},e.prototype.prev=function(a){a=a||!1,this.to(this.relative(this.current())-1,a)},e.prototype.transitionEnd=function(a){return a!==d&&(a.stopPropagation(),(a.target||a.srcElement||a.originalTarget)!==this.$stage.get(0))?!1:(this.state.inMotion=!1,void this.trigger(\"translated\"))},e.prototype.viewport=function(){var d;if(this.options.responsiveBaseElement!==b)d=a(this.options.responsiveBaseElement).width();else if(b.innerWidth)d=b.innerWidth;else{if(!c.documentElement||!c.documentElement.clientWidth)throw\"Can not detect viewport width.\";d=c.documentElement.clientWidth}return d},e.prototype.replace=function(b){this.$stage.empty(),this._items=[],b&&(b=b instanceof jQuery?b:a(b)),this.settings.nestedItemSelector&&(b=b.find(\".\"+this.settings.nestedItemSelector)),b.filter(function(){return 1===this.nodeType}).each(a.proxy(function(a,b){b=this.prepare(b),this.$stage.append(b),this._items.push(b),this._mergers.push(1*b.find(\"[data-merge]\").andSelf(\"[data-merge]\").attr(\"data-merge\")||1)},this)),this.reset(a.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate(\"items\")},e.prototype.add=function(a,b){b=b===d?this._items.length:this.normalize(b,!0),this.trigger(\"add\",{content:a,position:b}),0===this._items.length||b===this._items.length?(this.$stage.append(a),this._items.push(a),this._mergers.push(1*a.find(\"[data-merge]\").andSelf(\"[data-merge]\").attr(\"data-merge\")||1)):(this._items[b].before(a),this._items.splice(b,0,a),this._mergers.splice(b,0,1*a.find(\"[data-merge]\").andSelf(\"[data-merge]\").attr(\"data-merge\")||1)),this.invalidate(\"items\"),this.trigger(\"added\",{content:a,position:b})},e.prototype.remove=function(a){a=this.normalize(a,!0),a!==d&&(this.trigger(\"remove\",{content:this._items[a],position:a}),this._items[a].remove(),this._items.splice(a,1),this._mergers.splice(a,1),this.invalidate(\"items\"),this.trigger(\"removed\",{content:null,position:a}))},e.prototype.addTriggerableEvents=function(){var b=a.proxy(function(b,c){return a.proxy(function(a){a.relatedTarget!==this&&(this.suppress([c]),b.apply(this,[].slice.call(arguments,1)),this.release([c]))},this)},this);a.each({next:this.next,prev:this.prev,to:this.to,destroy:this.destroy,refresh:this.refresh,replace:this.replace,add:this.add,remove:this.remove},a.proxy(function(a,c){this.$element.on(a+\".owl.carousel\",b(c,a+\".owl.carousel\"))},this))},e.prototype.watchVisibility=function(){function c(a){return a.offsetWidth>0&&a.offsetHeight>0}function d(){c(this.$element.get(0))&&(this.$element.removeClass(\"owl-hidden\"),this.refresh(),b.clearInterval(this.e._checkVisibile))}c(this.$element.get(0))||(this.$element.addClass(\"owl-hidden\"),b.clearInterval(this.e._checkVisibile),this.e._checkVisibile=b.setInterval(a.proxy(d,this),500))},e.prototype.preloadAutoWidthImages=function(b){var c,d,e,f;c=0,d=this,b.each(function(g,h){e=a(h),f=new Image,f.onload=function(){c++,e.attr(\"src\",f.src),e.css(\"opacity\",1),c>=b.length&&(d.state.imagesLoaded=!0,d.initialize())},f.src=e.attr(\"src\")||e.attr(\"data-src\")||e.attr(\"data-src-retina\")})},e.prototype.destroy=function(){this.$element.hasClass(this.settings.themeClass)&&this.$element.removeClass(this.settings.themeClass),this.settings.responsive!==!1&&a(b).off(\"resize.owl.carousel\"),this.transitionEndVendor&&this.off(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd);for(var d in this._plugins)this._plugins[d].destroy();(this.settings.mouseDrag||this.settings.touchDrag)&&(this.$stage.off(\"mousedown touchstart touchcancel\"),a(c).off(\".owl.dragEvents\"),this.$stage.get(0).onselectstart=function(){},this.$stage.off(\"dragstart\",function(){return!1})),this.$element.off(\".owl\"),this.$stage.children(\".cloned\").remove(),this.e=null,this.$element.removeData(\"owlCarousel\"),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.unwrap()},e.prototype.op=function(a,b,c){var d=this.settings.rtl;switch(b){case\"<\":return d?a>c:c>a;case\">\":return d?c>a:a>c;case\">=\":return d?c>=a:a>=c;case\"<=\":return d?a>=c:c>=a}},e.prototype.on=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent(\"on\"+b,c)},e.prototype.off=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent(\"on\"+b,c)},e.prototype.trigger=function(b,c,d){var e={item:{count:this._items.length,index:this.current()}},f=a.camelCase(a.grep([\"on\",b,d],function(a){return a}).join(\"-\").toLowerCase()),g=a.Event([b,\"owl\",d||\"carousel\"].join(\".\").toLowerCase(),a.extend({relatedTarget:this},e,c));return this._supress[b]||(a.each(this._plugins,function(a,b){b.onTrigger&&b.onTrigger(g)}),this.$element.trigger(g),this.settings&&\"function\"==typeof this.settings[f]&&this.settings[f].apply(this,g)),g},e.prototype.suppress=function(b){a.each(b,a.proxy(function(a,b){this._supress[b]=!0},this))},e.prototype.release=function(b){a.each(b,a.proxy(function(a,b){delete this._supress[b]},this))},e.prototype.browserSupport=function(){if(this.support3d=j(),this.support3d){this.transformVendor=i();var a=[\"transitionend\",\"webkitTransitionEnd\",\"transitionend\",\"oTransitionEnd\"];this.transitionEndVendor=a[h()],this.vendorName=this.transformVendor.replace(/Transform/i,\"\"),this.vendorName=\"\"!==this.vendorName?\"-\"+this.vendorName.toLowerCase()+\"-\":\"\"}this.state.orientation=b.orientation},a.fn.owlCarousel=function(b){return this.each(function(){a(this).data(\"owlCarousel\")||a(this).data(\"owlCarousel\",new e(this,b))})},a.fn.owlCarousel.Constructor=e}(window.Zepto||window.jQuery,window,document),function(a,b){var c=function(b){this._core=b,this._loaded=[],this._handlers={\"initialized.owl.carousel change.owl.carousel\":a.proxy(function(b){if(b.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(b.property&&\"position\"==b.property.name||\"initialized\"==b.type))for(var c=this._core.settings,d=c.center&&Math.ceil(c.items/2)||c.items,e=c.center&&-1*d||0,f=(b.property&&b.property.value||this._core.current())+e,g=this._core.clones().length,h=a.proxy(function(a,b){this.load(b)},this);e++<d;)this.load(g/2+this._core.relative(f)),g&&a.each(this._core.clones(this._core.relative(f++)),h)},this)},this._core.options=a.extend({},c.Defaults,this._core.options),this._core.$element.on(this._handlers)};c.Defaults={lazyLoad:!1},c.prototype.load=function(c){var d=this._core.$stage.children().eq(c),e=d&&d.find(\".owl-lazy\");!e||a.inArray(d.get(0),this._loaded)>-1||(e.each(a.proxy(function(c,d){var e,f=a(d),g=b.devicePixelRatio>1&&f.attr(\"data-src-retina\")||f.attr(\"data-src\");this._core.trigger(\"load\",{element:f,url:g},\"lazy\"),f.is(\"img\")?f.one(\"load.owl.lazy\",a.proxy(function(){f.css(\"opacity\",1),this._core.trigger(\"loaded\",{element:f,url:g},\"lazy\")},this)).attr(\"src\",g):(e=new Image,e.onload=a.proxy(function(){f.css({\"background-image\":\"url(\"+g+\")\",opacity:\"1\"}),this._core.trigger(\"loaded\",{element:f,url:g},\"lazy\")},this),e.src=g)},this)),this._loaded.push(d.get(0)))},c.prototype.destroy=function(){var a,b;for(a in this.handlers)this._core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))\"function\"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Lazy=c}(window.Zepto||window.jQuery,window,document),function(a){var b=function(c){this._core=c,this._handlers={\"initialized.owl.carousel\":a.proxy(function(){this._core.settings.autoHeight&&this.update()},this),\"changed.owl.carousel\":a.proxy(function(a){this._core.settings.autoHeight&&\"position\"==a.property.name&&this.update()},this),\"loaded.owl.lazy\":a.proxy(function(a){this._core.settings.autoHeight&&a.element.closest(\".\"+this._core.settings.itemClass)===this._core.$stage.children().eq(this._core.current())&&this.update()},this)},this._core.options=a.extend({},b.Defaults,this._core.options),this._core.$element.on(this._handlers)};b.Defaults={autoHeight:!1,autoHeightClass:\"owl-height\"},b.prototype.update=function(){this._core.$stage.parent().height(this._core.$stage.children().eq(this._core.current()).height()).addClass(this._core.settings.autoHeightClass)},b.prototype.destroy=function(){var a,b;for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))\"function\"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoHeight=b}(window.Zepto||window.jQuery,window,document),function(a,b,c){var d=function(b){this._core=b,this._videos={},this._playing=null,this._fullscreen=!1,this._handlers={\"resize.owl.carousel\":a.proxy(function(a){this._core.settings.video&&!this.isInFullScreen()&&a.preventDefault()},this),\"refresh.owl.carousel changed.owl.carousel\":a.proxy(function(){this._playing&&this.stop()},this),\"prepared.owl.carousel\":a.proxy(function(b){var c=a(b.content).find(\".owl-video\");c.length&&(c.css(\"display\",\"none\"),this.fetch(c,a(b.content)))},this)},this._core.options=a.extend({},d.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on(\"click.owl.video\",\".owl-video-play-icon\",a.proxy(function(a){this.play(a)},this))};d.Defaults={video:!1,videoHeight:!1,videoWidth:!1},d.prototype.fetch=function(a,b){var c=a.attr(\"data-vimeo-id\")?\"vimeo\":\"youtube\",d=a.attr(\"data-vimeo-id\")||a.attr(\"data-youtube-id\"),e=a.attr(\"data-width\")||this._core.settings.videoWidth,f=a.attr(\"data-height\")||this._core.settings.videoHeight,g=a.attr(\"href\");if(!g)throw new Error(\"Missing video URL.\");if(d=g.match(/(http:|https:|)\\/\\/(player.|www.)?(vimeo\\.com|youtu(be\\.com|\\.be|be\\.googleapis\\.com))\\/(video\\/|embed\\/|watch\\?v=|v\\/)?([A-Za-z0-9._%-]*)(\\&\\S+)?/),d[3].indexOf(\"youtu\")>-1)c=\"youtube\";else{if(!(d[3].indexOf(\"vimeo\")>-1))throw new Error(\"Video URL not supported.\");c=\"vimeo\"}d=d[6],this._videos[g]={type:c,id:d,width:e,height:f},b.attr(\"data-video\",g),this.thumbnail(a,this._videos[g])},d.prototype.thumbnail=function(b,c){var d,e,f,g=c.width&&c.height?'style=\"width:'+c.width+\"px;height:\"+c.height+'px;\"':\"\",h=b.find(\"img\"),i=\"src\",j=\"\",k=this._core.settings,l=function(a){e='<div class=\"owl-video-play-icon\"></div>',d=k.lazyLoad?'<div class=\"owl-video-tn '+j+'\" '+i+'=\"'+a+'\"></div>':'<div class=\"owl-video-tn\" style=\"opacity:1;background-image:url('+a+')\"></div>',b.after(d),b.after(e)};return b.wrap('<div class=\"owl-video-wrapper\"'+g+\"></div>\"),this._core.settings.lazyLoad&&(i=\"data-src\",j=\"owl-lazy\"),h.length?(l(h.attr(i)),h.remove(),!1):void(\"youtube\"===c.type?(f=\"http://img.youtube.com/vi/\"+c.id+\"/hqdefault.jpg\",l(f)):\"vimeo\"===c.type&&a.ajax({type:\"GET\",url:\"http://vimeo.com/api/v2/video/\"+c.id+\".json\",jsonp:\"callback\",dataType:\"jsonp\",success:function(a){f=a[0].thumbnail_large,l(f)}}))},d.prototype.stop=function(){this._core.trigger(\"stop\",null,\"video\"),this._playing.find(\".owl-video-frame\").remove(),this._playing.removeClass(\"owl-video-playing\"),this._playing=null},d.prototype.play=function(b){this._core.trigger(\"play\",null,\"video\"),this._playing&&this.stop();var c,d,e=a(b.target||b.srcElement),f=e.closest(\".\"+this._core.settings.itemClass),g=this._videos[f.attr(\"data-video\")],h=g.width||\"100%\",i=g.height||this._core.$stage.height();\"youtube\"===g.type?c='<iframe width=\"'+h+'\" height=\"'+i+'\" src=\"http://www.youtube.com/embed/'+g.id+\"?autoplay=1&v=\"+g.id+'\" frameborder=\"0\" allowfullscreen></iframe>':\"vimeo\"===g.type&&(c='<iframe src=\"http://player.vimeo.com/video/'+g.id+'?autoplay=1\" width=\"'+h+'\" height=\"'+i+'\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),f.addClass(\"owl-video-playing\"),this._playing=f,d=a('<div style=\"height:'+i+\"px; width:\"+h+'px\" class=\"owl-video-frame\">'+c+\"</div>\"),e.after(d)},d.prototype.isInFullScreen=function(){var d=c.fullscreenElement||c.mozFullScreenElement||c.webkitFullscreenElement;return d&&a(d).parent().hasClass(\"owl-video-frame\")&&(this._core.speed(0),this._fullscreen=!0),d&&this._fullscreen&&this._playing?!1:this._fullscreen?(this._fullscreen=!1,!1):this._playing&&this._core.state.orientation!==b.orientation?(this._core.state.orientation=b.orientation,!1):!0},d.prototype.destroy=function(){var a,b;this._core.$element.off(\"click.owl.video\");for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))\"function\"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Video=d}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this.core=b,this.core.options=a.extend({},e.Defaults,this.core.options),this.swapping=!0,this.previous=d,this.next=d,this.handlers={\"change.owl.carousel\":a.proxy(function(a){\"position\"==a.property.name&&(this.previous=this.core.current(),this.next=a.property.value)},this),\"drag.owl.carousel dragged.owl.carousel translated.owl.carousel\":a.proxy(function(a){this.swapping=\"translated\"==a.type},this),\"translate.owl.carousel\":a.proxy(function(){this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};e.Defaults={animateOut:!1,animateIn:!1},e.prototype.swap=function(){if(1===this.core.settings.items&&this.core.support3d){this.core.speed(0);var b,c=a.proxy(this.clear,this),d=this.core.$stage.children().eq(this.previous),e=this.core.$stage.children().eq(this.next),f=this.core.settings.animateIn,g=this.core.settings.animateOut;this.core.current()!==this.previous&&(g&&(b=this.core.coordinates(this.previous)-this.core.coordinates(this.next),d.css({left:b+\"px\"}).addClass(\"animated owl-animated-out\").addClass(g).one(\"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend\",c)),f&&e.addClass(\"animated owl-animated-in\").addClass(f).one(\"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend\",c))}},e.prototype.clear=function(b){a(b.target).css({left:\"\"}).removeClass(\"animated owl-animated-out owl-animated-in\").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.transitionEnd()},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))\"function\"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Animate=e}(window.Zepto||window.jQuery,window,document),function(a,b,c){var d=function(b){this.core=b,this.core.options=a.extend({},d.Defaults,this.core.options),this.handlers={\"translated.owl.carousel refreshed.owl.carousel\":a.proxy(function(){this.autoplay()\r\n    },this),\"play.owl.autoplay\":a.proxy(function(a,b,c){this.play(b,c)},this),\"stop.owl.autoplay\":a.proxy(function(){this.stop()},this),\"mouseover.owl.autoplay\":a.proxy(function(){this.core.settings.autoplayHoverPause&&this.pause()},this),\"mouseleave.owl.autoplay\":a.proxy(function(){this.core.settings.autoplayHoverPause&&this.autoplay()},this)},this.core.$element.on(this.handlers)};d.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},d.prototype.autoplay=function(){this.core.settings.autoplay&&!this.core.state.videoPlay?(b.clearInterval(this.interval),this.interval=b.setInterval(a.proxy(function(){this.play()},this),this.core.settings.autoplayTimeout)):b.clearInterval(this.interval)},d.prototype.play=function(){return c.hidden===!0||this.core.state.isTouch||this.core.state.isScrolling||this.core.state.isSwiping||this.core.state.inMotion?void 0:this.core.settings.autoplay===!1?void b.clearInterval(this.interval):void this.core.next(this.core.settings.autoplaySpeed)},d.prototype.stop=function(){b.clearInterval(this.interval)},d.prototype.pause=function(){b.clearInterval(this.interval)},d.prototype.destroy=function(){var a,c;b.clearInterval(this.interval);for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(c in Object.getOwnPropertyNames(this))\"function\"!=typeof this[c]&&(this[c]=null)},a.fn.owlCarousel.Constructor.Plugins.autoplay=d}(window.Zepto||window.jQuery,window,document),function(a){\"use strict\";var b=function(c){this._core=c,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={\"prepared.owl.carousel\":a.proxy(function(b){this._core.settings.dotsData&&this._templates.push(a(b.content).find(\"[data-dot]\").andSelf(\"[data-dot]\").attr(\"data-dot\"))},this),\"add.owl.carousel\":a.proxy(function(b){this._core.settings.dotsData&&this._templates.splice(b.position,0,a(b.content).find(\"[data-dot]\").andSelf(\"[data-dot]\").attr(\"data-dot\"))},this),\"remove.owl.carousel prepared.owl.carousel\":a.proxy(function(a){this._core.settings.dotsData&&this._templates.splice(a.position,1)},this),\"change.owl.carousel\":a.proxy(function(a){if(\"position\"==a.property.name&&!this._core.state.revert&&!this._core.settings.loop&&this._core.settings.navRewind){var b=this._core.current(),c=this._core.maximum(),d=this._core.minimum();a.data=a.property.value>c?b>=c?d:c:a.property.value<d?c:a.property.value}},this),\"changed.owl.carousel\":a.proxy(function(a){\"position\"==a.property.name&&this.draw()},this),\"refreshed.owl.carousel\":a.proxy(function(){this._initialized||(this.initialize(),this._initialized=!0),this._core.trigger(\"refresh\",null,\"navigation\"),this.update(),this.draw(),this._core.trigger(\"refreshed\",null,\"navigation\")},this)},this._core.options=a.extend({},b.Defaults,this._core.options),this.$element.on(this._handlers)};b.Defaults={nav:!1,navRewind:!0,navText:[\"prev\",\"next\"],navSpeed:!1,navElement:\"div\",navContainer:!1,navContainerClass:\"owl-nav\",navClass:[\"owl-prev\",\"owl-next\"],slideBy:1,dotClass:\"owl-dot\",dotsClass:\"owl-dots\",dots:!0,dotsEach:!1,dotData:!1,dotsSpeed:!1,dotsContainer:!1,controlsClass:\"owl-controls\"},b.prototype.initialize=function(){var b,c,d=this._core.settings;d.dotsData||(this._templates=[a(\"<div>\").addClass(d.dotClass).append(a(\"<span>\")).prop(\"outerHTML\")]),d.navContainer&&d.dotsContainer||(this._controls.$container=a(\"<div>\").addClass(d.controlsClass).appendTo(this.$element)),this._controls.$indicators=d.dotsContainer?a(d.dotsContainer):a(\"<div>\").hide().addClass(d.dotsClass).appendTo(this._controls.$container),this._controls.$indicators.on(\"click\",\"div\",a.proxy(function(b){var c=a(b.target).parent().is(this._controls.$indicators)?a(b.target).index():a(b.target).parent().index();b.preventDefault(),this.to(c,d.dotsSpeed)},this)),b=d.navContainer?a(d.navContainer):a(\"<div>\").addClass(d.navContainerClass).prependTo(this._controls.$container),this._controls.$next=a(\"<\"+d.navElement+\">\"),this._controls.$previous=this._controls.$next.clone(),this._controls.$previous.addClass(d.navClass[0]).html(d.navText[0]).hide().prependTo(b).on(\"click\",a.proxy(function(){this.prev(d.navSpeed)},this)),this._controls.$next.addClass(d.navClass[1]).html(d.navText[1]).hide().appendTo(b).on(\"click\",a.proxy(function(){this.next(d.navSpeed)},this));for(c in this._overrides)this._core[c]=a.proxy(this[c],this)},b.prototype.destroy=function(){var a,b,c,d;for(a in this._handlers)this.$element.off(a,this._handlers[a]);for(b in this._controls)this._controls[b].remove();for(d in this.overides)this._core[d]=this._overrides[d];for(c in Object.getOwnPropertyNames(this))\"function\"!=typeof this[c]&&(this[c]=null)},b.prototype.update=function(){var a,b,c,d=this._core.settings,e=this._core.clones().length/2,f=e+this._core.items().length,g=d.center||d.autoWidth||d.dotData?1:d.dotsEach||d.items;if(\"page\"!==d.slideBy&&(d.slideBy=Math.min(d.slideBy,d.items)),d.dots||\"page\"==d.slideBy)for(this._pages=[],a=e,b=0,c=0;f>a;a++)(b>=g||0===b)&&(this._pages.push({start:a-e,end:a-e+g-1}),b=0,++c),b+=this._core.mergers(this._core.relative(a))},b.prototype.draw=function(){var b,c,d=\"\",e=this._core.settings,f=(this._core.$stage.children(),this._core.relative(this._core.current()));if(!e.nav||e.loop||e.navRewind||(this._controls.$previous.toggleClass(\"disabled\",0>=f),this._controls.$next.toggleClass(\"disabled\",f>=this._core.maximum())),this._controls.$previous.toggle(e.nav),this._controls.$next.toggle(e.nav),e.dots){if(b=this._pages.length-this._controls.$indicators.children().length,e.dotData&&0!==b){for(c=0;c<this._controls.$indicators.children().length;c++)d+=this._templates[this._core.relative(c)];this._controls.$indicators.html(d)}else b>0?(d=new Array(b+1).join(this._templates[0]),this._controls.$indicators.append(d)):0>b&&this._controls.$indicators.children().slice(b).remove();this._controls.$indicators.find(\".active\").removeClass(\"active\"),this._controls.$indicators.children().eq(a.inArray(this.current(),this._pages)).addClass(\"active\")}this._controls.$indicators.toggle(e.dots)},b.prototype.onTrigger=function(b){var c=this._core.settings;b.page={index:a.inArray(this.current(),this._pages),count:this._pages.length,size:c&&(c.center||c.autoWidth||c.dotData?1:c.dotsEach||c.items)}},b.prototype.current=function(){var b=this._core.relative(this._core.current());return a.grep(this._pages,function(a){return a.start<=b&&a.end>=b}).pop()},b.prototype.getPosition=function(b){var c,d,e=this._core.settings;return\"page\"==e.slideBy?(c=a.inArray(this.current(),this._pages),d=this._pages.length,b?++c:--c,c=this._pages[(c%d+d)%d].start):(c=this._core.relative(this._core.current()),d=this._core.items().length,b?c+=e.slideBy:c-=e.slideBy),c},b.prototype.next=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!0),b)},b.prototype.prev=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!1),b)},b.prototype.to=function(b,c,d){var e;d?a.proxy(this._overrides.to,this._core)(b,c):(e=this._pages.length,a.proxy(this._overrides.to,this._core)(this._pages[(b%e+e)%e].start,c))},a.fn.owlCarousel.Constructor.Plugins.Navigation=b}(window.Zepto||window.jQuery,window,document),function(a,b){\"use strict\";var c=function(d){this._core=d,this._hashes={},this.$element=this._core.$element,this._handlers={\"initialized.owl.carousel\":a.proxy(function(){\"URLHash\"==this._core.settings.startPosition&&a(b).trigger(\"hashchange.owl.navigation\")},this),\"prepared.owl.carousel\":a.proxy(function(b){var c=a(b.content).find(\"[data-hash]\").andSelf(\"[data-hash]\").attr(\"data-hash\");this._hashes[c]=b.content},this)},this._core.options=a.extend({},c.Defaults,this._core.options),this.$element.on(this._handlers),a(b).on(\"hashchange.owl.navigation\",a.proxy(function(){var a=b.location.hash.substring(1),c=this._core.$stage.children(),d=this._hashes[a]&&c.index(this._hashes[a])||0;return a?void this._core.to(d,!1,!0):!1},this))};c.Defaults={URLhashListener:!1},c.prototype.destroy=function(){var c,d;a(b).off(\"hashchange.owl.navigation\");for(c in this._handlers)this._core.$element.off(c,this._handlers[c]);for(d in Object.getOwnPropertyNames(this))\"function\"!=typeof this[d]&&(this[d]=null)},a.fn.owlCarousel.Constructor.Plugins.Hash=c}(window.Zepto||window.jQuery,window,document);","Solwin_Cpanel/js/update.js":"/**\r\n * Solwin Infotech\r\n * Solwin FreeGo Theme\r\n *\r\n * @category   Solwin\r\n * @package    Solwin FreeGo Theme\r\n * @copyright  Copyright \u00c2\u00a9 2006-2016 Solwin (https://www.solwininfotech.com)\r\n * @license    https://www.solwininfotech.com/magento-extension-license/ \r\n */\r\n\r\nrequire(['jquery'], function () {\r\n    jQuery(document).ready(function () {\r\n        jQuery(\".admin__menu #menu-solwin-cpanel-view .submenu .item-addimage, .admin__menu #menu-solwin-cpanel-view .submenu .item-addimage-two\").find('a').remove();\r\n        \r\n        var eImage = jQuery(\".admin__menu #menu-solwin-cpanel-view .submenu .item-addimage\").parent().html();\r\n        var obj = '<a href=\"https://www.solwininfotech.com/product/magento-2-extensions/\" target=\"_blank\">';\r\n        obj += eImage;\r\n        obj += '</a>';\r\n    \tjQuery(\".admin__menu #menu-solwin-cpanel-view .submenu .item-addimage\").replaceWith(obj);\r\n\r\n    \tvar eImageTwo = jQuery(\".admin__menu #menu-solwin-cpanel-view .submenu .item-addimage-two\").parent().html();\r\n        var obj = '<a href=\"https://www.solwininfotech.com/my-account/\" target=\"_blank\">';\r\n        obj += eImageTwo;\r\n        obj += '</a>';\r\n    \tjQuery(\".admin__menu #menu-solwin-cpanel-view .submenu .item-addimage-two\").replaceWith(obj);\r\n\t});\r\n});","js/theme.js":"/**\r\n * Copyright \u00c2\u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine('globalNavigationScroll', [\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    var win = $(window),\r\n        subMenuClass = '.submenu',\r\n        fixedClassName = '_fixed',\r\n        menu = $('.menu-wrapper'),\r\n        content = $('.page-wrapper'),\r\n        menuItems = $('#nav').children('li'),\r\n        subMenus = menuItems.children(subMenuClass),\r\n        winHeight,\r\n        menuHeight = menu.height(),\r\n        menuHeightRest = 0,\r\n        menuScrollMax = 0,\r\n        submenuHeight = 0,\r\n        contentHeight,\r\n        winTop = 0,\r\n        winTopLast = 0,\r\n        scrollStep = 0,\r\n        nextTop = 0;\r\n\r\n    /**\r\n     * Check if menu is fixed\r\n     * @returns {boolean}\r\n     */\r\n    function isMenuFixed() {\r\n        return (menuHeight < contentHeight) && (contentHeight > winHeight);\r\n    }\r\n\r\n    /**\r\n     * Check if class exist than add or do nothing\r\n     * @param {jQuery} el\r\n     * @param $class string\r\n     */\r\n    function checkAddClass(el, $class) {\r\n        if (!el.hasClass($class)) {\r\n            el.addClass($class);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check if class exist than remove or do nothing\r\n     * @param {jQuery} el\r\n     * @param $class string\r\n     */\r\n    function checkRemoveClass(el, $class) {\r\n        if (el.hasClass($class)) {\r\n            el.removeClass($class);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Calculate and apply menu position\r\n     */\r\n    function positionMenu() {\r\n\r\n        //  Spotting positions and heights\r\n        winHeight = win.height();\r\n        contentHeight = content.height();\r\n        winTop = win.scrollTop();\r\n        scrollStep = winTop - winTopLast;\r\n        menuHeightRest = menuHeight - winTop; // is a visible menu height\r\n\r\n        if (isMenuFixed()) { // fixed menu cases\r\n\r\n            checkAddClass(menu, fixedClassName);\r\n\r\n            if (menuHeight > winHeight) { // smart scroll cases\r\n\r\n                if (winTop > winTopLast) { //  scroll down\r\n\r\n                    menuScrollMax = menuHeight - winHeight;\r\n\r\n                    nextTop < (menuScrollMax - scrollStep) ?\r\n                        nextTop += scrollStep : nextTop = menuScrollMax;\r\n\r\n                    menu.css('top', -nextTop);\r\n\r\n                } else if (winTop <= winTopLast) { // scroll up\r\n\r\n                    nextTop > -scrollStep ?\r\n                        nextTop += scrollStep : nextTop = 0;\r\n\r\n                    menu.css('top', -nextTop);\r\n\r\n                }\r\n\r\n            }\r\n\r\n        } else { // static menu cases\r\n            checkRemoveClass(menu, fixedClassName);\r\n        }\r\n\r\n        //  Save previous window scrollTop\r\n        winTopLast = winTop;\r\n\r\n    }\r\n\r\n    positionMenu(); // page start calculation\r\n\r\n    //  Change position on scroll\r\n    win.on('scroll', function () {\r\n        positionMenu();\r\n    });\r\n\r\n    win.on('resize', function () {\r\n\r\n        winHeight = win.height();\r\n\r\n        //  Reset position if fixed and out of smart scroll\r\n        if ((menuHeight < contentHeight) && (menuHeight <= winHeight)) {\r\n            menu.removeAttr('style');\r\n            menuItems.off();\r\n        }\r\n\r\n    });\r\n\r\n    //  Add event to menuItems to check submenu overlap\r\n    menuItems.on('click', function (e) {\r\n\r\n        var submenu = $(this).children(subMenuClass),\r\n            delta,\r\n            logo = $('.logo')[0].offsetHeight;\r\n\r\n        submenuHeight = submenu.height();\r\n\r\n        if (submenuHeight > menuHeight && menuHeight + logo > winHeight) {\r\n            menu.height(submenuHeight - logo);\r\n            delta = -menu.position().top;\r\n            window.scrollTo(0, 0);\r\n            positionMenu();\r\n            window.scrollTo(0, delta);\r\n            positionMenu();\r\n            menuHeight = submenuHeight;\r\n        }\r\n    });\r\n\r\n});\r\n\r\ndefine('globalNavigation', [\r\n    'jquery',\r\n    'jquery/ui',\r\n    'globalNavigationScroll'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.globalNavigation', {\r\n        options: {\r\n            selectors: {\r\n                menu: '#nav',\r\n                currentItem: '._current',\r\n                topLevelItem: '.level-0',\r\n                topLevelHref: '> a',\r\n                subMenu: '> .submenu',\r\n                closeSubmenuBtn: '[data-role=\"close-submenu\"]'\r\n            },\r\n            overlayTmpl: '<div class=\"admin__menu-overlay\"></div>'\r\n        },\r\n\r\n        _create: function () {\r\n            var selectors = this.options.selectors;\r\n\r\n            this.menu = this.element;\r\n            this.menuLinks = $(selectors.topLevelHref, selectors.topLevelItem);\r\n            this.closeActions = $(selectors.closeSubmenuBtn);\r\n\r\n            this._initOverlay()\r\n                ._bind();\r\n        },\r\n\r\n        _initOverlay: function () {\r\n            this.overlay = $(this.options.overlayTmpl).appendTo('body').hide(0);\r\n\r\n            return this;\r\n        },\r\n\r\n        _bind: function () {\r\n            var focus = this._focus.bind(this),\r\n                open = this._open.bind(this),\r\n                blur = this._blur.bind(this),\r\n                keyboard = this._keyboard.bind(this);\r\n\r\n            this.menuLinks\r\n                .on('focus', focus)\r\n                .on('click', open);\r\n\r\n            this.menuLinks.last().on('blur', blur);\r\n\r\n            this.closeActions.on('keydown', keyboard);\r\n        },\r\n\r\n\r\n        /**\r\n         * Remove active class from current menu item\r\n         * Turn back active class to current page menu item\r\n         */\r\n        _blur: function (e) {\r\n            var selectors = this.options.selectors,\r\n                menuItem = $(e.target).closest(selectors.topLevelItem),\r\n                currentItem = $(selectors.menu).find(selectors.currentItem);\r\n\r\n            menuItem.removeClass('_active');\r\n            currentItem.addClass('_active');\r\n        },\r\n\r\n        /**\r\n         * Add focus to active menu item\r\n         */\r\n        _keyboard: function (e) {\r\n            var selectors = this.options.selectors,\r\n                menuItem = $(e.target).closest(selectors.topLevelItem);\r\n\r\n            if (e.which === 13) {\r\n                this._close(e);\r\n                $(selectors.topLevelHref, menuItem).focus();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Toggle active state on focus\r\n         */\r\n        _focus: function (e) {\r\n            var selectors = this.options.selectors,\r\n                menuItem = $(e.target).closest(selectors.topLevelItem);\r\n\r\n            menuItem.addClass('_active')\r\n                .siblings(selectors.topLevelItem)\r\n                .removeClass('_active');\r\n        },\r\n\r\n        _closeSubmenu: function (e) {\r\n            var selectors = this.options.selectors,\r\n                currentItem = $(selectors.menu).find(selectors.currentItem);\r\n\r\n            this._close(e);\r\n\r\n            currentItem.addClass('_active');\r\n        },\r\n\r\n        _open: function (e) {\r\n            var selectors = this.options.selectors,\r\n                menuItemSelector = selectors.topLevelItem,\r\n                menuItem = $(e.target).closest(menuItemSelector),\r\n                subMenu = $(selectors.subMenu, menuItem),\r\n                close = this._closeSubmenu.bind(this),\r\n                closeBtn = subMenu.find(selectors.closeSubmenuBtn);\r\n\r\n\r\n            if (subMenu.length) {\r\n                e.preventDefault();\r\n            }\r\n\r\n            menuItem.addClass('_show')\r\n                .siblings(menuItemSelector)\r\n                .removeClass('_show');\r\n\r\n            subMenu.attr('aria-expanded', 'true');\r\n\r\n            //subMenu.css('height', subMenu.find('ul.menu')[0].height() + subMenu.find('strong.submenu-title').height());\r\n\r\n            closeBtn.on('click', close);\r\n\r\n            this.overlay.show(0).on('click', close);\r\n            this.menuLinks.last().off('blur');\r\n        },\r\n\r\n        _close: function (e) {\r\n            var selectors = this.options.selectors,\r\n                menuItem = this.menu.find(selectors.topLevelItem + '._show'),\r\n                subMenu = $(selectors.subMenu, menuItem),\r\n                closeBtn = subMenu.find(selectors.closeSubmenuBtn),\r\n                blur = this._blur.bind(this);\r\n\r\n            e.preventDefault();\r\n\r\n            this.overlay.hide(0).off('click');\r\n\r\n            this.menuLinks.last().on('blur', blur);\r\n\r\n            closeBtn.off('click');\r\n\r\n            subMenu.attr('aria-expanded', 'false');\r\n\r\n            menuItem.removeClass('_show _active');\r\n        }\r\n    });\r\n\r\n    return $.mage.globalNavigation;\r\n});\r\n\r\ndefine('globalSearch', [\r\n    'jquery',\r\n    'jquery/ui'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.globalSearch', {\r\n        options: {\r\n            field: '.search-global-field',\r\n            fieldActiveClass: '_active',\r\n            input: '#search-global'\r\n        },\r\n\r\n        _create: function () {\r\n            this.field = $(this.options.field);\r\n            this.input = $(this.options.input);\r\n            this._events();\r\n        },\r\n\r\n        _events: function () {\r\n            var self = this;\r\n\r\n            this.input\r\n                .on('blur.resetGlobalSearchForm', function () {\r\n                    if (!self.input.val()) {\r\n                        self.field.removeClass(self.options.fieldActiveClass)\r\n                    }\r\n                });\r\n\r\n            this.input\r\n                .on('focus.activateGlobalSearchForm', function () {\r\n                    self.field.addClass(self.options.fieldActiveClass)\r\n                });\r\n        }\r\n    });\r\n\r\n    return $.mage.globalSearch;\r\n});\r\n\r\ndefine('modalPopup', [\r\n    'jquery',\r\n    'jquery/ui'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.modalPopup', {\r\n        options: {\r\n            popup: '.popup',\r\n            btnDismiss: '[data-dismiss=\"popup\"]',\r\n            btnHide: '[data-hide=\"popup\"]'\r\n        },\r\n\r\n        _create: function () {\r\n            this.fade = this.element;\r\n            this.popup = $(this.options.popup, this.fade);\r\n            this.btnDismiss = $(this.options.btnDismiss, this.popup);\r\n            this.btnHide = $(this.options.btnHide, this.popup);\r\n\r\n            this._events();\r\n        },\r\n\r\n        _events: function () {\r\n            var self = this;\r\n\r\n            this.btnDismiss\r\n                .on('click.dismissModalPopup', function () {\r\n                    self.fade.remove();\r\n                });\r\n\r\n            this.btnHide\r\n                .on('click.hideModalPopup', function () {\r\n                    self.fade.hide();\r\n                });\r\n        }\r\n    });\r\n\r\n    return $.mage.modalPopup;\r\n});\r\n\r\ndefine('useDefault', [\r\n    'jquery',\r\n    'jquery/ui'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.useDefault', {\r\n        options: {\r\n            field: '.field',\r\n            useDefault: '.use-default',\r\n            checkbox: '.use-default-control',\r\n            label: '.use-default-label'\r\n        },\r\n\r\n        _create: function () {\r\n            this.el = this.element;\r\n            this.field = $(this.el).closest(this.options.field);\r\n            this.useDefault = $(this.options.useDefault, this.field);\r\n            this.checkbox = $(this.options.checkbox, this.useDefault);\r\n            this.label = $(this.options.label, this.useDefault);\r\n            this.origValue = this.el.attr('data-store-label');\r\n\r\n            this._events();\r\n        },\r\n\r\n        _events: function () {\r\n            var self = this;\r\n\r\n            this.el\r\n                .on('change.toggleUseDefaultVisibility keyup.toggleUseDefaultVisibility', $.proxy(this._toggleUseDefaultVisibility, this))\r\n                .trigger('change.toggleUseDefaultVisibility');\r\n\r\n            this.checkbox\r\n                .on('change.setOrigValue', function () {\r\n                    if ($(this).prop('checked')) {\r\n                        self.el\r\n                            .val(self.origValue)\r\n                            .trigger('change.toggleUseDefaultVisibility');\r\n\r\n                        $(this).prop('checked', false);\r\n                    }\r\n                });\r\n        },\r\n\r\n        _toggleUseDefaultVisibility: function () {\r\n            var curValue = this.el.val(),\r\n                origValue = this.origValue;\r\n\r\n            this[curValue != origValue ? '_show' : '_hide']();\r\n        },\r\n\r\n        _show: function () {\r\n            this.useDefault.show();\r\n        },\r\n\r\n        _hide: function () {\r\n            this.useDefault.hide();\r\n        }\r\n    });\r\n\r\n    return $.mage.useDefault;\r\n});\r\n\r\ndefine('loadingPopup', [\r\n    'jquery',\r\n    'jquery/ui'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.loadingPopup', {\r\n        options: {\r\n            message: 'Please wait...',\r\n            timeout: 5000,\r\n            timeoutId: null,\r\n            callback: null,\r\n            template: null\r\n        },\r\n\r\n        _create: function () {\r\n            this.template =\r\n                '<div class=\"popup popup-loading\">' +\r\n                '<div class=\"popup-inner\">' + this.options.message + '</div>' +\r\n                '</div>';\r\n\r\n            this.popup = $(this.template);\r\n\r\n            this._show();\r\n            this._events();\r\n        },\r\n\r\n        _events: function () {\r\n            var self = this;\r\n\r\n            this.element\r\n                .on('showLoadingPopup', function () {\r\n                    self._show();\r\n                })\r\n                .on('hideLoadingPopup', function () {\r\n                    self._hide();\r\n                });\r\n        },\r\n\r\n        _show: function () {\r\n            var options = this.options,\r\n                timeout = options.timeout;\r\n\r\n            $('body').trigger('processStart');\r\n\r\n            if (timeout) {\r\n                options.timeoutId = setTimeout(this._delayedHide.bind(this), timeout);\r\n            }\r\n        },\r\n\r\n        _hide: function () {\r\n            $('body').trigger('processStop');\r\n        },\r\n\r\n        _delayedHide: function () {\r\n            this._hide();\r\n\r\n            this.options.callback && this.options.callback();\r\n\r\n            this.options.timeoutId && clearTimeout(this.options.timeoutId);\r\n        }\r\n    });\r\n\r\n    return $.mage.loadingPopup;\r\n});\r\n\r\ndefine('collapsable', [\r\n    'jquery',\r\n    'jquery/ui',\r\n    'jquery/jquery.tabs'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.collapsable', {\r\n        options: {\r\n            parent: null,\r\n            openedClass: 'opened',\r\n            wrapper: '.fieldset-wrapper'\r\n        },\r\n\r\n        _create: function () {\r\n            this._events();\r\n        },\r\n\r\n        _events: function () {\r\n            var self = this;\r\n\r\n            this.element\r\n                .on('show', function (e) {\r\n                    var fieldsetWrapper = $(this).closest(self.options.wrapper);\r\n\r\n                    fieldsetWrapper.addClass(self.options.openedClass);\r\n                    e.stopPropagation();\r\n                })\r\n                .on('hide', function (e) {\r\n                    var fieldsetWrapper = $(this).closest(self.options.wrapper);\r\n\r\n                    fieldsetWrapper.removeClass(self.options.openedClass);\r\n                    e.stopPropagation();\r\n                });\r\n        }\r\n    });\r\n\r\n    return $.mage.collapsable;\r\n});\r\n\r\ndefine('js/theme', [\r\n    'jquery',\r\n    'mage/smart-keyboard-handler',\r\n    'mage/ie-class-fixer',\r\n    'collapsable',\r\n    'domReady!'\r\n], function ($, keyboardHandler) {\r\n    'use strict';\r\n\r\n    /* @TODO refactor collapsable as widget and avoid logic binding with such a general selectors */\r\n    $('.collapse').collapsable();\r\n\r\n    $.each($('.entry-edit'), function (i, entry) {\r\n        $('.collapse:first', entry).filter(function () {\r\n            return $(this).data('collapsed') !== true;\r\n        }).collapse('show');\r\n    });\r\n\r\n    keyboardHandler.apply();\r\n});\r\n","es6-collections.js":"(function (exports) {'use strict';\r\n  //shared pointer\r\n  var i;\r\n  //shortcuts\r\n  var defineProperty = Object.defineProperty, is = function(a,b) { return isNaN(a)? isNaN(b): a === b; };\r\n\r\n\r\n  //Polyfill global objects\r\n  if (typeof WeakMap == 'undefined') {\r\n    exports.WeakMap = createCollection({\r\n      // WeakMap#delete(key:void*):boolean\r\n      'delete': sharedDelete,\r\n      // WeakMap#clear():\r\n      clear: sharedClear,\r\n      // WeakMap#get(key:void*):void*\r\n      get: sharedGet,\r\n      // WeakMap#has(key:void*):boolean\r\n      has: mapHas,\r\n      // WeakMap#set(key:void*, value:void*):void\r\n      set: sharedSet\r\n    }, true);\r\n  }\r\n\r\n  if (typeof Map == 'undefined' || typeof ((new Map).values) !== 'function' || !(new Map).values().next) {\r\n    exports.Map = createCollection({\r\n      // WeakMap#delete(key:void*):boolean\r\n      'delete': sharedDelete,\r\n      //:was Map#get(key:void*[, d3fault:void*]):void*\r\n      // Map#has(key:void*):boolean\r\n      has: mapHas,\r\n      // Map#get(key:void*):boolean\r\n      get: sharedGet,\r\n      // Map#set(key:void*, value:void*):void\r\n      set: sharedSet,\r\n      // Map#keys(void):Iterator\r\n      keys: sharedKeys,\r\n      // Map#values(void):Iterator\r\n      values: sharedValues,\r\n      // Map#entries(void):Iterator\r\n      entries: mapEntries,\r\n      // Map#forEach(callback:Function, context:void*):void ==> callback.call(context, key, value, mapObject) === not in specs`\r\n      forEach: sharedForEach,\r\n      // Map#clear():\r\n      clear: sharedClear\r\n    });\r\n  }\r\n\r\n  if (typeof Set == 'undefined' || typeof ((new Set).values) !== 'function' || !(new Set).values().next) {\r\n    exports.Set = createCollection({\r\n      // Set#has(value:void*):boolean\r\n      has: setHas,\r\n      // Set#add(value:void*):boolean\r\n      add: sharedAdd,\r\n      // Set#delete(key:void*):boolean\r\n      'delete': sharedDelete,\r\n      // Set#clear():\r\n      clear: sharedClear,\r\n      // Set#keys(void):Iterator\r\n      keys: sharedValues, // specs actually say \"the same function object as the initial value of the values property\"\r\n      // Set#values(void):Iterator\r\n      values: sharedValues,\r\n      // Set#entries(void):Iterator\r\n      entries: setEntries,\r\n      // Set#forEach(callback:Function, context:void*):void ==> callback.call(context, value, index) === not in specs\r\n      forEach: sharedForEach\r\n    });\r\n  }\r\n\r\n  if (typeof WeakSet == 'undefined') {\r\n    exports.WeakSet = createCollection({\r\n      // WeakSet#delete(key:void*):boolean\r\n      'delete': sharedDelete,\r\n      // WeakSet#add(value:void*):boolean\r\n      add: sharedAdd,\r\n      // WeakSet#clear():\r\n      clear: sharedClear,\r\n      // WeakSet#has(value:void*):boolean\r\n      has: setHas\r\n    }, true);\r\n  }\r\n\r\n\r\n  /**\r\n   * ES6 collection constructor\r\n   * @return {Function} a collection class\r\n   */\r\n  function createCollection(proto, objectOnly){\r\n    function Collection(a){\r\n      if (!this || this.constructor !== Collection) return new Collection(a);\r\n      this._keys = [];\r\n      this._values = [];\r\n      this._itp = []; // iteration pointers\r\n      this.objectOnly = objectOnly;\r\n\r\n      //parse initial iterable argument passed\r\n      if (a) init.call(this, a);\r\n    }\r\n\r\n    //define size for non object-only collections\r\n    if (!objectOnly) {\r\n      defineProperty(proto, 'size', {\r\n        get: sharedSize\r\n      });\r\n    }\r\n\r\n    //set prototype\r\n    proto.constructor = Collection;\r\n    Collection.prototype = proto;\r\n\r\n    return Collection;\r\n  }\r\n\r\n\r\n  /** parse initial iterable argument passed */\r\n  function init(a){\r\n    var i;\r\n    //init Set argument, like `[1,2,3,{}]`\r\n    if (this.add)\r\n      a.forEach(this.add, this);\r\n    //init Map argument like `[[1,2], [{}, 4]]`\r\n    else\r\n      a.forEach(function(a){this.set(a[0],a[1])}, this);\r\n  }\r\n\r\n\r\n  /** delete */\r\n  function sharedDelete(key) {\r\n    if (this.has(key)) {\r\n      this._keys.splice(i, 1);\r\n      this._values.splice(i, 1);\r\n      // update iteration pointers\r\n      this._itp.forEach(function(p) { if (i < p[0]) p[0]--; });\r\n    }\r\n    // Aurora here does it while Canary doesn't\r\n    return -1 < i;\r\n  };\r\n\r\n  function sharedGet(key) {\r\n    return this.has(key) ? this._values[i] : undefined;\r\n  }\r\n\r\n  function has(list, key) {\r\n    if (this.objectOnly && key !== Object(key))\r\n      throw new TypeError(\"Invalid value used as weak collection key\");\r\n    //NaN or 0 passed\r\n    if (key != key || key === 0) for (i = list.length; i-- && !is(list[i], key);){}\r\n    else i = list.indexOf(key);\r\n    return -1 < i;\r\n  }\r\n\r\n  function setHas(value) {\r\n    return has.call(this, this._values, value);\r\n  }\r\n\r\n  function mapHas(value) {\r\n    return has.call(this, this._keys, value);\r\n  }\r\n\r\n  /** @chainable */\r\n  function sharedSet(key, value) {\r\n    this.has(key) ?\r\n      this._values[i] = value\r\n      :\r\n      this._values[this._keys.push(key) - 1] = value\r\n    ;\r\n    return this;\r\n  }\r\n\r\n  /** @chainable */\r\n  function sharedAdd(value) {\r\n    if (!this.has(value)) this._values.push(value);\r\n    return this;\r\n  }\r\n\r\n  function sharedClear() {\r\n    this._values.length = 0;\r\n  }\r\n\r\n  /** keys, values, and iterate related methods */\r\n  function sharedKeys() {\r\n    return sharedIterator(this._itp, this._keys);\r\n  }\r\n\r\n  function sharedValues() {\r\n    return sharedIterator(this._itp, this._values);\r\n  }\r\n\r\n  function mapEntries() {\r\n    return sharedIterator(this._itp, this._keys, this._values);\r\n  }\r\n\r\n  function setEntries() {\r\n    return sharedIterator(this._itp, this._values, this._values);\r\n  }\r\n\r\n  function sharedIterator(itp, array, array2) {\r\n    var p = [0], done = false;\r\n    itp.push(p);\r\n    return {\r\n      next: function() {\r\n        var v, k = p[0];\r\n        if (!done && k < array.length) {\r\n          v = array2 ? [array[k], array2[k]]: array[k];\r\n          p[0]++;\r\n        } else {\r\n          done = true;\r\n          itp.splice(itp.indexOf(p), 1);\r\n        }\r\n        return { done: done, value: v };\r\n      }\r\n    };\r\n  }\r\n\r\n  function sharedSize() {\r\n    return this._values.length;\r\n  }\r\n\r\n  function sharedForEach(callback, context) {\r\n    var it = this.entries();\r\n    for (;;) {\r\n      var r = it.next();\r\n      if (r.done) break;\r\n      callback.call(context, r.value[1], r.value[0], this);\r\n    }\r\n  }\r\n\r\n})(typeof exports != 'undefined' && typeof global != 'undefined' ? global : window );","FormData.js":"/*\r\n * FormData for XMLHttpRequest 2  -  Polyfill for Web Worker\r\n * (c) 2014 Rob Wu <rob@robwu.nl>\r\n * License: MIT\r\n * - append(name, value[, filename])\r\n * - XMLHttpRequest.prototype.send(object FormData)\r\n * \r\n * Specification: http://www.w3.org/TR/XMLHttpRequest/#formdata\r\n *                http://www.w3.org/TR/XMLHttpRequest/#the-send-method\r\n * The .append() implementation also accepts Uint8Array and ArrayBuffer objects\r\n * Web Workers do not natively support FormData:\r\n *                http://dev.w3.org/html5/workers/#apis-available-to-workers\r\n * Originally released in 2012 as a part of http://stackoverflow.com/a/10002486.\r\n * Updates since initial release:\r\n * - Forward-compatibility by testing whether FormData exists before defining it.\r\n * - Increased robustness of .append.\r\n * - Allow any typed array in .append.\r\n * - Remove use of String.prototype.toString to work around a Firefox bug.\r\n * - Use typed array in xhr.send instead of arraybuffer to get rid of deprecation\r\n *   warnings.\r\n **/\r\n(function(exports) {\r\n    if (exports.FormData) {\r\n        // Don't replace FormData if it already exists\r\n        return;\r\n    }\r\n    // Export variable to the global scope\r\n    exports.FormData = FormData;\r\n\r\n    var ___send$rw = XMLHttpRequest.prototype.send;\r\n    XMLHttpRequest.prototype.send = function(data) {\r\n        if (data instanceof FormData) {\r\n            if (!data.__endedMultipart) data.__append('--' + data.boundary + '--\\r\\n');\r\n            data.__endedMultipart = true;\r\n            this.setRequestHeader('Content-Type', 'multipart/form-data; boundary=' + data.boundary);\r\n            data = new Uint8Array(data.data);\r\n        }\r\n        // Invoke original XHR.send\r\n        return ___send$rw.call(this, data);\r\n    };\r\n\r\n    function FormData() {\r\n        // Force a Constructor\r\n        if (!(this instanceof FormData)) return new FormData();\r\n        // Generate a random boundary - This must be unique with respect to the form's contents.\r\n        this.boundary = '------RWWorkerFormDataBoundary' + Math.random().toString(36);\r\n        var internal_data = this.data = [];\r\n        /**\r\n         * Internal method.\r\n         * @param inp String | ArrayBuffer | Uint8Array  Input\r\n         */\r\n        this.__append = function(inp) {\r\n            var i = 0, len;\r\n            if (typeof inp == 'string') {\r\n                for (len = inp.length; i < len; ++i)\r\n                    internal_data.push(inp.charCodeAt(i) & 0xff);\r\n            } else if (inp && inp.byteLength) {/*If ArrayBuffer or typed array */\r\n                if (!('byteOffset' in inp))   /* If ArrayBuffer, wrap in view */\r\n                    inp = new Uint8Array(inp);\r\n                for (len = inp.byteLength; i < len; ++i)\r\n                    internal_data.push(inp[i] & 0xff);\r\n            }\r\n        };\r\n    }\r\n    /**\r\n     * @param name     String                                   Key name\r\n     * @param value    String|Blob|File|typed array|ArrayBuffer Value\r\n     * @param filename String                                   Optional File name (when value is not a string).\r\n     **/\r\n    FormData.prototype.append = function(name, value, filename) {\r\n        if (this.__endedMultipart) {\r\n            // Truncate the closing boundary\r\n            this.data.length -= this.boundary.length + 6;\r\n            this.__endedMultipart = false;\r\n        }\r\n        if (arguments.length < 2) {\r\n            throw new SyntaxError('Not enough arguments');\r\n        }\r\n        var part = '--' + this.boundary + '\\r\\n' +\r\n            'Content-Disposition: form-data; name=\"' + name + '\"';\r\n\r\n        if (value instanceof File || value instanceof Blob) {\r\n            return this.append(name,\r\n                new Uint8Array(new FileReaderSync().readAsArrayBuffer(value)),\r\n                filename || value.name);\r\n        } else if (typeof value.byteLength == 'number') {\r\n            // Duck-typed typed array or array buffer\r\n            part += '; filename=\"'+ (filename || 'blob').replace(/\"/g,'%22') +'\"\\r\\n';\r\n            part += 'Content-Type: application/octet-stream\\r\\n\\r\\n';\r\n            this.__append(part);\r\n            this.__append(value);\r\n            part = '\\r\\n';\r\n        } else {\r\n            part += '\\r\\n\\r\\n' + value + '\\r\\n';\r\n        }\r\n        this.__append(part);\r\n    };\r\n})(this || self);\r\n","moment.js":"//! moment.js\r\n//! version : 2.17.1\r\n//! authors : Tim Wood, Iskren Chernev, Moment.js contributors\r\n//! license : MIT\r\n//! momentjs.com\r\n!function(a,b){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=b():\"function\"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){\"use strict\";function a(){return od.apply(null,arguments)}\r\n// This is done to register the method called with moment()\r\n// without creating circular dependencies.\r\nfunction b(a){od=a}function c(a){return a instanceof Array||\"[object Array]\"===Object.prototype.toString.call(a)}function d(a){\r\n// IE8 will treat undefined and null as object if it wasn't for\r\n// input != null\r\nreturn null!=a&&\"[object Object]\"===Object.prototype.toString.call(a)}function e(a){var b;for(b in a)\r\n// even if its not own property I'd still call it non-empty\r\nreturn!1;return!0}function f(a){return\"number\"==typeof a||\"[object Number]\"===Object.prototype.toString.call(a)}function g(a){return a instanceof Date||\"[object Date]\"===Object.prototype.toString.call(a)}function h(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function i(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function j(a,b){for(var c in b)i(b,c)&&(a[c]=b[c]);return i(b,\"toString\")&&(a.toString=b.toString),i(b,\"valueOf\")&&(a.valueOf=b.valueOf),a}function k(a,b,c,d){return rb(a,b,c,d,!0).utc()}function l(){\r\n// We need to deep clone this object.\r\nreturn{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function m(a){return null==a._pf&&(a._pf=l()),a._pf}function n(a){if(null==a._isValid){var b=m(a),c=qd.call(b.parsedDateParts,function(a){return null!=a}),d=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);if(a._strict&&(d=d&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour),null!=Object.isFrozen&&Object.isFrozen(a))return d;a._isValid=d}return a._isValid}function o(a){var b=k(NaN);return null!=a?j(m(b),a):m(b).userInvalidated=!0,b}function p(a){return void 0===a}function q(a,b){var c,d,e;if(p(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),p(b._i)||(a._i=b._i),p(b._f)||(a._f=b._f),p(b._l)||(a._l=b._l),p(b._strict)||(a._strict=b._strict),p(b._tzm)||(a._tzm=b._tzm),p(b._isUTC)||(a._isUTC=b._isUTC),p(b._offset)||(a._offset=b._offset),p(b._pf)||(a._pf=m(b)),p(b._locale)||(a._locale=b._locale),rd.length>0)for(c in rd)d=rd[c],e=b[d],p(e)||(a[d]=e);return a}\r\n// Moment prototype object\r\nfunction r(b){q(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),\r\n// Prevent infinite loop in case updateOffset creates new moment\r\n// objects.\r\nsd===!1&&(sd=!0,a.updateOffset(this),sd=!1)}function s(a){return a instanceof r||null!=a&&null!=a._isAMomentObject}function t(a){return a<0?Math.ceil(a)||0:Math.floor(a)}function u(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=t(b)),c}\r\n// compare two arrays, return the number of differences\r\nfunction v(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;d<e;d++)(c&&a[d]!==b[d]||!c&&u(a[d])!==u(b[d]))&&g++;return g+f}function w(b){a.suppressDeprecationWarnings===!1&&\"undefined\"!=typeof console&&console.warn&&console.warn(\"Deprecation warning: \"+b)}function x(b,c){var d=!0;return j(function(){if(null!=a.deprecationHandler&&a.deprecationHandler(null,b),d){for(var e,f=[],g=0;g<arguments.length;g++){if(e=\"\",\"object\"==typeof arguments[g]){e+=\"\\n[\"+g+\"] \";for(var h in arguments[0])e+=h+\": \"+arguments[0][h]+\", \";e=e.slice(0,-2)}else e=arguments[g];f.push(e)}w(b+\"\\nArguments: \"+Array.prototype.slice.call(f).join(\"\")+\"\\n\"+(new Error).stack),d=!1}return c.apply(this,arguments)},c)}function y(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,c),td[b]||(w(c),td[b]=!0)}function z(a){return a instanceof Function||\"[object Function]\"===Object.prototype.toString.call(a)}function A(a){var b,c;for(c in a)b=a[c],z(b)?this[c]=b:this[\"_\"+c]=b;this._config=a,\r\n// Lenient ordinal parsing accepts just a number in addition to\r\n// number + (possibly) stuff coming from _ordinalParseLenient.\r\nthis._ordinalParseLenient=new RegExp(this._ordinalParse.source+\"|\"+/\\d{1,2}/.source)}function B(a,b){var c,e=j({},a);for(c in b)i(b,c)&&(d(a[c])&&d(b[c])?(e[c]={},j(e[c],a[c]),j(e[c],b[c])):null!=b[c]?e[c]=b[c]:delete e[c]);for(c in a)i(a,c)&&!i(b,c)&&d(a[c])&&(\r\n// make sure changes to properties don't modify parent config\r\ne[c]=j({},e[c]));return e}function C(a){null!=a&&this.set(a)}function D(a,b,c){var d=this._calendar[a]||this._calendar.sameElse;return z(d)?d.call(b,c):d}function E(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function F(){return this._invalidDate}function G(a){return this._ordinal.replace(\"%d\",a)}function H(a,b,c,d){var e=this._relativeTime[c];return z(e)?e(a,b,c,d):e.replace(/%d/i,a)}function I(a,b){var c=this._relativeTime[a>0?\"future\":\"past\"];return z(c)?c(b):c.replace(/%s/i,b)}function J(a,b){var c=a.toLowerCase();Dd[c]=Dd[c+\"s\"]=Dd[b]=a}function K(a){return\"string\"==typeof a?Dd[a]||Dd[a.toLowerCase()]:void 0}function L(a){var b,c,d={};for(c in a)i(a,c)&&(b=K(c),b&&(d[b]=a[c]));return d}function M(a,b){Ed[a]=b}function N(a){var b=[];for(var c in a)b.push({unit:c,priority:Ed[c]});return b.sort(function(a,b){return a.priority-b.priority}),b}function O(b,c){return function(d){return null!=d?(Q(this,b,d),a.updateOffset(this,c),this):P(this,b)}}function P(a,b){return a.isValid()?a._d[\"get\"+(a._isUTC?\"UTC\":\"\")+b]():NaN}function Q(a,b,c){a.isValid()&&a._d[\"set\"+(a._isUTC?\"UTC\":\"\")+b](c)}\r\n// MOMENTS\r\nfunction R(a){return a=K(a),z(this[a])?this[a]():this}function S(a,b){if(\"object\"==typeof a){a=L(a);for(var c=N(a),d=0;d<c.length;d++)this[c[d].unit](a[c[d].unit])}else if(a=K(a),z(this[a]))return this[a](b);return this}function T(a,b,c){var d=\"\"+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?\"+\":\"\":\"-\")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}\r\n// token:    'M'\r\n// padded:   ['MM', 2]\r\n// ordinal:  'Mo'\r\n// callback: function () { this.month() + 1 }\r\nfunction U(a,b,c,d){var e=d;\"string\"==typeof d&&(e=function(){return this[d]()}),a&&(Id[a]=e),b&&(Id[b[0]]=function(){return T(e.apply(this,arguments),b[1],b[2])}),c&&(Id[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function V(a){return a.match(/\\[[\\s\\S]/)?a.replace(/^\\[|\\]$/g,\"\"):a.replace(/\\\\/g,\"\")}function W(a){var b,c,d=a.match(Fd);for(b=0,c=d.length;b<c;b++)Id[d[b]]?d[b]=Id[d[b]]:d[b]=V(d[b]);return function(b){var e,f=\"\";for(e=0;e<c;e++)f+=d[e]instanceof Function?d[e].call(b,a):d[e];return f}}\r\n// format date using native date object\r\nfunction X(a,b){return a.isValid()?(b=Y(b,a.localeData()),Hd[b]=Hd[b]||W(b),Hd[b](a)):a.localeData().invalidDate()}function Y(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Gd.lastIndex=0;d>=0&&Gd.test(a);)a=a.replace(Gd,c),Gd.lastIndex=0,d-=1;return a}function Z(a,b,c){$d[a]=z(b)?b:function(a,d){return a&&c?c:b}}function $(a,b){return i($d,a)?$d[a](b._strict,b._locale):new RegExp(_(a))}\r\n// Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\r\nfunction _(a){return aa(a.replace(\"\\\\\",\"\").replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function aa(a){return a.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g,\"\\\\$&\")}function ba(a,b){var c,d=b;for(\"string\"==typeof a&&(a=[a]),f(b)&&(d=function(a,c){c[b]=u(a)}),c=0;c<a.length;c++)_d[a[c]]=d}function ca(a,b){ba(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function da(a,b,c){null!=b&&i(_d,a)&&_d[a](b,c._a,c,a)}function ea(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function fa(a,b){return a?c(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||ke).test(b)?\"format\":\"standalone\"][a.month()]:this._months}function ga(a,b){return a?c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[ke.test(b)?\"format\":\"standalone\"][a.month()]:this._monthsShort}function ha(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._monthsParse)for(\r\n// this is not used\r\nthis._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;d<12;++d)f=k([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(f,\"\").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,\"\").toLocaleLowerCase();return c?\"MMM\"===b?(e=je.call(this._shortMonthsParse,g),e!==-1?e:null):(e=je.call(this._longMonthsParse,g),e!==-1?e:null):\"MMM\"===b?(e=je.call(this._shortMonthsParse,g),e!==-1?e:(e=je.call(this._longMonthsParse,g),e!==-1?e:null)):(e=je.call(this._longMonthsParse,g),e!==-1?e:(e=je.call(this._shortMonthsParse,g),e!==-1?e:null))}function ia(a,b,c){var d,e,f;if(this._monthsParseExact)return ha.call(this,a,b,c);\r\n// TODO: add sorting\r\n// Sorting makes sure if one month (or abbr) is a prefix of another\r\n// see sorting in computeMonthsParse\r\nfor(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;d<12;d++){\r\n// test the regex\r\nif(\r\n// make the regex if we don't have it already\r\ne=k([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp(\"^\"+this.months(e,\"\").replace(\".\",\"\")+\"$\",\"i\"),this._shortMonthsParse[d]=new RegExp(\"^\"+this.monthsShort(e,\"\").replace(\".\",\"\")+\"$\",\"i\")),c||this._monthsParse[d]||(f=\"^\"+this.months(e,\"\")+\"|^\"+this.monthsShort(e,\"\"),this._monthsParse[d]=new RegExp(f.replace(\".\",\"\"),\"i\")),c&&\"MMMM\"===b&&this._longMonthsParse[d].test(a))return d;if(c&&\"MMM\"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}\r\n// MOMENTS\r\nfunction ja(a,b){var c;if(!a.isValid())\r\n// No op\r\nreturn a;if(\"string\"==typeof b)if(/^\\d+$/.test(b))b=u(b);else\r\n// TODO: Another silent failure?\r\nif(b=a.localeData().monthsParse(b),!f(b))return a;return c=Math.min(a.date(),ea(a.year(),b)),a._d[\"set\"+(a._isUTC?\"UTC\":\"\")+\"Month\"](b,c),a}function ka(b){return null!=b?(ja(this,b),a.updateOffset(this,!0),this):P(this,\"Month\")}function la(){return ea(this.year(),this.month())}function ma(a){return this._monthsParseExact?(i(this,\"_monthsRegex\")||oa.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):(i(this,\"_monthsShortRegex\")||(this._monthsShortRegex=ne),this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex)}function na(a){return this._monthsParseExact?(i(this,\"_monthsRegex\")||oa.call(this),a?this._monthsStrictRegex:this._monthsRegex):(i(this,\"_monthsRegex\")||(this._monthsRegex=oe),this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex)}function oa(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;b<12;b++)\r\n// make the regex if we don't have it already\r\nc=k([2e3,b]),d.push(this.monthsShort(c,\"\")),e.push(this.months(c,\"\")),f.push(this.months(c,\"\")),f.push(this.monthsShort(c,\"\"));for(\r\n// Sorting makes sure if one month (or abbr) is a prefix of another it\r\n// will match the longer piece.\r\nd.sort(a),e.sort(a),f.sort(a),b=0;b<12;b++)d[b]=aa(d[b]),e[b]=aa(e[b]);for(b=0;b<24;b++)f[b]=aa(f[b]);this._monthsRegex=new RegExp(\"^(\"+f.join(\"|\")+\")\",\"i\"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp(\"^(\"+e.join(\"|\")+\")\",\"i\"),this._monthsShortStrictRegex=new RegExp(\"^(\"+d.join(\"|\")+\")\",\"i\")}\r\n// HELPERS\r\nfunction pa(a){return qa(a)?366:365}function qa(a){return a%4===0&&a%100!==0||a%400===0}function ra(){return qa(this.year())}function sa(a,b,c,d,e,f,g){\r\n//can't just apply() to create a date:\r\n//http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply\r\nvar h=new Date(a,b,c,d,e,f,g);\r\n//the date constructor remaps years 0-99 to 1900-1999\r\nreturn a<100&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function ta(a){var b=new Date(Date.UTC.apply(null,arguments));\r\n//the Date.UTC function remaps years 0-99 to 1900-1999\r\nreturn a<100&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}\r\n// start-of-first-week - start-of-year\r\nfunction ua(a,b,c){var// first-week day -- which january is always in the first week (4 for iso, 1 for other)\r\nd=7+b-c,\r\n// first-week day local weekday -- which local weekday is fwd\r\ne=(7+ta(a,0,d).getUTCDay()-b)%7;return-e+d-1}\r\n//http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\r\nfunction va(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=ua(a,d,e),j=1+7*(b-1)+h+i;return j<=0?(f=a-1,g=pa(f)+j):j>pa(a)?(f=a+1,g=j-pa(a)):(f=a,g=j),{year:f,dayOfYear:g}}function wa(a,b,c){var d,e,f=ua(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return g<1?(e=a.year()-1,d=g+xa(e,b,c)):g>xa(a.year(),b,c)?(d=g-xa(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function xa(a,b,c){var d=ua(a,b,c),e=ua(a+1,b,c);return(pa(a)-d+e)/7}\r\n// HELPERS\r\n// LOCALES\r\nfunction ya(a){return wa(a,this._week.dow,this._week.doy).week}function za(){return this._week.dow}function Aa(){return this._week.doy}\r\n// MOMENTS\r\nfunction Ba(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),\"d\")}function Ca(a){var b=wa(this,1,4).week;return null==a?b:this.add(7*(a-b),\"d\")}\r\n// HELPERS\r\nfunction Da(a,b){return\"string\"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),\"number\"==typeof a?a:null):parseInt(a,10)}function Ea(a,b){return\"string\"==typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a}function Fa(a,b){return a?c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?\"format\":\"standalone\"][a.day()]:this._weekdays}function Ga(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort}function Ha(a){return a?this._weekdaysMin[a.day()]:this._weekdaysMin}function Ia(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;d<7;++d)f=k([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,\"\").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(f,\"\").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,\"\").toLocaleLowerCase();return c?\"dddd\"===b?(e=je.call(this._weekdaysParse,g),e!==-1?e:null):\"ddd\"===b?(e=je.call(this._shortWeekdaysParse,g),e!==-1?e:null):(e=je.call(this._minWeekdaysParse,g),e!==-1?e:null):\"dddd\"===b?(e=je.call(this._weekdaysParse,g),e!==-1?e:(e=je.call(this._shortWeekdaysParse,g),e!==-1?e:(e=je.call(this._minWeekdaysParse,g),e!==-1?e:null))):\"ddd\"===b?(e=je.call(this._shortWeekdaysParse,g),e!==-1?e:(e=je.call(this._weekdaysParse,g),e!==-1?e:(e=je.call(this._minWeekdaysParse,g),e!==-1?e:null))):(e=je.call(this._minWeekdaysParse,g),e!==-1?e:(e=je.call(this._weekdaysParse,g),e!==-1?e:(e=je.call(this._shortWeekdaysParse,g),e!==-1?e:null)))}function Ja(a,b,c){var d,e,f;if(this._weekdaysParseExact)return Ia.call(this,a,b,c);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;d<7;d++){\r\n// test the regex\r\nif(\r\n// make the regex if we don't have it already\r\ne=k([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp(\"^\"+this.weekdays(e,\"\").replace(\".\",\".?\")+\"$\",\"i\"),this._shortWeekdaysParse[d]=new RegExp(\"^\"+this.weekdaysShort(e,\"\").replace(\".\",\".?\")+\"$\",\"i\"),this._minWeekdaysParse[d]=new RegExp(\"^\"+this.weekdaysMin(e,\"\").replace(\".\",\".?\")+\"$\",\"i\")),this._weekdaysParse[d]||(f=\"^\"+this.weekdays(e,\"\")+\"|^\"+this.weekdaysShort(e,\"\")+\"|^\"+this.weekdaysMin(e,\"\"),this._weekdaysParse[d]=new RegExp(f.replace(\".\",\"\"),\"i\")),c&&\"dddd\"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&\"ddd\"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&\"dd\"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}\r\n// MOMENTS\r\nfunction Ka(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Da(a,this.localeData()),this.add(a-b,\"d\")):b}function La(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,\"d\")}function Ma(a){if(!this.isValid())return null!=a?this:NaN;\r\n// behaves the same as moment#day except\r\n// as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\r\n// as a setter, sunday should belong to the previous week.\r\nif(null!=a){var b=Ea(a,this.localeData());return this.day(this.day()%7?b:b-7)}return this.day()||7}function Na(a){return this._weekdaysParseExact?(i(this,\"_weekdaysRegex\")||Qa.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):(i(this,\"_weekdaysRegex\")||(this._weekdaysRegex=ue),this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex)}function Oa(a){return this._weekdaysParseExact?(i(this,\"_weekdaysRegex\")||Qa.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(i(this,\"_weekdaysShortRegex\")||(this._weekdaysShortRegex=ve),this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Pa(a){return this._weekdaysParseExact?(i(this,\"_weekdaysRegex\")||Qa.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(i(this,\"_weekdaysMinRegex\")||(this._weekdaysMinRegex=we),this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Qa(){function a(a,b){return b.length-a.length}var b,c,d,e,f,g=[],h=[],i=[],j=[];for(b=0;b<7;b++)\r\n// make the regex if we don't have it already\r\nc=k([2e3,1]).day(b),d=this.weekdaysMin(c,\"\"),e=this.weekdaysShort(c,\"\"),f=this.weekdays(c,\"\"),g.push(d),h.push(e),i.push(f),j.push(d),j.push(e),j.push(f);for(\r\n// Sorting makes sure if one weekday (or abbr) is a prefix of another it\r\n// will match the longer piece.\r\ng.sort(a),h.sort(a),i.sort(a),j.sort(a),b=0;b<7;b++)h[b]=aa(h[b]),i[b]=aa(i[b]),j[b]=aa(j[b]);this._weekdaysRegex=new RegExp(\"^(\"+j.join(\"|\")+\")\",\"i\"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp(\"^(\"+i.join(\"|\")+\")\",\"i\"),this._weekdaysShortStrictRegex=new RegExp(\"^(\"+h.join(\"|\")+\")\",\"i\"),this._weekdaysMinStrictRegex=new RegExp(\"^(\"+g.join(\"|\")+\")\",\"i\")}\r\n// FORMATTING\r\nfunction Ra(){return this.hours()%12||12}function Sa(){return this.hours()||24}function Ta(a,b){U(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}\r\n// PARSING\r\nfunction Ua(a,b){return b._meridiemParse}\r\n// LOCALES\r\nfunction Va(a){\r\n// IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\r\n// Using charAt should be more compatible.\r\nreturn\"p\"===(a+\"\").toLowerCase().charAt(0)}function Wa(a,b,c){return a>11?c?\"pm\":\"PM\":c?\"am\":\"AM\"}function Xa(a){return a?a.toLowerCase().replace(\"_\",\"-\"):a}\r\n// pick the locale from the array\r\n// try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\r\n// substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\r\nfunction Ya(a){for(var b,c,d,e,f=0;f<a.length;){for(e=Xa(a[f]).split(\"-\"),b=e.length,c=Xa(a[f+1]),c=c?c.split(\"-\"):null;b>0;){if(d=Za(e.slice(0,b).join(\"-\")))return d;if(c&&c.length>=b&&v(e,c,!0)>=b-1)\r\n//the next array item is better than a shallower substring of this one\r\nbreak;b--}f++}return null}function Za(a){var b=null;\r\n// TODO: Find a better way to register and load all the locales in Node\r\nif(!Be[a]&&\"undefined\"!=typeof module&&module&&module.exports)try{b=xe._abbr,require(\"./locale/\"+a),\r\n// because defineLocale currently also sets the global locale, we\r\n// want to undo that for lazy loaded locales\r\n$a(b)}catch(a){}return Be[a]}\r\n// This function will load locale and then set the global locale.  If\r\n// no arguments are passed in, it will simply return the current global\r\n// locale key.\r\nfunction $a(a,b){var c;\r\n// moment.duration._locale = moment._locale = data;\r\nreturn a&&(c=p(b)?bb(a):_a(a,b),c&&(xe=c)),xe._abbr}function _a(a,b){if(null!==b){var c=Ae;if(b.abbr=a,null!=Be[a])y(\"defineLocaleOverride\",\"use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info.\"),c=Be[a]._config;else if(null!=b.parentLocale){if(null==Be[b.parentLocale])return Ce[b.parentLocale]||(Ce[b.parentLocale]=[]),Ce[b.parentLocale].push({name:a,config:b}),null;c=Be[b.parentLocale]._config}\r\n// backwards compat for now: also set the locale\r\n// make sure we set the locale AFTER all child locales have been\r\n// created, so we won't end up with the child locale set.\r\nreturn Be[a]=new C(B(c,b)),Ce[a]&&Ce[a].forEach(function(a){_a(a.name,a.config)}),$a(a),Be[a]}\r\n// useful for testing\r\nreturn delete Be[a],null}function ab(a,b){if(null!=b){var c,d=Ae;\r\n// MERGE\r\nnull!=Be[a]&&(d=Be[a]._config),b=B(d,b),c=new C(b),c.parentLocale=Be[a],Be[a]=c,\r\n// backwards compat for now: also set the locale\r\n$a(a)}else\r\n// pass null for config to unupdate, useful for tests\r\nnull!=Be[a]&&(null!=Be[a].parentLocale?Be[a]=Be[a].parentLocale:null!=Be[a]&&delete Be[a]);return Be[a]}\r\n// returns locale data\r\nfunction bb(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return xe;if(!c(a)){if(\r\n//short-circuit everything else\r\nb=Za(a))return b;a=[a]}return Ya(a)}function cb(){return wd(Be)}function db(a){var b,c=a._a;return c&&m(a).overflow===-2&&(b=c[be]<0||c[be]>11?be:c[ce]<1||c[ce]>ea(c[ae],c[be])?ce:c[de]<0||c[de]>24||24===c[de]&&(0!==c[ee]||0!==c[fe]||0!==c[ge])?de:c[ee]<0||c[ee]>59?ee:c[fe]<0||c[fe]>59?fe:c[ge]<0||c[ge]>999?ge:-1,m(a)._overflowDayOfYear&&(b<ae||b>ce)&&(b=ce),m(a)._overflowWeeks&&b===-1&&(b=he),m(a)._overflowWeekday&&b===-1&&(b=ie),m(a).overflow=b),a}\r\n// date from iso format\r\nfunction eb(a){var b,c,d,e,f,g,h=a._i,i=De.exec(h)||Ee.exec(h);if(i){for(m(a).iso=!0,b=0,c=Ge.length;b<c;b++)if(Ge[b][1].exec(i[1])){e=Ge[b][0],d=Ge[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=He.length;b<c;b++)if(He[b][1].exec(i[3])){\r\n// match[2] should be 'T' or space\r\nf=(i[2]||\" \")+He[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!Fe.exec(i[4]))return void(a._isValid=!1);g=\"Z\"}a._f=e+(f||\"\")+(g||\"\"),kb(a)}else a._isValid=!1}\r\n// date from iso format or fallback\r\nfunction fb(b){var c=Ie.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(eb(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}\r\n// Pick the first defined of two or three arguments.\r\nfunction gb(a,b,c){return null!=a?a:null!=b?b:c}function hb(b){\r\n// hooks is actually the exported moment object\r\nvar c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}\r\n// convert an array to a date.\r\n// the array should mirror the parameters below\r\n// note: all values past the year are optional and will default to the lowest possible value.\r\n// [year, month, day , hour, minute, second, millisecond]\r\nfunction ib(a){var b,c,d,e,f=[];if(!a._d){\r\n// Default to current date.\r\n// * if no year, month, day of month are given, default to today\r\n// * if day of month is given, default month and year\r\n// * if month is given, default only year\r\n// * if year is given, don't default anything\r\nfor(d=hb(a),\r\n//compute day of the year from weeks and weekdays\r\na._w&&null==a._a[ce]&&null==a._a[be]&&jb(a),\r\n//if the day of the year is set, figure out what it is\r\na._dayOfYear&&(e=gb(a._a[ae],d[ae]),a._dayOfYear>pa(e)&&(m(a)._overflowDayOfYear=!0),c=ta(e,0,a._dayOfYear),a._a[be]=c.getUTCMonth(),a._a[ce]=c.getUTCDate()),b=0;b<3&&null==a._a[b];++b)a._a[b]=f[b]=d[b];\r\n// Zero out whatever was not defaulted, including time\r\nfor(;b<7;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];\r\n// Check for 24:00:00.000\r\n24===a._a[de]&&0===a._a[ee]&&0===a._a[fe]&&0===a._a[ge]&&(a._nextDay=!0,a._a[de]=0),a._d=(a._useUTC?ta:sa).apply(null,f),\r\n// Apply timezone offset from input. The actual utcOffset can be changed\r\n// with parseZone.\r\nnull!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[de]=24)}}function jb(a){var b,c,d,e,f,g,h,i;if(b=a._w,null!=b.GG||null!=b.W||null!=b.E)f=1,g=4,\r\n// TODO: We need to take the current isoWeekYear, but that depends on\r\n// how we interpret now (local, utc, fixed offset). So create\r\n// a now version of current config (take local/utc/offset flags, and\r\n// create now).\r\nc=gb(b.GG,a._a[ae],wa(sb(),1,4).year),d=gb(b.W,1),e=gb(b.E,1),(e<1||e>7)&&(i=!0);else{f=a._locale._week.dow,g=a._locale._week.doy;var j=wa(sb(),f,g);c=gb(b.gg,a._a[ae],j.year),\r\n// Default to current week.\r\nd=gb(b.w,j.week),null!=b.d?(\r\n// weekday -- low day numbers are considered next week\r\ne=b.d,(e<0||e>6)&&(i=!0)):null!=b.e?(\r\n// local weekday -- counting starts from begining of week\r\ne=b.e+f,(b.e<0||b.e>6)&&(i=!0)):\r\n// default to begining of week\r\ne=f}d<1||d>xa(c,f,g)?m(a)._overflowWeeks=!0:null!=i?m(a)._overflowWeekday=!0:(h=va(c,d,e,f,g),a._a[ae]=h.year,a._dayOfYear=h.dayOfYear)}\r\n// date from string and format string\r\nfunction kb(b){\r\n// TODO: Move this to another part of the creation flow to prevent circular deps\r\nif(b._f===a.ISO_8601)return void eb(b);b._a=[],m(b).empty=!0;\r\n// This array is used to make a Date, either with `new Date` or `Date.UTC`\r\nvar c,d,e,f,g,h=\"\"+b._i,i=h.length,j=0;for(e=Y(b._f,b._locale).match(Fd)||[],c=0;c<e.length;c++)f=e[c],d=(h.match($(f,b))||[])[0],\r\n// console.log('token', token, 'parsedInput', parsedInput,\r\n//         'regex', getParseRegexForToken(token, config));\r\nd&&(g=h.substr(0,h.indexOf(d)),g.length>0&&m(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),\r\n// don't parse if it's not a known token\r\nId[f]?(d?m(b).empty=!1:m(b).unusedTokens.push(f),da(f,d,b)):b._strict&&!d&&m(b).unusedTokens.push(f);\r\n// add remaining unparsed input length to the string\r\nm(b).charsLeftOver=i-j,h.length>0&&m(b).unusedInput.push(h),\r\n// clear _12h flag if hour is <= 12\r\nb._a[de]<=12&&m(b).bigHour===!0&&b._a[de]>0&&(m(b).bigHour=void 0),m(b).parsedDateParts=b._a.slice(0),m(b).meridiem=b._meridiem,\r\n// handle meridiem\r\nb._a[de]=lb(b._locale,b._a[de],b._meridiem),ib(b),db(b)}function lb(a,b,c){var d;\r\n// Fallback\r\nreturn null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&b<12&&(b+=12),d||12!==b||(b=0),b):b}\r\n// date from string and array of format strings\r\nfunction mb(a){var b,c,d,e,f;if(0===a._f.length)return m(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=q({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],kb(b),n(b)&&(\r\n// if there is any input that was not parsed add a penalty for that format\r\nf+=m(b).charsLeftOver,\r\n//or tokens\r\nf+=10*m(b).unusedTokens.length,m(b).score=f,(null==d||f<d)&&(d=f,c=b));j(a,c||b)}function nb(a){if(!a._d){var b=L(a._i);a._a=h([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),ib(a)}}function ob(a){var b=new r(db(pb(a)));\r\n// Adding is smart enough around DST\r\nreturn b._nextDay&&(b.add(1,\"d\"),b._nextDay=void 0),b}function pb(a){var b=a._i,d=a._f;return a._locale=a._locale||bb(a._l),null===b||void 0===d&&\"\"===b?o({nullInput:!0}):(\"string\"==typeof b&&(a._i=b=a._locale.preparse(b)),s(b)?new r(db(b)):(g(b)?a._d=b:c(d)?mb(a):d?kb(a):qb(a),n(a)||(a._d=null),a))}function qb(b){var d=b._i;void 0===d?b._d=new Date(a.now()):g(d)?b._d=new Date(d.valueOf()):\"string\"==typeof d?fb(b):c(d)?(b._a=h(d.slice(0),function(a){return parseInt(a,10)}),ib(b)):\"object\"==typeof d?nb(b):f(d)?\r\n// from milliseconds\r\nb._d=new Date(d):a.createFromInputFallback(b)}function rb(a,b,f,g,h){var i={};\r\n// object construction must be done this way.\r\n// https://github.com/moment/moment/issues/1423\r\nreturn f!==!0&&f!==!1||(g=f,f=void 0),(d(a)&&e(a)||c(a)&&0===a.length)&&(a=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=h,i._l=f,i._i=a,i._f=b,i._strict=g,ob(i)}function sb(a,b,c,d){return rb(a,b,c,d,!1)}\r\n// Pick a moment m from moments so that m[fn](other) is true for all\r\n// other. This relies on the function fn to be transitive.\r\n//\r\n// moments should either be an array of moment objects or an array, whose\r\n// first element is an array of moment objects.\r\nfunction tb(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return sb();for(d=b[0],e=1;e<b.length;++e)b[e].isValid()&&!b[e][a](d)||(d=b[e]);return d}\r\n// TODO: Use [].sort instead?\r\nfunction ub(){var a=[].slice.call(arguments,0);return tb(\"isBefore\",a)}function vb(){var a=[].slice.call(arguments,0);return tb(\"isAfter\",a)}function wb(a){var b=L(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;\r\n// representation for dateAddRemove\r\nthis._milliseconds=+k+1e3*j+// 1000\r\n6e4*i+// 1000 * 60\r\n1e3*h*60*60,//using 1000 * 60 * 60 instead of 36e5 to avoid floating point rounding errors https://github.com/moment/moment/issues/2978\r\n// Because of dateAddRemove treats 24 hours as different from a\r\n// day when working around DST, we need to store them separately\r\nthis._days=+g+7*f,\r\n// It is impossible translate months into days without knowing\r\n// which months you are are talking about, so we have to store\r\n// it separately.\r\nthis._months=+e+3*d+12*c,this._data={},this._locale=bb(),this._bubble()}function xb(a){return a instanceof wb}function yb(a){return a<0?Math.round(-1*a)*-1:Math.round(a)}\r\n// FORMATTING\r\nfunction zb(a,b){U(a,0,0,function(){var a=this.utcOffset(),c=\"+\";return a<0&&(a=-a,c=\"-\"),c+T(~~(a/60),2)+b+T(~~a%60,2)})}function Ab(a,b){var c=(b||\"\").match(a);if(null===c)return null;var d=c[c.length-1]||[],e=(d+\"\").match(Me)||[\"-\",0,0],f=+(60*e[1])+u(e[2]);return 0===f?0:\"+\"===e[0]?f:-f}\r\n// Return a moment from input, that is local/utc/zone equivalent to model.\r\nfunction Bb(b,c){var d,e;\r\n// Use low-level api, because this fn is low-level api.\r\nreturn c._isUTC?(d=c.clone(),e=(s(b)||g(b)?b.valueOf():sb(b).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+e),a.updateOffset(d,!1),d):sb(b).local()}function Cb(a){\r\n// On Firefox.24 Date#getTimezoneOffset returns a floating point.\r\n// https://github.com/moment/moment/pull/1871\r\nreturn 15*-Math.round(a._d.getTimezoneOffset()/15)}\r\n// MOMENTS\r\n// keepLocalTime = true means only change the timezone, without\r\n// affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->\r\n// 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset\r\n// +0200, so we adjust the time as needed, to be valid.\r\n//\r\n// Keeping the time actually adds/subtracts (one hour)\r\n// from the actual represented time. That is why we call updateOffset\r\n// a second time. In case it wants us to change the offset again\r\n// _changeInProgress == true case, then we have to adjust, because\r\n// there is no such time in the given timezone.\r\nfunction Db(b,c){var d,e=this._offset||0;if(!this.isValid())return null!=b?this:NaN;if(null!=b){if(\"string\"==typeof b){if(b=Ab(Xd,b),null===b)return this}else Math.abs(b)<16&&(b=60*b);return!this._isUTC&&c&&(d=Cb(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,\"m\"),e!==b&&(!c||this._changeInProgress?Tb(this,Ob(b-e,\"m\"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?e:Cb(this)}function Eb(a,b){return null!=a?(\"string\"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Fb(a){return this.utcOffset(0,a)}function Gb(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Cb(this),\"m\")),this}function Hb(){if(null!=this._tzm)this.utcOffset(this._tzm);else if(\"string\"==typeof this._i){var a=Ab(Wd,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this}function Ib(a){return!!this.isValid()&&(a=a?sb(a).utcOffset():0,(this.utcOffset()-a)%60===0)}function Jb(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Kb(){if(!p(this._isDSTShifted))return this._isDSTShifted;var a={};if(q(a,this),a=pb(a),a._a){var b=a._isUTC?k(a._a):sb(a._a);this._isDSTShifted=this.isValid()&&v(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Lb(){return!!this.isValid()&&!this._isUTC}function Mb(){return!!this.isValid()&&this._isUTC}function Nb(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Ob(a,b){var c,d,e,g=a,\r\n// matching against regexp is expensive, do it on demand\r\nh=null;// checks for null or undefined\r\nreturn xb(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:f(a)?(g={},b?g[b]=a:g.milliseconds=a):(h=Ne.exec(a))?(c=\"-\"===h[1]?-1:1,g={y:0,d:u(h[ce])*c,h:u(h[de])*c,m:u(h[ee])*c,s:u(h[fe])*c,ms:u(yb(1e3*h[ge]))*c}):(h=Oe.exec(a))?(c=\"-\"===h[1]?-1:1,g={y:Pb(h[2],c),M:Pb(h[3],c),w:Pb(h[4],c),d:Pb(h[5],c),h:Pb(h[6],c),m:Pb(h[7],c),s:Pb(h[8],c)}):null==g?g={}:\"object\"==typeof g&&(\"from\"in g||\"to\"in g)&&(e=Rb(sb(g.from),sb(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new wb(g),xb(a)&&i(a,\"_locale\")&&(d._locale=a._locale),d}function Pb(a,b){\r\n// We'd normally use ~~inp for this, but unfortunately it also\r\n// converts floats to ints.\r\n// inp may be undefined, so careful calling replace on it.\r\nvar c=a&&parseFloat(a.replace(\",\",\".\"));\r\n// apply sign while we're at it\r\nreturn(isNaN(c)?0:c)*b}function Qb(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,\"M\").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,\"M\"),c}function Rb(a,b){var c;return a.isValid()&&b.isValid()?(b=Bb(b,a),a.isBefore(b)?c=Qb(a,b):(c=Qb(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}\r\n// TODO: remove 'name' arg after deprecation is removed\r\nfunction Sb(a,b){return function(c,d){var e,f;\r\n//invert the arguments, but complain about it\r\nreturn null===d||isNaN(+d)||(y(b,\"moment().\"+b+\"(period, number) is deprecated. Please use moment().\"+b+\"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.\"),f=c,c=d,d=f),c=\"string\"==typeof c?+c:c,e=Ob(c,d),Tb(this,e,a),this}}function Tb(b,c,d,e){var f=c._milliseconds,g=yb(c._days),h=yb(c._months);b.isValid()&&(e=null==e||e,f&&b._d.setTime(b._d.valueOf()+f*d),g&&Q(b,\"Date\",P(b,\"Date\")+g*d),h&&ja(b,P(b,\"Month\")+h*d),e&&a.updateOffset(b,g||h))}function Ub(a,b){var c=a.diff(b,\"days\",!0);return c<-6?\"sameElse\":c<-1?\"lastWeek\":c<0?\"lastDay\":c<1?\"sameDay\":c<2?\"nextDay\":c<7?\"nextWeek\":\"sameElse\"}function Vb(b,c){\r\n// We want to compare the start of today, vs this.\r\n// Getting start-of-today depends on whether we're local/utc/offset or not.\r\nvar d=b||sb(),e=Bb(d,this).startOf(\"day\"),f=a.calendarFormat(this,e)||\"sameElse\",g=c&&(z(c[f])?c[f].call(this,d):c[f]);return this.format(g||this.localeData().calendar(f,this,sb(d)))}function Wb(){return new r(this)}function Xb(a,b){var c=s(a)?a:sb(a);return!(!this.isValid()||!c.isValid())&&(b=K(p(b)?\"millisecond\":b),\"millisecond\"===b?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf())}function Yb(a,b){var c=s(a)?a:sb(a);return!(!this.isValid()||!c.isValid())&&(b=K(p(b)?\"millisecond\":b),\"millisecond\"===b?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf())}function Zb(a,b,c,d){return d=d||\"()\",(\"(\"===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(\")\"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))}function $b(a,b){var c,d=s(a)?a:sb(a);return!(!this.isValid()||!d.isValid())&&(b=K(b||\"millisecond\"),\"millisecond\"===b?this.valueOf()===d.valueOf():(c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf()))}function _b(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function ac(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function bc(a,b,c){var d,e,f,g;// 1000\r\n// 1000 * 60\r\n// 1000 * 60 * 60\r\n// 1000 * 60 * 60 * 24, negate dst\r\n// 1000 * 60 * 60 * 24 * 7, negate dst\r\nreturn this.isValid()?(d=Bb(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=K(b),\"year\"===b||\"month\"===b||\"quarter\"===b?(g=cc(this,d),\"quarter\"===b?g/=3:\"year\"===b&&(g/=12)):(f=this-d,g=\"second\"===b?f/1e3:\"minute\"===b?f/6e4:\"hour\"===b?f/36e5:\"day\"===b?(f-e)/864e5:\"week\"===b?(f-e)/6048e5:f),c?g:t(g)):NaN):NaN}function cc(a,b){\r\n// difference in months\r\nvar c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),\r\n// b is in (anchor - 1 month, anchor + 1 month)\r\nf=a.clone().add(e,\"months\");\r\n//check for negative zero, return zero if negative zero\r\n// linear across the month\r\n// linear across the month\r\nreturn b-f<0?(c=a.clone().add(e-1,\"months\"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,\"months\"),d=(b-f)/(c-f)),-(e+d)||0}function dc(){return this.clone().locale(\"en\").format(\"ddd MMM DD YYYY HH:mm:ss [GMT]ZZ\")}function ec(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?z(Date.prototype.toISOString)?this.toDate().toISOString():X(a,\"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]\"):X(a,\"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]\")}/**\r\n * Return a human readable representation of a moment that can\r\n * also be evaluated to get a new moment which is the same\r\n *\r\n * @link https://nodejs.org/dist/latest/docs/api/util.html#util_custom_inspect_function_on_objects\r\n */\r\nfunction fc(){if(!this.isValid())return\"moment.invalid(/* \"+this._i+\" */)\";var a=\"moment\",b=\"\";this.isLocal()||(a=0===this.utcOffset()?\"moment.utc\":\"moment.parseZone\",b=\"Z\");var c=\"[\"+a+'(\"]',d=0<this.year()&&this.year()<=9999?\"YYYY\":\"YYYYYY\",e=\"-MM-DD[T]HH:mm:ss.SSS\",f=b+'[\")]';return this.format(c+d+e+f)}function gc(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var c=X(this,b);return this.localeData().postformat(c)}function hc(a,b){return this.isValid()&&(s(a)&&a.isValid()||sb(a).isValid())?Ob({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ic(a){return this.from(sb(),a)}function jc(a,b){return this.isValid()&&(s(a)&&a.isValid()||sb(a).isValid())?Ob({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function kc(a){return this.to(sb(),a)}\r\n// If passed a locale key, it will set the locale for this\r\n// instance.  Otherwise, it will return the locale configuration\r\n// variables for this instance.\r\nfunction lc(a){var b;return void 0===a?this._locale._abbr:(b=bb(a),null!=b&&(this._locale=b),this)}function mc(){return this._locale}function nc(a){\r\n// the following switch intentionally omits break keywords\r\n// to utilize falling through the cases.\r\nswitch(a=K(a)){case\"year\":this.month(0);/* falls through */\r\ncase\"quarter\":case\"month\":this.date(1);/* falls through */\r\ncase\"week\":case\"isoWeek\":case\"day\":case\"date\":this.hours(0);/* falls through */\r\ncase\"hour\":this.minutes(0);/* falls through */\r\ncase\"minute\":this.seconds(0);/* falls through */\r\ncase\"second\":this.milliseconds(0)}\r\n// weeks are a special case\r\n// quarters are also special\r\nreturn\"week\"===a&&this.weekday(0),\"isoWeek\"===a&&this.isoWeekday(1),\"quarter\"===a&&this.month(3*Math.floor(this.month()/3)),this}function oc(a){\r\n// 'date' is an alias for 'day', so it should be considered as such.\r\nreturn a=K(a),void 0===a||\"millisecond\"===a?this:(\"date\"===a&&(a=\"day\"),this.startOf(a).add(1,\"isoWeek\"===a?\"week\":a).subtract(1,\"ms\"))}function pc(){return this._d.valueOf()-6e4*(this._offset||0)}function qc(){return Math.floor(this.valueOf()/1e3)}function rc(){return new Date(this.valueOf())}function sc(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function tc(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function uc(){\r\n// new Date(NaN).toJSON() === null\r\nreturn this.isValid()?this.toISOString():null}function vc(){return n(this)}function wc(){return j({},m(this))}function xc(){return m(this).overflow}function yc(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function zc(a,b){U(0,[a,a.length],0,b)}\r\n// MOMENTS\r\nfunction Ac(a){return Ec.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Bc(a){return Ec.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Cc(){return xa(this.year(),1,4)}function Dc(){var a=this.localeData()._week;return xa(this.year(),a.dow,a.doy)}function Ec(a,b,c,d,e){var f;return null==a?wa(this,d,e).year:(f=xa(a,d,e),b>f&&(b=f),Fc.call(this,a,b,c,d,e))}function Fc(a,b,c,d,e){var f=va(a,b,c,d,e),g=ta(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}\r\n// MOMENTS\r\nfunction Gc(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}\r\n// HELPERS\r\n// MOMENTS\r\nfunction Hc(a){var b=Math.round((this.clone().startOf(\"day\")-this.clone().startOf(\"year\"))/864e5)+1;return null==a?b:this.add(a-b,\"d\")}function Ic(a,b){b[ge]=u(1e3*(\"0.\"+a))}\r\n// MOMENTS\r\nfunction Jc(){return this._isUTC?\"UTC\":\"\"}function Kc(){return this._isUTC?\"Coordinated Universal Time\":\"\"}function Lc(a){return sb(1e3*a)}function Mc(){return sb.apply(null,arguments).parseZone()}function Nc(a){return a}function Oc(a,b,c,d){var e=bb(),f=k().set(d,b);return e[c](f,a)}function Pc(a,b,c){if(f(a)&&(b=a,a=void 0),a=a||\"\",null!=b)return Oc(a,b,c,\"month\");var d,e=[];for(d=0;d<12;d++)e[d]=Oc(a,d,c,\"month\");return e}\r\n// ()\r\n// (5)\r\n// (fmt, 5)\r\n// (fmt)\r\n// (true)\r\n// (true, 5)\r\n// (true, fmt, 5)\r\n// (true, fmt)\r\nfunction Qc(a,b,c,d){\"boolean\"==typeof a?(f(b)&&(c=b,b=void 0),b=b||\"\"):(b=a,c=b,a=!1,f(b)&&(c=b,b=void 0),b=b||\"\");var e=bb(),g=a?e._week.dow:0;if(null!=c)return Oc(b,(c+g)%7,d,\"day\");var h,i=[];for(h=0;h<7;h++)i[h]=Oc(b,(h+g)%7,d,\"day\");return i}function Rc(a,b){return Pc(a,b,\"months\")}function Sc(a,b){return Pc(a,b,\"monthsShort\")}function Tc(a,b,c){return Qc(a,b,c,\"weekdays\")}function Uc(a,b,c){return Qc(a,b,c,\"weekdaysShort\")}function Vc(a,b,c){return Qc(a,b,c,\"weekdaysMin\")}function Wc(){var a=this._data;return this._milliseconds=Ze(this._milliseconds),this._days=Ze(this._days),this._months=Ze(this._months),a.milliseconds=Ze(a.milliseconds),a.seconds=Ze(a.seconds),a.minutes=Ze(a.minutes),a.hours=Ze(a.hours),a.months=Ze(a.months),a.years=Ze(a.years),this}function Xc(a,b,c,d){var e=Ob(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}\r\n// supports only 2.0-style add(1, 's') or add(duration)\r\nfunction Yc(a,b){return Xc(this,a,b,1)}\r\n// supports only 2.0-style subtract(1, 's') or subtract(duration)\r\nfunction Zc(a,b){return Xc(this,a,b,-1)}function $c(a){return a<0?Math.floor(a):Math.ceil(a)}function _c(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;\r\n// if we have a mix of positive and negative values, bubble down first\r\n// check: https://github.com/moment/moment/issues/2166\r\n// The following code bubbles up values, see the tests for\r\n// examples of what that means.\r\n// convert days to months\r\n// 12 months -> 1 year\r\nreturn f>=0&&g>=0&&h>=0||f<=0&&g<=0&&h<=0||(f+=864e5*$c(bd(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=t(f/1e3),i.seconds=a%60,b=t(a/60),i.minutes=b%60,c=t(b/60),i.hours=c%24,g+=t(c/24),e=t(ad(g)),h+=e,g-=$c(bd(e)),d=t(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function ad(a){\r\n// 400 years have 146097 days (taking into account leap year rules)\r\n// 400 years have 12 months === 4800\r\nreturn 4800*a/146097}function bd(a){\r\n// the reverse of daysToMonths\r\nreturn 146097*a/4800}function cd(a){var b,c,d=this._milliseconds;if(a=K(a),\"month\"===a||\"year\"===a)return b=this._days+d/864e5,c=this._months+ad(b),\"month\"===a?c:c/12;switch(\r\n// handle milliseconds separately because of floating point math errors (issue #1867)\r\nb=this._days+Math.round(bd(this._months)),a){case\"week\":return b/7+d/6048e5;case\"day\":return b+d/864e5;case\"hour\":return 24*b+d/36e5;case\"minute\":return 1440*b+d/6e4;case\"second\":return 86400*b+d/1e3;\r\n// Math.floor prevents floating point math errors here\r\ncase\"millisecond\":return Math.floor(864e5*b)+d;default:throw new Error(\"Unknown unit \"+a)}}\r\n// TODO: Use this.as('ms')?\r\nfunction dd(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*u(this._months/12)}function ed(a){return function(){return this.as(a)}}function fd(a){return a=K(a),this[a+\"s\"]()}function gd(a){return function(){return this._data[a]}}function hd(){return t(this.days()/7)}\r\n// helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\r\nfunction id(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function jd(a,b,c){var d=Ob(a).abs(),e=of(d.as(\"s\")),f=of(d.as(\"m\")),g=of(d.as(\"h\")),h=of(d.as(\"d\")),i=of(d.as(\"M\")),j=of(d.as(\"y\")),k=e<pf.s&&[\"s\",e]||f<=1&&[\"m\"]||f<pf.m&&[\"mm\",f]||g<=1&&[\"h\"]||g<pf.h&&[\"hh\",g]||h<=1&&[\"d\"]||h<pf.d&&[\"dd\",h]||i<=1&&[\"M\"]||i<pf.M&&[\"MM\",i]||j<=1&&[\"y\"]||[\"yy\",j];return k[2]=b,k[3]=+a>0,k[4]=c,id.apply(null,k)}\r\n// This function allows you to set the rounding function for relative time strings\r\nfunction kd(a){return void 0===a?of:\"function\"==typeof a&&(of=a,!0)}\r\n// This function allows you to set a threshold for relative time strings\r\nfunction ld(a,b){return void 0!==pf[a]&&(void 0===b?pf[a]:(pf[a]=b,!0))}function md(a){var b=this.localeData(),c=jd(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function nd(){\r\n// for ISO strings we do not use the normal bubbling rules:\r\n//  * milliseconds bubble up until they become hours\r\n//  * days do not bubble at all\r\n//  * months bubble up until they become years\r\n// This is because there is no context-free conversion between hours and days\r\n// (think of clock changes)\r\n// and also not between days and months (28-31 days per month)\r\nvar a,b,c,d=qf(this._milliseconds)/1e3,e=qf(this._days),f=qf(this._months);\r\n// 3600 seconds -> 60 minutes -> 1 hour\r\na=t(d/60),b=t(a/60),d%=60,a%=60,\r\n// 12 months -> 1 year\r\nc=t(f/12),f%=12;\r\n// inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\r\nvar g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(m<0?\"-\":\"\")+\"P\"+(g?g+\"Y\":\"\")+(h?h+\"M\":\"\")+(i?i+\"D\":\"\")+(j||k||l?\"T\":\"\")+(j?j+\"H\":\"\")+(k?k+\"M\":\"\")+(l?l+\"S\":\"\"):\"P0D\"}var od,pd;pd=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var qd=pd,rd=a.momentProperties=[],sd=!1,td={};a.suppressDeprecationWarnings=!1,a.deprecationHandler=null;var ud;ud=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)i(a,b)&&c.push(b);return c};var vd,wd=ud,xd={sameDay:\"[Today at] LT\",nextDay:\"[Tomorrow at] LT\",nextWeek:\"dddd [at] LT\",lastDay:\"[Yesterday at] LT\",lastWeek:\"[Last] dddd [at] LT\",sameElse:\"L\"},yd={LTS:\"h:mm:ss A\",LT:\"h:mm A\",L:\"MM/DD/YYYY\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY h:mm A\",LLLL:\"dddd, MMMM D, YYYY h:mm A\"},zd=\"Invalid date\",Ad=\"%d\",Bd=/\\d{1,2}/,Cd={future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"},Dd={},Ed={},Fd=/(\\[[^\\[]*\\])|(\\\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Gd=/(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Hd={},Id={},Jd=/\\d/,Kd=/\\d\\d/,Ld=/\\d{3}/,Md=/\\d{4}/,Nd=/[+-]?\\d{6}/,Od=/\\d\\d?/,Pd=/\\d\\d\\d\\d?/,Qd=/\\d\\d\\d\\d\\d\\d?/,Rd=/\\d{1,3}/,Sd=/\\d{1,4}/,Td=/[+-]?\\d{1,6}/,Ud=/\\d+/,Vd=/[+-]?\\d+/,Wd=/Z|[+-]\\d\\d:?\\d\\d/gi,Xd=/Z|[+-]\\d\\d(?::?\\d\\d)?/gi,Yd=/[+-]?\\d+(\\.\\d{1,3})?/,Zd=/[0-9]*['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+|[\\u0600-\\u06FF\\/]+(\\s*?[\\u0600-\\u06FF]+){1,2}/i,$d={},_d={},ae=0,be=1,ce=2,de=3,ee=4,fe=5,ge=6,he=7,ie=8;vd=Array.prototype.indexOf?Array.prototype.indexOf:function(a){\r\n// I know\r\nvar b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};var je=vd;\r\n// FORMATTING\r\nU(\"M\",[\"MM\",2],\"Mo\",function(){return this.month()+1}),U(\"MMM\",0,0,function(a){return this.localeData().monthsShort(this,a)}),U(\"MMMM\",0,0,function(a){return this.localeData().months(this,a)}),\r\n// ALIASES\r\nJ(\"month\",\"M\"),\r\n// PRIORITY\r\nM(\"month\",8),\r\n// PARSING\r\nZ(\"M\",Od),Z(\"MM\",Od,Kd),Z(\"MMM\",function(a,b){return b.monthsShortRegex(a)}),Z(\"MMMM\",function(a,b){return b.monthsRegex(a)}),ba([\"M\",\"MM\"],function(a,b){b[be]=u(a)-1}),ba([\"MMM\",\"MMMM\"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);\r\n// if we didn't find a month name, mark the date as invalid.\r\nnull!=e?b[be]=e:m(c).invalidMonth=a});\r\n// LOCALES\r\nvar ke=/D[oD]?(\\[[^\\[\\]]*\\]|\\s)+MMMM?/,le=\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),me=\"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec\".split(\"_\"),ne=Zd,oe=Zd;\r\n// FORMATTING\r\nU(\"Y\",0,0,function(){var a=this.year();return a<=9999?\"\"+a:\"+\"+a}),U(0,[\"YY\",2],0,function(){return this.year()%100}),U(0,[\"YYYY\",4],0,\"year\"),U(0,[\"YYYYY\",5],0,\"year\"),U(0,[\"YYYYYY\",6,!0],0,\"year\"),\r\n// ALIASES\r\nJ(\"year\",\"y\"),\r\n// PRIORITIES\r\nM(\"year\",1),\r\n// PARSING\r\nZ(\"Y\",Vd),Z(\"YY\",Od,Kd),Z(\"YYYY\",Sd,Md),Z(\"YYYYY\",Td,Nd),Z(\"YYYYYY\",Td,Nd),ba([\"YYYYY\",\"YYYYYY\"],ae),ba(\"YYYY\",function(b,c){c[ae]=2===b.length?a.parseTwoDigitYear(b):u(b)}),ba(\"YY\",function(b,c){c[ae]=a.parseTwoDigitYear(b)}),ba(\"Y\",function(a,b){b[ae]=parseInt(a,10)}),\r\n// HOOKS\r\na.parseTwoDigitYear=function(a){return u(a)+(u(a)>68?1900:2e3)};\r\n// MOMENTS\r\nvar pe=O(\"FullYear\",!0);\r\n// FORMATTING\r\nU(\"w\",[\"ww\",2],\"wo\",\"week\"),U(\"W\",[\"WW\",2],\"Wo\",\"isoWeek\"),\r\n// ALIASES\r\nJ(\"week\",\"w\"),J(\"isoWeek\",\"W\"),\r\n// PRIORITIES\r\nM(\"week\",5),M(\"isoWeek\",5),\r\n// PARSING\r\nZ(\"w\",Od),Z(\"ww\",Od,Kd),Z(\"W\",Od),Z(\"WW\",Od,Kd),ca([\"w\",\"ww\",\"W\",\"WW\"],function(a,b,c,d){b[d.substr(0,1)]=u(a)});var qe={dow:0,// Sunday is the first day of the week.\r\ndoy:6};\r\n// FORMATTING\r\nU(\"d\",0,\"do\",\"day\"),U(\"dd\",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),U(\"ddd\",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),U(\"dddd\",0,0,function(a){return this.localeData().weekdays(this,a)}),U(\"e\",0,0,\"weekday\"),U(\"E\",0,0,\"isoWeekday\"),\r\n// ALIASES\r\nJ(\"day\",\"d\"),J(\"weekday\",\"e\"),J(\"isoWeekday\",\"E\"),\r\n// PRIORITY\r\nM(\"day\",11),M(\"weekday\",11),M(\"isoWeekday\",11),\r\n// PARSING\r\nZ(\"d\",Od),Z(\"e\",Od),Z(\"E\",Od),Z(\"dd\",function(a,b){return b.weekdaysMinRegex(a)}),Z(\"ddd\",function(a,b){return b.weekdaysShortRegex(a)}),Z(\"dddd\",function(a,b){return b.weekdaysRegex(a)}),ca([\"dd\",\"ddd\",\"dddd\"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);\r\n// if we didn't get a weekday name, mark the date as invalid\r\nnull!=e?b.d=e:m(c).invalidWeekday=a}),ca([\"d\",\"e\",\"E\"],function(a,b,c,d){b[d]=u(a)});\r\n// LOCALES\r\nvar re=\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),se=\"Sun_Mon_Tue_Wed_Thu_Fri_Sat\".split(\"_\"),te=\"Su_Mo_Tu_We_Th_Fr_Sa\".split(\"_\"),ue=Zd,ve=Zd,we=Zd;U(\"H\",[\"HH\",2],0,\"hour\"),U(\"h\",[\"hh\",2],0,Ra),U(\"k\",[\"kk\",2],0,Sa),U(\"hmm\",0,0,function(){return\"\"+Ra.apply(this)+T(this.minutes(),2)}),U(\"hmmss\",0,0,function(){return\"\"+Ra.apply(this)+T(this.minutes(),2)+T(this.seconds(),2)}),U(\"Hmm\",0,0,function(){return\"\"+this.hours()+T(this.minutes(),2)}),U(\"Hmmss\",0,0,function(){return\"\"+this.hours()+T(this.minutes(),2)+T(this.seconds(),2)}),Ta(\"a\",!0),Ta(\"A\",!1),\r\n// ALIASES\r\nJ(\"hour\",\"h\"),\r\n// PRIORITY\r\nM(\"hour\",13),Z(\"a\",Ua),Z(\"A\",Ua),Z(\"H\",Od),Z(\"h\",Od),Z(\"HH\",Od,Kd),Z(\"hh\",Od,Kd),Z(\"hmm\",Pd),Z(\"hmmss\",Qd),Z(\"Hmm\",Pd),Z(\"Hmmss\",Qd),ba([\"H\",\"HH\"],de),ba([\"a\",\"A\"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),ba([\"h\",\"hh\"],function(a,b,c){b[de]=u(a),m(c).bigHour=!0}),ba(\"hmm\",function(a,b,c){var d=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d)),m(c).bigHour=!0}),ba(\"hmmss\",function(a,b,c){var d=a.length-4,e=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d,2)),b[fe]=u(a.substr(e)),m(c).bigHour=!0}),ba(\"Hmm\",function(a,b,c){var d=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d))}),ba(\"Hmmss\",function(a,b,c){var d=a.length-4,e=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d,2)),b[fe]=u(a.substr(e))});var xe,ye=/[ap]\\.?m?\\.?/i,ze=O(\"Hours\",!0),Ae={calendar:xd,longDateFormat:yd,invalidDate:zd,ordinal:Ad,ordinalParse:Bd,relativeTime:Cd,months:le,monthsShort:me,week:qe,weekdays:re,weekdaysMin:te,weekdaysShort:se,meridiemParse:ye},Be={},Ce={},De=/^\\s*((?:[+-]\\d{6}|\\d{4})-(?:\\d\\d-\\d\\d|W\\d\\d-\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?::\\d\\d(?::\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,Ee=/^\\s*((?:[+-]\\d{6}|\\d{4})(?:\\d\\d\\d\\d|W\\d\\d\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?:\\d\\d(?:\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,Fe=/Z|[+-]\\d\\d(?::?\\d\\d)?/,Ge=[[\"YYYYYY-MM-DD\",/[+-]\\d{6}-\\d\\d-\\d\\d/],[\"YYYY-MM-DD\",/\\d{4}-\\d\\d-\\d\\d/],[\"GGGG-[W]WW-E\",/\\d{4}-W\\d\\d-\\d/],[\"GGGG-[W]WW\",/\\d{4}-W\\d\\d/,!1],[\"YYYY-DDD\",/\\d{4}-\\d{3}/],[\"YYYY-MM\",/\\d{4}-\\d\\d/,!1],[\"YYYYYYMMDD\",/[+-]\\d{10}/],[\"YYYYMMDD\",/\\d{8}/],\r\n// YYYYMM is NOT allowed by the standard\r\n[\"GGGG[W]WWE\",/\\d{4}W\\d{3}/],[\"GGGG[W]WW\",/\\d{4}W\\d{2}/,!1],[\"YYYYDDD\",/\\d{7}/]],He=[[\"HH:mm:ss.SSSS\",/\\d\\d:\\d\\d:\\d\\d\\.\\d+/],[\"HH:mm:ss,SSSS\",/\\d\\d:\\d\\d:\\d\\d,\\d+/],[\"HH:mm:ss\",/\\d\\d:\\d\\d:\\d\\d/],[\"HH:mm\",/\\d\\d:\\d\\d/],[\"HHmmss.SSSS\",/\\d\\d\\d\\d\\d\\d\\.\\d+/],[\"HHmmss,SSSS\",/\\d\\d\\d\\d\\d\\d,\\d+/],[\"HHmmss\",/\\d\\d\\d\\d\\d\\d/],[\"HHmm\",/\\d\\d\\d\\d/],[\"HH\",/\\d\\d/]],Ie=/^\\/?Date\\((\\-?\\d+)/i;a.createFromInputFallback=x(\"value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.\",function(a){a._d=new Date(a._i+(a._useUTC?\" UTC\":\"\"))}),\r\n// constant that refers to the ISO standard\r\na.ISO_8601=function(){};var Je=x(\"moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/\",function(){var a=sb.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:o()}),Ke=x(\"moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/\",function(){var a=sb.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:o()}),Le=function(){return Date.now?Date.now():+new Date};zb(\"Z\",\":\"),zb(\"ZZ\",\"\"),\r\n// PARSING\r\nZ(\"Z\",Xd),Z(\"ZZ\",Xd),ba([\"Z\",\"ZZ\"],function(a,b,c){c._useUTC=!0,c._tzm=Ab(Xd,a)});\r\n// HELPERS\r\n// timezone chunker\r\n// '+10:00' > ['10',  '00']\r\n// '-1530'  > ['-15', '30']\r\nvar Me=/([\\+\\-]|\\d\\d)/gi;\r\n// HOOKS\r\n// This function will be called whenever a moment is mutated.\r\n// It is intended to keep the offset in sync with the timezone.\r\na.updateOffset=function(){};\r\n// ASP.NET json date format regex\r\nvar Ne=/^(\\-)?(?:(\\d*)[. ])?(\\d+)\\:(\\d+)(?:\\:(\\d+)(\\.\\d*)?)?$/,Oe=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ob.fn=wb.prototype;var Pe=Sb(1,\"add\"),Qe=Sb(-1,\"subtract\");a.defaultFormat=\"YYYY-MM-DDTHH:mm:ssZ\",a.defaultFormatUtc=\"YYYY-MM-DDTHH:mm:ss[Z]\";var Re=x(\"moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.\",function(a){return void 0===a?this.localeData():this.locale(a)});\r\n// FORMATTING\r\nU(0,[\"gg\",2],0,function(){return this.weekYear()%100}),U(0,[\"GG\",2],0,function(){return this.isoWeekYear()%100}),zc(\"gggg\",\"weekYear\"),zc(\"ggggg\",\"weekYear\"),zc(\"GGGG\",\"isoWeekYear\"),zc(\"GGGGG\",\"isoWeekYear\"),\r\n// ALIASES\r\nJ(\"weekYear\",\"gg\"),J(\"isoWeekYear\",\"GG\"),\r\n// PRIORITY\r\nM(\"weekYear\",1),M(\"isoWeekYear\",1),\r\n// PARSING\r\nZ(\"G\",Vd),Z(\"g\",Vd),Z(\"GG\",Od,Kd),Z(\"gg\",Od,Kd),Z(\"GGGG\",Sd,Md),Z(\"gggg\",Sd,Md),Z(\"GGGGG\",Td,Nd),Z(\"ggggg\",Td,Nd),ca([\"gggg\",\"ggggg\",\"GGGG\",\"GGGGG\"],function(a,b,c,d){b[d.substr(0,2)]=u(a)}),ca([\"gg\",\"GG\"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),\r\n// FORMATTING\r\nU(\"Q\",0,\"Qo\",\"quarter\"),\r\n// ALIASES\r\nJ(\"quarter\",\"Q\"),\r\n// PRIORITY\r\nM(\"quarter\",7),\r\n// PARSING\r\nZ(\"Q\",Jd),ba(\"Q\",function(a,b){b[be]=3*(u(a)-1)}),\r\n// FORMATTING\r\nU(\"D\",[\"DD\",2],\"Do\",\"date\"),\r\n// ALIASES\r\nJ(\"date\",\"D\"),\r\n// PRIOROITY\r\nM(\"date\",9),\r\n// PARSING\r\nZ(\"D\",Od),Z(\"DD\",Od,Kd),Z(\"Do\",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),ba([\"D\",\"DD\"],ce),ba(\"Do\",function(a,b){b[ce]=u(a.match(Od)[0],10)});\r\n// MOMENTS\r\nvar Se=O(\"Date\",!0);\r\n// FORMATTING\r\nU(\"DDD\",[\"DDDD\",3],\"DDDo\",\"dayOfYear\"),\r\n// ALIASES\r\nJ(\"dayOfYear\",\"DDD\"),\r\n// PRIORITY\r\nM(\"dayOfYear\",4),\r\n// PARSING\r\nZ(\"DDD\",Rd),Z(\"DDDD\",Ld),ba([\"DDD\",\"DDDD\"],function(a,b,c){c._dayOfYear=u(a)}),\r\n// FORMATTING\r\nU(\"m\",[\"mm\",2],0,\"minute\"),\r\n// ALIASES\r\nJ(\"minute\",\"m\"),\r\n// PRIORITY\r\nM(\"minute\",14),\r\n// PARSING\r\nZ(\"m\",Od),Z(\"mm\",Od,Kd),ba([\"m\",\"mm\"],ee);\r\n// MOMENTS\r\nvar Te=O(\"Minutes\",!1);\r\n// FORMATTING\r\nU(\"s\",[\"ss\",2],0,\"second\"),\r\n// ALIASES\r\nJ(\"second\",\"s\"),\r\n// PRIORITY\r\nM(\"second\",15),\r\n// PARSING\r\nZ(\"s\",Od),Z(\"ss\",Od,Kd),ba([\"s\",\"ss\"],fe);\r\n// MOMENTS\r\nvar Ue=O(\"Seconds\",!1);\r\n// FORMATTING\r\nU(\"S\",0,0,function(){return~~(this.millisecond()/100)}),U(0,[\"SS\",2],0,function(){return~~(this.millisecond()/10)}),U(0,[\"SSS\",3],0,\"millisecond\"),U(0,[\"SSSS\",4],0,function(){return 10*this.millisecond()}),U(0,[\"SSSSS\",5],0,function(){return 100*this.millisecond()}),U(0,[\"SSSSSS\",6],0,function(){return 1e3*this.millisecond()}),U(0,[\"SSSSSSS\",7],0,function(){return 1e4*this.millisecond()}),U(0,[\"SSSSSSSS\",8],0,function(){return 1e5*this.millisecond()}),U(0,[\"SSSSSSSSS\",9],0,function(){return 1e6*this.millisecond()}),\r\n// ALIASES\r\nJ(\"millisecond\",\"ms\"),\r\n// PRIORITY\r\nM(\"millisecond\",16),\r\n// PARSING\r\nZ(\"S\",Rd,Jd),Z(\"SS\",Rd,Kd),Z(\"SSS\",Rd,Ld);var Ve;for(Ve=\"SSSS\";Ve.length<=9;Ve+=\"S\")Z(Ve,Ud);for(Ve=\"S\";Ve.length<=9;Ve+=\"S\")ba(Ve,Ic);\r\n// MOMENTS\r\nvar We=O(\"Milliseconds\",!1);\r\n// FORMATTING\r\nU(\"z\",0,0,\"zoneAbbr\"),U(\"zz\",0,0,\"zoneName\");var Xe=r.prototype;Xe.add=Pe,Xe.calendar=Vb,Xe.clone=Wb,Xe.diff=bc,Xe.endOf=oc,Xe.format=gc,Xe.from=hc,Xe.fromNow=ic,Xe.to=jc,Xe.toNow=kc,Xe.get=R,Xe.invalidAt=xc,Xe.isAfter=Xb,Xe.isBefore=Yb,Xe.isBetween=Zb,Xe.isSame=$b,Xe.isSameOrAfter=_b,Xe.isSameOrBefore=ac,Xe.isValid=vc,Xe.lang=Re,Xe.locale=lc,Xe.localeData=mc,Xe.max=Ke,Xe.min=Je,Xe.parsingFlags=wc,Xe.set=S,Xe.startOf=nc,Xe.subtract=Qe,Xe.toArray=sc,Xe.toObject=tc,Xe.toDate=rc,Xe.toISOString=ec,Xe.inspect=fc,Xe.toJSON=uc,Xe.toString=dc,Xe.unix=qc,Xe.valueOf=pc,Xe.creationData=yc,\r\n// Year\r\nXe.year=pe,Xe.isLeapYear=ra,\r\n// Week Year\r\nXe.weekYear=Ac,Xe.isoWeekYear=Bc,\r\n// Quarter\r\nXe.quarter=Xe.quarters=Gc,\r\n// Month\r\nXe.month=ka,Xe.daysInMonth=la,\r\n// Week\r\nXe.week=Xe.weeks=Ba,Xe.isoWeek=Xe.isoWeeks=Ca,Xe.weeksInYear=Dc,Xe.isoWeeksInYear=Cc,\r\n// Day\r\nXe.date=Se,Xe.day=Xe.days=Ka,Xe.weekday=La,Xe.isoWeekday=Ma,Xe.dayOfYear=Hc,\r\n// Hour\r\nXe.hour=Xe.hours=ze,\r\n// Minute\r\nXe.minute=Xe.minutes=Te,\r\n// Second\r\nXe.second=Xe.seconds=Ue,\r\n// Millisecond\r\nXe.millisecond=Xe.milliseconds=We,\r\n// Offset\r\nXe.utcOffset=Db,Xe.utc=Fb,Xe.local=Gb,Xe.parseZone=Hb,Xe.hasAlignedHourOffset=Ib,Xe.isDST=Jb,Xe.isLocal=Lb,Xe.isUtcOffset=Mb,Xe.isUtc=Nb,Xe.isUTC=Nb,\r\n// Timezone\r\nXe.zoneAbbr=Jc,Xe.zoneName=Kc,\r\n// Deprecations\r\nXe.dates=x(\"dates accessor is deprecated. Use date instead.\",Se),Xe.months=x(\"months accessor is deprecated. Use month instead\",ka),Xe.years=x(\"years accessor is deprecated. Use year instead\",pe),Xe.zone=x(\"moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/\",Eb),Xe.isDSTShifted=x(\"isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information\",Kb);var Ye=C.prototype;Ye.calendar=D,Ye.longDateFormat=E,Ye.invalidDate=F,Ye.ordinal=G,Ye.preparse=Nc,Ye.postformat=Nc,Ye.relativeTime=H,Ye.pastFuture=I,Ye.set=A,\r\n// Month\r\nYe.months=fa,Ye.monthsShort=ga,Ye.monthsParse=ia,Ye.monthsRegex=na,Ye.monthsShortRegex=ma,\r\n// Week\r\nYe.week=ya,Ye.firstDayOfYear=Aa,Ye.firstDayOfWeek=za,\r\n// Day of Week\r\nYe.weekdays=Fa,Ye.weekdaysMin=Ha,Ye.weekdaysShort=Ga,Ye.weekdaysParse=Ja,Ye.weekdaysRegex=Na,Ye.weekdaysShortRegex=Oa,Ye.weekdaysMinRegex=Pa,\r\n// Hours\r\nYe.isPM=Va,Ye.meridiem=Wa,$a(\"en\",{ordinalParse:/\\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===u(a%100/10)?\"th\":1===b?\"st\":2===b?\"nd\":3===b?\"rd\":\"th\";return a+c}}),\r\n// Side effect imports\r\na.lang=x(\"moment.lang is deprecated. Use moment.locale instead.\",$a),a.langData=x(\"moment.langData is deprecated. Use moment.localeData instead.\",bb);var Ze=Math.abs,$e=ed(\"ms\"),_e=ed(\"s\"),af=ed(\"m\"),bf=ed(\"h\"),cf=ed(\"d\"),df=ed(\"w\"),ef=ed(\"M\"),ff=ed(\"y\"),gf=gd(\"milliseconds\"),hf=gd(\"seconds\"),jf=gd(\"minutes\"),kf=gd(\"hours\"),lf=gd(\"days\"),mf=gd(\"months\"),nf=gd(\"years\"),of=Math.round,pf={s:45,// seconds to minute\r\nm:45,// minutes to hour\r\nh:22,// hours to day\r\nd:26,// days to month\r\nM:11},qf=Math.abs,rf=wb.prototype;\r\n// Deprecations\r\n// Side effect imports\r\n// FORMATTING\r\n// PARSING\r\n// Side effect imports\r\nreturn rf.abs=Wc,rf.add=Yc,rf.subtract=Zc,rf.as=cd,rf.asMilliseconds=$e,rf.asSeconds=_e,rf.asMinutes=af,rf.asHours=bf,rf.asDays=cf,rf.asWeeks=df,rf.asMonths=ef,rf.asYears=ff,rf.valueOf=dd,rf._bubble=_c,rf.get=fd,rf.milliseconds=gf,rf.seconds=hf,rf.minutes=jf,rf.hours=kf,rf.days=lf,rf.weeks=hd,rf.months=mf,rf.years=nf,rf.humanize=md,rf.toISOString=nd,rf.toString=nd,rf.toJSON=nd,rf.locale=lc,rf.localeData=mc,rf.toIsoString=x(\"toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)\",nd),rf.lang=Re,U(\"X\",0,0,\"unix\"),U(\"x\",0,0,\"valueOf\"),Z(\"x\",Vd),Z(\"X\",Yd),ba(\"X\",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),ba(\"x\",function(a,b,c){c._d=new Date(u(a))}),a.version=\"2.17.1\",b(sb),a.fn=Xe,a.min=ub,a.max=vb,a.now=Le,a.utc=k,a.unix=Lc,a.months=Rc,a.isDate=g,a.locale=$a,a.invalid=o,a.duration=Ob,a.isMoment=s,a.weekdays=Tc,a.parseZone=Mc,a.localeData=bb,a.isDuration=xb,a.monthsShort=Sc,a.weekdaysMin=Vc,a.defineLocale=_a,a.updateLocale=ab,a.locales=cb,a.weekdaysShort=Uc,a.normalizeUnits=K,a.relativeTimeRounding=kd,a.relativeTimeThreshold=ld,a.calendarFormat=Ub,a.prototype=Xe,a});","MutationObserver.js":"/**\r\n * @license\r\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\r\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\r\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\r\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\r\n * Code distributed by Google as part of the polymer project is also\r\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\r\n */\r\n\r\n(function(global) {\r\n\r\n  var registrationsTable = new WeakMap();\r\n\r\n  var setImmediate;\r\n\r\n  // As much as we would like to use the native implementation, IE\r\n  // (all versions) suffers a rather annoying bug where it will drop or defer\r\n  // callbacks when heavy DOM operations are being performed concurrently.\r\n  //\r\n  // For a thorough discussion on this, see:\r\n  // http://codeforhire.com/2013/09/21/setimmediate-and-messagechannel-broken-on-internet-explorer-10/\r\n  if (/Trident|Edge/.test(navigator.userAgent)) {\r\n    // Sadly, this bug also affects postMessage and MessageQueues.\r\n    //\r\n    // We would like to use the onreadystatechange hack for IE <= 10, but it is\r\n    // dangerous in the polyfilled environment due to requiring that the\r\n    // observed script element be in the document.\r\n    setImmediate = setTimeout;\r\n\r\n  // If some other browser ever implements it, let's prefer their native\r\n  // implementation:\r\n  } else if (window.setImmediate) {\r\n    setImmediate = window.setImmediate;\r\n\r\n  // Otherwise, we fall back to postMessage as a means of emulating the next\r\n  // task semantics of setImmediate.\r\n  } else {\r\n    var setImmediateQueue = [];\r\n    var sentinel = String(Math.random());\r\n    window.addEventListener('message', function(e) {\r\n      if (e.data === sentinel) {\r\n        var queue = setImmediateQueue;\r\n        setImmediateQueue = [];\r\n        queue.forEach(function(func) {\r\n          func();\r\n        });\r\n      }\r\n    });\r\n    setImmediate = function(func) {\r\n      setImmediateQueue.push(func);\r\n      window.postMessage(sentinel, '*');\r\n    };\r\n  }\r\n\r\n  // This is used to ensure that we never schedule 2 callas to setImmediate\r\n  var isScheduled = false;\r\n\r\n  // Keep track of observers that needs to be notified next time.\r\n  var scheduledObservers = [];\r\n\r\n  /**\r\n   * Schedules |dispatchCallback| to be called in the future.\r\n   * @param {MutationObserver} observer\r\n   */\r\n  function scheduleCallback(observer) {\r\n    scheduledObservers.push(observer);\r\n    if (!isScheduled) {\r\n      isScheduled = true;\r\n      setImmediate(dispatchCallbacks);\r\n    }\r\n  }\r\n\r\n  function wrapIfNeeded(node) {\r\n    return window.ShadowDOMPolyfill &&\r\n        window.ShadowDOMPolyfill.wrapIfNeeded(node) ||\r\n        node;\r\n  }\r\n\r\n  function dispatchCallbacks() {\r\n    // http://dom.spec.whatwg.org/#mutation-observers\r\n\r\n    isScheduled = false; // Used to allow a new setImmediate call above.\r\n\r\n    var observers = scheduledObservers;\r\n    scheduledObservers = [];\r\n    // Sort observers based on their creation UID (incremental).\r\n    observers.sort(function(o1, o2) {\r\n      return o1.uid_ - o2.uid_;\r\n    });\r\n\r\n    var anyNonEmpty = false;\r\n    observers.forEach(function(observer) {\r\n\r\n      // 2.1, 2.2\r\n      var queue = observer.takeRecords();\r\n      // 2.3. Remove all transient registered observers whose observer is mo.\r\n      removeTransientObserversFor(observer);\r\n\r\n      // 2.4\r\n      if (queue.length) {\r\n        observer.callback_(queue, observer);\r\n        anyNonEmpty = true;\r\n      }\r\n    });\r\n\r\n    // 3.\r\n    if (anyNonEmpty)\r\n      dispatchCallbacks();\r\n  }\r\n\r\n  function removeTransientObserversFor(observer) {\r\n    observer.nodes_.forEach(function(node) {\r\n      var registrations = registrationsTable.get(node);\r\n      if (!registrations)\r\n        return;\r\n      registrations.forEach(function(registration) {\r\n        if (registration.observer === observer)\r\n          registration.removeTransientObservers();\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * This function is used for the \"For each registered observer observer (with\r\n   * observer's options as options) in target's list of registered observers,\r\n   * run these substeps:\" and the \"For each ancestor ancestor of target, and for\r\n   * each registered observer observer (with options options) in ancestor's list\r\n   * of registered observers, run these substeps:\" part of the algorithms. The\r\n   * |options.subtree| is checked to ensure that the callback is called\r\n   * correctly.\r\n   *\r\n   * @param {Node} target\r\n   * @param {function(MutationObserverInit):MutationRecord} callback\r\n   */\r\n  function forEachAncestorAndObserverEnqueueRecord(target, callback) {\r\n    for (var node = target; node; node = node.parentNode) {\r\n      var registrations = registrationsTable.get(node);\r\n\r\n      if (registrations) {\r\n        for (var j = 0; j < registrations.length; j++) {\r\n          var registration = registrations[j];\r\n          var options = registration.options;\r\n\r\n          // Only target ignores subtree.\r\n          if (node !== target && !options.subtree)\r\n            continue;\r\n\r\n          var record = callback(options);\r\n          if (record)\r\n            registration.enqueue(record);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  var uidCounter = 0;\r\n\r\n  /**\r\n   * The class that maps to the DOM MutationObserver interface.\r\n   * @param {Function} callback.\r\n   * @constructor\r\n   */\r\n  function JsMutationObserver(callback) {\r\n    this.callback_ = callback;\r\n    this.nodes_ = [];\r\n    this.records_ = [];\r\n    this.uid_ = ++uidCounter;\r\n  }\r\n\r\n  JsMutationObserver.prototype = {\r\n    observe: function(target, options) {\r\n      target = wrapIfNeeded(target);\r\n\r\n      // 1.1\r\n      if (!options.childList && !options.attributes && !options.characterData ||\r\n\r\n          // 1.2\r\n          options.attributeOldValue && !options.attributes ||\r\n\r\n          // 1.3\r\n          options.attributeFilter && options.attributeFilter.length &&\r\n              !options.attributes ||\r\n\r\n          // 1.4\r\n          options.characterDataOldValue && !options.characterData) {\r\n\r\n        throw new SyntaxError();\r\n      }\r\n\r\n      var registrations = registrationsTable.get(target);\r\n      if (!registrations)\r\n        registrationsTable.set(target, registrations = []);\r\n\r\n      // 2\r\n      // If target's list of registered observers already includes a registered\r\n      // observer associated with the context object, replace that registered\r\n      // observer's options with options.\r\n      var registration;\r\n      for (var i = 0; i < registrations.length; i++) {\r\n        if (registrations[i].observer === this) {\r\n          registration = registrations[i];\r\n          registration.removeListeners();\r\n          registration.options = options;\r\n          break;\r\n        }\r\n      }\r\n\r\n      // 3.\r\n      // Otherwise, add a new registered observer to target's list of registered\r\n      // observers with the context object as the observer and options as the\r\n      // options, and add target to context object's list of nodes on which it\r\n      // is registered.\r\n      if (!registration) {\r\n        registration = new Registration(this, target, options);\r\n        registrations.push(registration);\r\n        this.nodes_.push(target);\r\n      }\r\n\r\n      registration.addListeners();\r\n    },\r\n\r\n    disconnect: function() {\r\n      this.nodes_.forEach(function(node) {\r\n        var registrations = registrationsTable.get(node);\r\n        for (var i = 0; i < registrations.length; i++) {\r\n          var registration = registrations[i];\r\n          if (registration.observer === this) {\r\n            registration.removeListeners();\r\n            registrations.splice(i, 1);\r\n            // Each node can only have one registered observer associated with\r\n            // this observer.\r\n            break;\r\n          }\r\n        }\r\n      }, this);\r\n      this.records_ = [];\r\n    },\r\n\r\n    takeRecords: function() {\r\n      var copyOfRecords = this.records_;\r\n      this.records_ = [];\r\n      return copyOfRecords;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @param {string} type\r\n   * @param {Node} target\r\n   * @constructor\r\n   */\r\n  function MutationRecord(type, target) {\r\n    this.type = type;\r\n    this.target = target;\r\n    this.addedNodes = [];\r\n    this.removedNodes = [];\r\n    this.previousSibling = null;\r\n    this.nextSibling = null;\r\n    this.attributeName = null;\r\n    this.attributeNamespace = null;\r\n    this.oldValue = null;\r\n  }\r\n\r\n  function copyMutationRecord(original) {\r\n    var record = new MutationRecord(original.type, original.target);\r\n    record.addedNodes = original.addedNodes.slice();\r\n    record.removedNodes = original.removedNodes.slice();\r\n    record.previousSibling = original.previousSibling;\r\n    record.nextSibling = original.nextSibling;\r\n    record.attributeName = original.attributeName;\r\n    record.attributeNamespace = original.attributeNamespace;\r\n    record.oldValue = original.oldValue;\r\n    return record;\r\n  };\r\n\r\n  // We keep track of the two (possibly one) records used in a single mutation.\r\n  var currentRecord, recordWithOldValue;\r\n\r\n  /**\r\n   * Creates a record without |oldValue| and caches it as |currentRecord| for\r\n   * later use.\r\n   * @param {string} oldValue\r\n   * @return {MutationRecord}\r\n   */\r\n  function getRecord(type, target) {\r\n    return currentRecord = new MutationRecord(type, target);\r\n  }\r\n\r\n  /**\r\n   * Gets or creates a record with |oldValue| based in the |currentRecord|\r\n   * @param {string} oldValue\r\n   * @return {MutationRecord}\r\n   */\r\n  function getRecordWithOldValue(oldValue) {\r\n    if (recordWithOldValue)\r\n      return recordWithOldValue;\r\n    recordWithOldValue = copyMutationRecord(currentRecord);\r\n    recordWithOldValue.oldValue = oldValue;\r\n    return recordWithOldValue;\r\n  }\r\n\r\n  function clearRecords() {\r\n    currentRecord = recordWithOldValue = undefined;\r\n  }\r\n\r\n  /**\r\n   * @param {MutationRecord} record\r\n   * @return {boolean} Whether the record represents a record from the current\r\n   * mutation event.\r\n   */\r\n  function recordRepresentsCurrentMutation(record) {\r\n    return record === recordWithOldValue || record === currentRecord;\r\n  }\r\n\r\n  /**\r\n   * Selects which record, if any, to replace the last record in the queue.\r\n   * This returns |null| if no record should be replaced.\r\n   *\r\n   * @param {MutationRecord} lastRecord\r\n   * @param {MutationRecord} newRecord\r\n   * @param {MutationRecord}\r\n   */\r\n  function selectRecord(lastRecord, newRecord) {\r\n    if (lastRecord === newRecord)\r\n      return lastRecord;\r\n\r\n    // Check if the record we are adding represents the same record. If\r\n    // so, we keep the one with the oldValue in it.\r\n    if (recordWithOldValue && recordRepresentsCurrentMutation(lastRecord))\r\n      return recordWithOldValue;\r\n\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Class used to represent a registered observer.\r\n   * @param {MutationObserver} observer\r\n   * @param {Node} target\r\n   * @param {MutationObserverInit} options\r\n   * @constructor\r\n   */\r\n  function Registration(observer, target, options) {\r\n    this.observer = observer;\r\n    this.target = target;\r\n    this.options = options;\r\n    this.transientObservedNodes = [];\r\n  }\r\n\r\n  Registration.prototype = {\r\n    enqueue: function(record) {\r\n      var records = this.observer.records_;\r\n      var length = records.length;\r\n\r\n      // There are cases where we replace the last record with the new record.\r\n      // For example if the record represents the same mutation we need to use\r\n      // the one with the oldValue. If we get same record (this can happen as we\r\n      // walk up the tree) we ignore the new record.\r\n      if (records.length > 0) {\r\n        var lastRecord = records[length - 1];\r\n        var recordToReplaceLast = selectRecord(lastRecord, record);\r\n        if (recordToReplaceLast) {\r\n          records[length - 1] = recordToReplaceLast;\r\n          return;\r\n        }\r\n      } else {\r\n        scheduleCallback(this.observer);\r\n      }\r\n\r\n      records[length] = record;\r\n    },\r\n\r\n    addListeners: function() {\r\n      this.addListeners_(this.target);\r\n    },\r\n\r\n    addListeners_: function(node) {\r\n      var options = this.options;\r\n      if (options.attributes)\r\n        node.addEventListener('DOMAttrModified', this, true);\r\n\r\n      if (options.characterData)\r\n        node.addEventListener('DOMCharacterDataModified', this, true);\r\n\r\n      if (options.childList)\r\n        node.addEventListener('DOMNodeInserted', this, true);\r\n\r\n      if (options.childList || options.subtree)\r\n        node.addEventListener('DOMNodeRemoved', this, true);\r\n    },\r\n\r\n    removeListeners: function() {\r\n      this.removeListeners_(this.target);\r\n    },\r\n\r\n    removeListeners_: function(node) {\r\n      var options = this.options;\r\n      if (options.attributes)\r\n        node.removeEventListener('DOMAttrModified', this, true);\r\n\r\n      if (options.characterData)\r\n        node.removeEventListener('DOMCharacterDataModified', this, true);\r\n\r\n      if (options.childList)\r\n        node.removeEventListener('DOMNodeInserted', this, true);\r\n\r\n      if (options.childList || options.subtree)\r\n        node.removeEventListener('DOMNodeRemoved', this, true);\r\n    },\r\n\r\n    /**\r\n     * Adds a transient observer on node. The transient observer gets removed\r\n     * next time we deliver the change records.\r\n     * @param {Node} node\r\n     */\r\n    addTransientObserver: function(node) {\r\n      // Don't add transient observers on the target itself. We already have all\r\n      // the required listeners set up on the target.\r\n      if (node === this.target)\r\n        return;\r\n\r\n      this.addListeners_(node);\r\n      this.transientObservedNodes.push(node);\r\n      var registrations = registrationsTable.get(node);\r\n      if (!registrations)\r\n        registrationsTable.set(node, registrations = []);\r\n\r\n      // We know that registrations does not contain this because we already\r\n      // checked if node === this.target.\r\n      registrations.push(this);\r\n    },\r\n\r\n    removeTransientObservers: function() {\r\n      var transientObservedNodes = this.transientObservedNodes;\r\n      this.transientObservedNodes = [];\r\n\r\n      transientObservedNodes.forEach(function(node) {\r\n        // Transient observers are never added to the target.\r\n        this.removeListeners_(node);\r\n\r\n        var registrations = registrationsTable.get(node);\r\n        for (var i = 0; i < registrations.length; i++) {\r\n          if (registrations[i] === this) {\r\n            registrations.splice(i, 1);\r\n            // Each node can only have one registered observer associated with\r\n            // this observer.\r\n            break;\r\n          }\r\n        }\r\n      }, this);\r\n    },\r\n\r\n    handleEvent: function(e) {\r\n      // Stop propagation since we are managing the propagation manually.\r\n      // This means that other mutation events on the page will not work\r\n      // correctly but that is by design.\r\n      e.stopImmediatePropagation();\r\n\r\n      switch (e.type) {\r\n        case 'DOMAttrModified':\r\n          // http://dom.spec.whatwg.org/#concept-mo-queue-attributes\r\n\r\n          var name = e.attrName;\r\n          var namespace = e.relatedNode.namespaceURI;\r\n          var target = e.target;\r\n\r\n          // 1.\r\n          var record = new getRecord('attributes', target);\r\n          record.attributeName = name;\r\n          record.attributeNamespace = namespace;\r\n\r\n          // 2.\r\n          var oldValue =\r\n              e.attrChange === MutationEvent.ADDITION ? null : e.prevValue;\r\n\r\n          forEachAncestorAndObserverEnqueueRecord(target, function(options) {\r\n            // 3.1, 4.2\r\n            if (!options.attributes)\r\n              return;\r\n\r\n            // 3.2, 4.3\r\n            if (options.attributeFilter && options.attributeFilter.length &&\r\n                options.attributeFilter.indexOf(name) === -1 &&\r\n                options.attributeFilter.indexOf(namespace) === -1) {\r\n              return;\r\n            }\r\n            // 3.3, 4.4\r\n            if (options.attributeOldValue)\r\n              return getRecordWithOldValue(oldValue);\r\n\r\n            // 3.4, 4.5\r\n            return record;\r\n          });\r\n\r\n          break;\r\n\r\n        case 'DOMCharacterDataModified':\r\n          // http://dom.spec.whatwg.org/#concept-mo-queue-characterdata\r\n          var target = e.target;\r\n\r\n          // 1.\r\n          var record = getRecord('characterData', target);\r\n\r\n          // 2.\r\n          var oldValue = e.prevValue;\r\n\r\n\r\n          forEachAncestorAndObserverEnqueueRecord(target, function(options) {\r\n            // 3.1, 4.2\r\n            if (!options.characterData)\r\n              return;\r\n\r\n            // 3.2, 4.3\r\n            if (options.characterDataOldValue)\r\n              return getRecordWithOldValue(oldValue);\r\n\r\n            // 3.3, 4.4\r\n            return record;\r\n          });\r\n\r\n          break;\r\n\r\n        case 'DOMNodeRemoved':\r\n          this.addTransientObserver(e.target);\r\n          // Fall through.\r\n        case 'DOMNodeInserted':\r\n          // http://dom.spec.whatwg.org/#concept-mo-queue-childlist\r\n          var changedNode = e.target;\r\n          var addedNodes, removedNodes;\r\n          if (e.type === 'DOMNodeInserted') {\r\n            addedNodes = [changedNode];\r\n            removedNodes = [];\r\n          } else {\r\n\r\n            addedNodes = [];\r\n            removedNodes = [changedNode];\r\n          }\r\n          var previousSibling = changedNode.previousSibling;\r\n          var nextSibling = changedNode.nextSibling;\r\n\r\n          // 1.\r\n          var record = getRecord('childList', e.target.parentNode);\r\n          record.addedNodes = addedNodes;\r\n          record.removedNodes = removedNodes;\r\n          record.previousSibling = previousSibling;\r\n          record.nextSibling = nextSibling;\r\n\r\n          forEachAncestorAndObserverEnqueueRecord(e.relatedNode, function(options) {\r\n            // 2.1, 3.2\r\n            if (!options.childList)\r\n              return;\r\n\r\n            // 2.2, 3.3\r\n            return record;\r\n          });\r\n\r\n      }\r\n\r\n      clearRecords();\r\n    }\r\n  };\r\n\r\n  global.JsMutationObserver = JsMutationObserver;\r\n\r\n  if (!global.MutationObserver)\r\n    global.MutationObserver = JsMutationObserver;\r\n\r\n\r\n})(this);","underscore.js":"//     Underscore.js 1.8.2\r\n//     http://underscorejs.org\r\n//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\r\n//     Underscore may be freely distributed under the MIT license.\r\n\r\n(function() {\r\n\r\n  // Baseline setup\r\n  // --------------\r\n\r\n  // Establish the root object, `window` in the browser, or `exports` on the server.\r\n  var root = this;\r\n\r\n  // Save the previous value of the `_` variable.\r\n  var previousUnderscore = root._;\r\n\r\n  // Save bytes in the minified (but not gzipped) version:\r\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\r\n\r\n  // Create quick reference variables for speed access to core prototypes.\r\n  var\r\n    push             = ArrayProto.push,\r\n    slice            = ArrayProto.slice,\r\n    toString         = ObjProto.toString,\r\n    hasOwnProperty   = ObjProto.hasOwnProperty;\r\n\r\n  // All **ECMAScript 5** native function implementations that we hope to use\r\n  // are declared here.\r\n  var\r\n    nativeIsArray      = Array.isArray,\r\n    nativeKeys         = Object.keys,\r\n    nativeBind         = FuncProto.bind,\r\n    nativeCreate       = Object.create;\r\n\r\n  // Naked function reference for surrogate-prototype-swapping.\r\n  var Ctor = function(){};\r\n\r\n  // Create a safe reference to the Underscore object for use below.\r\n  var _ = function(obj) {\r\n    if (obj instanceof _) return obj;\r\n    if (!(this instanceof _)) return new _(obj);\r\n    this._wrapped = obj;\r\n  };\r\n\r\n  // Export the Underscore object for **Node.js**, with\r\n  // backwards-compatibility for the old `require()` API. If we're in\r\n  // the browser, add `_` as a global object.\r\n  if (typeof exports !== 'undefined') {\r\n    if (typeof module !== 'undefined' && module.exports) {\r\n      exports = module.exports = _;\r\n    }\r\n    exports._ = _;\r\n  } else {\r\n    root._ = _;\r\n  }\r\n\r\n  // Current version.\r\n  _.VERSION = '1.8.2';\r\n\r\n  // Internal function that returns an efficient (for current engines) version\r\n  // of the passed-in callback, to be repeatedly applied in other Underscore\r\n  // functions.\r\n  var optimizeCb = function(func, context, argCount) {\r\n    if (context === void 0) return func;\r\n    switch (argCount == null ? 3 : argCount) {\r\n      case 1: return function(value) {\r\n        return func.call(context, value);\r\n      };\r\n      case 2: return function(value, other) {\r\n        return func.call(context, value, other);\r\n      };\r\n      case 3: return function(value, index, collection) {\r\n        return func.call(context, value, index, collection);\r\n      };\r\n      case 4: return function(accumulator, value, index, collection) {\r\n        return func.call(context, accumulator, value, index, collection);\r\n      };\r\n    }\r\n    return function() {\r\n      return func.apply(context, arguments);\r\n    };\r\n  };\r\n\r\n  // A mostly-internal function to generate callbacks that can be applied\r\n  // to each element in a collection, returning the desired result \u00e2\u0080\u0094 either\r\n  // identity, an arbitrary callback, a property matcher, or a property accessor.\r\n  var cb = function(value, context, argCount) {\r\n    if (value == null) return _.identity;\r\n    if (_.isFunction(value)) return optimizeCb(value, context, argCount);\r\n    if (_.isObject(value)) return _.matcher(value);\r\n    return _.property(value);\r\n  };\r\n  _.iteratee = function(value, context) {\r\n    return cb(value, context, Infinity);\r\n  };\r\n\r\n  // An internal function for creating assigner functions.\r\n  var createAssigner = function(keysFunc, undefinedOnly) {\r\n    return function(obj) {\r\n      var length = arguments.length;\r\n      if (length < 2 || obj == null) return obj;\r\n      for (var index = 1; index < length; index++) {\r\n        var source = arguments[index],\r\n            keys = keysFunc(source),\r\n            l = keys.length;\r\n        for (var i = 0; i < l; i++) {\r\n          var key = keys[i];\r\n          if (!undefinedOnly || obj[key] === void 0) obj[key] = source[key];\r\n        }\r\n      }\r\n      return obj;\r\n    };\r\n  };\r\n\r\n  // An internal function for creating a new object that inherits from another.\r\n  var baseCreate = function(prototype) {\r\n    if (!_.isObject(prototype)) return {};\r\n    if (nativeCreate) return nativeCreate(prototype);\r\n    Ctor.prototype = prototype;\r\n    var result = new Ctor;\r\n    Ctor.prototype = null;\r\n    return result;\r\n  };\r\n\r\n  // Helper for collection methods to determine whether a collection\r\n  // should be iterated as an array or as an object\r\n  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\r\n  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\r\n  var isArrayLike = function(collection) {\r\n    var length = collection && collection.length;\r\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\r\n  };\r\n\r\n  // Collection Functions\r\n  // --------------------\r\n\r\n  // The cornerstone, an `each` implementation, aka `forEach`.\r\n  // Handles raw objects in addition to array-likes. Treats all\r\n  // sparse array-likes as if they were dense.\r\n  _.each = _.forEach = function(obj, iteratee, context) {\r\n    iteratee = optimizeCb(iteratee, context);\r\n    var i, length;\r\n    if (isArrayLike(obj)) {\r\n      for (i = 0, length = obj.length; i < length; i++) {\r\n        iteratee(obj[i], i, obj);\r\n      }\r\n    } else {\r\n      var keys = _.keys(obj);\r\n      for (i = 0, length = keys.length; i < length; i++) {\r\n        iteratee(obj[keys[i]], keys[i], obj);\r\n      }\r\n    }\r\n    return obj;\r\n  };\r\n\r\n  // Return the results of applying the iteratee to each element.\r\n  _.map = _.collect = function(obj, iteratee, context) {\r\n    iteratee = cb(iteratee, context);\r\n    var keys = !isArrayLike(obj) && _.keys(obj),\r\n        length = (keys || obj).length,\r\n        results = Array(length);\r\n    for (var index = 0; index < length; index++) {\r\n      var currentKey = keys ? keys[index] : index;\r\n      results[index] = iteratee(obj[currentKey], currentKey, obj);\r\n    }\r\n    return results;\r\n  };\r\n\r\n  // Create a reducing function iterating left or right.\r\n  function createReduce(dir) {\r\n    // Optimized iterator function as using arguments.length\r\n    // in the main function will deoptimize the, see #1991.\r\n    function iterator(obj, iteratee, memo, keys, index, length) {\r\n      for (; index >= 0 && index < length; index += dir) {\r\n        var currentKey = keys ? keys[index] : index;\r\n        memo = iteratee(memo, obj[currentKey], currentKey, obj);\r\n      }\r\n      return memo;\r\n    }\r\n\r\n    return function(obj, iteratee, memo, context) {\r\n      iteratee = optimizeCb(iteratee, context, 4);\r\n      var keys = !isArrayLike(obj) && _.keys(obj),\r\n          length = (keys || obj).length,\r\n          index = dir > 0 ? 0 : length - 1;\r\n      // Determine the initial value if none is provided.\r\n      if (arguments.length < 3) {\r\n        memo = obj[keys ? keys[index] : index];\r\n        index += dir;\r\n      }\r\n      return iterator(obj, iteratee, memo, keys, index, length);\r\n    };\r\n  }\r\n\r\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\r\n  // or `foldl`.\r\n  _.reduce = _.foldl = _.inject = createReduce(1);\r\n\r\n  // The right-associative version of reduce, also known as `foldr`.\r\n  _.reduceRight = _.foldr = createReduce(-1);\r\n\r\n  // Return the first value which passes a truth test. Aliased as `detect`.\r\n  _.find = _.detect = function(obj, predicate, context) {\r\n    var key;\r\n    if (isArrayLike(obj)) {\r\n      key = _.findIndex(obj, predicate, context);\r\n    } else {\r\n      key = _.findKey(obj, predicate, context);\r\n    }\r\n    if (key !== void 0 && key !== -1) return obj[key];\r\n  };\r\n\r\n  // Return all the elements that pass a truth test.\r\n  // Aliased as `select`.\r\n  _.filter = _.select = function(obj, predicate, context) {\r\n    var results = [];\r\n    predicate = cb(predicate, context);\r\n    _.each(obj, function(value, index, list) {\r\n      if (predicate(value, index, list)) results.push(value);\r\n    });\r\n    return results;\r\n  };\r\n\r\n  // Return all the elements for which a truth test fails.\r\n  _.reject = function(obj, predicate, context) {\r\n    return _.filter(obj, _.negate(cb(predicate)), context);\r\n  };\r\n\r\n  // Determine whether all of the elements match a truth test.\r\n  // Aliased as `all`.\r\n  _.every = _.all = function(obj, predicate, context) {\r\n    predicate = cb(predicate, context);\r\n    var keys = !isArrayLike(obj) && _.keys(obj),\r\n        length = (keys || obj).length;\r\n    for (var index = 0; index < length; index++) {\r\n      var currentKey = keys ? keys[index] : index;\r\n      if (!predicate(obj[currentKey], currentKey, obj)) return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  // Determine if at least one element in the object matches a truth test.\r\n  // Aliased as `any`.\r\n  _.some = _.any = function(obj, predicate, context) {\r\n    predicate = cb(predicate, context);\r\n    var keys = !isArrayLike(obj) && _.keys(obj),\r\n        length = (keys || obj).length;\r\n    for (var index = 0; index < length; index++) {\r\n      var currentKey = keys ? keys[index] : index;\r\n      if (predicate(obj[currentKey], currentKey, obj)) return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // Determine if the array or object contains a given value (using `===`).\r\n  // Aliased as `includes` and `include`.\r\n  _.contains = _.includes = _.include = function(obj, target, fromIndex) {\r\n    if (!isArrayLike(obj)) obj = _.values(obj);\r\n    return _.indexOf(obj, target, typeof fromIndex == 'number' && fromIndex) >= 0;\r\n  };\r\n\r\n  // Invoke a method (with arguments) on every item in a collection.\r\n  _.invoke = function(obj, method) {\r\n    var args = slice.call(arguments, 2);\r\n    var isFunc = _.isFunction(method);\r\n    return _.map(obj, function(value) {\r\n      var func = isFunc ? method : value[method];\r\n      return func == null ? func : func.apply(value, args);\r\n    });\r\n  };\r\n\r\n  // Convenience version of a common use case of `map`: fetching a property.\r\n  _.pluck = function(obj, key) {\r\n    return _.map(obj, _.property(key));\r\n  };\r\n\r\n  // Convenience version of a common use case of `filter`: selecting only objects\r\n  // containing specific `key:value` pairs.\r\n  _.where = function(obj, attrs) {\r\n    return _.filter(obj, _.matcher(attrs));\r\n  };\r\n\r\n  // Convenience version of a common use case of `find`: getting the first object\r\n  // containing specific `key:value` pairs.\r\n  _.findWhere = function(obj, attrs) {\r\n    return _.find(obj, _.matcher(attrs));\r\n  };\r\n\r\n  // Return the maximum element (or element-based computation).\r\n  _.max = function(obj, iteratee, context) {\r\n    var result = -Infinity, lastComputed = -Infinity,\r\n        value, computed;\r\n    if (iteratee == null && obj != null) {\r\n      obj = isArrayLike(obj) ? obj : _.values(obj);\r\n      for (var i = 0, length = obj.length; i < length; i++) {\r\n        value = obj[i];\r\n        if (value > result) {\r\n          result = value;\r\n        }\r\n      }\r\n    } else {\r\n      iteratee = cb(iteratee, context);\r\n      _.each(obj, function(value, index, list) {\r\n        computed = iteratee(value, index, list);\r\n        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\r\n          result = value;\r\n          lastComputed = computed;\r\n        }\r\n      });\r\n    }\r\n    return result;\r\n  };\r\n\r\n  // Return the minimum element (or element-based computation).\r\n  _.min = function(obj, iteratee, context) {\r\n    var result = Infinity, lastComputed = Infinity,\r\n        value, computed;\r\n    if (iteratee == null && obj != null) {\r\n      obj = isArrayLike(obj) ? obj : _.values(obj);\r\n      for (var i = 0, length = obj.length; i < length; i++) {\r\n        value = obj[i];\r\n        if (value < result) {\r\n          result = value;\r\n        }\r\n      }\r\n    } else {\r\n      iteratee = cb(iteratee, context);\r\n      _.each(obj, function(value, index, list) {\r\n        computed = iteratee(value, index, list);\r\n        if (computed < lastComputed || computed === Infinity && result === Infinity) {\r\n          result = value;\r\n          lastComputed = computed;\r\n        }\r\n      });\r\n    }\r\n    return result;\r\n  };\r\n\r\n  // Shuffle a collection, using the modern version of the\r\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher\u00e2\u0080\u0093Yates_shuffle).\r\n  _.shuffle = function(obj) {\r\n    var set = isArrayLike(obj) ? obj : _.values(obj);\r\n    var length = set.length;\r\n    var shuffled = Array(length);\r\n    for (var index = 0, rand; index < length; index++) {\r\n      rand = _.random(0, index);\r\n      if (rand !== index) shuffled[index] = shuffled[rand];\r\n      shuffled[rand] = set[index];\r\n    }\r\n    return shuffled;\r\n  };\r\n\r\n  // Sample **n** random values from a collection.\r\n  // If **n** is not specified, returns a single random element.\r\n  // The internal `guard` argument allows it to work with `map`.\r\n  _.sample = function(obj, n, guard) {\r\n    if (n == null || guard) {\r\n      if (!isArrayLike(obj)) obj = _.values(obj);\r\n      return obj[_.random(obj.length - 1)];\r\n    }\r\n    return _.shuffle(obj).slice(0, Math.max(0, n));\r\n  };\r\n\r\n  // Sort the object's values by a criterion produced by an iteratee.\r\n  _.sortBy = function(obj, iteratee, context) {\r\n    iteratee = cb(iteratee, context);\r\n    return _.pluck(_.map(obj, function(value, index, list) {\r\n      return {\r\n        value: value,\r\n        index: index,\r\n        criteria: iteratee(value, index, list)\r\n      };\r\n    }).sort(function(left, right) {\r\n      var a = left.criteria;\r\n      var b = right.criteria;\r\n      if (a !== b) {\r\n        if (a > b || a === void 0) return 1;\r\n        if (a < b || b === void 0) return -1;\r\n      }\r\n      return left.index - right.index;\r\n    }), 'value');\r\n  };\r\n\r\n  // An internal function used for aggregate \"group by\" operations.\r\n  var group = function(behavior) {\r\n    return function(obj, iteratee, context) {\r\n      var result = {};\r\n      iteratee = cb(iteratee, context);\r\n      _.each(obj, function(value, index) {\r\n        var key = iteratee(value, index, obj);\r\n        behavior(result, value, key);\r\n      });\r\n      return result;\r\n    };\r\n  };\r\n\r\n  // Groups the object's values by a criterion. Pass either a string attribute\r\n  // to group by, or a function that returns the criterion.\r\n  _.groupBy = group(function(result, value, key) {\r\n    if (_.has(result, key)) result[key].push(value); else result[key] = [value];\r\n  });\r\n\r\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\r\n  // when you know that your index values will be unique.\r\n  _.indexBy = group(function(result, value, key) {\r\n    result[key] = value;\r\n  });\r\n\r\n  // Counts instances of an object that group by a certain criterion. Pass\r\n  // either a string attribute to count by, or a function that returns the\r\n  // criterion.\r\n  _.countBy = group(function(result, value, key) {\r\n    if (_.has(result, key)) result[key]++; else result[key] = 1;\r\n  });\r\n\r\n  // Safely create a real, live array from anything iterable.\r\n  _.toArray = function(obj) {\r\n    if (!obj) return [];\r\n    if (_.isArray(obj)) return slice.call(obj);\r\n    if (isArrayLike(obj)) return _.map(obj, _.identity);\r\n    return _.values(obj);\r\n  };\r\n\r\n  // Return the number of elements in an object.\r\n  _.size = function(obj) {\r\n    if (obj == null) return 0;\r\n    return isArrayLike(obj) ? obj.length : _.keys(obj).length;\r\n  };\r\n\r\n  // Split a collection into two arrays: one whose elements all satisfy the given\r\n  // predicate, and one whose elements all do not satisfy the predicate.\r\n  _.partition = function(obj, predicate, context) {\r\n    predicate = cb(predicate, context);\r\n    var pass = [], fail = [];\r\n    _.each(obj, function(value, key, obj) {\r\n      (predicate(value, key, obj) ? pass : fail).push(value);\r\n    });\r\n    return [pass, fail];\r\n  };\r\n\r\n  // Array Functions\r\n  // ---------------\r\n\r\n  // Get the first element of an array. Passing **n** will return the first N\r\n  // values in the array. Aliased as `head` and `take`. The **guard** check\r\n  // allows it to work with `_.map`.\r\n  _.first = _.head = _.take = function(array, n, guard) {\r\n    if (array == null) return void 0;\r\n    if (n == null || guard) return array[0];\r\n    return _.initial(array, array.length - n);\r\n  };\r\n\r\n  // Returns everything but the last entry of the array. Especially useful on\r\n  // the arguments object. Passing **n** will return all the values in\r\n  // the array, excluding the last N.\r\n  _.initial = function(array, n, guard) {\r\n    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\r\n  };\r\n\r\n  // Get the last element of an array. Passing **n** will return the last N\r\n  // values in the array.\r\n  _.last = function(array, n, guard) {\r\n    if (array == null) return void 0;\r\n    if (n == null || guard) return array[array.length - 1];\r\n    return _.rest(array, Math.max(0, array.length - n));\r\n  };\r\n\r\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\r\n  // Especially useful on the arguments object. Passing an **n** will return\r\n  // the rest N values in the array.\r\n  _.rest = _.tail = _.drop = function(array, n, guard) {\r\n    return slice.call(array, n == null || guard ? 1 : n);\r\n  };\r\n\r\n  // Trim out all falsy values from an array.\r\n  _.compact = function(array) {\r\n    return _.filter(array, _.identity);\r\n  };\r\n\r\n  // Internal implementation of a recursive `flatten` function.\r\n  var flatten = function(input, shallow, strict, startIndex) {\r\n    var output = [], idx = 0;\r\n    for (var i = startIndex || 0, length = input && input.length; i < length; i++) {\r\n      var value = input[i];\r\n      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {\r\n        //flatten current level of array or arguments object\r\n        if (!shallow) value = flatten(value, shallow, strict);\r\n        var j = 0, len = value.length;\r\n        output.length += len;\r\n        while (j < len) {\r\n          output[idx++] = value[j++];\r\n        }\r\n      } else if (!strict) {\r\n        output[idx++] = value;\r\n      }\r\n    }\r\n    return output;\r\n  };\r\n\r\n  // Flatten out an array, either recursively (by default), or just one level.\r\n  _.flatten = function(array, shallow) {\r\n    return flatten(array, shallow, false);\r\n  };\r\n\r\n  // Return a version of the array that does not contain the specified value(s).\r\n  _.without = function(array) {\r\n    return _.difference(array, slice.call(arguments, 1));\r\n  };\r\n\r\n  // Produce a duplicate-free version of the array. If the array has already\r\n  // been sorted, you have the option of using a faster algorithm.\r\n  // Aliased as `unique`.\r\n  _.uniq = _.unique = function(array, isSorted, iteratee, context) {\r\n    if (array == null) return [];\r\n    if (!_.isBoolean(isSorted)) {\r\n      context = iteratee;\r\n      iteratee = isSorted;\r\n      isSorted = false;\r\n    }\r\n    if (iteratee != null) iteratee = cb(iteratee, context);\r\n    var result = [];\r\n    var seen = [];\r\n    for (var i = 0, length = array.length; i < length; i++) {\r\n      var value = array[i],\r\n          computed = iteratee ? iteratee(value, i, array) : value;\r\n      if (isSorted) {\r\n        if (!i || seen !== computed) result.push(value);\r\n        seen = computed;\r\n      } else if (iteratee) {\r\n        if (!_.contains(seen, computed)) {\r\n          seen.push(computed);\r\n          result.push(value);\r\n        }\r\n      } else if (!_.contains(result, value)) {\r\n        result.push(value);\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  // Produce an array that contains the union: each distinct element from all of\r\n  // the passed-in arrays.\r\n  _.union = function() {\r\n    return _.uniq(flatten(arguments, true, true));\r\n  };\r\n\r\n  // Produce an array that contains every item shared between all the\r\n  // passed-in arrays.\r\n  _.intersection = function(array) {\r\n    if (array == null) return [];\r\n    var result = [];\r\n    var argsLength = arguments.length;\r\n    for (var i = 0, length = array.length; i < length; i++) {\r\n      var item = array[i];\r\n      if (_.contains(result, item)) continue;\r\n      for (var j = 1; j < argsLength; j++) {\r\n        if (!_.contains(arguments[j], item)) break;\r\n      }\r\n      if (j === argsLength) result.push(item);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  // Take the difference between one array and a number of other arrays.\r\n  // Only the elements present in just the first array will remain.\r\n  _.difference = function(array) {\r\n    var rest = flatten(arguments, true, true, 1);\r\n    return _.filter(array, function(value){\r\n      return !_.contains(rest, value);\r\n    });\r\n  };\r\n\r\n  // Zip together multiple lists into a single array -- elements that share\r\n  // an index go together.\r\n  _.zip = function() {\r\n    return _.unzip(arguments);\r\n  };\r\n\r\n  // Complement of _.zip. Unzip accepts an array of arrays and groups\r\n  // each array's elements on shared indices\r\n  _.unzip = function(array) {\r\n    var length = array && _.max(array, 'length').length || 0;\r\n    var result = Array(length);\r\n\r\n    for (var index = 0; index < length; index++) {\r\n      result[index] = _.pluck(array, index);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  // Converts lists into objects. Pass either a single array of `[key, value]`\r\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\r\n  // the corresponding values.\r\n  _.object = function(list, values) {\r\n    var result = {};\r\n    for (var i = 0, length = list && list.length; i < length; i++) {\r\n      if (values) {\r\n        result[list[i]] = values[i];\r\n      } else {\r\n        result[list[i][0]] = list[i][1];\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  // Return the position of the first occurrence of an item in an array,\r\n  // or -1 if the item is not included in the array.\r\n  // If the array is large and already in sort order, pass `true`\r\n  // for **isSorted** to use binary search.\r\n  _.indexOf = function(array, item, isSorted) {\r\n    var i = 0, length = array && array.length;\r\n    if (typeof isSorted == 'number') {\r\n      i = isSorted < 0 ? Math.max(0, length + isSorted) : isSorted;\r\n    } else if (isSorted && length) {\r\n      i = _.sortedIndex(array, item);\r\n      return array[i] === item ? i : -1;\r\n    }\r\n    if (item !== item) {\r\n      return _.findIndex(slice.call(array, i), _.isNaN);\r\n    }\r\n    for (; i < length; i++) if (array[i] === item) return i;\r\n    return -1;\r\n  };\r\n\r\n  _.lastIndexOf = function(array, item, from) {\r\n    var idx = array ? array.length : 0;\r\n    if (typeof from == 'number') {\r\n      idx = from < 0 ? idx + from + 1 : Math.min(idx, from + 1);\r\n    }\r\n    if (item !== item) {\r\n      return _.findLastIndex(slice.call(array, 0, idx), _.isNaN);\r\n    }\r\n    while (--idx >= 0) if (array[idx] === item) return idx;\r\n    return -1;\r\n  };\r\n\r\n  // Generator function to create the findIndex and findLastIndex functions\r\n  function createIndexFinder(dir) {\r\n    return function(array, predicate, context) {\r\n      predicate = cb(predicate, context);\r\n      var length = array != null && array.length;\r\n      var index = dir > 0 ? 0 : length - 1;\r\n      for (; index >= 0 && index < length; index += dir) {\r\n        if (predicate(array[index], index, array)) return index;\r\n      }\r\n      return -1;\r\n    };\r\n  }\r\n\r\n  // Returns the first index on an array-like that passes a predicate test\r\n  _.findIndex = createIndexFinder(1);\r\n\r\n  _.findLastIndex = createIndexFinder(-1);\r\n\r\n  // Use a comparator function to figure out the smallest index at which\r\n  // an object should be inserted so as to maintain order. Uses binary search.\r\n  _.sortedIndex = function(array, obj, iteratee, context) {\r\n    iteratee = cb(iteratee, context, 1);\r\n    var value = iteratee(obj);\r\n    var low = 0, high = array.length;\r\n    while (low < high) {\r\n      var mid = Math.floor((low + high) / 2);\r\n      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\r\n    }\r\n    return low;\r\n  };\r\n\r\n  // Generate an integer Array containing an arithmetic progression. A port of\r\n  // the native Python `range()` function. See\r\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\r\n  _.range = function(start, stop, step) {\r\n    if (arguments.length <= 1) {\r\n      stop = start || 0;\r\n      start = 0;\r\n    }\r\n    step = step || 1;\r\n\r\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\r\n    var range = Array(length);\r\n\r\n    for (var idx = 0; idx < length; idx++, start += step) {\r\n      range[idx] = start;\r\n    }\r\n\r\n    return range;\r\n  };\r\n\r\n  // Function (ahem) Functions\r\n  // ------------------\r\n\r\n  // Determines whether to execute a function as a constructor\r\n  // or a normal function with the provided arguments\r\n  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {\r\n    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\r\n    var self = baseCreate(sourceFunc.prototype);\r\n    var result = sourceFunc.apply(self, args);\r\n    if (_.isObject(result)) return result;\r\n    return self;\r\n  };\r\n\r\n  // Create a function bound to a given object (assigning `this`, and arguments,\r\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\r\n  // available.\r\n  _.bind = function(func, context) {\r\n    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\r\n    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');\r\n    var args = slice.call(arguments, 2);\r\n    var bound = function() {\r\n      return executeBound(func, bound, context, this, args.concat(slice.call(arguments)));\r\n    };\r\n    return bound;\r\n  };\r\n\r\n  // Partially apply a function by creating a version that has had some of its\r\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\r\n  // as a placeholder, allowing any combination of arguments to be pre-filled.\r\n  _.partial = function(func) {\r\n    var boundArgs = slice.call(arguments, 1);\r\n    var bound = function() {\r\n      var position = 0, length = boundArgs.length;\r\n      var args = Array(length);\r\n      for (var i = 0; i < length; i++) {\r\n        args[i] = boundArgs[i] === _ ? arguments[position++] : boundArgs[i];\r\n      }\r\n      while (position < arguments.length) args.push(arguments[position++]);\r\n      return executeBound(func, bound, this, this, args);\r\n    };\r\n    return bound;\r\n  };\r\n\r\n  // Bind a number of an object's methods to that object. Remaining arguments\r\n  // are the method names to be bound. Useful for ensuring that all callbacks\r\n  // defined on an object belong to it.\r\n  _.bindAll = function(obj) {\r\n    var i, length = arguments.length, key;\r\n    if (length <= 1) throw new Error('bindAll must be passed function names');\r\n    for (i = 1; i < length; i++) {\r\n      key = arguments[i];\r\n      obj[key] = _.bind(obj[key], obj);\r\n    }\r\n    return obj;\r\n  };\r\n\r\n  // Memoize an expensive function by storing its results.\r\n  _.memoize = function(func, hasher) {\r\n    var memoize = function(key) {\r\n      var cache = memoize.cache;\r\n      var address = '' + (hasher ? hasher.apply(this, arguments) : key);\r\n      if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);\r\n      return cache[address];\r\n    };\r\n    memoize.cache = {};\r\n    return memoize;\r\n  };\r\n\r\n  // Delays a function for the given number of milliseconds, and then calls\r\n  // it with the arguments supplied.\r\n  _.delay = function(func, wait) {\r\n    var args = slice.call(arguments, 2);\r\n    return setTimeout(function(){\r\n      return func.apply(null, args);\r\n    }, wait);\r\n  };\r\n\r\n  // Defers a function, scheduling it to run after the current call stack has\r\n  // cleared.\r\n  _.defer = _.partial(_.delay, _, 1);\r\n\r\n  // Returns a function, that, when invoked, will only be triggered at most once\r\n  // during a given window of time. Normally, the throttled function will run\r\n  // as much as it can, without ever going more than once per `wait` duration;\r\n  // but if you'd like to disable the execution on the leading edge, pass\r\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\r\n  _.throttle = function(func, wait, options) {\r\n    var context, args, result;\r\n    var timeout = null;\r\n    var previous = 0;\r\n    if (!options) options = {};\r\n    var later = function() {\r\n      previous = options.leading === false ? 0 : _.now();\r\n      timeout = null;\r\n      result = func.apply(context, args);\r\n      if (!timeout) context = args = null;\r\n    };\r\n    return function() {\r\n      var now = _.now();\r\n      if (!previous && options.leading === false) previous = now;\r\n      var remaining = wait - (now - previous);\r\n      context = this;\r\n      args = arguments;\r\n      if (remaining <= 0 || remaining > wait) {\r\n        if (timeout) {\r\n          clearTimeout(timeout);\r\n          timeout = null;\r\n        }\r\n        previous = now;\r\n        result = func.apply(context, args);\r\n        if (!timeout) context = args = null;\r\n      } else if (!timeout && options.trailing !== false) {\r\n        timeout = setTimeout(later, remaining);\r\n      }\r\n      return result;\r\n    };\r\n  };\r\n\r\n  // Returns a function, that, as long as it continues to be invoked, will not\r\n  // be triggered. The function will be called after it stops being called for\r\n  // N milliseconds. If `immediate` is passed, trigger the function on the\r\n  // leading edge, instead of the trailing.\r\n  _.debounce = function(func, wait, immediate) {\r\n    var timeout, args, context, timestamp, result;\r\n\r\n    var later = function() {\r\n      var last = _.now() - timestamp;\r\n\r\n      if (last < wait && last >= 0) {\r\n        timeout = setTimeout(later, wait - last);\r\n      } else {\r\n        timeout = null;\r\n        if (!immediate) {\r\n          result = func.apply(context, args);\r\n          if (!timeout) context = args = null;\r\n        }\r\n      }\r\n    };\r\n\r\n    return function() {\r\n      context = this;\r\n      args = arguments;\r\n      timestamp = _.now();\r\n      var callNow = immediate && !timeout;\r\n      if (!timeout) timeout = setTimeout(later, wait);\r\n      if (callNow) {\r\n        result = func.apply(context, args);\r\n        context = args = null;\r\n      }\r\n\r\n      return result;\r\n    };\r\n  };\r\n\r\n  // Returns the first function passed as an argument to the second,\r\n  // allowing you to adjust arguments, run code before and after, and\r\n  // conditionally execute the original function.\r\n  _.wrap = function(func, wrapper) {\r\n    return _.partial(wrapper, func);\r\n  };\r\n\r\n  // Returns a negated version of the passed-in predicate.\r\n  _.negate = function(predicate) {\r\n    return function() {\r\n      return !predicate.apply(this, arguments);\r\n    };\r\n  };\r\n\r\n  // Returns a function that is the composition of a list of functions, each\r\n  // consuming the return value of the function that follows.\r\n  _.compose = function() {\r\n    var args = arguments;\r\n    var start = args.length - 1;\r\n    return function() {\r\n      var i = start;\r\n      var result = args[start].apply(this, arguments);\r\n      while (i--) result = args[i].call(this, result);\r\n      return result;\r\n    };\r\n  };\r\n\r\n  // Returns a function that will only be executed on and after the Nth call.\r\n  _.after = function(times, func) {\r\n    return function() {\r\n      if (--times < 1) {\r\n        return func.apply(this, arguments);\r\n      }\r\n    };\r\n  };\r\n\r\n  // Returns a function that will only be executed up to (but not including) the Nth call.\r\n  _.before = function(times, func) {\r\n    var memo;\r\n    return function() {\r\n      if (--times > 0) {\r\n        memo = func.apply(this, arguments);\r\n      }\r\n      if (times <= 1) func = null;\r\n      return memo;\r\n    };\r\n  };\r\n\r\n  // Returns a function that will be executed at most one time, no matter how\r\n  // often you call it. Useful for lazy initialization.\r\n  _.once = _.partial(_.before, 2);\r\n\r\n  // Object Functions\r\n  // ----------------\r\n\r\n  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\r\n  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\r\n  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\r\n                      'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\r\n\r\n  function collectNonEnumProps(obj, keys) {\r\n    var nonEnumIdx = nonEnumerableProps.length;\r\n    var constructor = obj.constructor;\r\n    var proto = (_.isFunction(constructor) && constructor.prototype) || ObjProto;\r\n\r\n    // Constructor is a special case.\r\n    var prop = 'constructor';\r\n    if (_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);\r\n\r\n    while (nonEnumIdx--) {\r\n      prop = nonEnumerableProps[nonEnumIdx];\r\n      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {\r\n        keys.push(prop);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Retrieve the names of an object's own properties.\r\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\r\n  _.keys = function(obj) {\r\n    if (!_.isObject(obj)) return [];\r\n    if (nativeKeys) return nativeKeys(obj);\r\n    var keys = [];\r\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\r\n    // Ahem, IE < 9.\r\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\r\n    return keys;\r\n  };\r\n\r\n  // Retrieve all the property names of an object.\r\n  _.allKeys = function(obj) {\r\n    if (!_.isObject(obj)) return [];\r\n    var keys = [];\r\n    for (var key in obj) keys.push(key);\r\n    // Ahem, IE < 9.\r\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\r\n    return keys;\r\n  };\r\n\r\n  // Retrieve the values of an object's properties.\r\n  _.values = function(obj) {\r\n    var keys = _.keys(obj);\r\n    var length = keys.length;\r\n    var values = Array(length);\r\n    for (var i = 0; i < length; i++) {\r\n      values[i] = obj[keys[i]];\r\n    }\r\n    return values;\r\n  };\r\n\r\n  // Returns the results of applying the iteratee to each element of the object\r\n  // In contrast to _.map it returns an object\r\n  _.mapObject = function(obj, iteratee, context) {\r\n    iteratee = cb(iteratee, context);\r\n    var keys =  _.keys(obj),\r\n          length = keys.length,\r\n          results = {},\r\n          currentKey;\r\n      for (var index = 0; index < length; index++) {\r\n        currentKey = keys[index];\r\n        results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\r\n      }\r\n      return results;\r\n  };\r\n\r\n  // Convert an object into a list of `[key, value]` pairs.\r\n  _.pairs = function(obj) {\r\n    var keys = _.keys(obj);\r\n    var length = keys.length;\r\n    var pairs = Array(length);\r\n    for (var i = 0; i < length; i++) {\r\n      pairs[i] = [keys[i], obj[keys[i]]];\r\n    }\r\n    return pairs;\r\n  };\r\n\r\n  // Invert the keys and values of an object. The values must be serializable.\r\n  _.invert = function(obj) {\r\n    var result = {};\r\n    var keys = _.keys(obj);\r\n    for (var i = 0, length = keys.length; i < length; i++) {\r\n      result[obj[keys[i]]] = keys[i];\r\n    }\r\n    return result;\r\n  };\r\n\r\n  // Return a sorted list of the function names available on the object.\r\n  // Aliased as `methods`\r\n  _.functions = _.methods = function(obj) {\r\n    var names = [];\r\n    for (var key in obj) {\r\n      if (_.isFunction(obj[key])) names.push(key);\r\n    }\r\n    return names.sort();\r\n  };\r\n\r\n  // Extend a given object with all the properties in passed-in object(s).\r\n  _.extend = createAssigner(_.allKeys);\r\n\r\n  // Assigns a given object with all the own properties in the passed-in object(s)\r\n  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\r\n  _.extendOwn = _.assign = createAssigner(_.keys);\r\n\r\n  // Returns the first key on an object that passes a predicate test\r\n  _.findKey = function(obj, predicate, context) {\r\n    predicate = cb(predicate, context);\r\n    var keys = _.keys(obj), key;\r\n    for (var i = 0, length = keys.length; i < length; i++) {\r\n      key = keys[i];\r\n      if (predicate(obj[key], key, obj)) return key;\r\n    }\r\n  };\r\n\r\n  // Return a copy of the object only containing the whitelisted properties.\r\n  _.pick = function(object, oiteratee, context) {\r\n    var result = {}, obj = object, iteratee, keys;\r\n    if (obj == null) return result;\r\n    if (_.isFunction(oiteratee)) {\r\n      keys = _.allKeys(obj);\r\n      iteratee = optimizeCb(oiteratee, context);\r\n    } else {\r\n      keys = flatten(arguments, false, false, 1);\r\n      iteratee = function(value, key, obj) { return key in obj; };\r\n      obj = Object(obj);\r\n    }\r\n    for (var i = 0, length = keys.length; i < length; i++) {\r\n      var key = keys[i];\r\n      var value = obj[key];\r\n      if (iteratee(value, key, obj)) result[key] = value;\r\n    }\r\n    return result;\r\n  };\r\n\r\n   // Return a copy of the object without the blacklisted properties.\r\n  _.omit = function(obj, iteratee, context) {\r\n    if (_.isFunction(iteratee)) {\r\n      iteratee = _.negate(iteratee);\r\n    } else {\r\n      var keys = _.map(flatten(arguments, false, false, 1), String);\r\n      iteratee = function(value, key) {\r\n        return !_.contains(keys, key);\r\n      };\r\n    }\r\n    return _.pick(obj, iteratee, context);\r\n  };\r\n\r\n  // Fill in a given object with default properties.\r\n  _.defaults = createAssigner(_.allKeys, true);\r\n\r\n  // Create a (shallow-cloned) duplicate of an object.\r\n  _.clone = function(obj) {\r\n    if (!_.isObject(obj)) return obj;\r\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\r\n  };\r\n\r\n  // Invokes interceptor with the obj, and then returns obj.\r\n  // The primary purpose of this method is to \"tap into\" a method chain, in\r\n  // order to perform operations on intermediate results within the chain.\r\n  _.tap = function(obj, interceptor) {\r\n    interceptor(obj);\r\n    return obj;\r\n  };\r\n\r\n  // Returns whether an object has a given set of `key:value` pairs.\r\n  _.isMatch = function(object, attrs) {\r\n    var keys = _.keys(attrs), length = keys.length;\r\n    if (object == null) return !length;\r\n    var obj = Object(object);\r\n    for (var i = 0; i < length; i++) {\r\n      var key = keys[i];\r\n      if (attrs[key] !== obj[key] || !(key in obj)) return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n\r\n  // Internal recursive comparison function for `isEqual`.\r\n  var eq = function(a, b, aStack, bStack) {\r\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\r\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\r\n    if (a === b) return a !== 0 || 1 / a === 1 / b;\r\n    // A strict comparison is necessary because `null == undefined`.\r\n    if (a == null || b == null) return a === b;\r\n    // Unwrap any wrapped objects.\r\n    if (a instanceof _) a = a._wrapped;\r\n    if (b instanceof _) b = b._wrapped;\r\n    // Compare `[[Class]]` names.\r\n    var className = toString.call(a);\r\n    if (className !== toString.call(b)) return false;\r\n    switch (className) {\r\n      // Strings, numbers, regular expressions, dates, and booleans are compared by value.\r\n      case '[object RegExp]':\r\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\r\n      case '[object String]':\r\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\r\n        // equivalent to `new String(\"5\")`.\r\n        return '' + a === '' + b;\r\n      case '[object Number]':\r\n        // `NaN`s are equivalent, but non-reflexive.\r\n        // Object(NaN) is equivalent to NaN\r\n        if (+a !== +a) return +b !== +b;\r\n        // An `egal` comparison is performed for other numeric values.\r\n        return +a === 0 ? 1 / +a === 1 / b : +a === +b;\r\n      case '[object Date]':\r\n      case '[object Boolean]':\r\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\r\n        // millisecond representations. Note that invalid dates with millisecond representations\r\n        // of `NaN` are not equivalent.\r\n        return +a === +b;\r\n    }\r\n\r\n    var areArrays = className === '[object Array]';\r\n    if (!areArrays) {\r\n      if (typeof a != 'object' || typeof b != 'object') return false;\r\n\r\n      // Objects with different constructors are not equivalent, but `Object`s or `Array`s\r\n      // from different frames are.\r\n      var aCtor = a.constructor, bCtor = b.constructor;\r\n      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&\r\n                               _.isFunction(bCtor) && bCtor instanceof bCtor)\r\n                          && ('constructor' in a && 'constructor' in b)) {\r\n        return false;\r\n      }\r\n    }\r\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\r\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\r\n    \r\n    // Initializing stack of traversed objects.\r\n    // It's done here since we only need them for objects and arrays comparison.\r\n    aStack = aStack || [];\r\n    bStack = bStack || [];\r\n    var length = aStack.length;\r\n    while (length--) {\r\n      // Linear search. Performance is inversely proportional to the number of\r\n      // unique nested structures.\r\n      if (aStack[length] === a) return bStack[length] === b;\r\n    }\r\n\r\n    // Add the first object to the stack of traversed objects.\r\n    aStack.push(a);\r\n    bStack.push(b);\r\n\r\n    // Recursively compare objects and arrays.\r\n    if (areArrays) {\r\n      // Compare array lengths to determine if a deep comparison is necessary.\r\n      length = a.length;\r\n      if (length !== b.length) return false;\r\n      // Deep compare the contents, ignoring non-numeric properties.\r\n      while (length--) {\r\n        if (!eq(a[length], b[length], aStack, bStack)) return false;\r\n      }\r\n    } else {\r\n      // Deep compare objects.\r\n      var keys = _.keys(a), key;\r\n      length = keys.length;\r\n      // Ensure that both objects contain the same number of properties before comparing deep equality.\r\n      if (_.keys(b).length !== length) return false;\r\n      while (length--) {\r\n        // Deep compare each member\r\n        key = keys[length];\r\n        if (!(_.has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\r\n      }\r\n    }\r\n    // Remove the first object from the stack of traversed objects.\r\n    aStack.pop();\r\n    bStack.pop();\r\n    return true;\r\n  };\r\n\r\n  // Perform a deep comparison to check if two objects are equal.\r\n  _.isEqual = function(a, b) {\r\n    return eq(a, b);\r\n  };\r\n\r\n  // Is a given array, string, or object empty?\r\n  // An \"empty\" object has no enumerable own-properties.\r\n  _.isEmpty = function(obj) {\r\n    if (obj == null) return true;\r\n    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;\r\n    return _.keys(obj).length === 0;\r\n  };\r\n\r\n  // Is a given value a DOM element?\r\n  _.isElement = function(obj) {\r\n    return !!(obj && obj.nodeType === 1);\r\n  };\r\n\r\n  // Is a given value an array?\r\n  // Delegates to ECMA5's native Array.isArray\r\n  _.isArray = nativeIsArray || function(obj) {\r\n    return toString.call(obj) === '[object Array]';\r\n  };\r\n\r\n  // Is a given variable an object?\r\n  _.isObject = function(obj) {\r\n    var type = typeof obj;\r\n    return type === 'function' || type === 'object' && !!obj;\r\n  };\r\n\r\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.\r\n  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function(name) {\r\n    _['is' + name] = function(obj) {\r\n      return toString.call(obj) === '[object ' + name + ']';\r\n    };\r\n  });\r\n\r\n  // Define a fallback version of the method in browsers (ahem, IE < 9), where\r\n  // there isn't any inspectable \"Arguments\" type.\r\n  if (!_.isArguments(arguments)) {\r\n    _.isArguments = function(obj) {\r\n      return _.has(obj, 'callee');\r\n    };\r\n  }\r\n\r\n  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\r\n  // IE 11 (#1621), and in Safari 8 (#1929).\r\n  if (typeof /./ != 'function' && typeof Int8Array != 'object') {\r\n    _.isFunction = function(obj) {\r\n      return typeof obj == 'function' || false;\r\n    };\r\n  }\r\n\r\n  // Is a given object a finite number?\r\n  _.isFinite = function(obj) {\r\n    return isFinite(obj) && !isNaN(parseFloat(obj));\r\n  };\r\n\r\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\r\n  _.isNaN = function(obj) {\r\n    return _.isNumber(obj) && obj !== +obj;\r\n  };\r\n\r\n  // Is a given value a boolean?\r\n  _.isBoolean = function(obj) {\r\n    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\r\n  };\r\n\r\n  // Is a given value equal to null?\r\n  _.isNull = function(obj) {\r\n    return obj === null;\r\n  };\r\n\r\n  // Is a given variable undefined?\r\n  _.isUndefined = function(obj) {\r\n    return obj === void 0;\r\n  };\r\n\r\n  // Shortcut function for checking if an object has a given property directly\r\n  // on itself (in other words, not on a prototype).\r\n  _.has = function(obj, key) {\r\n    return obj != null && hasOwnProperty.call(obj, key);\r\n  };\r\n\r\n  // Utility Functions\r\n  // -----------------\r\n\r\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\r\n  // previous owner. Returns a reference to the Underscore object.\r\n  _.noConflict = function() {\r\n    root._ = previousUnderscore;\r\n    return this;\r\n  };\r\n\r\n  // Keep the identity function around for default iteratees.\r\n  _.identity = function(value) {\r\n    return value;\r\n  };\r\n\r\n  // Predicate-generating functions. Often useful outside of Underscore.\r\n  _.constant = function(value) {\r\n    return function() {\r\n      return value;\r\n    };\r\n  };\r\n\r\n  _.noop = function(){};\r\n\r\n  _.property = function(key) {\r\n    return function(obj) {\r\n      return obj == null ? void 0 : obj[key];\r\n    };\r\n  };\r\n\r\n  // Generates a function for a given object that returns a given property.\r\n  _.propertyOf = function(obj) {\r\n    return obj == null ? function(){} : function(key) {\r\n      return obj[key];\r\n    };\r\n  };\r\n\r\n  // Returns a predicate for checking whether an object has a given set of \r\n  // `key:value` pairs.\r\n  _.matcher = _.matches = function(attrs) {\r\n    attrs = _.extendOwn({}, attrs);\r\n    return function(obj) {\r\n      return _.isMatch(obj, attrs);\r\n    };\r\n  };\r\n\r\n  // Run a function **n** times.\r\n  _.times = function(n, iteratee, context) {\r\n    var accum = Array(Math.max(0, n));\r\n    iteratee = optimizeCb(iteratee, context, 1);\r\n    for (var i = 0; i < n; i++) accum[i] = iteratee(i);\r\n    return accum;\r\n  };\r\n\r\n  // Return a random integer between min and max (inclusive).\r\n  _.random = function(min, max) {\r\n    if (max == null) {\r\n      max = min;\r\n      min = 0;\r\n    }\r\n    return min + Math.floor(Math.random() * (max - min + 1));\r\n  };\r\n\r\n  // A (possibly faster) way to get the current timestamp as an integer.\r\n  _.now = Date.now || function() {\r\n    return new Date().getTime();\r\n  };\r\n\r\n   // List of HTML entities for escaping.\r\n  var escapeMap = {\r\n    '&': '&amp;',\r\n    '<': '&lt;',\r\n    '>': '&gt;',\r\n    '\"': '&quot;',\r\n    \"'\": '&#x27;',\r\n    '`': '&#x60;'\r\n  };\r\n  var unescapeMap = _.invert(escapeMap);\r\n\r\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\r\n  var createEscaper = function(map) {\r\n    var escaper = function(match) {\r\n      return map[match];\r\n    };\r\n    // Regexes for identifying a key that needs to be escaped\r\n    var source = '(?:' + _.keys(map).join('|') + ')';\r\n    var testRegexp = RegExp(source);\r\n    var replaceRegexp = RegExp(source, 'g');\r\n    return function(string) {\r\n      string = string == null ? '' : '' + string;\r\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\r\n    };\r\n  };\r\n  _.escape = createEscaper(escapeMap);\r\n  _.unescape = createEscaper(unescapeMap);\r\n\r\n  // If the value of the named `property` is a function then invoke it with the\r\n  // `object` as context; otherwise, return it.\r\n  _.result = function(object, property, fallback) {\r\n    var value = object == null ? void 0 : object[property];\r\n    if (value === void 0) {\r\n      value = fallback;\r\n    }\r\n    return _.isFunction(value) ? value.call(object) : value;\r\n  };\r\n\r\n  // Generate a unique integer id (unique within the entire client session).\r\n  // Useful for temporary DOM ids.\r\n  var idCounter = 0;\r\n  _.uniqueId = function(prefix) {\r\n    var id = ++idCounter + '';\r\n    return prefix ? prefix + id : id;\r\n  };\r\n\r\n  // By default, Underscore uses ERB-style template delimiters, change the\r\n  // following template settings to use alternative delimiters.\r\n  _.templateSettings = {\r\n    evaluate    : /<%([\\s\\S]+?)%>/g,\r\n    interpolate : /<%=([\\s\\S]+?)%>/g,\r\n    escape      : /<%-([\\s\\S]+?)%>/g\r\n  };\r\n\r\n  // When customizing `templateSettings`, if you don't want to define an\r\n  // interpolation, evaluation or escaping regex, we need one that is\r\n  // guaranteed not to match.\r\n  var noMatch = /(.)^/;\r\n\r\n  // Certain characters need to be escaped so that they can be put into a\r\n  // string literal.\r\n  var escapes = {\r\n    \"'\":      \"'\",\r\n    '\\\\':     '\\\\',\r\n    '\\r':     'r',\r\n    '\\n':     'n',\r\n    '\\u2028': 'u2028',\r\n    '\\u2029': 'u2029'\r\n  };\r\n\r\n  var escaper = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\r\n\r\n  var escapeChar = function(match) {\r\n    return '\\\\' + escapes[match];\r\n  };\r\n\r\n  // JavaScript micro-templating, similar to John Resig's implementation.\r\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\r\n  // and correctly escapes quotes within interpolated code.\r\n  // NB: `oldSettings` only exists for backwards compatibility.\r\n  _.template = function(text, settings, oldSettings) {\r\n    if (!settings && oldSettings) settings = oldSettings;\r\n    settings = _.defaults({}, settings, _.templateSettings);\r\n\r\n    // Combine delimiters into one regular expression via alternation.\r\n    var matcher = RegExp([\r\n      (settings.escape || noMatch).source,\r\n      (settings.interpolate || noMatch).source,\r\n      (settings.evaluate || noMatch).source\r\n    ].join('|') + '|$', 'g');\r\n\r\n    // Compile the template source, escaping string literals appropriately.\r\n    var index = 0;\r\n    var source = \"__p+='\";\r\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\r\n      source += text.slice(index, offset).replace(escaper, escapeChar);\r\n      index = offset + match.length;\r\n\r\n      if (escape) {\r\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\r\n      } else if (interpolate) {\r\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\r\n      } else if (evaluate) {\r\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\r\n      }\r\n\r\n      // Adobe VMs need the match returned to produce the correct offest.\r\n      return match;\r\n    });\r\n    source += \"';\\n\";\r\n\r\n    // If a variable is not specified, place data values in local scope.\r\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\r\n\r\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\r\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\r\n      source + 'return __p;\\n';\r\n\r\n    try {\r\n      var render = new Function(settings.variable || 'obj', '_', source);\r\n    } catch (e) {\r\n      e.source = source;\r\n      throw e;\r\n    }\r\n\r\n    var template = function(data) {\r\n      return render.call(this, data, _);\r\n    };\r\n\r\n    // Provide the compiled source as a convenience for precompilation.\r\n    var argument = settings.variable || 'obj';\r\n    template.source = 'function(' + argument + '){\\n' + source + '}';\r\n\r\n    return template;\r\n  };\r\n\r\n  // Add a \"chain\" function. Start chaining a wrapped Underscore object.\r\n  _.chain = function(obj) {\r\n    var instance = _(obj);\r\n    instance._chain = true;\r\n    return instance;\r\n  };\r\n\r\n  // OOP\r\n  // ---------------\r\n  // If Underscore is called as a function, it returns a wrapped object that\r\n  // can be used OO-style. This wrapper holds altered versions of all the\r\n  // underscore functions. Wrapped objects may be chained.\r\n\r\n  // Helper function to continue chaining intermediate results.\r\n  var result = function(instance, obj) {\r\n    return instance._chain ? _(obj).chain() : obj;\r\n  };\r\n\r\n  // Add your own custom functions to the Underscore object.\r\n  _.mixin = function(obj) {\r\n    _.each(_.functions(obj), function(name) {\r\n      var func = _[name] = obj[name];\r\n      _.prototype[name] = function() {\r\n        var args = [this._wrapped];\r\n        push.apply(args, arguments);\r\n        return result(this, func.apply(_, args));\r\n      };\r\n    });\r\n  };\r\n\r\n  // Add all of the Underscore functions to the wrapper object.\r\n  _.mixin(_);\r\n\r\n  // Add all mutator Array functions to the wrapper.\r\n  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\r\n    var method = ArrayProto[name];\r\n    _.prototype[name] = function() {\r\n      var obj = this._wrapped;\r\n      method.apply(obj, arguments);\r\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];\r\n      return result(this, obj);\r\n    };\r\n  });\r\n\r\n  // Add all accessor Array functions to the wrapper.\r\n  _.each(['concat', 'join', 'slice'], function(name) {\r\n    var method = ArrayProto[name];\r\n    _.prototype[name] = function() {\r\n      return result(this, method.apply(this._wrapped, arguments));\r\n    };\r\n  });\r\n\r\n  // Extracts the result from a wrapped and chained object.\r\n  _.prototype.value = function() {\r\n    return this._wrapped;\r\n  };\r\n\r\n  // Provide unwrapping proxy for some methods used in engine operations\r\n  // such as arithmetic and JSON stringification.\r\n  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\r\n  \r\n  _.prototype.toString = function() {\r\n    return '' + this._wrapped;\r\n  };\r\n\r\n  // AMD registration happens at the end for compatibility with AMD loaders\r\n  // that may not enforce next-turn semantics on modules. Even though general\r\n  // practice for AMD registration is to be anonymous, underscore registers\r\n  // as a named module because, like jQuery, it is a base library that is\r\n  // popular enough to be bundled in a third party lib, but not be part of\r\n  // an AMD load request. Those cases could generate an error when an\r\n  // anonymous define() is called outside of a loader request.\r\n  if (typeof define === 'function' && define.amd) {\r\n    define('underscore', [], function() {\r\n      return _;\r\n    });\r\n  }\r\n}.call(this));","jquery/jquery.ba-hashchange.min.js":"/*\r\n * jQuery hashchange event - v1.3 - 7/21/2010\r\n * http://benalman.com/projects/jquery-hashchange-plugin/\r\n * \r\n * Copyright (c) 2010 \"Cowboy\" Ben Alman\r\n * Dual licensed under the MIT and GPL licenses.\r\n * http://benalman.com/about/license/\r\n */\r\n(function($,e,b){var c=\"hashchange\",h=document,f,g=$.event.special,i=h.documentMode,d=\"on\"+c in e&&(i===b||i>7);function a(j){j=j||location.href;return\"#\"+j.replace(/^[^#]*#?(.*)$/,\"$1\")}$.fn[c]=function(j){return j?this.bind(c,j):this.trigger(c)};$.fn[c].delay=50;g[c]=$.extend(g[c],{setup:function(){if(d){return false}$(f.start)},teardown:function(){if(d){return false}$(f.stop)}});f=(function(){var j={},p,m=a(),k=function(q){return q},l=k,o=k;j.start=function(){p||n()};j.stop=function(){p&&clearTimeout(p);p=b};function n(){var r=a(),q=o(m);if(r!==m){l(m=r,q);$(e).trigger(c)}else{if(q!==m){location.href=location.href.replace(/#.*/,\"\")+q}}p=setTimeout(n,$.fn[c].delay)}$.browser.msie&&!d&&(function(){var q,r;j.start=function(){if(!q){r=$.fn[c].src;r=r&&r+a();q=$('<iframe tabindex=\"-1\" title=\"empty\"/>').hide().one(\"load\",function(){r||l(a());n()}).attr(\"src\",r||\"javascript:0\").insertAfter(\"body\")[0].contentWindow;h.onpropertychange=function(){try{if(event.propertyName===\"title\"){q.document.title=h.title}}catch(s){}}}};j.stop=k;o=function(){return a(q.location.href)};l=function(v,s){var u=q.document,t=$.fn[c].domain;if(v!==s){u.title=h.title;u.open();t&&u.write('<script>document.domain=\"'+t+'\"<\\/script>');u.close();q.location.hash=v}}})();return j})()})(jQuery,this);","jquery/jquery.cookie.js":"/*jshint eqnull:true */\r\n/*!\r\n * jQuery Cookie Plugin v1.1\r\n * https://github.com/carhartl/jquery-cookie\r\n *\r\n * Copyright 2011, Klaus Hartl\r\n * Dual licensed under the MIT or GPL Version 2 licenses.\r\n * http://www.opensource.org/licenses/mit-license.php\r\n * http://www.opensource.org/licenses/GPL-2.0\r\n */\r\n(function (factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define([\"jquery\"], factory);\r\n    } else {\r\n        factory(jQuery);\r\n    }\r\n}(function ($) {\r\n\r\n    var pluses = /\\+/g;\r\n    function raw(s) {\r\n        return s;\r\n    }\r\n    function decoded(s) {\r\n        return decodeURIComponent(s.replace(pluses, ' '));\r\n    }\r\n\r\n    $.cookie = function(key, value, options) {\r\n\r\n        // key and at least value given, set cookie...\r\n        if (arguments.length > 1 && (!/Object/.test(Object.prototype.toString.call(value)) || value == null)) {\r\n            options = $.extend({}, $.cookie.defaults, options);\r\n\r\n            if (value == null) {\r\n                options.expires = -1;\r\n            }\r\n\r\n            if (typeof options.expires === 'number') {\r\n                var days = options.expires, t = options.expires = new Date();\r\n                t.setDate(t.getDate() + days);\r\n            }\r\n\r\n            value = String(value);\r\n\r\n            return (document.cookie = [\r\n                encodeURIComponent(key), '=', options.raw ? value : encodeURIComponent(value),\r\n                options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\r\n                options.path    ? '; path=' + options.path : '',\r\n                options.domain  ? '; domain=' + options.domain : '',\r\n                options.secure  ? '; secure' : ''\r\n            ].join(''));\r\n        }\r\n\r\n        // key and possibly options given, get cookie...\r\n        options = value || $.cookie.defaults || {};\r\n        var decode = options.raw ? raw : decoded;\r\n        var cookies = document.cookie.split('; ');\r\n        for (var i = 0, parts; (parts = cookies[i] && cookies[i].split('=')); i++) {\r\n            if (decode(parts.shift()) === key) {\r\n                return decode(parts.join('='));\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    $.cookie.defaults = {};\r\n\r\n}));\r\n","jquery/jquery.details.js":"/*! http://mths.be/details v0.0.6 by @mathias | includes http://mths.be/noselect v1.0.3 */\r\ndefine([\r\n    \"jquery\",\r\n    \"modernizr/modernizr.details\"\r\n], function($){\r\n\r\n    var proto = $.fn,\r\n        details,\r\n        // :'(\r\n        isOpera = Object.prototype.toString.call(window.opera) == '[object Opera]',\r\n        // Feature test for native `<details>` support\r\n        isDetailsSupported = $('html').hasClass('details'),\r\n        toggleOpen = function($details, $detailsSummary, $detailsNotSummary, toggle) {\r\n            var isOpen = typeof $details.attr('open') == 'string',\r\n                close = isOpen && toggle || !isOpen && !toggle;\r\n            if (close) {\r\n                $details.removeClass('open').prop('open', false).triggerHandler('close.details');\r\n                $detailsSummary.attr('aria-expanded', false);\r\n                $detailsNotSummary.hide();\r\n            } else {\r\n                $details.addClass('open').prop('open', true).triggerHandler('open.details');\r\n                $detailsSummary.attr('aria-expanded', true);\r\n                $detailsNotSummary.show();\r\n            }\r\n        };\r\n\r\n    /* http://mths.be/noselect v1.0.3 */\r\n    proto.noSelect = function() {\r\n\r\n        // Since the string 'none' is used three times, storing it in a variable gives better results after minification\r\n        var none = 'none';\r\n\r\n        // onselectstart and ondragstart for WebKit & IE\r\n        // onmousedown for WebKit & Opera\r\n        return this.bind('selectstart dragstart mousedown', function() {\r\n            return false;\r\n        }).css({\r\n            'MozUserSelect': none,\r\n            'msUserSelect': none,\r\n            'webkitUserSelect': none,\r\n            'userSelect': none\r\n        });\r\n\r\n    };\r\n\r\n    // Execute the fallback only if there\u00e2\u0080\u0099s no native `details` support\r\n    if (isDetailsSupported) {\r\n        details = proto.details = function() {\r\n\r\n            return this.each(function() {\r\n                var $details = $(this),\r\n                    $summary = $('summary', $details).first();\r\n                $summary.attr({\r\n                    'role': 'button',\r\n                    'aria-expanded': $details.prop('open')\r\n                }).on('click.xxx', function() {\r\n                    // the value of the `open` property is the old value\r\n                    var close = $details.prop('open');\r\n                    $summary.attr('aria-expanded', !close);\r\n                    $details.triggerHandler((close ? 'close' : 'open') + '.details');\r\n                });\r\n            });\r\n\r\n        };\r\n\r\n        details.support = isDetailsSupported;\r\n\r\n    } else {\r\n        details = proto.details = function() {\r\n\r\n            // Loop through all `details` elements\r\n            return this.each(function() {\r\n\r\n                // Store a reference to the current `details` element in a variable\r\n                var $details = $(this),\r\n                    // Store a reference to the `summary` element of the current `details` element (if any) in a variable\r\n                    $detailsSummary = $('summary', $details).first(),\r\n                    // Do the same for the info within the `details` element\r\n                    $detailsNotSummary = $details.children(':not(summary)'),\r\n                    // This will be used later to look for direct child text nodes\r\n                    $detailsNotSummaryContents = $details.contents(':not(summary)');\r\n\r\n                // If there is no `summary` in the current `details` element\u00e2\u0080\u00a6\r\n                if (!$detailsSummary.length) {\r\n                    // \u00e2\u0080\u00a6create one with default text\r\n                    $detailsSummary = $('<summary>').text($.mage.__('Details')).prependTo($details);\r\n                }\r\n\r\n                // Look for direct child text nodes\r\n                if ($detailsNotSummary.length != $detailsNotSummaryContents.length) {\r\n                    // Wrap child text nodes in a `span` element\r\n                    $detailsNotSummaryContents.filter(function() {\r\n                        // Only keep the node in the collection if it\u00e2\u0080\u0099s a text node containing more than only whitespace\r\n                        // http://www.whatwg.org/specs/web-apps/current-work/multipage/common-microsyntaxes.html#space-character\r\n                        return this.nodeType == 3 && /[^ \\t\\n\\f\\r]/.test(this.data);\r\n                    }).wrap('<span>');\r\n                    // There are now no direct child text nodes anymore \u00e2\u0080\u0094 they\u00e2\u0080\u0099re wrapped in `span` elements\r\n                    $detailsNotSummary = $details.children(':not(summary)');\r\n                }\r\n\r\n                // Hide content unless there\u00e2\u0080\u0099s an `open` attribute\r\n                toggleOpen($details, $detailsSummary, $detailsNotSummary);\r\n\r\n                // Add `role=button` and set the `tabindex` of the `summary` element to `0` to make it keyboard accessible\r\n                $detailsSummary.attr('role', 'button').noSelect().prop('tabIndex', 0).off('click').on('click.details', function() {\r\n                    // Focus on the `summary` element\r\n                    $detailsSummary.focus();\r\n                    // Toggle the `open` and `aria-expanded` attributes and the `open` property of the `details` element and display the additional info\r\n                    toggleOpen($details, $detailsSummary, $detailsNotSummary, true);\r\n                }).keyup(function(event) {\r\n                    if (32 == event.keyCode || (13 == event.keyCode && !isOpera)) {\r\n                        // Space or Enter is pressed \u00e2\u0080\u0094 trigger the `click` event on the `summary` element\r\n                        // Opera already seems to trigger the `click` event when Enter is pressed\r\n                        event.preventDefault();\r\n                        $detailsSummary.click();\r\n                    }\r\n                });\r\n\r\n            });\r\n\r\n        };\r\n\r\n        details.support = isDetailsSupported;\r\n\r\n    }\r\n\r\n});\r\n","jquery/jquery.hoverIntent.js":"/**\r\n * hoverIntent is similar to jQuery's built-in \"hover\" function except that\r\n * instead of firing the onMouseOver event immediately, hoverIntent checks\r\n * to see if the user's mouse has slowed down (beneath the sensitivity\r\n * threshold) before firing the onMouseOver event.\r\n *\r\n * hoverIntent r6 // 2011.02.26 // jQuery 1.5.1+\r\n * <http://cherne.net/brian/resources/jquery.hoverIntent.html>\r\n *\r\n * hoverIntent is currently available for use in all personal or commercial\r\n * projects under both MIT and GPL licenses. This means that you can choose\r\n * the license that best suits your project, and use it accordingly.\r\n *\r\n * // basic usage (just like .hover) receives onMouseOver and onMouseOut functions\r\n * $(\"ul li\").hoverIntent( showNav , hideNav );\r\n *\r\n * // advanced usage receives configuration object only\r\n * $(\"ul li\").hoverIntent({\r\n*\tsensitivity: 7, // number = sensitivity threshold (must be 1 or higher)\r\n*\tinterval: 100,   // number = milliseconds of polling interval\r\n*\tover: showNav,  // function = onMouseOver callback (required)\r\n*\ttimeout: 0,   // number = milliseconds delay before onMouseOut function call\r\n*\tout: hideNav    // function = onMouseOut callback (required)\r\n* });\r\n *\r\n * @param  f  onMouseOver function || An object with configuration options\r\n * @param  g  onMouseOut function  || Nothing (use configuration options object)\r\n * @author    Brian Cherne brian(at)cherne(dot)net\r\n */\r\n(function ($) {\r\n    $.fn.hoverIntent = function (f, g) {\r\n        // default configuration options\r\n        var cfg = {\r\n            sensitivity:7,\r\n            interval:100,\r\n            timeout:0\r\n        };\r\n        // override configuration options with user supplied object\r\n        cfg = $.extend(cfg, g ? { over:f, out:g } : f);\r\n\r\n        // instantiate variables\r\n        // cX, cY = current X and Y position of mouse, updated by mousemove event\r\n        // pX, pY = previous X and Y position of mouse, set by mouseover and polling interval\r\n        var cX, cY, pX, pY;\r\n\r\n        // A private function for getting mouse position\r\n        var track = function (ev) {\r\n            cX = ev.pageX;\r\n            cY = ev.pageY;\r\n        };\r\n\r\n        // A private function for comparing current and previous mouse position\r\n        var compare = function (ev, ob) {\r\n            ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);\r\n            // compare mouse positions to see if they've crossed the threshold\r\n            if (( Math.abs(pX - cX) + Math.abs(pY - cY) ) < cfg.sensitivity) {\r\n                $(ob).unbind(\"mousemove\", track);\r\n                // set hoverIntent state to true (so mouseOut can be called)\r\n                ob.hoverIntent_s = 1;\r\n                return cfg.over.apply(ob, [ev]);\r\n            } else {\r\n                // set previous coordinates for next time\r\n                pX = cX;\r\n                pY = cY;\r\n                // use self-calling timeout, guarantees intervals are spaced out properly (avoids JavaScript timer bugs)\r\n                ob.hoverIntent_t = setTimeout(function () {\r\n                    compare(ev, ob);\r\n                }, cfg.interval);\r\n            }\r\n        };\r\n\r\n        // A private function for delaying the mouseOut function\r\n        var delay = function (ev, ob) {\r\n            ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);\r\n            ob.hoverIntent_s = 0;\r\n            return cfg.out.apply(ob, [ev]);\r\n        };\r\n\r\n        // A private function for handling mouse 'hovering'\r\n        var handleHover = function (e) {\r\n            // copy objects to be passed into t (required for event object to be passed in IE)\r\n            var ev = jQuery.extend({}, e);\r\n            var ob = this;\r\n\r\n            // cancel hoverIntent timer if it exists\r\n            if (ob.hoverIntent_t) {\r\n                ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);\r\n            }\r\n\r\n            // if e.type == \"mouseenter\"\r\n            if (e.type == \"mouseenter\") {\r\n                // set \"previous\" X and Y position based on initial entry point\r\n                pX = ev.pageX;\r\n                pY = ev.pageY;\r\n                // update \"current\" X and Y position based on mousemove\r\n                $(ob).bind(\"mousemove\", track);\r\n                // start polling interval (self-calling timeout) to compare mouse coordinates over time\r\n                if (ob.hoverIntent_s != 1) {\r\n                    ob.hoverIntent_t = setTimeout(function () {\r\n                        compare(ev, ob);\r\n                    }, cfg.interval);\r\n                }\r\n\r\n                // else e.type == \"mouseleave\"\r\n            } else {\r\n                // unbind expensive mousemove event\r\n                $(ob).unbind(\"mousemove\", track);\r\n                // if hoverIntent state is true, then call the mouseOut function after the specified delay\r\n                if (ob.hoverIntent_s == 1) {\r\n                    ob.hoverIntent_t = setTimeout(function () {\r\n                        delay(ev, ob);\r\n                    }, cfg.timeout);\r\n                }\r\n            }\r\n        };\r\n\r\n        // bind the function to the two event listeners\r\n        return this.bind('mouseenter', handleHover).bind('mouseleave', handleHover);\r\n    };\r\n})(jQuery);","jquery/fileUploader/canvas-to-blob.js":"(function(a){\"use strict\";var b=a.HTMLCanvasElement&&a.HTMLCanvasElement.prototype,c=a.Blob&&function(){try{return Boolean(new Blob)}catch(a){return!1}}(),d=c&&a.Uint8Array&&function(){try{return(new Blob([new Uint8Array(100)])).size===100}catch(a){return!1}}(),e=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder,f=(c||e)&&a.atob&&a.ArrayBuffer&&a.Uint8Array&&function(a){var b,f,g,h,i,j;a.split(\",\")[0].indexOf(\"base64\")>=0?b=atob(a.split(\",\")[1]):b=decodeURIComponent(a.split(\",\")[1]),f=new ArrayBuffer(b.length),g=new Uint8Array(f);for(h=0;h<b.length;h+=1)g[h]=b.charCodeAt(h);return i=a.split(\",\")[0].split(\":\")[1].split(\";\")[0],c?new Blob([d?g:f],{type:i}):(j=new e,j.append(f),j.getBlob(i))};a.HTMLCanvasElement&&!b.toBlob&&(b.mozGetAsFile?b.toBlob=function(a,b){a(this.mozGetAsFile(\"blob\",b))}:b.toDataURL&&f&&(b.toBlob=function(a,b){a(f(this.toDataURL(b)))})),typeof define==\"function\"&&define.amd?define(function(){return f}):a.dataURLtoBlob=f})(this);","jquery/fileUploader/load-image.js":"(function(a){\"use strict\";var b=function(a,c,d){var e=document.createElement(\"img\"),f,g;return e.onerror=c,e.onload=function(){g&&(!d||!d.noRevoke)&&b.revokeObjectURL(g),c(b.scale(e,d))},window.Blob&&a instanceof Blob||window.File&&a instanceof File?f=g=b.createObjectURL(a):f=a,f?(e.src=f,e):b.readFile(a,function(a){e.src=a})},c=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;b.scale=function(a,b){b=b||{};var c=document.createElement(\"canvas\"),d=a.width,e=a.height,f=Math.max((b.minWidth||d)/d,(b.minHeight||e)/e);return f>1&&(d=parseInt(d*f,10),e=parseInt(e*f,10)),f=Math.min((b.maxWidth||d)/d,(b.maxHeight||e)/e),f<1&&(d=parseInt(d*f,10),e=parseInt(e*f,10)),a.getContext||b.canvas&&c.getContext?(c.width=d,c.height=e,c.getContext(\"2d\").drawImage(a,0,0,d,e),c):(a.width=d,a.height=e,a)},b.createObjectURL=function(a){return c?c.createObjectURL(a):!1},b.revokeObjectURL=function(a){return c?c.revokeObjectURL(a):!1},b.readFile=function(a,b){if(window.FileReader&&FileReader.prototype.readAsDataURL){var c=new FileReader;return c.onload=function(a){b(a.target.result)},c.readAsDataURL(a),c}return!1},typeof define==\"function\"&&define.amd?define(function(){return b}):a.loadImage=b})(this);"}
    }
});
